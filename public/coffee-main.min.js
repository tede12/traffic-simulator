!function n(i,o,s){function a(t,e){if(!o[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},i[t][0].call(r.exports,function(e){return a(i[t][1][e]||e)},r,r.exports,n,i,o,s)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){"use strict";r.byteLength=function(e){var e=u(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(e){var t,r,n=u(e),i=n[0],n=n[1],o=new l(function(e,t){return 3*(e+t)/4-t}(i,n)),s=0,a=0<n?i-4:i;for(r=0;r<a;r+=4)t=c[e.charCodeAt(r)]<<18|c[e.charCodeAt(r+1)]<<12|c[e.charCodeAt(r+2)]<<6|c[e.charCodeAt(r+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===n&&(t=c[e.charCodeAt(r)]<<2|c[e.charCodeAt(r+1)]>>4,o[s++]=255&t);1===n&&(t=c[e.charCodeAt(r)]<<10|c[e.charCodeAt(r+1)]<<4|c[e.charCodeAt(r+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(function(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(n));return i.join("")}(e,o,s<o+16383?s:o+16383));1==n?(t=e[r-1],i.push(a[t>>2]+a[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return i.join("")};for(var a=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],c[n.charCodeAt(i)]=i;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],2:[function(e,t,r){},{}],3:[function(O,e,R){!function(e){!function(){"use strict";var E=O("base64-js"),o=O("ieee754"),t=(R.Buffer=h,R.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},R.INSPECT_MAX_BYTES=50,2147483647);function c(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=h.prototype,e}function h(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}function n(e,t,r){if("string"==typeof e){var n=e,i=t;if(h.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return o=0|f(n,i),s=c(o),s=(n=s.write(n,i))!==o?s.slice(0,n):s;throw new TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(I(e,ArrayBuffer)||e&&I(e.buffer,ArrayBuffer)){var o=e,n=t,s=r;if(n<0||o.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<n+(s||0))throw new RangeError('"length" is outside of buffer bounds');return(o=void 0===n&&void 0===s?new Uint8Array(o):void 0===s?new Uint8Array(o,n):new Uint8Array(o,n,s)).__proto__=h.prototype,o}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return h.from(i,t,r);var a=function(e){{var t,r;if(h.isBuffer(e))return t=0|u(e.length),0!==(r=c(t)).length&&e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||P(e.length)?c(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return i(e),c(e<0?0:0|u(e))}function l(e){for(var t=e.length<0?0:0|u(e.length),r=c(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function u(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function f(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(e).length;default:if(i)return n?-1:C(e).length;t=(""+t).toLowerCase(),i=!0}}function r(e,t,r){var n,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o=this,s=t,a=r,c=o.length;(!a||a<0||c<a)&&(a=c);for(var l="",u=s=!s||s<0?0:s;u<a;++u)l+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(o[u]);return l;case"utf8":case"utf-8":return k(this,t,r);case"ascii":var h=this,c=t,f=r,d="";f=Math.min(h.length,f);for(var p=c;p<f;++p)d+=String.fromCharCode(127&h[p]);return d;case"latin1":case"binary":var g=this,s=t,m=r,b="";m=Math.min(g.length,m);for(var y=s;y<m;++y)b+=String.fromCharCode(g[y]);return b;case"base64":return v=this,n=r,0===(w=t)&&n===v.length?E.fromByteArray(v):E.fromByteArray(v.slice(w,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,w=r,_=this.slice(v,w),x="",S=0;S<_.length;S+=2)x+=String.fromCharCode(_[S]+256*_[S+1]);return x;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function a(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=P(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:p(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):p(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function p(e,t,r,n,i){var o=1,s=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var l=-1,u=r;u<s;u++)if(c(e,u)===c(t,-1===l?0:u-l)){if(u-(l=-1===l?u:l)+1===a)return l*o}else-1!==l&&(u-=u-l),l=-1;else for(u=r=s<r+a?s-a:r;0<=u;u--){for(var h=!0,f=0;f<a;f++)if(c(e,u+f)!==c(t,f)){h=!1;break}if(h)return u}return-1}function m(e,t,r,n){return T(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return T(function(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i.push(r%256),i.push(n);return i}(t,e.length-r),e,r,n)}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,c,l=e[i],u=null,h=239<l?4:223<l?3:191<l?2:1;if(i+h<=r)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[i+1]))&&127<(c=(31&l)<<6|63&o)&&(u=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(c=(15&l)<<12|(63&o)<<6|63&s)&&(c<55296||57343<c)&&(u=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)&&c<1114112&&(u=c)}null===u?(u=65533,h=1):65535<u&&(n.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=h}var f=n,d=f.length;if(d<=y)return String.fromCharCode.apply(String,f);for(var p="",g=0;g<d;)p+=String.fromCharCode.apply(String,f.slice(g,g+=y));return p}R.kMaxLength=t,(h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=n,h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,r){return t=t,r=r,i(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)},h.allocUnsafe=s,h.allocUnsafeSlow=s,h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(I(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),I(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=h.allocUnsafe(t),n=0,i=0;i<e.length;++i){var o=e[i];if(I(o,Uint8Array)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},h.byteLength=f,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)a(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)a(this,t,t+3),a(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)a(this,t,t+7),a(this,t+1,t+6),a(this,t+2,t+5),a(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):r.apply(this,arguments)},h.prototype.equals=function(e){if(h.isBuffer(e))return this===e||0===h.compare(this,e);throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var e="",t=R.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},h.prototype.compare=function(e,t,r,n,i){if(I(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r),u=0;u<a;++u)if(c[u]!==l[u]){o=c[u],s=l[u];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,s,a,c=!1;;)switch(n){case"hex":var l=this,u=e,h=t,f=r,d=(h=Number(h)||0,l.length-h);(!f||d<(f=Number(f)))&&(f=d),(d=u.length)/2<f&&(f=d/2);for(var p=0;p<f;++p){var g=parseInt(u.substr(2*p,2),16);if(P(g))return p;l[h+p]=g}return p;case"utf8":case"utf-8":return d=t,a=r,T(C(e,(s=this).length-d),s,d,a);case"ascii":return m(this,e,t,r);case"latin1":case"binary":return m(this,e,t,r);case"base64":return s=this,a=t,o=r,T(A(e),s,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),c=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function g(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,r,n,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function w(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function _(e,t,r,n,i){return t=+t,r>>>=0,i||w(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function x(e,t,r,n,i){return t=+t,r>>>=0,i||w(e,0,r,8),o.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=h.prototype,r},h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},h.prototype.readUInt8=function(e,t){return e>>>=0,t||g(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||g(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||g(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||g(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||g(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},h.prototype.readInt8=function(e,t){return e>>>=0,t||g(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||g(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt16BE=function(e,t){e>>>=0,t||g(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||g(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||g(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||g(e,4,this.length),o.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||g(e,4,this.length),o.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||g(e,8,this.length),o.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||g(e,8,this.length),o.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},h.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+r},h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,r){return _(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return _(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;0<=o;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},h.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===e.length&&(i=e.charCodeAt(0),"utf8"===n&&i<128||"latin1"===n)&&(e=i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");var o;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=t;o<r;++o)this[o]=e;else{var s=h.isBuffer(e)?e:h.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var S=/[^+/0-9A-Za-z-_]/g;function C(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,r<128){if(--t<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function A(e){return E.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function I(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function P(e){return e!=e}}.call(this)}.call(this,O("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:12}],4:[function(e,t,r){var n,i;n=this,i=function(){"use strict";for(var e=function(e,t,r){return void 0===r&&(r=1),e<(t=void 0===t?0:t)?t:r<e?r:e},N=e,B={},t=0,D=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];t<D.length;t+=1){var U=D[t];B["[object "+U+"]"]=U.toLowerCase()}function r(e){return B[Object.prototype.toString.call(e)]||"object"}function q(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("object"===$(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=!1;if(!(o=Y(e))){r=!0,a.sorted||(a.autodetect=a.autodetect.sort(function(e,t){return t.p-e.p}),a.sorted=!0);for(var n=0,i=a.autodetect;n<i.length;n+=1){var o,s=i[n];if(o=s.test.apply(s,e))break}}if(!a.format[o])throw new Error("unknown format: "+e);r=a.format[o].apply(null,r?e:e.slice(0,-1)),this._rgb=Q(r),3===this._rgb.length&&this._rgb.push(1)}function n(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(n.Color,[null].concat(e)))}function F(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=Z(e,"cmyk"))[0],n=e[1],i=e[2],o=e[3],s=4<e.length?e[4]:1;return 1===o?[0,0,0,s]:[1<=r?0:255*(1-r)*(1-o),1<=n?0:255*(1-n)*(1-o),1<=i?0:255*(1-i)*(1-o),s]}function i(e){return Math.round(100*e)/100}function H(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,i=(e=se(e,"rgba"))[0],o=e[1],s=e[2],a=(i/=255,o/=255,s/=255,Math.min(i,o,s)),c=Math.max(i,o,s),l=(c+a)/2;return c===a?(r=0,n=Number.NaN):r=l<.5?(c-a)/(c+a):(c-a)/(2-c-a),i==c?n=(o-s)/(c-a):o==c?n=2+(s-i)/(c-a):s==c&&(n=4+(i-o)/(c-a)),(n*=60)<0&&(n+=360),3<e.length&&void 0!==e[3]?[n,r,l,e[3]]:[n,r,l]}function W(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ae(e,"rgba"),n=ce(e)||"rgb";return"hsl"==n.substr(0,3)?le(ue(r),n):(r[0]=he(r[0]),r[1]=he(r[1]),r[2]=he(r[2]),("rgba"===n||3<r.length&&r[3]<1)&&(r[3]=3<r.length?r[3]:1,n="rgba"),n+"("+r.slice(0,"rgb"===n?3:4).join(",")+")")}function z(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,i,o=(e=fe(e,"hsl"))[0],s=e[1],a=e[2];if(0===s)r=n=i=255*a;else{var c=[0,0,0],l=[0,0,0],u=a<.5?a*(1+s):a+s-a*s,h=2*a-u,s=o/360;c[0]=s+1/3,c[1]=s,c[2]=s-1/3;for(var f=0;f<3;f++)c[f]<0&&(c[f]+=1),1<c[f]&&--c[f],l[f]=6*c[f]<1?h+6*(u-h)*c[f]:2*c[f]<1?u:3*c[f]<2?h+(u-h)*(2/3-c[f])*6:h;r=(a=[de(255*l[0]),de(255*l[1]),de(255*l[2])])[0],n=a[1],i=a[2]}return 3<e.length?[r,n,i,e[3]]:[r,n,i,1]}function V(e){var t,r;if(e=e.toLowerCase().trim(),ge.format.named)try{return ge.format.named(e)}catch(e){}if(t=e.match(me)){for(var n=t.slice(1,4),i=0;i<3;i++)n[i]=+n[i];return n[3]=1,n}if(t=e.match(be)){for(var o=t.slice(1,5),s=0;s<4;s++)o[s]=+o[s];return o}if(t=e.match(ye)){for(var a=t.slice(1,4),c=0;c<3;c++)a[c]=xe(2.55*a[c]);return a[3]=1,a}if(t=e.match(ve)){for(var l=t.slice(1,5),u=0;u<3;u++)l[u]=xe(2.55*l[u]);return l[3]=+l[3],l}return(t=e.match(we))?((r=t.slice(1,4))[1]*=.01,r[2]*=.01,(r=pe(r))[3]=1,r):(t=e.match(_e))?((r=t.slice(1,4))[1]*=.01,r[2]*=.01,(e=pe(r))[3]=+t[4],e):void 0}var K=r,G=r,o=Math.PI,e={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var t=0;t<=3;t++)t<3?((e[t]<0||255<e[t])&&(e._clipped=!0),e[t]=N(e[t],0,255)):3===t&&(e[t]=N(e[t],0,1));return e},limit:e,type:r,unpack:function(t,e){return void 0===e&&(e=null),3<=t.length?Array.prototype.slice.call(t):"object"==K(t[0])&&e?e.split("").filter(function(e){return void 0!==t[0][e]}).map(function(e){return t[0][e]}):t[0]},last:function(e){var t;return!(e.length<2)&&(t=e.length-1,"string"==G(e[t]))?e[t].toLowerCase():null},PI:o,TWOPI:2*o,PITHIRD:o/3,DEG2RAD:o/180,RAD2DEG:180/o},o={format:{},autodetect:[]},Y=e.last,Q=e.clip_rgb,$=e.type,a=o,s=(q.prototype.toString=function(){return"function"==$(this.hex)?this.hex():"["+this._rgb.join(",")+"]"},q),c=(n.Color=s,n.version="2.4.2",n),X=e.unpack,J=Math.max,Z=e.unpack,l=c,ee=s,u=o,te=e.unpack,re=e.type,ne=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=X(e,"rgb"),n=r[0],i=r[1],r=r[2],o=1-J(n/=255,J(i/=255,r/=255)),s=o<1?1/(1-o):0;return[(1-n-o)*s,(1-i-o)*s,(1-r-o)*s,o]},ie=(ee.prototype.cmyk=function(){return ne(this._rgb)},l.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ee,[null].concat(e,["cmyk"])))},u.format.cmyk=F,u.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=te(e,"cmyk"),"array"===re(e)&&4===e.length)return"cmyk"}}),e.unpack),oe=e.last,se=e.unpack,ae=e.unpack,ce=e.last,le=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ie(e,"hsla"),n=oe(e)||"lsa";return r[0]=i(r[0]||0),r[1]=i(100*r[1])+"%",r[2]=i(100*r[2])+"%","hsla"===n||3<r.length&&r[3]<1?(r[3]=3<r.length?r[3]:1,n="hsla"):r.length=3,n+"("+r.join(",")+")"},ue=H,he=Math.round,fe=e.unpack,de=Math.round,pe=z,ge=o,me=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,be=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,ye=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ve=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,we=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,_e=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,xe=Math.round;V.test=function(e){return me.test(e)||be.test(e)||ye.test(e)||ve.test(e)||we.test(e)||_e.test(e)};function Se(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];var n,i,o,s=(t=Ke(t,"hcg"))[0],a=t[1],c=t[2],l=(c*=255,255*a);if(0===a)n=i=o=c;else{360<(s=360===s?0:s)&&(s-=360),s<0&&(s+=360);var u=Ge(s/=60),s=s-u,h=c*(1-a),f=h+l*(1-s),d=h+l*s,p=h+l;switch(u){case 0:n=(e=[p,d,h])[0],i=e[1],o=e[2];break;case 1:n=(e=[f,p,h])[0],i=e[1],o=e[2];break;case 2:n=(e=[h,p,d])[0],i=e[1],o=e[2];break;case 3:n=(e=[h,f,p])[0],i=e[1],o=e[2];break;case 4:n=(e=[d,h,p])[0],i=e[1],o=e[2];break;case 5:n=(e=[p,h,f])[0],i=e[1],o=e[2]}}return[n,i,o,3<t.length?t[3]:1]}function Ee(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(o=Je(e,"rgba"))[0],n=o[1],i=o[2],o=o[3],s=Ze(e)||"auto",a=(void 0===o&&(o=1),"auto"===s&&(s=o<1?"rgba":"rgb"),(a="000000"+(h(r)<<16|h(n)<<8|h(i)).toString(16)).substr(a.length-6)),c=(c="0"+h(255*o).toString(16)).substr(c.length-2);switch(s.toLowerCase()){case"rgba":return"#"+a+c;case"argb":return"#"+c+a;default:return"#"+a}}function ke(e){var t;if(e.match(et))return 3===(e=4!==e.length&&7!==e.length?e:e.substr(1)).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(t=parseInt(e,16))>>16,t>>8&255,255&t,1];if(e.match(tt))return 4===(e=5!==e.length&&9!==e.length?e:e.substr(1)).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),[(t=parseInt(e,16))>>24&255,t>>16&255,t>>8&255,Math.round((255&t)/255*100)/100];throw new Error("unknown hex color: "+e)}function Ce(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,i,o=(e=ut(e,"hsi"))[0],s=e[1],a=e[2];return isNaN(o)&&(o=0),isNaN(s)&&(s=0),360<o&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?n=1-((i=(1-s)/3)+(r=(1+s*d(f*o)/d(ft-f*o))/3)):o<2/3?i=1-((r=(1-s)/3)+(n=(1+s*d(f*(o-=1/3))/d(ft-f*o))/3)):r=1-((n=(1-s)/3)+(i=(1+s*d(f*(o-=2/3))/d(ft-f*o))/3)),[255*(r=ht(a*r*3)),255*(n=ht(a*n*3)),255*(i=ht(a*i*3)),3<e.length?e[3]:1]}function Ae(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];var n,i,o,s=(t=Et(t,"hsv"))[0],a=t[1],c=t[2];if(c*=255,0===a)n=i=o=c;else{360<(s=360===s?0:s)&&(s-=360),s<0&&(s+=360);var l=kt(s/=60),s=s-l,u=c*(1-a),h=c*(1-a*s),f=c*(1-a*(1-s));switch(l){case 0:n=(e=[c,f,u])[0],i=e[1],o=e[2];break;case 1:n=(e=[h,c,u])[0],i=e[1],o=e[2];break;case 2:n=(e=[u,c,f])[0],i=e[1],o=e[2];break;case 3:n=(e=[u,h,c])[0],i=e[1],o=e[2];break;case 4:n=(e=[f,u,c])[0],i=e[1],o=e[2];break;case 5:n=(e=[c,u,h])[0],i=e[1],o=e[2]}}return[n,i,o,3<t.length?t[3]:1]}function Te(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(i=Pt(e,"rgb"))[0],n=i[1],i=i[2];return n=n,i=i,r=Rt(r=r),n=Rt(n),i=Rt(i),[(i=116*(n=(r=[Mt((.4124564*r+.3575761*n+.1804375*i)/p.Xn),Mt((.2126729*r+.7151522*n+.072175*i)/p.Yn),Mt((.0193339*r+.119192*n+.9503041*i)/p.Zn)])[1])-16)<0?0:i,500*(r[0]-n),200*(n-r[2])]}function Ie(e){return 255*(e<=.00304?12.92*e:1.055*Lt(e,1/2.4)-.055)}function Pe(e){return e>g.t1?e*e*e:g.t2*(e-g.t0)}function Oe(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=jt(e,"lab"))[0],n=e[1],i=e[2],r=(r+16)/116,n=isNaN(n)?r:r+n/500,i=isNaN(i)?r:r-i/200;return r=g.Yn*Pe(r),n=g.Xn*Pe(n),i=g.Zn*Pe(i),[Ie(3.2404542*n-1.5371385*r-.4985314*i),Ie(-.969266*n+1.8760108*r+.041556*i),Ie(.0556434*n-.2040259*r+1.0572252*i),3<e.length?e[3]:1]}function Re(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(i=qt(e,"lab"))[0],n=i[1],i=i[2],o=Ht(n*n+i*i),i=(Wt(i,n)*Ft+360)%360;return[r,o,i=0===zt(1e4*o)?Number.NaN:i]}function Me(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(i=Yt(e,"lch"))[0],n=i[1],i=i[2];return isNaN(i)&&(i=0),[r,Xt(i*=Qt)*n,$t(i)*n]}function je(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=Jt(e,"lch"))[0],n=e[1],i=e[2],n=(r=Zt(r,n,i))[0],i=r[1],r=r[2];return[(n=er(n,i,r))[0],n[1],n[2],3<e.length?e[3]:1]}function Le(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=tr(e,"hcl").reverse();return rr.apply(void 0,r)}function Ne(e){if("number"==hr(e)&&0<=e&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)}function Be(e){var t,r,n=(e=e/100)<66?(t=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*w(r),e<20?0:.8274096064007395*(n=e-10)-254.76935184120902+115.67994401066147*w(n)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*w(t),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*w(r),255);return[t,r,n,1]}function De(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(i=Sr(e,"rgb"))[0],n=i[1],i=i[2],r=[Ar(r/255),Ar(n/255),Ar(i/255)],o=Er(.4122214708*(n=r[0])+.5363325363*(i=r[1])+.0514459929*(r=r[2])),s=Er(.2119034982*n+.6806995451*i+.1073969566*r),n=Er(.0883024619*n+.2817188376*i+.6299787005*r);return[.2104542553*o+.793617785*s-.0040720468*n,1.9779984951*o-2.428592205*s+.4505937099*n,.0259040371*o+.7827717662*s-.808675766*n]}var l=c,Ue=s,u=o,qe=e.type,Fe=W,He=V,We=(Ue.prototype.css=function(e){return Fe(this._rgb,e)},l.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ue,[null].concat(e,["css"])))},u.format.css=He,u.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;0<r--;)t[r]=arguments[r+1];if(!t.length&&"string"===qe(e)&&He.test(e))return"css"}}),s),l=c,u=o,ze=e.unpack,Ve=(u.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ze(e,"rgba");return r[0]*=255,r[1]*=255,r[2]*=255,r},l.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(We,[null].concat(e,["gl"])))},We.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]},e.unpack),Ke=e.unpack,Ge=Math.floor,Ye=e.unpack,Qe=e.type,u=c,$e=s,l=o,Xe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n=Ve(e,"rgb"),i=n[0],o=n[1],n=n[2],s=Math.min(i,o,n),a=Math.max(i,o,n),c=a-s;return 0==c?r=Number.NaN:(i===a&&(r=(o-n)/c),o===a&&(r=2+(n-i)/c),n===a&&(r=4+(i-o)/c),(r*=60)<0&&(r+=360)),[r,100*c/255,s/(255-c)*100]},Je=($e.prototype.hcg=function(){return Xe(this._rgb)},u.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply($e,[null].concat(e,["hcg"])))},l.format.hcg=Se,l.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ye(e,"hcg"),"array"===Qe(e)&&3===e.length)return"hcg"}}),e.unpack),Ze=e.last,h=Math.round,et=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,tt=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,u=c,rt=s,nt=e.type,l=o,it=Ee,ot=(rt.prototype.hex=function(e){return it(this._rgb,e)},u.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(rt,[null].concat(e,["hex"])))},l.format.hex=ke,l.autodetect.push({p:4,test:function(e){for(var t=[],r=arguments.length-1;0<r--;)t[r]=arguments[r+1];if(!t.length&&"string"===nt(e)&&0<=[3,4,5,6,7,8,9].indexOf(e.length))return"hex"}}),e.unpack),st=e.TWOPI,at=Math.min,ct=Math.sqrt,lt=Math.acos,ut=e.unpack,ht=e.limit,f=e.TWOPI,ft=e.PITHIRD,d=Math.cos,dt=e.unpack,pt=e.type,u=c,gt=s,l=o,mt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n=ot(e,"rgb"),i=n[0],o=n[1],n=n[2],s=at(i/=255,o/=255,n/=255),a=(i+o+n)/3,s=0<a?1-s/a:0;return 0==s?r=NaN:(r=(i-o+(i-n))/2,r/=ct((i-o)*(i-o)+(i-n)*(o-n)),r=lt(r),o<n&&(r=st-r),r/=st),[360*r,s,a]},bt=(gt.prototype.hsi=function(){return mt(this._rgb)},u.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(gt,[null].concat(e,["hsi"])))},l.format.hsi=Ce,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=dt(e,"hsi"),"array"===pt(e)&&3===e.length)return"hsi"}}),e.unpack),yt=e.type,u=c,vt=s,l=o,wt=H,_t=(vt.prototype.hsl=function(){return wt(this._rgb)},u.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(vt,[null].concat(e,["hsl"])))},l.format.hsl=z,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=bt(e,"hsl"),"array"===yt(e)&&3===e.length)return"hsl"}}),e.unpack),xt=Math.min,St=Math.max,Et=e.unpack,kt=Math.floor,Ct=e.unpack,At=e.type,u=c,Tt=s,l=o,It=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,i=(e=_t(e,"rgb"))[0],o=e[1],s=e[2],a=xt(i,o,s),c=St(i,o,s),a=c-a;return 0===c?(r=Number.NaN,n=0):(n=a/c,i===c&&(r=(o-s)/a),o===c&&(r=2+(s-i)/a),s===c&&(r=4+(i-o)/a),(r*=60)<0&&(r+=360)),[r,n,c/255]},u=(Tt.prototype.hsv=function(){return It(this._rgb)},u.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Tt,[null].concat(e,["hsv"])))},l.format.hsv=Ae,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ct(e,"hsv"),"array"===At(e)&&3===e.length)return"hsv"}}),{Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452}),p=u,Pt=e.unpack,Ot=Math.pow,Rt=function(e){return(e/=255)<=.04045?e/12.92:Ot((e+.055)/1.055,2.4)},Mt=function(e){return e>p.t3?Ot(e,1/3):e/p.t2+p.t0},g=u,jt=e.unpack,Lt=Math.pow,Nt=e.unpack,Bt=e.type,l=c,Dt=s,m=o,Ut=Te,qt=(Dt.prototype.lab=function(){return Ut(this._rgb)},l.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Dt,[null].concat(e,["lab"])))},m.format.lab=Oe,m.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Nt(e,"lab"),"array"===Bt(e)&&3===e.length)return"lab"}}),e.unpack),Ft=e.RAD2DEG,Ht=Math.sqrt,Wt=Math.atan2,zt=Math.round,Vt=e.unpack,Kt=Te,Gt=Re,Yt=e.unpack,Qt=e.DEG2RAD,$t=Math.sin,Xt=Math.cos,Jt=e.unpack,Zt=Me,er=Oe,tr=e.unpack,rr=je,nr=e.unpack,ir=e.type,l=c,b=s,or=o,sr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Vt(e,"rgb"),n=r[0],i=r[1],r=r[2],n=Kt(n,i,r),i=n[0],r=n[1],n=n[2];return Gt(i,r,n)},m=(b.prototype.lch=function(){return sr(this._rgb)},b.prototype.hcl=function(){return sr(this._rgb).reverse()},l.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(b,[null].concat(e,["lch"])))},l.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(b,[null].concat(e,["hcl"])))},or.format.lch=je,or.format.hcl=Le,["lch","hcl"].forEach(function(r){return or.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=nr(e,r),"array"===ir(e)&&3===e.length)return r}})}),{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}),l=s,y=o,ar=e.type,v=m,cr=ke,lr=Ee,ur=(l.prototype.name=function(){for(var e=lr(this._rgb,"rgb"),t=0,r=Object.keys(v);t<r.length;t+=1){var n=r[t];if(v[n]===e)return n.toLowerCase()}return e},y.format.named=function(e){if(e=e.toLowerCase(),v[e])return cr(v[e]);throw new Error("unknown color name: "+e)},y.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;0<r--;)t[r]=arguments[r+1];if(!t.length&&"string"===ar(e)&&v[e.toLowerCase()])return"named"}}),e.unpack),hr=e.type,l=c,fr=s,y=o,dr=e.type,pr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ur(e,"rgb");return(r[0]<<16)+(r[1]<<8)+r[2]},l=(fr.prototype.num=function(){return pr(this._rgb)},l.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(fr,[null].concat(e,["num"])))},y.format.num=Ne,y.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===dr(e[0])&&0<=e[0]&&e[0]<=16777215)return"num"}}),c),gr=s,y=o,mr=e.unpack,br=e.type,yr=Math.round,w=(gr.prototype.rgb=function(e){return!1===(e=void 0===e?!0:e)?this._rgb.slice(0,3):this._rgb.slice(0,3).map(yr)},gr.prototype.rgba=function(r){return void 0===r&&(r=!0),this._rgb.slice(0,4).map(function(e,t){return!(t<3)||!1===r?e:yr(e)})},l.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(gr,[null].concat(e,["rgb"])))},y.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=mr(e,"rgba");return void 0===r[3]&&(r[3]=1),r},y.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=mr(e,"rgba"),"array"===br(e)&&(3===e.length||4===e.length&&"number"==br(e[3])&&0<=e[3]&&e[3]<=1))return"rgb"}}),Math.log),vr=Be,wr=e.unpack,_r=Math.round,l=c,_=s,y=o,xr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r=wr(e,"rgb"),n=r[0],i=r[2],o=1e3,s=4e4;.4<s-o;){var a,c=vr(a=.5*(s+o));c[2]/c[0]>=i/n?s=a:o=a}return _r(a)},Sr=(_.prototype.temp=_.prototype.kelvin=_.prototype.temperature=function(){return xr(this._rgb)},l.temp=l.kelvin=l.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["temp"])))},y.format.temp=y.format.kelvin=y.format.temperature=Be,e.unpack),Er=Math.cbrt,kr=Math.pow,Cr=Math.sign;function Ar(e){var t=Math.abs(e);return t<.04045?e/12.92:(Cr(e)||1)*kr((t+.055)/1.055,2.4)}function Tr(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=Ir(e,"lab"))[0],n=e[1],i=e[2],o=x(r+.3963377774*n+.2158037573*i,3),s=x(r-.1055613458*n-.0638541728*i,3),r=x(r-.0894841775*n-1.291485548*i,3);return[255*Or(4.0767416621*o-3.3077115913*s+.2309699292*r),255*Or(-1.2684380046*o+2.6097574011*s-.3413193965*r),255*Or(-.0041960863*o-.7034186147*s+1.707614701*r),3<e.length?e[3]:1]}var Ir=e.unpack,x=Math.pow,Pr=Math.sign;function Or(e){var t=Math.abs(e);return.0031308<t?(Pr(e)||1)*(1.055*x(t,1/2.4)-.055):12.92*e}function Rr(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=qr(e,"lch"))[0],n=e[1],i=e[2],n=(r=Fr(r,n,i))[0],i=r[1],r=r[2];return[(n=Hr(n,i,r))[0],n[1],n[2],3<e.length?e[3]:1]}var Mr=e.unpack,jr=e.type,l=c,Lr=s,y=o,Nr=De,Br=(Lr.prototype.oklab=function(){return Nr(this._rgb)},l.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Lr,[null].concat(e,["oklab"])))},y.format.oklab=Tr,y.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Mr(e,"oklab"),"array"===jr(e)&&3===e.length)return"oklab"}}),e.unpack),Dr=De,Ur=Re,qr=e.unpack,Fr=Me,Hr=Tr,Wr=e.unpack,zr=e.type,l=c,Vr=s,y=o,Kr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Br(e,"rgb"),n=r[0],i=r[1],r=r[2],n=Dr(n,i,r),i=n[0],r=n[1],n=n[2];return Ur(i,r,n)},Gr=(Vr.prototype.oklch=function(){return Kr(this._rgb)},l.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Vr,[null].concat(e,["oklch"])))},y.format.oklch=Rr,y.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Wr(e,"oklch"),"array"===zr(e)&&3===e.length)return"oklch"}}),s),Yr=e.type;Gr.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===Yr(e)?t?(this._rgb[3]=e,this):new Gr([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};s.prototype.clipped=function(){return this._rgb._clipped||!1};var S=s,Qr=u;S.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=Qr.Kn*e,new S(t,"lab").alpha(this.alpha(),!0)},S.prototype.brighten=function(e){return this.darken(-(e=void 0===e?1:e))},S.prototype.darker=S.prototype.darken,S.prototype.brighter=S.prototype.brighten;function $r(e,t,r){void 0===r&&(r=.5);for(var n=[],i=arguments.length-3;0<i--;)n[i]=arguments[i+3];var o=n[0]||"lrgb";if(C[o]||n.length||(o=Object.keys(C)[0]),C[o])return"object"!==on(e)&&(e=new nn(e)),"object"!==on(t)&&(t=new nn(t)),C[o](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()));throw new Error("interpolation mode "+o+" is not defined")}function E(e,t,r,n){var i,o,s,a,c,l,u,h,f,d;return"hsl"===n?(d=e.hsl(),i=t.hsl()):"hsv"===n?(d=e.hsv(),i=t.hsv()):"hcg"===n?(d=e.hcg(),i=t.hcg()):"hsi"===n?(d=e.hsi(),i=t.hsi()):"lch"===n||"hcl"===n?(n="hcl",d=e.hcl(),i=t.hcl()):"oklch"===n&&(d=e.oklch().reverse(),i=t.oklch().reverse()),"h"!==n.substr(0,1)&&"oklch"!==n||(o=(e=d)[0],a=e[1],l=e[2],s=(t=i)[0],c=t[1],u=t[2]),isNaN(o)||isNaN(s)?isNaN(o)?isNaN(s)?f=Number.NaN:(f=s,1!=l&&0!=l||"hsv"==n||(h=c)):(f=o,1!=u&&0!=u||"hsv"==n||(h=a)):f=o+r*(o<s&&180<s-o?s-(o+360):s<o&&180<o-s?s+360-o:s-o),void 0===h&&(h=a+r*(c-a)),d=l+r*(u-l),new mn("oklch"===n?[d,h,f]:[f,h,d],n)}function Xr(e,t,r){return bn(e,t,r,"lch")}function Jr(l){function r(e){if((e=e||["#fff","#000"])&&"string"===I(e)&&T.brewer&&T.brewer[e.toLowerCase()]&&(e=T.brewer[e.toLowerCase()]),"array"===I(e)){e=(e=1===e.length?[e[0],e[0]]:e).slice(0);for(var t=0;t<e.length;t++)e[t]=T(e[t]);for(var r=c.length=0;r<e.length;r++)c.push(r/(e.length-1))}n(),g=e}function u(e,t){var r,n;if(null==t&&(t=!1),isNaN(e)||null===e)return a;if(n=t?e:p&&2<p.length?_(e)/(p.length-2):b!==m?(e-m)/(b-m):1,n=S(n),t||(n=x(n)),1!==w&&(n=Mn(n,w)),n=d[0]+n*(1-d[0]-d[1]),n=Math.min(1,Math.max(0,n)),e=Math.floor(1e4*n),v&&y[e])r=y[e];else{if("array"===I(g))for(var i=0;i<c.length;i++){var o=c[i];if(n<=o){r=g[i];break}if(o<=n&&i===c.length-1){r=g[i];break}if(o<n&&n<c[i+1]){n=(n-o)/(c[i+1]-o),r=T.interpolate(g[i],g[i+1],n,s);break}}else"function"===I(g)&&(r=g(n));v&&(y[e]=r)}return r}function n(){y={}}function h(e){return e=T(u(e)),i&&e[i]?e[i]():e}var s="rgb",a=T("#ccc"),t=0,f=[0,1],c=[],d=[0,0],p=!1,g=[],i=!1,m=0,b=1,y={},v=!0,w=1,_=function(e){if(null==p)return 0;for(var t=p.length-1,r=0;r<t&&e>=p[r];)r++;return r-1},x=function(e){return e},S=function(e){return e};return r(l),h.classes=function(e){var t;return null!=e?("array"===I(e)?f=[(p=e)[0],e[e.length-1]]:(t=T.analyze(f),p=0===e?[t.min,t.max]:T.limits(t,"e",e)),h):p},h.domain=function(r){if(!arguments.length)return f;m=r[0],b=r[r.length-1],c=[];var e=g.length;if(r.length===e&&m!==b)for(var t=0,n=Array.from(r);t<n.length;t+=1){var i=n[t];c.push((i-m)/(b-m))}else{for(var o,s,a=0;a<e;a++)c.push(a/(e-1));2<r.length&&(o=r.map(function(e,t){return t/(r.length-1)}),(s=r.map(function(e){return(e-m)/(b-m)})).every(function(e,t){return o[t]===e})||(S=function(e){if(e<=0||1<=e)return e;for(var t=0;e>=s[t+1];)t++;var r=(e-s[t])/(s[t+1]-s[t]);return o[t]+r*(o[t+1]-o[t])}))}return f=[m,b],h},h.mode=function(e){return arguments.length?(s=e,n(),h):s},h.range=function(e,t){return r(e),h},h.out=function(e){return i=e,h},h.spread=function(e){return arguments.length?(t=e,h):t},h.correctLightness=function(e){return n(),x=(e=null==e?!0:e)?function(e){for(var t=u(0,!0).lab()[0],r=u(1,!0).lab()[0],n=r<t,i=u(e,!0).lab()[0],o=t+(r-t)*e,s=i-o,a=0,c=1,l=20;.01<Math.abs(s)&&0<l--;)n&&(s*=-1),e+=s<0?.5*(c-(a=e)):.5*(a-(c=e)),i=u(e,!0).lab()[0],s=i-o;return e}:function(e){return e},h},h.padding=function(e){return null!=e?("number"===I(e)&&(e=[e,e]),d=e,h):d},h.colors=function(t,r){arguments.length<2&&(r="hex");var e=[];if(0===arguments.length)e=g.slice(0);else if(1===t)e=[h(.5)];else if(1<t)var n=f[0],i=f[1]-n,e=function(e,t,r){for(var n=[],i=e<t,o=r?i?t+1:t-1:t,s=e;i?s<o:o<s;i?s++:s--)n.push(s);return n}(0,t,!1).map(function(e){return h(n+e/(t-1)*i)});else{l=[];var o=[];if(p&&2<p.length)for(var s=1,a=p.length,c=1<=a;c?s<a:a<s;c?s++:s--)o.push(.5*(p[s-1]+p[s]));else o=f;e=o.map(h)}return e=T[r]?e.map(function(e){return e[r]()}):e},h.cache=function(e){return null!=e?(v=e,h):v},h.gamma=function(e){return null!=e?(w=e,h):w},h.nodata=function(e){return null!=e?(a=T(e),h):a},h}s.prototype.get=function(e){var e=e.split("."),t=e[0],e=e[1],r=this[t]();if(e){var n=t.indexOf(e)-("ok"===t.substr(0,2)?2:0);if(-1<n)return r[n];throw new Error("unknown channel "+e+" in mode "+t)}return r};var k=s,Zr=e.type,en=Math.pow,tn=(k.prototype.luminance=function(i){var o,s,a,e;return void 0!==i&&"number"===Zr(i)?0===i?new k([0,0,0,this._rgb[3]],"rgb"):1===i?new k([255,255,255,this._rgb[3]],"rgb"):(e=this.luminance(),o="rgb",s=20,a=function(e,t){var r=e.interpolate(t,.5,o),n=r.luminance();return Math.abs(i-n)<1e-7||!s--?r:i<n?a(e,r):a(r,t)},e=(i<e?a(new k([0,0,0]),this):a(this,new k([255,255,255]))).rgb(),new k(e.concat([this._rgb[3]]))):tn.apply(void 0,this._rgb.slice(0,3))},function(e,t,r){return.2126*(e=rn(e))+.7152*(t=rn(t))+.0722*(r=rn(r))}),rn=function(e){return(e/=255)<=.03928?e/12.92:en((e+.055)/1.055,2.4)},o={},nn=s,on=e.type,C=o,l=s,sn=$r,an=(l.prototype.mix=l.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return sn.apply(void 0,[this,e,t].concat(r))},s),cn=(an.prototype.premultiply=function(e){var t=this._rgb,r=t[3];return(e=void 0===e?!1:e)?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new an([t[0]*r,t[1]*r,t[2]*r,r],"rgb")},s),ln=u,un=(cn.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=ln.Kn*e,t[1]<0&&(t[1]=0),new cn(t,"lch").alpha(this.alpha(),!0)},cn.prototype.desaturate=function(e){return this.saturate(-(e=void 0===e?1:e))},s),hn=e.type,fn=(un.prototype.set=function(e,t,r){void 0===r&&(r=!1);var e=e.split("."),n=e[0],e=e[1],i=this[n]();if(e){var o=n.indexOf(e)-("ok"===n.substr(0,2)?2:0);if(-1<o){if("string"==hn(t))switch(t.charAt(0)){case"+":case"-":i[o]+=+t;break;case"*":i[o]*=+t.substr(1);break;case"/":i[o]/=+t.substr(1);break;default:i[o]=+t}else{if("number"!==hn(t))throw new Error("unsupported value for Color.set");i[o]=t}var s=new un(i,n);return r?(this._rgb=s._rgb,this):s}throw new Error("unknown channel "+e+" in mode "+n)}return i},s),dn=(o.rgb=function(e,t,r){e=e._rgb,t=t._rgb;return new fn(e[0]+r*(t[0]-e[0]),e[1]+r*(t[1]-e[1]),e[2]+r*(t[2]-e[2]),"rgb")},s),pn=Math.sqrt,A=Math.pow,gn=(o.lrgb=function(e,t,r){var e=e._rgb,n=e[0],i=e[1],e=e[2],t=t._rgb,o=t[0],s=t[1],t=t[2];return new dn(pn(A(n,2)*(1-r)+A(o,2)*r),pn(A(i,2)*(1-r)+A(s,2)*r),pn(A(e,2)*(1-r)+A(t,2)*r),"rgb")},s),mn=(o.lab=function(e,t,r){e=e.lab(),t=t.lab();return new gn(e[0]+r*(t[0]-e[0]),e[1]+r*(t[1]-e[1]),e[2]+r*(t[2]-e[2]),"lab")},s),bn=E,yn=(o.lch=Xr,o.hcl=Xr,s),vn=(o.num=function(e,t,r){e=e.num(),t=t.num();return new yn(e+r*(t-e),"num")},E),wn=(o.hcg=function(e,t,r){return vn(e,t,r,"hcg")},E),_n=(o.hsi=function(e,t,r){return wn(e,t,r,"hsi")},E),xn=(o.hsl=function(e,t,r){return _n(e,t,r,"hsl")},E),Sn=(o.hsv=function(e,t,r){return xn(e,t,r,"hsv")},s),En=(o.oklab=function(e,t,r){e=e.oklab(),t=t.oklab();return new Sn(e[0]+r*(t[0]-e[0]),e[1]+r*(t[1]-e[1]),e[2]+r*(t[2]-e[2]),"oklab")},E),kn=(o.oklch=function(e,t,r){return En(e,t,r,"oklch")},s),Cn=e.clip_rgb,An=Math.pow,Tn=Math.sqrt,In=Math.PI,Pn=Math.cos,On=Math.sin,Rn=Math.atan2,T=c,I=e.type,Mn=Math.pow;for(var P=s,jn=Jr,Ln=function(e){for(var t=[1,1],r=1;r<e;r++){for(var n=[1],i=1;i<=t.length;i++)n[i]=(t[i]||0)+t[i-1];t=n}return t},Nn=c,O=function(e,t,r){if(O[r])return O[r](e,t);throw new Error("unknown blend mode "+r)},y=function(r){return function(e,t){t=Nn(t).rgb(),e=Nn(e).rgb();return Nn.rgb(r(t,e))}},l=function(n){return function(e,t){var r=[];return r[0]=n(e[0],t[0]),r[1]=n(e[1],t[1]),r[2]=n(e[2],t[2]),r}},u=(O.normal=y(l(function(e){return e})),O.multiply=y(l(function(e,t){return e*t/255})),O.screen=y(l(function(e,t){return 255*(1-(1-e/255)*(1-t/255))})),O.overlay=y(l(function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))})),O.darken=y(l(function(e,t){return t<e?t:e})),O.lighten=y(l(function(e,t){return t<e?e:t})),O.dodge=y(l(function(e,t){return 255===e||255<(e=t/255*255/(1-e/255))?255:e})),O.burn=y(l(function(e,t){return 255*(1-(1-t/255)/(e/255))})),O),Bn=e.type,Dn=e.clip_rgb,Un=e.TWOPI,qn=Math.pow,Fn=Math.sin,Hn=Math.cos,Wn=c,zn=s,Vn=Math.floor,Kn=Math.random,Gn=r,Yn=Math.log,Qn=Math.pow,$n=Math.floor,Xn=Math.abs,Jn=function(e,t){void 0===t&&(t=null);var r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return(e="object"===Gn(e)?Object.values(e):e).forEach(function(e){null==(e=t&&"object"===Gn(e)?e[t]:e)||isNaN(e)||(r.values.push(e),r.sum+=e,e<r.min&&(r.min=e),r.max<e&&(r.max=e),r.count+=1)}),r.domain=[r.min,r.max],r.limits=function(e,t){return Zn(r,e,t)},r},Zn=function(e,t,r){void 0===t&&(t="equal"),void 0===r&&(r=7);var n=(e="array"==Gn(e)?Jn(e):e).min,i=e.max,o=e.values.sort(function(e,t){return e-t});if(1===r)return[n,i];var s=[];if("c"===t.substr(0,1)&&(s.push(n),s.push(i)),"e"===t.substr(0,1)){s.push(n);for(var a=1;a<r;a++)s.push(n+a/r*(i-n));s.push(i)}else if("l"===t.substr(0,1)){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");var c=Math.LOG10E*Yn(n),N=Math.LOG10E*Yn(i);s.push(n);for(var l=1;l<r;l++)s.push(Qn(10,c+l/r*(N-c)));s.push(i)}else if("q"===t.substr(0,1)){s.push(n);for(var u=1;u<r;u++){var h=(o.length-1)*u/r,f=$n(h);s.push(f===h?o[f]:o[f]*(1-(h=h-f))+o[f+1]*h)}s.push(i)}else if("k"===t.substr(0,1)){var d,p=o.length,g=new Array(p),m=new Array(r),b=!0,B=0,y=null;(y=[]).push(n);for(var v=1;v<r;v++)y.push(n+v/r*(i-n));for(y.push(i);b;){for(var w=0;w<r;w++)m[w]=0;for(var _=0;_<p;_++)for(var D=o[_],U=Number.MAX_VALUE,x=void 0,S=0;S<r;S++){var q=Xn(y[S]-D);q<U&&(U=q,x=S),m[x]++,g[_]=x}for(var E=new Array(r),k=0;k<r;k++)E[k]=null;for(var C=0;C<p;C++)null===E[d=g[C]]?E[d]=o[C]:E[d]+=o[C];for(var A=0;A<r;A++)E[A]*=1/m[A];for(var b=!1,T=0;T<r;T++)if(E[T]!==y[T]){b=!0;break}y=E,200<++B&&(b=!1)}for(var I={},P=0;P<r;P++)I[P]=[];for(var O=0;O<p;O++)I[d=g[O]].push(o[O]);for(var R=[],M=0;M<r;M++)R.push(I[M][0]),R.push(I[M][I[M].length-1]);R=R.sort(function(e,t){return e-t}),s.push(R[0]);for(var j=1;j<R.length;j+=2){var L=R[j];isNaN(L)||-1!==s.indexOf(L)||s.push(L)}}return s},o=Jn,y=Zn,ei=s,ti=s,R=Math.sqrt,M=Math.pow,ri=Math.min,ni=Math.max,ii=Math.atan2,oi=Math.abs,j=Math.cos,si=Math.sin,ai=Math.exp,ci=Math.PI,li=s,ui=s,hi=c,fi=Jr,l={cool:function(){return fi([hi.hsl(180,1,.9),hi.hsl(250,.7,.4)])},hot:function(){return fi(["#000","#f00","#ff0","#fff"]).mode("rgb")}},L={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},di=0,pi=Object.keys(L);di<pi.length;di+=1){var gi=pi[di];L[gi.toLowerCase()]=L[gi]}e=L,s=c;return s.average=function(e,o,s){void 0===o&&(o="lrgb"),void 0===s&&(s=null);var t=e.length,r=t/(s=s||Array.from(new Array(t)).map(function(){return 1})).reduce(function(e,t){return e+t});if(s.forEach(function(e,t){s[t]*=r}),e=e.map(function(e){return new kn(e)}),"lrgb"===o){for(var n=e,i=s,a=n.length,c=[0,0,0,0],l=0;l<n.length;l++){var u=n[l];var h=i[l]/a;u=u._rgb;c[0]+=An(u[0],2)*h;c[1]+=An(u[1],2)*h;c[2]+=An(u[2],2)*h;c[3]+=u[3]*h}if(c[0]=Tn(c[0]),c[1]=Tn(c[1]),c[2]=Tn(c[2]),c[3]>.9999999)c[3]=1;return new kn(Cn(c))}for(var f,d=e.shift(),p=d.get(o),g=[],m=0,b=0,y=0;y<p.length;y++)p[y]=(p[y]||0)*s[0],g.push(isNaN(p[y])?0:s[0]),"h"!==o.charAt(y)||isNaN(p[y])||(f=p[y]/180*In,m+=Pn(f)*s[0],b+=On(f)*s[0]);var v=d.alpha()*s[0];e.forEach(function(e,t){var r=e.get(o);v+=e.alpha()*s[t+1];for(var n,i=0;i<p.length;i++)isNaN(r[i])||(g[i]+=s[t+1],"h"===o.charAt(i)?(n=r[i]/180*In,m+=Pn(n)*s[t+1],b+=On(n)*s[t+1]):p[i]+=r[i]*s[t+1])});for(var w=0;w<p.length;w++)if("h"===o.charAt(w)){for(var _=Rn(b/g[w],m/g[w])/In*180;_<0;)_+=360;for(;360<=_;)_-=360;p[w]=_}else p[w]=p[w]/g[w];return v/=t,new kn(p,o).alpha(.99999<v?1:v,!0)},s.bezier=function(e){var t=function(e){if(2===(e=e.map(function(e){return new P(e)})).length)s=e.map(function(e){return e.lab()}),r=s[0],n=s[1],s=function(t){var e=[0,1,2].map(function(e){return r[e]+t*(n[e]-r[e])});return new P(e,"lab")};else if(3===e.length)t=e.map(function(e){return e.lab()}),r=t[0],n=t[1],i=t[2],s=function(t){var e=[0,1,2].map(function(e){return(1-t)*(1-t)*r[e]+2*(1-t)*t*n[e]+t*t*i[e]});return new P(e,"lab")};else if(4===e.length)var t,r=(t=e.map(function(e){return e.lab()}))[0],n=t[1],i=t[2],o=t[3],s=function(t){var e=[0,1,2].map(function(e){return(1-t)*(1-t)*(1-t)*r[e]+3*(1-t)*(1-t)*t*n[e]+3*(1-t)*t*t*i[e]+t*t*t*o[e]});return new P(e,"lab")};else{if(!(5<=e.length))throw new RangeError("No point in running bezier with only one color.");var a=e.map(function(e){return e.lab()}),c=e.length-1,l=Ln(c);s=function(i){var o=1-i,e=[0,1,2].map(function(n){return a.reduce(function(e,t,r){return e+l[r]*Math.pow(o,c-r)*Math.pow(i,r)*t[n]},0)});return new P(e,"lab")}}return s}(e);return t.scale=function(){return jn(t)},t},s.blend=u,s.cubehelix=function(i,o,s,a,c){void 0===i&&(i=300),void 0===o&&(o=-1.5),void 0===s&&(s=1),void 0===a&&(a=1);function t(e){var t=Un*((i+120)/360+o*e),r=qn(c[0]+l*e,a),e=(0!==u?s[0]+e*u:s)*r*(1-r)/2,n=Hn(t),t=Fn(t);return Wn(Dn([255*(r+e*(-.14861*n+1.78277*t)),255*(r+e*(-.29227*n-.90649*t)),255*(r+1.97294*n*e),1]))}var l,u=0;"array"===Bn(c=void 0===c?[0,1]:c)?l=c[1]-c[0]:(l=0,c=[c,c]);return t.start=function(e){return null==e?i:(i=e,t)},t.rotations=function(e){return null==e?o:(o=e,t)},t.gamma=function(e){return null==e?a:(a=e,t)},t.hue=function(e){return null==e?s:("array"===Bn(s=e)?0===(u=s[1]-s[0])&&(s=s[1]):u=0,t)},t.lightness=function(e){return null==e?c:(l="array"===Bn(e)?(c=e)[1]-e[0]:(c=[e,e],0),t)},t.scale=function(){return Wn.scale(t)},t.hue(s),t},s.mix=s.interpolate=$r,s.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(Vn(16*Kn()));return new zn(e,"hex")},s.scale=Jr,s.analyze=o,s.contrast=function(e,t){e=new ei(e),t=new ei(t);e=e.luminance(),t=t.luminance();return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)},s.deltaE=function(e,t,r,n,i){void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=1);function o(e){return 360*e/(2*ci)}function s(e){return 2*ci*e/360}e=new ti(e),t=new ti(t);var e=Array.from(e.lab()),a=e[0],c=e[1],e=e[2],t=Array.from(t.lab()),l=t[0],u=t[1],t=t[2],h=(a+l)/2,f=(R(M(c,2)+M(e,2))+R(M(u,2)+M(t,2)))/2,f=.5*(1-R(M(f,7)/(M(f,7)+M(25,7)))),c=c*(1+f),u=u*(1+f),f=R(M(c,2)+M(e,2)),d=R(M(u,2)+M(t,2)),p=(f+d)/2,e=o(ii(e,c)),c=o(ii(t,u)),t=0<=e?e:e+360,u=0<=c?c:c+360,e=180<oi(t-u)?(t+u+360)/2:(t+u)/2,c=1-.17*j(s(e-30))+.24*j(s(2*e))+.32*j(s(3*e+6))-.2*j(s(4*e-63)),g=oi(g=u-t)<=180?g:u<=t?360+g:g-360,u=(g=2*R(f*d)*si(s(g)/2),l-a),t=d-f,l=1+.015*M(h-50,2)/R(20+M(h-50,2)),a=1+.045*p,d=1+.015*p*c,f=30*ai(-M((e-275)/25,2)),h=-(2*R(M(p,7)/(M(p,7)+M(25,7))))*si(2*s(f)),c=R(M(u/(r*l),2)+M(t/(n*a),2)+M(g/(i*d),2)+t/(n*a)*h*(g/(i*d)));return ni(0,ri(100,c))},s.distance=function(e,t,r){void 0===r&&(r="lab"),e=new li(e),t=new li(t);var n,i=e.get(r),o=t.get(r),s=0;for(n in i){var a=(i[n]||0)-(o[n]||0);s+=a*a}return Math.sqrt(s)},s.limits=y,s.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(ui,[null].concat(e))),!0}catch(e){return!1}},s.scales=l,s.colors=m,s.brewer=e,s},"object"==typeof r&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):(n="undefined"!=typeof globalThis?globalThis:n||self).chroma=i()},{}],5:[function(e,t,r){t.exports=e("./vendor/dat.gui"),t.exports.color=e("./vendor/dat.color")},{"./vendor/dat.color":6,"./vendor/dat.gui":7}],6:[function(e,t,r){var o,n,i,s,a,c,l,u,h,f,d,p,g,t=t.exports={};function m(){if(this.__state=s.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1}function b(e,t,r){Object.defineProperty(e,t,{get:function(){return"RGB"!==this.__state.space&&v(this,t,r),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(v(this,t,r),this.__state.space="RGB"),this.__state[t]=e}})}function y(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"!==this.__state.space&&w(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(w(this),this.__state.space="HSV"),this.__state[t]=e}})}function v(e,t,r){if("HEX"===e.__state.space)e.__state[t]=a.component_from_hex(e.__state.hex,r);else{if("HSV"!==e.__state.space)throw"Corrupted color state";l.extend(e.__state,a.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function w(e){var t=a.rgb_to_hsv(e.r,e.g,e.b);l.extend(e.__state,{s:t.s,v:t.v}),l.isNaN(t.h)?l.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h}t.color=t.color||{},t.utils=t.utils||{},t.utils.common=(o=Array.prototype.forEach,n=Array.prototype.slice,{BREAK:{},extend:function(r){return this.each(n.call(arguments,1),function(e){for(var t in e)this.isUndefined(e[t])||(r[t]=e[t])},this),r},defaults:function(r){return this.each(n.call(arguments,1),function(e){for(var t in e)this.isUndefined(r[t])&&(r[t]=e[t])},this),r},compose:function(){var r=n.call(arguments);return function(){for(var e=n.call(arguments),t=r.length-1;0<=t;t--)e=[r[t].apply(this,e)];return e[0]}},each:function(e,t,r){if(o&&e.forEach===o)e.forEach(t,r);else if(e.length===e.length+0){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n)===this.BREAK)return}else for(var n in e)if(t.call(r,e[n],n)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():n.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),t.color.toString=(i=t.utils.common,function(e){if(1==e.a||i.isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}),t.Color=t.color.Color=(s=t.color.interpret=(h=t.color.toString,f=t.utils.common,g=[{litmus:f.isString,conversions:{THREE_CHAR_HEX:{read:function(e){e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:h},SIX_CHAR_HEX:{read:function(e){e=e.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:h},CSS_RGB:{read:function(e){e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:h},CSS_RGBA:{read:function(e){e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:h}}},{litmus:f.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:f.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:f.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(f.isNumber(e.r)&&f.isNumber(e.g)&&f.isNumber(e.b)&&f.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(f.isNumber(e.r)&&f.isNumber(e.g)&&f.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(f.isNumber(e.h)&&f.isNumber(e.s)&&f.isNumber(e.v)&&f.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(f.isNumber(e.h)&&f.isNumber(e.s)&&f.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],function(){p=!1;var r=1<arguments.length?f.toArray(arguments):arguments[0];return f.each(g,function(e){if(e.litmus(r))return f.each(e.conversions,function(e,t){if(d=e.read(r),!1===p&&!1!==d)return(p=d).conversionName=t,d.conversion=e,f.BREAK}),f.BREAK}),p}),a=t.color.math={hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6,e=e/60-Math.floor(e/60),i=r*(1-t),o=r*(1-e*t),e=r*(1-(1-e)*t),t=[[r,e,i],[o,r,i],[i,r,e],[i,o,r],[e,i,r],[r,i,o]][n];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,r){var n=Math.min(e,t,r),i=Math.max(e,t,r),n=i-n;return 0==i?{h:NaN,s:0,v:0}:(r=e==i?(t-r)/n:t==i?2+(r-e)/n:4+(e-t)/n,(r/=6)<0&&(r+=1),{h:360*r,s:n/i,v:i/255})},rgb_to_hex:function(e,t,r){e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t);return this.hex_with_component(e,0,r)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,r){return r<<(u=8*t)|e&~(255<<u)}},c=t.color.toString,l=t.utils.common,m.COMPONENTS=["r","g","b","h","s","v","hex","a"],l.extend(m.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),b(m.prototype,"r",2),b(m.prototype,"g",1),b(m.prototype,"b",0),y(m.prototype,"h"),y(m.prototype,"s"),y(m.prototype,"v"),Object.defineProperty(m.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(m.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=a.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),m)},{}],7:[function(N,e,B){var D,n,c,U,q,i,F,o,H,l,W,u,z,V,K,G,s,a,Y,Q,t,$,X,J,Z,ee,te,re,ne,ie,f,d,oe,p,g,m,se,r,ae,b,h,ce,y,le,ue,v,he,fe,w,de,_,pe,ge,me,be,ye,ve,we,x,S,E,k,e=e.exports={};function _e(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}function C(e){return"0"===e||c.isUndefined(e)||(e=e.match(q),c.isNull(e))?0:parseFloat(e[1])}function A(e,t,r){A.superclass.call(this,e,t);var n,i=this;this.__select=document.createElement("select"),o.isArray(r)&&(n={},o.each(r,function(e){n[e]=e}),r=n),o.each(r,function(e,t){var r=document.createElement("option");r.innerHTML=t,r.setAttribute("value",e),i.__select.appendChild(r)}),this.updateDisplay(),F.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;i.setValue(e)}),this.domElement.appendChild(this.__select)}function T(e,t,r){T.superclass.call(this,e,t),this.__min=(r=r||{}).min,this.__max=r.max,this.__step=r.step,H.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=-1<(e=(e=this.__impliedStep).toString()).indexOf(".")?e.length-e.indexOf(".")-1:0}function I(e,t,r){this.__truncationSuspended=!1,I.superclass.call(this,e,t,r);var n,i=this;function o(){var e=parseFloat(i.__input.value);W.isNaN(e)||i.setValue(e)}function s(e){var t=n-e.clientY;i.setValue(i.getValue()+t*i.__impliedStep),n=e.clientY}function a(){l.unbind(window,"mousemove",s),l.unbind(window,"mouseup",a)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),l.bind(this.__input,"change",o),l.bind(this.__input,"blur",function(){o(),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),l.bind(this.__input,"mousedown",function(e){l.bind(window,"mousemove",s),l.bind(window,"mouseup",a),n=e.clientY}),l.bind(this.__input,"keydown",function(e){13===e.keyCode&&(i.__truncationSuspended=!0,this.blur(),i.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)}function P(e,t,r,n,i){P.superclass.call(this,e,t,{min:r,max:n,step:i});var o=this;function s(e){e.preventDefault();var t,r,n=u.getOffset(o.__background),i=u.getWidth(o.__background);return o.setValue((e=e.clientX,t=n.left,n=n.left+i,i=o.__min,r=o.__max,i+(e-t)/(n-t)*(r-i))),!1}function a(){u.unbind(window,"mousemove",s),u.unbind(window,"mouseup",a),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),u.bind(this.__background,"mousedown",function(e){u.bind(window,"mousemove",s),u.bind(window,"mouseup",a),s(e)}),u.addClass(this.__background,"slider"),u.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)}function xe(e,t,r){xe.superclass.call(this,e,t);var n=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,V.bind(this.__button,"click",function(e){return e.preventDefault(),n.fire(),!1}),V.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)}function O(e,t){O.superclass.call(this,e,t);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),K.bind(this.__checkbox,"change",function(){r.setValue(!r.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()}function R(e,t,r,n){if(void 0===t[r])throw new Error("Object "+t+' has no property "'+r+'"');r=n.color?new re(t,r):(t=[t,r].concat(n.factoryArgs),$.apply(e,t)),n.before instanceof X&&(n.before=n.before.__li),Ee(e,r),f.addClass(r.domElement,"c");var i,t=document.createElement("span"),o=(f.addClass(t,"property-name"),t.innerHTML=r.property,document.createElement("div")),t=(o.appendChild(t),o.appendChild(r.domElement),Se(e,o,n.before)),s=(f.addClass(t,b.CLASS_CONTROLLER_ROW),f.addClass(t,typeof r.getValue()),e),a=t,c=r;return c.__li=a,c.__gui=s,d.extend(c,{options:function(e){return 1<arguments.length?(c.remove(),R(s,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[d.toArray(arguments)]})):d.isArray(e)||d.isObject(e)?(c.remove(),R(s,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(e){return c.__li.firstElementChild.firstElementChild.innerHTML=e,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}}),c instanceof te?(i=new ee(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step}),d.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=c[e],r=i[e];c[e]=i[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(c,e),r.apply(i,e)}}),f.addClass(a,"has-slider"),c.domElement.insertBefore(i.domElement,c.domElement.firstElementChild)):c instanceof ee?(o=function(e){return d.isNumber(c.__min)&&d.isNumber(c.__max)?(c.remove(),R(s,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):e},c.min=d.compose(o,c.min),c.max=d.compose(o,c.max)):c instanceof J?(f.bind(a,"click",function(){f.fakeEvent(c.__checkbox,"click")}),f.bind(c.__checkbox,"click",function(e){e.stopPropagation()})):c instanceof Z?(f.bind(a,"click",function(){f.fakeEvent(c.__button,"click")}),f.bind(a,"mouseover",function(){f.addClass(c.__button,"hover")}),f.bind(a,"mouseout",function(){f.removeClass(c.__button,"hover")})):c instanceof re&&(f.addClass(a,"color"),c.updateDisplay=d.compose(function(e){return a.style.borderLeftColor=c.__color.toString(),e},c.updateDisplay),c.updateDisplay()),c.setValue=d.compose(function(e){return s.getRoot().__preset_select&&c.isModified()&&Te(s.getRoot(),!0),e},c.setValue),e.__controllers.push(r),r}function Se(e,t,r){var n=document.createElement("li");return t&&n.appendChild(t),r?e.__ul.insertBefore(n,params.before):e.__ul.appendChild(n),e.onResize(),n}function Ee(e,t){var r=e.getRoot(),n=r.__rememberedObjects.indexOf(t.object);if(-1!=n){var i=r.__rememberedObjectIndecesToControllers[n];if(void 0===i&&(r.__rememberedObjectIndecesToControllers[n]=i={}),i[t.property]=t,r.load&&r.load.remembered){var o,i=r.load.remembered;if(i[e.preset])o=i[e.preset];else{if(!i[g])return;o=i[g]}o[n]&&void 0!==o[n][t.property]&&(r=o[n][t.property],t.initialValue=r,t.setValue(r))}}}function M(e,t){return document.location.href+"."+t}function ke(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Ce(i,o){var s={};return d.each(i.__rememberedObjects,function(e,t){var r={},n=i.__rememberedObjectIndecesToControllers[t];d.each(n,function(e,t){r[t]=o?e.initialValue:e.getValue()}),s[t]=r}),s}function Ae(e,t,r){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),r&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function Te(e,t){e=e.__preset_select[e.__preset_select.selectedIndex];e.innerHTML=t?e.value+"*":e.value}function Ie(){this.backgroundElement=document.createElement("div"),ce.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),h.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),ce.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;h.bind(this.backgroundElement,"click",function(){e.hide()})}function Pe(e,t){Pe.superclass.call(this,e,t),this.__color=new le(this.getValue()),this.__temp=new le(0);var i=this,e=(this.domElement=document.createElement("div"),y.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",y.bind(this.__input,"keydown",function(e){13===e.keyCode&&o.call(this)}),y.bind(this.__input,"blur",o),y.bind(this.__selector,"mousedown",function(e){y.addClass(this,"drag").bind(window,"mouseup",function(e){y.removeClass(i.__selector,"drag")})}),document.createElement("div"));function r(e){a(e),y.bind(window,"mousemove",a),y.bind(window,"mouseup",n)}function n(){y.unbind(window,"mousemove",a),y.unbind(window,"mouseup",n)}function o(){var e=ue(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function s(){y.unbind(window,"mousemove",c),y.unbind(window,"mouseup",s)}function a(e){e.preventDefault();var t=y.getWidth(i.__saturation_field),r=y.getOffset(i.__saturation_field),n=(e.clientX-r.left+document.body.scrollLeft)/t,e=1-(e.clientY-r.top+document.body.scrollTop)/t;return 1<e?e=1:e<0&&(e=0),1<n?n=1:n<0&&(n=0),i.__color.v=e,i.__color.s=n,i.setValue(i.__color.toOriginal()),!1}function c(e){e.preventDefault();var t=y.getHeight(i.__hue_field),r=y.getOffset(i.__hue_field),e=1-(e.clientY-r.top+document.body.scrollTop)/t;return 1<e?e=1:e<0&&(e=0),i.__color.h=360*e,i.setValue(i.__color.toOriginal()),!1}v.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),v.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),v.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),v.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),v.extend(e.style,{width:"100%",height:"100%",background:"none"}),Oe(e,"top","rgba(0,0,0,0)","#000"),v.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),(t=this.__hue_field).style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",v.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),y.bind(this.__saturation_field,"mousedown",r),y.bind(this.__field_knob,"mousedown",r),y.bind(this.__hue_field,"mousedown",function(e){c(e),y.bind(window,"mousemove",c),y.bind(window,"mouseup",s)}),this.__saturation_field.appendChild(e),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()}function Oe(t,r,n,i){t.style.background="",v.each(he,function(e){t.style.cssText+="background: "+e+"linear-gradient("+r+", "+n+" 0%, "+i+" 100%); "})}function j(){if(this.__state=fe.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1}function Re(e,t,r){Object.defineProperty(e,t,{get:function(){return"RGB"!==this.__state.space&&je(this,t,r),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(je(this,t,r),this.__state.space="RGB"),this.__state[t]=e}})}function Me(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"!==this.__state.space&&Le(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(Le(this),this.__state.space="HSV"),this.__state[t]=e}})}function je(e,t,r){if("HEX"===e.__state.space)e.__state[t]=w.component_from_hex(e.__state.hex,r);else{if("HSV"!==e.__state.space)throw"Corrupted color state";_.extend(e.__state,w.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function Le(e){var t=w.rgb_to_hsv(e.r,e.g,e.b);_.extend(e.__state,{s:t.s,v:t.v}),_.isNaN(t.h)?_.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h}function L(e,t){L.superclass.call(this,e,t);var r=this;function n(){r.setValue(r.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),E.bind(this.__input,"keyup",n),E.bind(this.__input,"change",n),E.bind(this.__input,"blur",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),E.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)}e.gui=e.gui||{},e.utils=e.utils||{},e.controllers=e.controllers||{},e.dom=e.dom||{},e.color=e.color||{},e.utils.css={load:function(e,t){var r=(t=t||document).createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,t.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){t=t||document;var r=document.createElement("style");r.type="text/css",r.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(r)}},e.utils.common=(D=Array.prototype.forEach,n=Array.prototype.slice,{BREAK:{},extend:function(r){return this.each(n.call(arguments,1),function(e){for(var t in e)this.isUndefined(e[t])||(r[t]=e[t])},this),r},defaults:function(r){return this.each(n.call(arguments,1),function(e){for(var t in e)this.isUndefined(r[t])&&(r[t]=e[t])},this),r},compose:function(){var r=n.call(arguments);return function(){for(var e=n.call(arguments),t=r.length-1;0<=t;t--)e=[r[t].apply(this,e)];return e[0]}},each:function(e,t,r){if(D&&e.forEach===D)e.forEach(t,r);else if(e.length===e.length+0){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n)===this.BREAK)return}else for(var n in e)if(t.call(r,e[n],n)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():n.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),e.controllers.Controller=(e.utils.common.extend(_e.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),_e),e.dom.dom=(c=e.utils.common,U={},c.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){c.each(e,function(e){U[e]=t})}),q=/(\d+(\.\d+)?)px/,i={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,r){c.isUndefined(t)&&(t=!0),c.isUndefined(r)&&(r=!0),e.style.position="absolute",t&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,r,n){r=r||{};var i=U[t];if(!i)throw new Error("Event type "+t+" not supported.");var o=document.createEvent(i);switch(i){case"MouseEvents":var s=r.x||r.clientX||0,a=r.y||r.clientY||0;o.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,s,a,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":s=o.initKeyboardEvent||o.initKeyEvent;c.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),s(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:o.initEvent(t,r.bubbles||!1,r.cancelable||!0)}c.defaults(o,n),e.dispatchEvent(o)},bind:function(e,t,r,n){return n=n||!1,e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on"+t,r),i},unbind:function(e,t,r,n){return n=n||!1,e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent&&e.detachEvent("on"+t,r),i},addClass:function(e,t){var r;return void 0===e.className?e.className=t:e.className!==t&&-1==(r=e.className.split(/ +/)).indexOf(t)&&(r.push(t),e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,"")),i},removeClass:function(e,t){var r;return t?void 0!==e.className&&(e.className===t?e.removeAttribute("class"):-1!=(t=(r=e.className.split(/ +/)).indexOf(t))&&(r.splice(t,1),e.className=r.join(" "))):e.className=void 0,i},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){e=getComputedStyle(e);return C(e["border-left-width"])+C(e["border-right-width"])+C(e["padding-left"])+C(e["padding-right"])+C(e.width)},getHeight:function(e){e=getComputedStyle(e);return C(e["border-top-width"])+C(e["border-bottom-width"])+C(e["padding-top"])+C(e["padding-bottom"])+C(e.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)for(;t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.offsetParent;);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}}),e.controllers.OptionController=(t=e.controllers.Controller,F=e.dom.dom,o=e.utils.common,A.superclass=t,o.extend(A.prototype,t.prototype,{setValue:function(e){e=A.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),A.superclass.prototype.updateDisplay.call(this)}}),A),e.controllers.NumberController=(t=e.controllers.Controller,H=e.utils.common,T.superclass=t,H.extend(T.prototype,t.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),T.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),T),e.controllers.NumberControllerBox=(t=e.controllers.NumberController,l=e.dom.dom,W=e.utils.common,I.superclass=t,W.extend(I.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}(this.getValue(),this.__precision),I.superclass.prototype.updateDisplay.call(this)}}),I),e.controllers.NumberControllerSlider=(t=e.controllers.NumberController,u=e.dom.dom,z=e.utils.css,S=e.utils.common,P.superclass=t,P.useDefaultStyles=function(){z.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},S.extend(P.prototype,t.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",P.superclass.prototype.updateDisplay.call(this)}}),P),e.controllers.FunctionController=(S=e.controllers.Controller,V=e.dom.dom,t=e.utils.common,xe.superclass=S,t.extend(xe.prototype,S.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),xe),e.controllers.BooleanController=(t=e.controllers.Controller,K=e.dom.dom,S=e.utils.common,O.superclass=t,S.extend(O.prototype,t.prototype,{setValue:function(e){e=O.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,O.superclass.prototype.updateDisplay.call(this)}}),O),e.color.toString=(G=e.utils.common,function(e){if(1==e.a||G.isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}),e.color.interpret=(S=e.color.toString,s=e.utils.common,Q=[{litmus:s.isString,conversions:{THREE_CHAR_HEX:{read:function(e){e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:S},SIX_CHAR_HEX:{read:function(e){e=e.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:S},CSS_RGB:{read:function(e){e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:S},CSS_RGBA:{read:function(e){e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:S}}},{litmus:s.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:s.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:s.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b)&&s.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v)&&s.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],function(){Y=!1;var r=1<arguments.length?s.toArray(arguments):arguments[0];return s.each(Q,function(e){if(e.litmus(r))return s.each(e.conversions,function(e,t){if(a=e.read(r),!1===Y&&!1!==a)return(Y=a).conversionName=t,a.conversion=e,s.BREAK}),s.BREAK}),Y}),e.GUI=e.gui.GUI=(t=e.utils.css,$=e.controllers.factory=(ge=e.controllers.OptionController,me=e.controllers.NumberControllerBox,be=e.controllers.NumberControllerSlider,ye=e.controllers.StringController=(S=e.controllers.Controller,E=e.dom.dom,k=e.utils.common,L.superclass=S,k.extend(L.prototype,S.prototype,{updateDisplay:function(){return E.isActive(this.__input)||(this.__input.value=this.getValue()),L.superclass.prototype.updateDisplay.call(this)}}),L),ve=e.controllers.FunctionController,we=e.controllers.BooleanController,x=e.utils.common,function(e,t){var r=e[t];return x.isArray(arguments[2])||x.isObject(arguments[2])?new ge(e,t,arguments[2]):x.isNumber(r)?x.isNumber(arguments[2])&&x.isNumber(arguments[3])?new be(e,t,arguments[2],arguments[3]):new me(e,t,{min:arguments[2],max:arguments[3]}):x.isString(r)?new ye(e,t):x.isFunction(r)?new ve(e,t,""):x.isBoolean(r)?new we(e,t):void 0}),X=e.controllers.Controller,J=e.controllers.BooleanController,Z=e.controllers.FunctionController,ee=e.controllers.NumberControllerBox,te=e.controllers.NumberControllerSlider,e.controllers.OptionController,re=e.controllers.ColorController=(k=e.controllers.Controller,y=e.dom.dom,le=e.color.Color=(fe=e.color.interpret,w=e.color.math={hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6,e=e/60-Math.floor(e/60),i=r*(1-t),o=r*(1-e*t),e=r*(1-(1-e)*t),t=[[r,e,i],[o,r,i],[i,r,e],[i,o,r],[e,i,r],[r,i,o]][n];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,r){var n=Math.min(e,t,r),i=Math.max(e,t,r),n=i-n;return 0==i?{h:NaN,s:0,v:0}:(r=e==i?(t-r)/n:t==i?2+(r-e)/n:4+(e-t)/n,(r/=6)<0&&(r+=1),{h:360*r,s:n/i,v:i/255})},rgb_to_hex:function(e,t,r){e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t);return this.hex_with_component(e,0,r)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,r){return r<<(pe=8*t)|e&~(255<<pe)}},de=e.color.toString,_=e.utils.common,j.COMPONENTS=["r","g","b","h","s","v","hex","a"],_.extend(j.prototype,{toString:function(){return de(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),Re(j.prototype,"r",2),Re(j.prototype,"g",1),Re(j.prototype,"b",0),Me(j.prototype,"h"),Me(j.prototype,"s"),Me(j.prototype,"v"),Object.defineProperty(j.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(j.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=w.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),j),ue=e.color.interpret,v=e.utils.common,Pe.superclass=k,v.extend(Pe.prototype,k.prototype,{updateDisplay:function(){var t,r=ue(this.getValue()),e=(!1!==r&&(t=!1,v.each(le.COMPONENTS,function(e){if(!v.isUndefined(r[e])&&!v.isUndefined(this.__color.__state[e])&&r[e]!==this.__color.__state[e])return t=!0,{}},this),t)&&v.extend(this.__color.__state,r),v.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1,this.__color.v<.5||.5<this.__color.s?255:0),n=255-e;v.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+e+","+e+","+e+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Oe(this.__saturation_field,"left","#fff",this.__temp.toString()),v.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+e+","+e+","+e+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}}),he=["-moz-","-o-","-webkit-","-ms-",""],Pe),ne=e.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},ie=e.dom.CenteredDiv=(h=e.dom.dom,ce=e.utils.common,Ie.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),ce.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},Ie.prototype.hide=function(){function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",h.unbind(t.domElement,"webkitTransitionEnd",e),h.unbind(t.domElement,"transitionend",e),h.unbind(t.domElement,"oTransitionEnd",e)}var t=this;h.bind(this.domElement,"webkitTransitionEnd",e),h.bind(this.domElement,"transitionend",e),h.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},Ie.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-h.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-h.getHeight(this.domElement)/2+"px"},Ie),f=e.dom.dom,d=e.utils.common,t.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"),g="Default",m=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),r=!(se=!0),ae=[],(b=function(n){var t,e,r,i,o=this,s=(this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),f.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=n||{},n=d.defaults(n,{autoPlace:!0,width:b.DEFAULT_WIDTH}),n=d.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),d.isUndefined(n.load)?n.load={preset:g}:n.preset&&(n.load.preset=n.preset),d.isUndefined(n.parent)&&n.hideable&&ae.push(this),n.resizable=d.isUndefined(n.parent)&&n.resizable,n.autoPlace&&d.isUndefined(n.scrollable)&&(n.scrollable=!0),m&&"true"===localStorage.getItem(M(0,"isLocal")));function a(e){return e.preventDefault(),i=e.clientX,f.addClass(r.__closeButton,b.CLASS_DRAG),f.bind(window,"mousemove",c),f.bind(window,"mouseup",l),!1}function c(e){return e.preventDefault(),r.width+=i-e.clientX,r.onResize(),i=e.clientX,!1}function l(){f.removeClass(r.__closeButton,b.CLASS_DRAG),f.unbind(window,"mousemove",c),f.unbind(window,"mouseup",l)}function u(){localStorage.setItem(M(0,"gui"),JSON.stringify(o.getSaveObject()))}Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},preset:{get:function(){return(o.parent?o.getRoot():n.load).preset},set:function(e){o.parent?o.getRoot().preset=e:n.load.preset=e;for(var t=this,r=0;r<t.__preset_select.length;r++)t.__preset_select[r].value==t.preset&&(t.__preset_select.selectedIndex=r);o.revert()}},width:{get:function(){return n.width},set:function(e){n.width=e,ke(o,e)}},name:{get:function(){return n.name},set:function(e){n.name=e,t&&(t.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(e){n.closed=e,n.closed?f.addClass(o.__ul,b.CLASS_CLOSED):f.removeClass(o.__ul,b.CLASS_CLOSED),this.onResize(),o.__closeButton&&(o.__closeButton.innerHTML=e?b.TEXT_OPEN:b.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return s},set:function(e){m&&((s=e)?f.bind(window,"unload",u):f.unbind(window,"unload",u),localStorage.setItem(M(0,"isLocal"),e))}}}),d.isUndefined(n.parent)?(n.closed=!1,f.addClass(this.domElement,b.CLASS_MAIN),f.makeSelectable(this.domElement,!1),m&&s&&(o.useLocalStorage=!0,e=localStorage.getItem(M(0,"gui")))&&(n.load=JSON.parse(e)),this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=b.TEXT_CLOSED,f.addClass(this.__closeButton,b.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),f.bind(this.__closeButton,"click",function(){o.closed=!o.closed})):(void 0===n.closed&&(n.closed=!0),t=document.createTextNode(n.name),f.addClass(t,"controller-name"),e=Se(o,t),f.addClass(this.__ul,b.CLASS_CLOSED),f.addClass(e,"title"),f.bind(e,"click",function(e){return e.preventDefault(),o.closed=!o.closed,!1}),n.closed||(this.closed=!1)),n.autoPlace&&(d.isUndefined(n.parent)&&(se&&(p=document.createElement("div"),f.addClass(p,"dg"),f.addClass(p,b.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(p),se=!1),p.appendChild(this.domElement),f.addClass(this.domElement,b.CLASS_AUTO_PLACE)),this.parent||ke(o,n.width)),f.bind(window,"resize",function(){o.onResize()}),f.bind(this.__ul,"webkitTransitionEnd",function(){o.onResize()}),f.bind(this.__ul,"transitionend",function(){o.onResize()}),f.bind(this.__ul,"oTransitionEnd",function(){o.onResize()}),this.onResize(),n.resizable&&((r=this).__resize_handle=document.createElement("div"),d.extend(r.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),f.bind(r.__resize_handle,"mousedown",a),f.bind(r.__closeButton,"mousedown",a),r.domElement.insertBefore(r.__resize_handle,r.domElement.firstElementChild));var h;o.getRoot();n.parent||((h=o.getRoot()).width+=1,d.defer(function(){--h.width}))}).toggleHide=function(){r=!r,d.each(ae,function(e){e.domElement.style.zIndex=r?-999:999,e.domElement.style.opacity=r?0:1})},b.CLASS_AUTO_PLACE="a",b.CLASS_AUTO_PLACE_CONTAINER="ac",b.CLASS_MAIN="main",b.CLASS_CONTROLLER_ROW="cr",b.CLASS_TOO_TALL="taller-than-window",b.CLASS_CLOSED="closed",b.CLASS_CLOSE_BUTTON="close-button",b.CLASS_DRAG="drag",b.DEFAULT_WIDTH=245,b.TEXT_CLOSED="Close Controls",b.TEXT_OPEN="Open Controls",f.bind(window,"keydown",function(e){"text"===document.activeElement.type||72!==e.which&&72!=e.keyCode||b.toggleHide()},!1),d.extend(b.prototype,{add:function(e,t){return R(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return R(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;d.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&p.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this},t=(t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]),new b(t)),e=(this.__folders[e]=t,Se(this,t.domElement));return f.addClass(e,"folder"),t},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e,t,r=this.getRoot();r.scrollable&&(e=f.getOffset(r.__ul).top,t=0,d.each(r.__ul.childNodes,function(e){r.autoPlace&&e===r.__save_row||(t+=f.getHeight(e))}),window.innerHeight-e-20<t?(f.addClass(r.domElement,b.CLASS_TOO_TALL),r.__ul.style.height=window.innerHeight-e-20+"px"):(f.removeClass(r.domElement,b.CLASS_TOO_TALL),r.__ul.style.height="auto")),r.__resize_handle&&d.defer(function(){r.__resize_handle.style.height=r.__ul.offsetHeight+"px"}),r.__closeButton&&(r.__closeButton.style.width=r.width+"px")},remember:function(){if(d.isUndefined(oe)&&((oe=new ie).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var h=this;d.each(Array.prototype.slice.call(arguments),function(e){function t(){l.style.display=r.useLocalStorage?"block":"none"}var r,n,i,o,s,a,c,l,u;0==h.__rememberedObjects.length&&(n=(r=h).__save_row=document.createElement("li"),f.addClass(r.domElement,"has-save"),r.__ul.insertBefore(n,r.__ul.firstChild),f.addClass(n,"save-row"),(i=document.createElement("span")).innerHTML="&nbsp;",f.addClass(i,"button gears"),(o=document.createElement("span")).innerHTML="Save",f.addClass(o,"button"),f.addClass(o,"save"),(s=document.createElement("span")).innerHTML="New",f.addClass(s,"button"),f.addClass(s,"save-as"),(a=document.createElement("span")).innerHTML="Revert",f.addClass(a,"button"),f.addClass(a,"revert"),c=r.__preset_select=document.createElement("select"),r.load&&r.load.remembered?d.each(r.load.remembered,function(e,t){Ae(r,t,t==r.preset)}):Ae(r,g,!1),f.bind(c,"change",function(){for(var e=0;e<r.__preset_select.length;e++)r.__preset_select[e].innerHTML=r.__preset_select[e].value;r.preset=this.value}),n.appendChild(c),n.appendChild(i),n.appendChild(o),n.appendChild(s),n.appendChild(a),m&&(c=document.getElementById("dg-save-locally"),l=document.getElementById("dg-local-explain"),c.style.display="block",n=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(M(0,"isLocal"))&&n.setAttribute("checked","checked"),t(),f.bind(n,"change",function(){r.useLocalStorage=!r.useLocalStorage,t()})),u=document.getElementById("dg-new-constructor"),f.bind(u,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||oe.hide()}),f.bind(i,"click",function(){u.innerHTML=JSON.stringify(r.getSaveObject(),void 0,2),oe.show(),u.focus(),u.select()}),f.bind(o,"click",function(){r.save()}),f.bind(s,"click",function(){var e=prompt("Enter a new preset name.");e&&r.saveAs(e)}),f.bind(a,"click",function(){r.revert()})),-1==h.__rememberedObjects.indexOf(e)&&h.__rememberedObjects.push(e)}),this.autoPlace&&ke(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var r=this.load;return r.closed=this.closed,0<this.__rememberedObjects.length&&(r.preset=this.preset,r.remembered||(r.remembered={}),r.remembered[this.preset]=Ce(this)),r.folders={},d.each(this.__folders,function(e,t){r.folders[t]=e.getSaveObject()}),r},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Ce(this),Te(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[g]=Ce(this,!0)),this.load.remembered[e]=Ce(this),this.preset=e,Ae(this,e,!0)},revert:function(t){d.each(this.__controllers,function(e){this.getRoot().load.remembered?Ee(t||this.getRoot(),e):e.setValue(e.initialValue)},this),d.each(this.__folders,function(e){e.revert(e)}),t||Te(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&function e(t){0!=t.length&&ne(function(){e(t)});d.each(t,function(e){e.updateDisplay()})}(this.__listening)}}),b)},{}],8:[function(r,i,n){!function(t){!function(){n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");let t=0,r=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(t++,"%c"===e)&&(r=t)}),e.splice(r,0,n)}},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),i.exports=r("./common")(n);var e=i.exports["formatters"];e.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}.call(this)}.call(this,r("_process"))},{"./common":9,_process:96}],9:[function(e,t,r){t.exports=function(t){function a(e){let r,t=null,n,i;function s(...i){if(s.enabled){const o=s;var e=Number(new Date),t=e-(r||e);o.diff=t,o.prev=r,o.curr=e,r=e,i[0]=a.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let n=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(e,t)=>{if("%%"===e)return"%";n++;var r,t=a.formatters[t];return"function"==typeof t&&(r=i[n],e=t.call(o,r),i.splice(n,1),n--),e}),a.formatArgs.call(o,i),(o.log||a.log).apply(o,i)}}return s.namespace=e,s.useColors=a.useColors(),s.color=a.selectColor(e),s.extend=o,s.destroy=a.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==t?t:(n!==a.namespaces&&(n=a.namespaces,i=a.enabled(e)),i),set:e=>{t=e}}),"function"==typeof a.init&&a.init(s),s}function o(e,t){t=a(this.namespace+(void 0===t?":":t)+e);return t.log=this.log,t}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((a.debug=a).default=a).coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},a.disable=function(){var e=[...a.names.map(r),...a.skips.map(r).map(e=>"-"+e)].join(",");return a.enable(""),e},a.enable=function(e){a.save(e),a.namespaces=e,a.names=[],a.skips=[];let t;var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.slice(1)+"$")):a.names.push(new RegExp("^"+e+"$")))},a.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=a.skips.length;t<r;t++)if(a.skips[t].test(e))return!1;for(t=0,r=a.names.length;t<r;t++)if(a.names[t].test(e))return!0;return!1},a.humanize=e("ms"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{a[e]=t[e]}),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return a.colors[Math.abs(r)%a.colors.length]},a.enable(a.load()),a}},{ms:91}],10:[function(e,t,r){!function(w){!function(){function b(){}function y(t,e,r){if("function"==typeof e)return y(t,null,e);function n(){t.writable||i()}function i(){g=!1,p||r.call(t)}function o(){p=!1,g||r.call(t)}function s(e){r.call(t,e?new Error("exited with error code: "+e):null)}function a(e){r.call(t,e)}function c(){w.nextTick(l)}function l(){return m||(!p||d&&d.ended&&!d.destroyed)&&(!g||f&&f.ended&&!f.destroyed)?void 0:r.call(t,new Error("premature close"))}function u(){t.req.on("finish",i)}e=e||{},r=v(r||b);var h,f=t._writableState,d=t._readableState,p=e.readable||!1!==e.readable&&t.readable,g=e.writable||!1!==e.writable&&t.writable,m=!1;return(h=t).setHeader&&"function"==typeof h.abort?(t.on("complete",i),t.on("abort",c),t.req?u():t.on("request",u)):g&&!f&&(t.on("end",n),t.on("close",n)),(h=t).stdio&&Array.isArray(h.stdio)&&3===h.stdio.length&&t.on("exit",s),t.on("end",o),t.on("finish",i),!1!==e.error&&t.on("error",a),t.on("close",c),function(){m=!0,t.removeListener("complete",i),t.removeListener("abort",c),t.removeListener("request",u),t.req&&t.req.removeListener("finish",i),t.removeListener("end",n),t.removeListener("close",n),t.removeListener("finish",i),t.removeListener("exit",s),t.removeListener("end",o),t.removeListener("error",a),t.removeListener("close",c)}}var v=e("once");t.exports=y}.call(this)}.call(this,e("_process"))},{_process:96,once:94}],11:[function(e,t,r){"use strict";var n="object"==typeof Reflect?Reflect:null,c=n&&"function"==typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};var i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(a,c){return new Promise(function(e,t){function r(e){a.removeListener(c,n),t(e)}function n(){"function"==typeof a.removeListener&&a.removeListener("error",r),e([].slice.call(arguments))}var i,o,s;m(a,c,n,{once:!0}),"error"!==c&&(o=r,s={once:!0},"function"==typeof(i=a).on)&&m(i,"error",o,s)})},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o;return l(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),o=i[t]),void 0===o?(o=i[t]=r,++e._eventsCount):("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),0<(i=u(e))&&o.length>i&&!o.warned&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,r=n,console)&&console.warn&&console.warn(r)),e}function f(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=r,e.wrapFn=t}function d(e,t,r){e=e._events;if(void 0===e)return[];e=e[t];if(void 0===e)return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,i=new Array(n.length),o=0;o<i.length;++o)i[o]=n[o].listener||n[o];return i}return g(e,e.length)}function p(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(r,n,i,o){if("function"==typeof r.on)o.once?r.once(n,i):r.on(n,i);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(n,function e(t){o.once&&r.removeEventListener(n,e),i(t)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if((o=0<t.length?t[0]:o)instanceof Error)throw o;n=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw n.context=o,n}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)c(o,this,t);else for(var s=o.length,a=g(o,s),r=0;r<s;++r)c(a[r],this,t);return!0},s.prototype.on=s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var r,n,i,o,s;if(l(t),void 0!==(n=this._events)&&void 0!==(r=n[e]))if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;if(0===i)r.shift();else{for(var a=r,c=i;c+1<a.length;c++)a[c]=a[c+1];a.pop()}1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},s.prototype.removeAllListeners=function(e){var t,r=this._events;if(void 0!==r)if(void 0===r.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]);else if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},{}],12:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?i-1:0,f=r?-1:1,i=e[t+h];for(h+=f,o=i&(1<<-u)-1,i>>=-u,u+=a;0<u;o=256*o+e[t+h],h+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;0<u;s=256*s+e[t+h],h+=f,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,n),o-=l}return(i?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,c=8*o-i-1,l=(1<<c)-1,u=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+u?h/n:h*Math.pow(2,1-u))*n&&(s++,n/=2),l<=s+u?(a=0,s=l):1<=s+u?(a=(t*n-1)*Math.pow(2,i),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,i),s=0));8<=i;e[r+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;e[r+f]=255&s,f+=d,s/=256,c-=8);e[r+f-d]|=128*o}},{}],13:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},{}],14:[function(e,t,r){var n;n=function(l){var u,h,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],f=Array.prototype.slice;if(l.event.fixHooks)for(var r=e.length;r;)l.event.fixHooks[e[--r]]=l.event.mouseHooks;var d=l.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],n,!1);else this.onmousewheel=n;l.data(this,"mousewheel-line-height",d.getLineHeight(this)),l.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],n,!1);else this.onmousewheel=null;l.removeData(this,"mousewheel-line-height"),l.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var e=l(e),t=e["offsetParent"in l.fn?"offsetParent":"parent"]();return t.length||(t=l("body")),parseInt(t.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(e){return l(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function n(e){var t,r=e||window.event,n=f.call(arguments,1),i=0,o=0,s=0,a=0,c=0;if((e=l.event.fix(r)).type="mousewheel","detail"in r&&(s=-1*r.detail),"wheelDelta"in r&&(s=r.wheelDelta),"wheelDeltaY"in r&&(s=r.wheelDeltaY),"wheelDeltaX"in r&&(o=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(o=-1*s,s=0),i=0===s?o:s,"deltaY"in r&&(i=s=-1*r.deltaY),"deltaX"in r&&(o=r.deltaX,0===s)&&(i=-1*o),0!==s||0!==o)return 1===r.deltaMode?(i*=t=l.data(this,"mousewheel-line-height"),s*=t,o*=t):2===r.deltaMode&&(i*=t=l.data(this,"mousewheel-page-height"),s*=t,o*=t),t=Math.max(Math.abs(s),Math.abs(o)),(!h||t<h)&&g(r,h=t)&&(h/=40),g(r,t)&&(i/=40,o/=40,s/=40),i=Math[1<=i?"floor":"ceil"](i/h),o=Math[1<=o?"floor":"ceil"](o/h),s=Math[1<=s?"floor":"ceil"](s/h),d.settings.normalizeOffset&&this.getBoundingClientRect&&(r=this.getBoundingClientRect(),a=e.clientX-r.left,c=e.clientY-r.top),e.deltaX=o,e.deltaY=s,e.deltaFactor=h,e.offsetX=a,e.offsetY=c,e.deltaMode=0,n.unshift(e,i,o,s),u&&clearTimeout(u),u=setTimeout(p,200),(l.event.dispatch||l.event.handle).apply(this,n)}function p(){h=null}function g(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}l.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof r?t.exports=n:n(jQuery)},{}],15:[function(e,r,t){!function(e,t){"use strict";"object"==typeof r&&"object"==typeof r.exports?r.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:this,function(_,N){"use strict";function y(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function g(e){return null!=e&&e===e.window}var t=[],B=Object.getPrototypeOf,a=t.slice,D=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},U=t.push,q=t.indexOf,F={},H=F.toString,W=F.hasOwnProperty,z=W.toString,V=z.call(Object),m={},x=_.document,K={type:!0,src:!0,nonce:!0,noModule:!0};function G(e,t,r){var n,i,o=(r=r||x).createElement("script");if(o.text=e,t)for(n in K)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&o.setAttribute(n,i);r.head.appendChild(o).parentNode.removeChild(o)}function p(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?F[H.call(e)]||"object":typeof e}var S=function(e,t){return new S.fn.init(e,t)};function Y(e){var t=!!e&&"length"in e&&e.length,r=p(e);return!y(e)&&!g(e)&&("array"===r||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:"3.6.4",constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=S.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return S.each(this,e)},map:function(r){return this.pushStack(S.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:U,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,r,n,i,o=arguments[0]||{},s=1,a=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||y(o)||(o={}),s===a&&(o=this,s--);s<a;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(c&&r&&(S.isPlainObject(r)||(n=Array.isArray(r)))?(i=o[t],i=n&&!Array.isArray(i)?[]:n||S.isPlainObject(i)?i:{},n=!1,o[t]=S.extend(c,i,r)):void 0!==r&&(o[t]=r));return o},S.extend({expando:"jQuery"+("3.6.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==H.call(e)||(e=B(e))&&("function"!=typeof(e=W.call(e,"constructor")&&e.constructor)||z.call(e)!==V))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,r){G(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,n=0;if(Y(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(Y(Object(e))?S.merge(t,"string"==typeof e?[e]:e):U.call(t,e)),t},inArray:function(e,t,r){return null==t?-1:q.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,o=e.length,s=!r;i<o;i++)!t(e[i],i)!=s&&n.push(e[i]);return n},map:function(e,t,r){var n,i,o=0,s=[];if(Y(e))for(n=e.length;o<n;o++)null!=(i=t(e[o],o,r))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&s.push(i);return D(s)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){F["[object "+t+"]"]=t.toLowerCase()});function n(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(r))break;n.push(e)}return n}function Q(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}var e=function(N){function h(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function B(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function D(){x()}var e,f,w,o,U,d,q,F,_,c,l,x,S,r,E,p,n,i,g,k="sizzle"+ +new Date,u=N.document,C=0,H=0,W=O(),z=O(),V=O(),m=O(),K=function(e,t){return e===t&&(l=!0),0},G={}.hasOwnProperty,t=[],Y=t.pop,Q=t.push,A=t.push,$=t.slice,y=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},X="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",s="[\\x20\\t\\r\\n\\f]",a="(?:\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",J="\\["+s+"*("+a+")(?:"+s+"*([*^$|!~]?=)"+s+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+a+"))|)"+s+"*\\]",Z=":("+a+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+J+")*)|.*)\\)|)",ee=new RegExp(s+"+","g"),b=new RegExp("^"+s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+s+"+$","g"),te=new RegExp("^"+s+"*,"+s+"*"),re=new RegExp("^"+s+"*([>+~]|"+s+")"+s+"*"),ne=new RegExp(s+"|>"),ie=new RegExp(Z),oe=new RegExp("^"+a+"$"),v={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a+"|[*])"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+Z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+s+"*(even|odd|(([+-]|)(\\d*)n|)"+s+"*(?:([+-]|)"+s+"*(\\d+)|))"+s+"*\\)|)","i"),bool:new RegExp("^(?:"+X+")$","i"),needsContext:new RegExp("^"+s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+s+"*((?:-\\d)?\\d*)"+s+"*\\)|)(?=[^-]|$)","i")},se=/HTML$/i,ae=/^(?:input|select|textarea|button)$/i,ce=/^h\d$/i,T=/^[^{]+\{\s*\[native \w/,le=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ue=/[+~]/,I=new RegExp("\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\([^\\r\\n\\f])","g"),he=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fe=ye(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{A.apply(t=$.call(u.childNodes),u.childNodes),t[u.childNodes.length].nodeType}catch(e){A={apply:t.length?function(e,t){Q.apply(e,$.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function P(t,e,r,n){var i,o,s,a,c,l,u=e&&e.ownerDocument,h=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==h&&9!==h&&11!==h)return r;if(!n&&(x(e),e=e||S,E)){if(11!==h&&(a=le.exec(t)))if(i=a[1]){if(9===h){if(!(l=e.getElementById(i)))return r;if(l.id===i)return r.push(l),r}else if(u&&(l=u.getElementById(i))&&g(e,l)&&l.id===i)return r.push(l),r}else{if(a[2])return A.apply(r,e.getElementsByTagName(t)),r;if((i=a[3])&&f.getElementsByClassName&&e.getElementsByClassName)return A.apply(r,e.getElementsByClassName(i)),r}if(f.qsa&&!m[t+" "]&&(!p||!p.test(t))&&(1!==h||"object"!==e.nodeName.toLowerCase())){if(l=t,u=e,1===h&&(ne.test(t)||re.test(t))){for((u=ue.test(t)&&me(e.parentNode)||e)===e&&f.scope||((s=e.getAttribute("id"))?s=s.replace(he,B):e.setAttribute("id",s=k)),o=(c=d(t)).length;o--;)c[o]=(s?"#"+s:":scope")+" "+L(c[o]);l=c.join(",")}try{return A.apply(r,u.querySelectorAll(l)),r}catch(e){m(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return F(t.replace(b,"$1"),e,r,n)}function O(){var r=[];function n(e,t){return r.push(e+" ")>w.cacheLength&&delete n[r.shift()],n[e+" "]=t}return n}function R(e){return e[k]=!0,e}function M(e){var t=S.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function de(e,t){for(var r=e.split("|"),n=r.length;n--;)w.attrHandle[r[n]]=t}function pe(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&fe(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function j(s){return R(function(o){return o=+o,R(function(e,t){for(var r,n=s([],e.length,o),i=n.length;i--;)e[r=n[i]]&&(e[r]=!(t[r]=e[r]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=P.support={},U=P.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!se.test(t||e&&e.nodeName||"HTML")},x=P.setDocument=function(e){var e=e?e.ownerDocument||e:u;return e!=S&&9===e.nodeType&&e.documentElement&&(r=(S=e).documentElement,E=!U(S),u!=S&&(e=S.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",D,!1):e.attachEvent&&e.attachEvent("onunload",D)),f.scope=M(function(e){return r.appendChild(e).appendChild(S.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),f.cssHas=M(function(){try{S.querySelector(":has(*,:jqfake)")}catch(e){return 1}}),f.attributes=M(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=M(function(e){return e.appendChild(S.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=T.test(S.getElementsByClassName),f.getById=M(function(e){return r.appendChild(e).id=k,!S.getElementsByName||!S.getElementsByName(k).length}),f.getById?(w.filter.ID=function(e){var t=e.replace(I,h);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&E)return(t=t.getElementById(e))?[t]:[]}):(w.filter.ID=function(e){var t=e.replace(I,h);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&E){var r,n,i,o=t.getElementById(e);if(o){if((r=o.getAttributeNode("id"))&&r.value===e)return[o];for(i=t.getElementsByName(e),n=0;o=i[n++];)if((r=o.getAttributeNode("id"))&&r.value===e)return[o]}return[]}}),w.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;r=o[i++];)1===r.nodeType&&n.push(r);return n},w.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&E)return t.getElementsByClassName(e)},n=[],p=[],(f.qsa=T.test(S.querySelectorAll))&&(M(function(e){var t;r.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&p.push("[*^$]="+s+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||p.push("\\["+s+"*(?:value|"+X+")"),e.querySelectorAll("[id~="+k+"-]").length||p.push("~="),(t=S.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||p.push("\\["+s+"*name"+s+"*="+s+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||p.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||p.push(".#.+[+~]"),e.querySelectorAll("\\\f"),p.push("[\\r\\n\\f]")}),M(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=S.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&p.push("name"+s+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&p.push(":enabled",":disabled"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),p.push(",.*:")})),(f.matchesSelector=T.test(i=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&M(function(e){f.disconnectedMatch=i.call(e,"*"),i.call(e,"[s!='']:x"),n.push("!=",Z)}),f.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),n=n.length&&new RegExp(n.join("|")),e=T.test(r.compareDocumentPosition),g=e||T.test(r.contains)?function(e,t){var r=9===e.nodeType&&e.documentElement||e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(r.contains?r.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=e?function(e,t){var r;return e===t?(l=!0,0):(r=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===r?e==S||e.ownerDocument==u&&g(u,e)?-1:t==S||t.ownerDocument==u&&g(u,t)?1:c?y(c,e)-y(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return l=!0,0;var r,n=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e==S?-1:t==S?1:i?-1:o?1:c?y(c,e)-y(c,t):0;if(i===o)return pe(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;s[n]===a[n];)n++;return n?pe(s[n],a[n]):s[n]==u?-1:a[n]==u?1:0}),S},P.matches=function(e,t){return P(e,null,null,t)},P.matchesSelector=function(e,t){if(x(e),f.matchesSelector&&E&&!m[t+" "]&&(!n||!n.test(t))&&(!p||!p.test(t)))try{var r=i.call(e,t);if(r||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){m(t,!0)}return 0<P(t,S,null,[e]).length},P.contains=function(e,t){return(e.ownerDocument||e)!=S&&x(e),g(e,t)},P.attr=function(e,t){(e.ownerDocument||e)!=S&&x(e);var r=w.attrHandle[t.toLowerCase()],r=r&&G.call(w.attrHandle,t.toLowerCase())?r(e,t,!E):void 0;return void 0!==r?r:f.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},P.escape=function(e){return(e+"").replace(he,B)},P.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},P.uniqueSort=function(e){var t,r=[],n=0,i=0;if(l=!f.detectDuplicates,c=!f.sortStable&&e.slice(0),e.sort(K),l){for(;t=e[i++];)t===e[i]&&(n=r.push(i));for(;n--;)e.splice(r[n],1)}return c=null,e},o=P.getText=function(e){var t,r="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)r+=o(t);return r},(w=P.selectors={cacheLength:50,createPseudo:R,match:v,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(I,h),e[3]=(e[3]||e[4]||e[5]||"").replace(I,h),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||P.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&P.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return v.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&ie.test(r)&&(t=(t=d(r,!0))&&r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(I,h).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+s+")"+e+"("+s+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,r,n){return function(e){e=P.attr(e,t);return null==e?"!="===r:!r||(e+="","="===r?e===n:"!="===r?e!==n:"^="===r?n&&0===e.indexOf(n):"*="===r?n&&-1<e.indexOf(n):"$="===r?n&&e.slice(-n.length)===n:"~="===r?-1<(" "+e.replace(ee," ")+" ").indexOf(n):"|="===r&&(e===n||e.slice(0,n.length+1)===n+"-"))}},CHILD:function(p,e,t,g,m){var b="nth"!==p.slice(0,3),y="last"!==p.slice(-4),v="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,r){var n,i,o,s,a,c,l=b!=y?"nextSibling":"previousSibling",u=e.parentNode,h=v&&e.nodeName.toLowerCase(),f=!r&&!v,d=!1;if(u){if(b){for(;l;){for(s=e;s=s[l];)if(v?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;c=l="only"===p&&!c&&"nextSibling"}return!0}if(c=[y?u.firstChild:u.lastChild],y&&f){for(d=(a=(n=(i=(o=(s=u)[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===C&&n[1])&&n[2],s=a&&u.childNodes[a];s=++a&&s&&s[l]||(d=a=0,c.pop());)if(1===s.nodeType&&++d&&s===e){i[p]=[C,a,d];break}}else if(!1===(d=f?a=(n=(i=(o=(s=e)[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===C&&n[1]:d))for(;(s=++a&&s&&s[l]||(d=a=0,c.pop()))&&((v?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++d||(f&&((i=(o=s[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]=[C,d]),s!==e)););return(d-=m)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||P.error("unsupported pseudo: "+e);return s[k]?s(o):1<s.length?(t=[e,e,"",o],w.setFilters.hasOwnProperty(e.toLowerCase())?R(function(e,t){for(var r,n=s(e,o),i=n.length;i--;)e[r=y(e,n[i])]=!(t[r]=n[i])}):function(e){return s(e,0,t)}):s}},pseudos:{not:R(function(e){var n=[],i=[],a=q(e.replace(b,"$1"));return a[k]?R(function(e,t,r,n){for(var i,o=a(e,null,n,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,t,r){return n[0]=e,a(n,null,r,i),n[0]=null,!i.pop()}}),has:R(function(t){return function(e){return 0<P(t,e).length}}),contains:R(function(t){return t=t.replace(I,h),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:R(function(r){return oe.test(r||"")||P.error("unsupported lang: "+r),r=r.replace(I,h).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===r||0===t.indexOf(r+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=N.location&&N.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return ce.test(e.nodeName)},input:function(e){return ae.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:j(function(){return[0]}),last:j(function(e,t){return[t-1]}),eq:j(function(e,t,r){return[r<0?r+t:r]}),even:j(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:j(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:j(function(e,t,r){for(var n=r<0?r+t:t<r?t:r;0<=--n;)e.push(n);return e}),gt:j(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})w.pseudos[e]=function(r){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===r}}(e);function be(){}function L(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function ye(s,e,t){var a=e.dir,c=e.next,l=c||a,u=t&&"parentNode"===l,h=H++;return e.first?function(e,t,r){for(;e=e[a];)if(1===e.nodeType||u)return s(e,t,r);return!1}:function(e,t,r){var n,i,o=[C,h];if(r){for(;e=e[a];)if((1===e.nodeType||u)&&s(e,t,r))return!0}else for(;e=e[a];)if(1===e.nodeType||u)if(i=(i=e[k]||(e[k]={}))[e.uniqueID]||(i[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[a]||e;else{if((n=i[l])&&n[0]===C&&n[1]===h)return o[2]=n[2];if((i[l]=o)[2]=s(e,t,r))return!0}return!1}}function ve(i){return 1<i.length?function(e,t,r){for(var n=i.length;n--;)if(!i[n](e,t,r))return!1;return!0}:i[0]}function we(e,t,r,n,i){for(var o,s=[],a=0,c=e.length,l=null!=t;a<c;a++)!(o=e[a])||r&&!r(o,n,i)||(s.push(o),l&&t.push(a));return s}function _e(d,p,g,m,b,e){return m&&!m[k]&&(m=_e(m)),b&&!b[k]&&(b=_e(b,e)),R(function(e,t,r,n){var i,o,s,a=[],c=[],l=t.length,u=e||function(e,t,r){for(var n=0,i=t.length;n<i;n++)P(e,t[n],r);return r}(p||"*",r.nodeType?[r]:r,[]),h=!d||!e&&p?u:we(u,a,d,r,n),f=g?b||(e?d:l||m)?[]:t:h;if(g&&g(h,f,r,n),m)for(i=we(f,c),m(i,[],r,n),o=i.length;o--;)(s=i[o])&&(f[c[o]]=!(h[c[o]]=s));if(e){if(b||d){if(b){for(i=[],o=f.length;o--;)(s=f[o])&&i.push(h[o]=s);b(null,f=[],i,n)}for(o=f.length;o--;)(s=f[o])&&-1<(i=b?y(e,s):a[o])&&(e[i]=!(t[i]=s))}}else f=we(f===t?f.splice(l,f.length):f),b?b(null,t,f,n):A.apply(t,f)})}function xe(m,b){function e(e,t,r,n,i){var o,s,a,c=0,l="0",u=e&&[],h=[],f=_,d=e||v&&w.find.TAG("*",i),p=C+=null==f?1:Math.random()||.1,g=d.length;for(i&&(_=t==S||t||i);l!==g&&null!=(o=d[l]);l++){if(v&&o){for(s=0,t||o.ownerDocument==S||(x(o),r=!E);a=m[s++];)if(a(o,t||S,r)){n.push(o);break}i&&(C=p)}y&&((o=!a&&o)&&c--,e)&&u.push(o)}if(c+=l,y&&l!==c){for(s=0;a=b[s++];)a(u,h,t,r);if(e){if(0<c)for(;l--;)u[l]||h[l]||(h[l]=Y.call(n));h=we(h)}A.apply(n,h),i&&!e&&0<h.length&&1<c+b.length&&P.uniqueSort(n)}return i&&(C=p,_=f),u}var y=0<b.length,v=0<m.length;return y?R(e):e}return be.prototype=w.filters=w.pseudos,w.setFilters=new be,d=P.tokenize=function(e,t){var r,n,i,o,s,a,c,l=z[e+" "];if(l)return t?0:l.slice(0);for(s=e,a=[],c=w.preFilter;s;){for(o in r&&!(n=te.exec(s))||(n&&(s=s.slice(n[0].length)||s),a.push(i=[])),r=!1,(n=re.exec(s))&&(r=n.shift(),i.push({value:r,type:n[0].replace(b," ")}),s=s.slice(r.length)),w.filter)!(n=v[o].exec(s))||c[o]&&!(n=c[o](n))||(r=n.shift(),i.push({value:r,type:o,matches:n}),s=s.slice(r.length));if(!r)break}return t?s.length:s?P.error(e):z(e,a).slice(0)},q=P.compile=function(e,t){var r,n=[],i=[],o=V[e+" "];if(!o){for(r=(t=t||d(e)).length;r--;)((o=function e(t){for(var n,r,i,o=t.length,s=w.relative[t[0].type],a=s||w.relative[" "],c=s?1:0,l=ye(function(e){return e===n},a,!0),u=ye(function(e){return-1<y(n,e)},a,!0),h=[function(e,t,r){return e=!s&&(r||t!==_)||((n=t).nodeType?l:u)(e,t,r),n=null,e}];c<o;c++)if(r=w.relative[t[c].type])h=[ye(ve(h),r)];else{if((r=w.filter[t[c].type].apply(null,t[c].matches))[k]){for(i=++c;i<o&&!w.relative[t[i].type];i++);return _e(1<c&&ve(h),1<c&&L(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(b,"$1"),r,c<i&&e(t.slice(c,i)),i<o&&e(t=t.slice(i)),i<o&&L(t))}h.push(r)}return ve(h)}(t[r]))[k]?n:i).push(o);(o=V(e,xe(i,n))).selector=e}return o},F=P.select=function(e,t,r,n){var i,o,s,a,c,l="function"==typeof e&&e,u=!n&&d(e=l.selector||e);if(r=r||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===t.nodeType&&E&&w.relative[o[1].type]){if(!(t=(w.find.ID(s.matches[0].replace(I,h),t)||[])[0]))return r;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=v.needsContext.test(e)?0:o.length;i--&&(s=o[i],!w.relative[a=s.type]);)if((c=w.find[a])&&(n=c(s.matches[0].replace(I,h),ue.test(o[0].type)&&me(t.parentNode)||t))){if(o.splice(i,1),e=n.length&&L(o))break;return A.apply(r,n),r}}return(l||q(e,u))(n,t,!E,r,!t||ue.test(e)&&me(t.parentNode)||t),r},f.sortStable=k.split("").sort(K).join("")===k,f.detectDuplicates=!!l,x(),f.sortDetached=M(function(e){return 1&e.compareDocumentPosition(S.createElement("fieldset"))}),M(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&M(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),M(function(e){return null==e.getAttribute("disabled")})||de(X,function(e,t,r){if(!r)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),P}(_),$=(S.find=e,S.expr=e.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=e.uniqueSort,S.text=e.getText,S.isXMLDoc=e.isXML,S.contains=e.contains,S.escapeSelector=e.escape,S.expr.match.needsContext);function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var X=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function J(e,r,n){return y(r)?S.grep(e,function(e,t){return!!r.call(e,t,e)!==n}):r.nodeType?S.grep(e,function(e){return e===r!==n}):"string"!=typeof r?S.grep(e,function(e){return-1<q.call(r,e)!==n}):S.filter(r,e,n)}S.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<n;t++)if(S.contains(i[t],this))return!0}));for(r=this.pushStack([]),t=0;t<n;t++)S.find(e,i[t],r);return 1<n?S.uniqueSort(r):r},filter:function(e){return this.pushStack(J(this,e||[],!1))},not:function(e){return this.pushStack(J(this,e||[],!0))},is:function(e){return!!J(this,"string"==typeof e&&$.test(e)?S(e):e||[],!1).length}});var Z,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((S.fn.init=function(e,t,r){if(e){if(r=r||Z,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==r.ready?r.ready(e):e(S):S.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!n[1]&&t)return(!t||t.jquery?t||r:this.constructor(t)).find(e);if(n[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:x,!0)),X.test(n[1])&&S.isPlainObject(t))for(var n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n])}else(r=x.getElementById(n[2]))&&(this[0]=r,this.length=1)}return this}).prototype=S.fn,Z=S(x),/^(?:parents|prev(?:Until|All))/),re={children:!0,contents:!0,next:!0,prev:!0};function ne(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var r,n=0,i=this.length,o=[],s="string"!=typeof e&&S(e);if(!$.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?-1<s.index(r):1===r.nodeType&&S.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?q.call(S(e),this[0]):q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return n(e,"parentNode")},parentsUntil:function(e,t,r){return n(e,"parentNode",r)},next:function(e){return ne(e,"nextSibling")},prev:function(e){return ne(e,"previousSibling")},nextAll:function(e){return n(e,"nextSibling")},prevAll:function(e){return n(e,"previousSibling")},nextUntil:function(e,t,r){return n(e,"nextSibling",r)},prevUntil:function(e,t,r){return n(e,"previousSibling",r)},siblings:function(e){return Q((e.parentNode||{}).firstChild,e)},children:function(e){return Q(e.firstChild)},contents:function(e){return null!=e.contentDocument&&B(e.contentDocument)?e.contentDocument:(c(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(n,i){S.fn[n]=function(e,t){var r=S.map(this,i,e);return(t="Until"!==n.slice(-5)?e:t)&&"string"==typeof t&&(r=S.filter(t,r)),1<this.length&&(re[n]||S.uniqueSort(r),te.test(n))&&r.reverse(),this.pushStack(r)}});var E=/[^\x20\t\r\n\f]+/g;function u(e){return e}function ie(e){throw e}function oe(e,t,r,n){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(r):e&&y(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}S.Callbacks=function(n){var e,r;n="string"==typeof n?(e=n,r={},S.each(e.match(E)||[],function(e,t){r[t]=!0}),r):S.extend({},n);function i(){for(a=a||n.once,s=o=!0;l.length;u=-1)for(t=l.shift();++u<c.length;)!1===c[u].apply(t[0],t[1])&&n.stopOnFalse&&(u=c.length,t=!1);n.memory||(t=!1),o=!1,a&&(c=t?[]:"")}var o,t,s,a,c=[],l=[],u=-1,h={add:function(){return c&&(t&&!o&&(u=c.length-1,l.push(t)),function r(e){S.each(e,function(e,t){y(t)?n.unique&&h.has(t)||c.push(t):t&&t.length&&"string"!==p(t)&&r(t)})}(arguments),t)&&!o&&i(),this},remove:function(){return S.each(arguments,function(e,t){for(var r;-1<(r=S.inArray(t,c,r));)c.splice(r,1),r<=u&&u--}),this},has:function(e){return e?-1<S.inArray(e,c):0<c.length},empty:function(){return c=c&&[],this},disable:function(){return a=l=[],c=t="",this},disabled:function(){return!c},lock:function(){return a=l=[],t||o||(c=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),o)||i(),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(n){S.each(o,function(e,t){var r=y(i[t[4]])&&i[t[4]];a[t[1]](function(){var e=r&&r.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,r?[e]:arguments)})}),i=null}).promise()},then:function(t,r,n){var c=0;function l(i,o,s,a){return function(){function e(){var e,t;if(!(i<c)){if((e=s.apply(r,n))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?a?t.call(e,l(c,o,u,a),l(c,o,ie,a)):(c++,t.call(e,l(c,o,u,a),l(c,o,ie,a),l(c,o,u,o.notifyWith))):(s!==u&&(r=void 0,n=[e]),(a||o.resolveWith)(r,n))}}var r=this,n=arguments,t=a?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),c<=i+1&&(s!==ie&&(r=void 0,n=[e]),o.rejectWith(r,n))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),_.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,y(n)?n:u,e.notifyWith)),o[1][3].add(l(0,e,y(t)?t:u)),o[2][3].add(l(0,e,y(r)?r:ie))}).promise()},promise:function(e){return null!=e?S.extend(e,s):s}},a={};return S.each(o,function(e,t){var r=t[2],n=t[5];s[t[1]]=r.add,n&&r.add(function(){i=n},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),r.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=r.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){function t(t){return function(e){i[t]=this,o[t]=1<arguments.length?a.call(arguments):e,--r||s.resolveWith(i,o)}}var r=arguments.length,n=r,i=Array(n),o=a.call(arguments),s=S.Deferred();if(r<=1&&(oe(e,s.done(t(n)).resolve,s.reject,!r),"pending"===s.state()||y(o[n]&&o[n].then)))return s.then();for(;n--;)oe(o[n],t(n),s.reject);return s.promise()}});var se=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,ae=(S.Deferred.exceptionHook=function(e,t){_.console&&_.console.warn&&e&&se.test(e.name)&&_.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){_.setTimeout(function(){throw e})},S.Deferred());function ce(){x.removeEventListener("DOMContentLoaded",ce),_.removeEventListener("load",ce),S.ready()}S.fn.ready=function(e){return ae.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||ae.resolveWith(x,[S])}}),S.ready.then=ae.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?_.setTimeout(S.ready):(x.addEventListener("DOMContentLoaded",ce),_.addEventListener("load",ce));function h(e,t,r,n,i,o,s){var a=0,c=e.length,l=null==r;if("object"===p(r))for(a in i=!0,r)h(e,t,a,r[a],!0,o,s);else if(void 0!==n&&(i=!0,y(n)||(s=!0),t=l?s?(t.call(e,n),null):(l=t,function(e,t,r){return l.call(S(e),r)}):t))for(;a<c;a++)t(e[a],r,s?n:n.call(e[a],a,t(e[a],r)));return i?e:l?t.call(e):c?t(e[0],r):o}var le=/^-ms-/,ue=/-([a-z])/g;function he(e,t){return t.toUpperCase()}function v(e){return e.replace(le,"ms-").replace(ue,he)}function b(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function fe(){this.expando=S.expando+fe.uid++}fe.uid=1,fe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},b(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[v(t)]=r;else for(n in t)i[v(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][v(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map(v):(t=v(t))in n?[t]:t.match(E)||[]).length;for(;r--;)delete n[t[r]]}void 0!==t&&!S.isEmptyObject(n)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var w=new fe,l=new fe,de=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,pe=/[A-Z]/g;function ge(e,t,r){var n,i;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(pe,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r="true"===(i=r)||"false"!==i&&("null"===i?null:i===+i+""?+i:de.test(i)?JSON.parse(i):i)}catch(e){}l.set(e,t,r)}else r=void 0;return r}S.extend({hasData:function(e){return l.hasData(e)||w.hasData(e)},data:function(e,t,r){return l.access(e,t,r)},removeData:function(e,t){l.remove(e,t)},_data:function(e,t,r){return w.access(e,t,r)},_removeData:function(e,t){w.remove(e,t)}}),S.fn.extend({data:function(r,e){var t,n,i,o=this[0],s=o&&o.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){l.set(this,r)}):h(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=l.get(o,r))||void 0!==(t=ge(o,r))?t:void 0;this.each(function(){l.set(this,r,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=l.get(o),1===o.nodeType)&&!w.get(o,"hasDataAttrs")){for(t=s.length;t--;)s[t]&&0===(n=s[t].name).indexOf("data-")&&(n=v(n.slice(5)),ge(o,n,i[n]));w.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){l.remove(this,e)})}}),S.extend({queue:function(e,t,r){var n;if(e)return n=w.get(e,t=(t||"fx")+"queue"),r&&(!n||Array.isArray(r)?n=w.access(e,t,S.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=S.queue(e,t),n=r.length,i=r.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return w.get(e,r)||w.access(e,r,{empty:S.Callbacks("once memory").add(function(){w.remove(e,[t+"queue",r])})})}}),S.fn.extend({queue:function(t,r){var e=2;return"string"!=typeof t&&(r=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===r?this:this.each(function(){var e=S.queue(this,t,r);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function r(){--i||o.resolveWith(s,[s])}var n,i=1,o=S.Deferred(),s=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=w.get(s[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(r));return r(),o.promise(t)}});function me(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&C(e)&&"none"===S.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,be=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),f=["Top","Right","Bottom","Left"],k=x.documentElement,C=function(e){return S.contains(e.ownerDocument,e)},ye={composed:!0};k.getRootNode&&(C=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});function ve(e,t,r,n){var i,o,s=20,a=n?function(){return n.cur()}:function(){return S.css(e,t,"")},c=a(),l=r&&r[3]||(S.cssNumber[t]?"":"px"),u=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+c)&&be.exec(S.css(e,t));if(u&&u[3]!==l){for(l=l||u[3],u=+(c/=2)||1;s--;)S.style(e,t,u+l),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),u/=o;S.style(e,t,(u*=2)+l),r=r||[]}return r&&(u=+u||+c||0,i=r[1]?u+(r[1]+1)*r[2]:+r[2],n)&&(n.unit=l,n.start=u,n.end=i),i}var we={};function A(e,t){for(var r,n,i,o,s,a=[],c=0,l=e.length;c<l;c++)(n=e[c]).style&&(r=n.style.display,t?("none"===r&&(a[c]=w.get(n,"display")||null,a[c]||(n.style.display="")),""===n.style.display&&me(n)&&(a[c]=(s=o=void 0,o=(i=n).ownerDocument,i=i.nodeName,(s=we[i])||(o=o.body.appendChild(o.createElement(i)),s=S.css(o,"display"),o.parentNode.removeChild(o),we[i]=s="none"===s?"block":s),s))):"none"!==r&&(a[c]="none",w.set(n,"display",r)));for(c=0;c<l;c++)null!=a[c]&&(e[c].style.display=a[c]);return e}S.fn.extend({show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){me(this)?S(this).show():S(this).hide()})}});var _e=/^(?:checkbox|radio)$/i,xe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Se=/^$|^module$|\/(?:java|ecma)script/i,T=(R=x.createDocumentFragment().appendChild(x.createElement("div")),(o=x.createElement("input")).setAttribute("type","radio"),o.setAttribute("checked","checked"),o.setAttribute("name","t"),R.appendChild(o),m.checkClone=R.cloneNode(!0).cloneNode(!0).lastChild.checked,R.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!R.cloneNode(!0).lastChild.defaultValue,R.innerHTML="<option></option>",m.option=!!R.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function I(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&c(e,t)?S.merge([e],r):r}function Ee(e,t){for(var r=0,n=e.length;r<n;r++)w.set(e[r],"globalEval",!t||w.get(t[r],"globalEval"))}T.tbody=T.tfoot=T.colgroup=T.caption=T.thead,T.th=T.td,m.option||(T.optgroup=T.option=[1,"<select multiple='multiple'>","</select>"]);var ke=/<|&#?\w+;/;function Ce(e,t,r,n,i){for(var o,s,a,c,l,u=t.createDocumentFragment(),h=[],f=0,d=e.length;f<d;f++)if((o=e[f])||0===o)if("object"===p(o))S.merge(h,o.nodeType?[o]:o);else if(ke.test(o)){for(s=s||u.appendChild(t.createElement("div")),a=(xe.exec(o)||["",""])[1].toLowerCase(),a=T[a]||T._default,s.innerHTML=a[1]+S.htmlPrefilter(o)+a[2],l=a[0];l--;)s=s.lastChild;S.merge(h,s.childNodes),(s=u.firstChild).textContent=""}else h.push(t.createTextNode(o));for(u.textContent="",f=0;o=h[f++];)if(n&&-1<S.inArray(o,n))i&&i.push(o);else if(c=C(o),s=I(u.appendChild(o),"script"),c&&Ee(s),r)for(l=0;o=s[l++];)Se.test(o.type||"")&&r.push(o);return u}var Ae=/^([^.]*)(?:\.(.+)|)/;function r(){return!0}function d(){return!1}function Te(e,t){return e===function(){try{return x.activeElement}catch(e){}}()==("focus"===t)}function Ie(e,t,r,n,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof r&&(n=n||r,r=void 0),t)Ie(e,a,r,n,t[a],o);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=d;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return S().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,n,r)})}function Pe(e,i,o){o?(w.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,r,n=w.get(this,i);if(1&e.isTrigger&&this[i]){if(n.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(n=a.call(arguments),w.set(this,i,n),t=o(this,i),this[i](),n!==(r=w.get(this,i))||t?w.set(this,i,!1):r={},n!==r)return e.stopImmediatePropagation(),e.preventDefault(),r&&r.value}else n.length&&(w.set(this,i,{value:S.event.trigger(S.extend(n[0],S.Event.prototype),n.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===w.get(e,i)&&S.event.add(e,i,r)}S.event={global:{},add:function(t,e,r,n,i){var o,s,a,c,l,u,h,f,d,p=w.get(t);if(b(t))for(r.handler&&(r=(o=r).handler,i=o.selector),i&&S.find.matchesSelector(k,i),r.guid||(r.guid=S.guid++),a=(a=p.events)||(p.events=Object.create(null)),s=(s=p.handle)||(p.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(E)||[""]).length;c--;)h=d=(f=Ae.exec(e[c])||[])[1],f=(f[2]||"").split(".").sort(),h&&(l=S.event.special[h]||{},h=(i?l.delegateType:l.bindType)||h,l=S.event.special[h]||{},d=S.extend({type:h,origType:d,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:f.join(".")},o),(u=a[h])||((u=a[h]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(t,n,f,s))||t.addEventListener&&t.addEventListener(h,s),l.add&&(l.add.call(t,d),d.handler.guid||(d.handler.guid=r.guid)),i?u.splice(u.delegateCount++,0,d):u.push(d),S.event.global[h]=!0)},remove:function(e,t,r,n,i){var o,s,a,c,l,u,h,f,d,p,g,m=w.hasData(e)&&w.get(e);if(m&&(c=m.events)){for(l=(t=(t||"").match(E)||[""]).length;l--;)if(d=g=(a=Ae.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),d){for(h=S.event.special[d]||{},f=c[d=(n?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)u=f[o],!i&&g!==u.origType||r&&r.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,h.remove&&h.remove.call(e,u));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||S.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)S.event.remove(e,d+t[l],r,n,!0);S.isEmptyObject(c)&&w.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,o,s=new Array(arguments.length),a=S.event.fix(e),e=(w.get(this,"events")||Object.create(null))[a.type]||[],c=S.event.special[a.type]||{};for(s[0]=a,t=1;t<arguments.length;t++)s[t]=arguments[t];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(o=S.event.handlers.call(this,a,e),t=0;(n=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=n.elem,r=0;(i=n.handlers[r++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==i.namespace&&!a.rnamespace.test(i.namespace)||(a.handleObj=i,a.data=i.data,void 0!==(i=((S.event.special[i.origType]||{}).handle||i.handler).apply(n.elem,s))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(e,t){var r,n,i,o,s,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],s={},r=0;r<c;r++)void 0===s[i=(n=t[r]).selector+" "]&&(s[i]=n.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),s[i]&&o.push(n);o.length&&a.push({elem:l,handlers:o})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return _e.test(e.type)&&e.click&&c(e,"input")&&Pe(e,"click",r),!1},trigger:function(e){e=this||e;return _e.test(e.type)&&e.click&&c(e,"input")&&Pe(e,"click"),!0},_default:function(e){e=e.target;return _e.test(e.type)&&e.click&&c(e,"input")&&w.get(e,"click")||c(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?r:d,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=r,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=r,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=r,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(t,e){S.event.special[t]={setup:function(){return Pe(this,t,Te),!1},trigger:function(){return Pe(this,t),!0},_default:function(e){return w.get(e.target,t)},delegateType:e}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,r=e.relatedTarget,n=e.handleObj;return r&&(r===this||S.contains(this,r))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,r,n){return Ie(this,e,t,r,n)},one:function(e,t,r,n){return Ie(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=d),this.each(function(){S.event.remove(this,e,r,t)});for(i in e)this.off(i,t,e[i])}return this}});var Oe=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function je(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ne(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Be(e,t){var r,n,i,o;if(1===t.nodeType){if(w.hasData(e)&&(o=w.get(e).events))for(i in w.remove(t,"handle events"),o)for(r=0,n=o[i].length;r<n;r++)S.event.add(t,i,o[i][r]);l.hasData(e)&&(e=l.access(e),e=S.extend({},e),l.set(t,e))}}function P(r,n,i,o){n=D(n);var e,t,s,a,c,l,u=0,h=r.length,f=h-1,d=n[0],p=y(d);if(p||1<h&&"string"==typeof d&&!m.checkClone&&Re.test(d))return r.each(function(e){var t=r.eq(e);p&&(n[0]=d.call(this,e,t.html())),P(t,n,i,o)});if(h&&(t=(e=Ce(n,r[0].ownerDocument,!1,r,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=S.map(I(e,"script"),Le)).length;u<h;u++)c=e,u!==f&&(c=S.clone(c,!0,!0),a)&&S.merge(s,I(c,"script")),i.call(r[u],c,u);if(a)for(l=s[s.length-1].ownerDocument,S.map(s,Ne),u=0;u<a;u++)c=s[u],Se.test(c.type||"")&&!w.access(c,"globalEval")&&S.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?S._evalUrl&&!c.noModule&&S._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):G(c.textContent.replace(Me,""),c,l))}return r}function De(e,t,r){for(var n,i=t?S.filter(t,e):e,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||S.cleanData(I(n)),n.parentNode&&(r&&C(n)&&Ee(I(n,"script")),n.parentNode.removeChild(n));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var n,i,o,s,a,c,l,u=e.cloneNode(!0),h=C(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(s=I(u),n=0,i=(o=I(e)).length;n<i;n++)a=o[n],c=s[n],l=void 0,"input"===(l=c.nodeName.toLowerCase())&&_e.test(a.type)?c.checked=a.checked:"input"!==l&&"textarea"!==l||(c.defaultValue=a.defaultValue);if(t)if(r)for(o=o||I(e),s=s||I(u),n=0,i=o.length;n<i;n++)Be(o[n],s[n]);else Be(e,u);return 0<(s=I(u,"script")).length&&Ee(s,!h&&I(e,"script")),u},cleanData:function(e){for(var t,r,n,i=S.event.special,o=0;void 0!==(r=e[o]);o++)if(b(r)){if(t=r[w.expando]){if(t.events)for(n in t.events)i[n]?S.event.remove(r,n):S.removeEvent(r,n,t.handle);r[w.expando]=void 0}r[l.expando]&&(r[l.expando]=void 0)}}}),S.fn.extend({detach:function(e){return De(this,e,!0)},remove:function(e){return De(this,e)},text:function(e){return h(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return P(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return P(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=je(this,e)).insertBefore(e,t.firstChild)})},before:function(){return P(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return P(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(I(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return h(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!T[(xe.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(S.cleanData(I(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var r=[];return P(this,arguments,function(e){var t=this.parentNode;S.inArray(this,r)<0&&(S.cleanData(I(this)),t)&&t.replaceChild(e,this)},r)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){S.fn[e]=function(e){for(var t,r=[],n=S(e),i=n.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(n[o])[s](t),U.apply(r,t.get());return this.pushStack(r)}});function Ue(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:_).getComputedStyle(e)}function qe(e,t,r){var n,i={};for(n in t)i[n]=e.style[n],e.style[n]=t[n];for(n in r=r.call(e),t)e.style[n]=i[n];return r}var Fe,He,We,ze,Ve,Ke,Ge,i,Ye=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Qe=/^--/,$e=new RegExp(f.join("|"),"i"),o="[\\x20\\t\\r\\n\\f]",Xe=new RegExp("^"+o+"+|((?:^|[^\\\\])(?:\\\\.)*)"+o+"+$","g");function Je(){var e;i&&(Ge.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",i.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",k.appendChild(Ge).appendChild(i),e=_.getComputedStyle(i),Fe="1%"!==e.top,Ke=12===Ze(e.marginLeft),i.style.right="60%",ze=36===Ze(e.right),He=36===Ze(e.width),i.style.position="absolute",We=12===Ze(i.offsetWidth/3),k.removeChild(Ge),i=null)}function Ze(e){return Math.round(parseFloat(e))}function et(e,t,r){var n,i=Qe.test(t),o=e.style;return(r=r||Ue(e))&&(n=r.getPropertyValue(t)||r[t],""!==(n=i?n&&(n.replace(Xe,"$1")||void 0):n)||C(e)||(n=S.style(e,t)),!m.pixelBoxStyles())&&Ye.test(n)&&$e.test(t)&&(i=o.width,e=o.minWidth,t=o.maxWidth,o.minWidth=o.maxWidth=o.width=n,n=r.width,o.width=i,o.minWidth=e,o.maxWidth=t),void 0!==n?n+"":n}function tt(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Ge=x.createElement("div"),(i=x.createElement("div")).style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===i.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return Je(),He},pixelBoxStyles:function(){return Je(),ze},pixelPosition:function(){return Je(),Fe},reliableMarginLeft:function(){return Je(),Ke},scrollboxSize:function(){return Je(),We},reliableTrDimensions:function(){var e,t,r;return null==Ve&&(e=x.createElement("table"),t=x.createElement("tr"),r=x.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",k.appendChild(e).appendChild(t).appendChild(r),r=_.getComputedStyle(t),Ve=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,k.removeChild(e)),Ve}}));var rt=["Webkit","Moz","ms"],nt=x.createElement("div").style,it={};function ot(e){var t=S.cssProps[e]||it[e];return t||(e in nt?e:it[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=rt.length;r--;)if((e=rt[r]+t)in nt)return e}(e)||e)}var st=/^(none|table(?!-c[ea]).+)/,at={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"};function lt(e,t,r){var n=be.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function ut(e,t,r,n,i,o){var s="width"===t?1:0,a=0,c=0;if(r===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===r&&(c+=S.css(e,r+f[s],!0,i)),n?("content"===r&&(c-=S.css(e,"padding"+f[s],!0,i)),"margin"!==r&&(c-=S.css(e,"border"+f[s]+"Width",!0,i))):(c+=S.css(e,"padding"+f[s],!0,i),"padding"!==r?c+=S.css(e,"border"+f[s]+"Width",!0,i):a+=S.css(e,"border"+f[s]+"Width",!0,i));return!n&&0<=o&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-a-.5))||0),c}function ht(e,t,r){var n=Ue(e),i=(!m.boxSizingReliable()||r)&&"border-box"===S.css(e,"boxSizing",!1,n),o=i,s=et(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ye.test(s)){if(!r)return s;s="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&c(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,n),o=a in e)&&(s=e[a]),(s=parseFloat(s)||0)+ut(e,t,r||(i?"border":"content"),o,n,s)+"px"}function s(e,t,r,n,i){return new s.prototype.init(e,t,r,n,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=et(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=v(t),c=Qe.test(t),l=e.style;if(c||(t=ot(a)),s=S.cssHooks[t]||S.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(i=s.get(e,!1,n))?i:l[t];"string"===(o=typeof r)&&(i=be.exec(r))&&i[1]&&(r=ve(e,t,i),o="number"),null==r||r!=r||("number"!==o||c||(r+=i&&i[3]||(S.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(r=s.set(e,r,n)))||(c?l.setProperty(t,r):l[t]=r)}},css:function(e,t,r,n){var i,o=v(t);return Qe.test(t)||(t=ot(o)),"normal"===(i=void 0===(i=(o=S.cssHooks[t]||S.cssHooks[o])&&"get"in o?o.get(e,!0,r):i)?et(e,t,n):i)&&t in ct&&(i=ct[t]),(""===r||r)&&(o=parseFloat(i),!0===r||isFinite(o))?o||0:i}}),S.each(["height","width"],function(e,s){S.cssHooks[s]={get:function(e,t,r){if(t)return!st.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ht(e,s,r):qe(e,at,function(){return ht(e,s,r)})},set:function(e,t,r){var n=Ue(e),i=!m.scrollboxSize()&&"absolute"===n.position,o=(i||r)&&"border-box"===S.css(e,"boxSizing",!1,n),r=r?ut(e,s,r,o,n):0;return o&&i&&(r-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(n[s])-ut(e,s,"border",!1,n)-.5)),r&&(o=be.exec(t))&&"px"!==(o[3]||"px")&&(e.style[s]=t,t=S.css(e,s)),lt(0,t,r)}}}),S.cssHooks.marginLeft=tt(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(et(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,r={},n="string"==typeof e?e.split(" "):[e];t<4;t++)r[i+f[t]+o]=n[t]||n[t-2]||n[0];return r}},"margin"!==i&&(S.cssHooks[i+o].set=lt)}),S.fn.extend({css:function(e,t){return h(this,function(e,t,r){var n,i,o={},s=0;if(Array.isArray(t)){for(n=Ue(e),i=t.length;s<i;s++)o[t[s]]=S.css(e,t[s],!1,n);return o}return void 0!==r?S.style(e,t,r):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=s).prototype={constructor:s,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(S.cssNumber[r]?"":"px")},cur:function(){var e=s.propHooks[this.prop];return(e&&e.get?e:s.propHooks._default).get(this)},run:function(e){var t,r=s.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(r&&r.set?r:s.propHooks._default).set(this),this}}).init.prototype=s.prototype,(s.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=S.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ot(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=s.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=s.prototype.init,S.fx.step={};var O,ft,R,dt=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function gt(){ft&&(!1===x.hidden&&_.requestAnimationFrame?_.requestAnimationFrame(gt):_.setTimeout(gt,S.fx.interval),S.fx.tick())}function mt(){return _.setTimeout(function(){O=void 0}),O=Date.now()}function bt(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=f[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function yt(e,t,r){for(var n,i=(M.tweeners[t]||[]).concat(M.tweeners["*"]),o=0,s=i.length;o<s;o++)if(n=i[o].call(r,t,e))return n}function M(i,e,t){var r,o,n,s,a,c,l,u=0,h=M.prefilters.length,f=S.Deferred().always(function(){delete d.elem}),d=function(){if(!o){for(var e=O||mt(),e=Math.max(0,p.startTime+p.duration-e),t=1-(e/p.duration||0),r=0,n=p.tweens.length;r<n;r++)p.tweens[r].run(t);if(f.notifyWith(i,[p,t,e]),t<1&&n)return e;n||f.notifyWith(i,[p,1,0]),f.resolveWith(i,[p])}return!1},p=f.promise({elem:i,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:O||mt(),duration:t.duration,tweens:[],createTween:function(e,t){t=S.Tween(i,p.opts,e,t,p.opts.specialEasing[e]||p.opts.easing);return p.tweens.push(t),t},stop:function(e){var t=0,r=e?p.tweens.length:0;if(!o){for(o=!0;t<r;t++)p.tweens[t].run(1);e?(f.notifyWith(i,[p,1,0]),f.resolveWith(i,[p,e])):f.rejectWith(i,[p,e])}return this}}),g=p.props,m=g,b=p.opts.specialEasing;for(n in m)if(a=b[s=v(n)],c=m[n],Array.isArray(c)&&(a=c[1],c=m[n]=c[0]),n!==s&&(m[s]=c,delete m[n]),(l=S.cssHooks[s])&&"expand"in l)for(n in c=l.expand(c),delete m[s],c)n in m||(m[n]=c[n],b[n]=a);else b[s]=a;for(;u<h;u++)if(r=M.prefilters[u].call(p,i,g,p.opts))return y(r.stop)&&(S._queueHooks(p.elem,p.opts.queue).stop=r.stop.bind(r)),r;return S.map(g,yt,p),y(p.opts.start)&&p.opts.start.call(i,p),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always),S.fx.timer(S.extend(d,{elem:i,anim:p,queue:p.opts.queue})),p}S.Animation=S.extend(M,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return ve(r.elem,e,be.exec(t),r),r}]},tweener:function(e,t){for(var r,n=0,i=(e=y(e)?(t=e,["*"]):e.match(E)).length;n<i;n++)r=e[n],M.tweeners[r]=M.tweeners[r]||[],M.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,o,s,a,c,l,u="width"in t||"height"in t,h=this,f={},d=e.style,p=e.nodeType&&me(e),g=w.get(e,"fxshow");for(n in r.queue||(null==(s=S._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,S.queue(e,"fx").length||s.empty.fire()})})),t)if(i=t[n],dt.test(i)){if(delete t[n],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;p=!0}f[n]=g&&g[n]||S.style(e,n)}if((c=!S.isEmptyObject(t))||!S.isEmptyObject(f))for(n in u&&1===e.nodeType&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],null==(l=g&&g.display)&&(l=w.get(e,"display")),"none"===(u=S.css(e,"display"))&&(l?u=l:(A([e],!0),l=e.style.display||l,u=S.css(e,"display"),A([e]))),"inline"===u||"inline-block"===u&&null!=l)&&"none"===S.css(e,"float")&&(c||(h.done(function(){d.display=l}),null==l&&(u=d.display,l="none"===u?"":u)),d.display="inline-block"),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]})),c=!1,f)c||(g?"hidden"in g&&(p=g.hidden):g=w.access(e,"fxshow",{display:l}),o&&(g.hidden=!p),p&&A([e],!0),h.done(function(){for(n in p||A([e]),w.remove(e,"fxshow"),f)S.style(e,n,f[n])})),c=yt(p?g[n]:0,n,h),n in g||(g[n]=c.start,p&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?M.prefilters.unshift(e):M.prefilters.push(e)}}),S.speed=function(e,t,r){var n=e&&"object"==typeof e?S.extend({},e):{complete:r||!r&&t||y(e)&&e,duration:e,easing:r&&t||t&&!y(t)&&t};return S.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in S.fx.speeds?n.duration=S.fx.speeds[n.duration]:n.duration=S.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,r,n){return this.filter(me).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(t,e,r,n){function i(){var e=M(this,S.extend({},t),s);(o||w.get(this,"finish"))&&e.stop(!0)}var o=S.isEmptyObject(t),s=S.speed(e,r,n);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,e,o){function s(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",r=S.timers,n=w.get(this);if(t)n[t]&&n[t].stop&&s(n[t]);else for(t in n)n[t]&&n[t].stop&&pt.test(t)&&s(n[t]);for(t=r.length;t--;)r[t].elem!==this||null!=i&&r[t].queue!==i||(r[t].anim.stop(o),e=!1,r.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=w.get(this),r=t[s+"queue"],n=t[s+"queueHooks"],i=S.timers,o=r?r.length:0;for(t.finish=!0,S.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===s&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,n){var i=S.fn[n];S.fn[n]=function(e,t,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(bt(n,!0),e,t,r)}}),S.each({slideDown:bt("show"),slideUp:bt("hide"),slideToggle:bt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){S.fn[e]=function(e,t,r){return this.animate(n,e,t,r)}}),S.timers=[],S.fx.tick=function(){var e,t=0,r=S.timers;for(O=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||S.fx.stop(),O=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ft||(ft=!0,gt())},S.fx.stop=function(){ft=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(n,e){return n=S.fx&&S.fx.speeds[n]||n,this.queue(e=e||"fx",function(e,t){var r=_.setTimeout(e,n);t.stop=function(){_.clearTimeout(r)}})},R=x.createElement("input"),e=x.createElement("select").appendChild(x.createElement("option")),R.type="checkbox",m.checkOn=""!==R.value,m.optSelected=e.selected,(R=x.createElement("input")).value="t",R.type="radio",m.radioValue="t"===R.value;var vt,wt=S.expr.attrHandle,_t=(S.fn.extend({attr:function(e,t){return h(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,r):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?vt:void 0)),void 0!==r?null===r?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):!(i&&"get"in i&&null!==(n=i.get(e,t)))&&null==(n=S.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){var r;if(!m.radioValue&&"radio"===t&&c(e,"input"))return r=e.value,e.setAttribute("type",t),r&&(e.value=r),t}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(E);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),vt={set:function(e,t,r){return!1===t?S.removeAttr(e,r):e.setAttribute(r,r),r}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var s=wt[t]||S.find.attr;wt[t]=function(e,t,r){var n,i,o=t.toLowerCase();return r||(i=wt[o],wt[o]=n,n=null!=s(e,t,r)?o:null,wt[o]=i),n}}),/^(?:input|select|textarea|button)$/i),xt=/^(?:a|area)$/i;function j(e){return(e.match(E)||[]).join(" ")}function L(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(E)||[]}S.fn.extend({prop:function(e,t){return h(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||xt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,r,n,i,o,s;return y(t)?this.each(function(e){S(this).addClass(t.call(this,e,L(this)))}):(e=St(t)).length?this.each(function(){if(n=L(this),r=1===this.nodeType&&" "+j(n)+" "){for(o=0;o<e.length;o++)i=e[o],r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=j(r),n!==s&&this.setAttribute("class",s)}}):this},removeClass:function(t){var e,r,n,i,o,s;return y(t)?this.each(function(e){S(this).removeClass(t.call(this,e,L(this)))}):arguments.length?(e=St(t)).length?this.each(function(){if(n=L(this),r=1===this.nodeType&&" "+j(n)+" "){for(o=0;o<e.length;o++)for(i=e[o];-1<r.indexOf(" "+i+" ");)r=r.replace(" "+i+" "," ");s=j(r),n!==s&&this.setAttribute("class",s)}}):this:this.attr("class","")},toggleClass:function(t,r){var e,n,i,o,s=typeof t,a="string"==s||Array.isArray(t);return y(t)?this.each(function(e){S(this).toggleClass(t.call(this,e,L(this),r),r)}):"boolean"==typeof r&&a?r?this.addClass(t):this.removeClass(t):(e=St(t),this.each(function(){if(a)for(o=S(this),i=0;i<e.length;i++)n=e[i],o.hasClass(n)?o.removeClass(n):o.addClass(n);else void 0!==t&&"boolean"!=s||((n=L(this))&&w.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",!n&&!1!==t&&w.get(this,"__className__")||""))}))},hasClass:function(e){for(var t,r=0,n=" "+e+" ";t=this[r++];)if(1===t.nodeType&&-1<(" "+j(L(t))+" ").indexOf(n))return!0;return!1}});function Et(e){e.stopPropagation()}var kt=/\r/g,Ct=(S.fn.extend({val:function(t){var r,e,n,i=this[0];return arguments.length?(n=y(t),this.each(function(e){1!==this.nodeType||(null==(e=n?t.call(this,e,S(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,e,"value"))||(this.value=e)})):i?(r=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(i,"value"))?e:"string"==typeof(e=i.value)?e.replace(kt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:j(S.text(e))}},select:{get:function(e){for(var t,r=e.options,n=e.selectedIndex,i="select-one"===e.type,o=i?null:[],s=i?n+1:r.length,a=n<0?s:i?n:0;a<s;a++)if(((t=r[a]).selected||a===n)&&!t.disabled&&(!t.parentNode.disabled||!c(t.parentNode,"optgroup"))){if(t=S(t).val(),i)return t;o.push(t)}return o},set:function(e,t){for(var r,n,i=e.options,o=S.makeArray(t),s=i.length;s--;)((n=i[s]).selected=-1<S.inArray(S.valHooks.option.get(n),o))&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},m.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in _,/^(?:focusinfocus|focusoutblur)$/),At=(S.extend(S.event,{trigger:function(e,t,r,n){var i,o,s,a,c,l,u,h=[r||x],f=W.call(e,"type")?e.type:e,d=W.call(e,"namespace")?e.namespace.split("."):[],p=u=o=r=r||x;if(3!==r.nodeType&&8!==r.nodeType&&!Ct.test(f+S.event.triggered)&&(-1<f.indexOf(".")&&(f=(d=f.split(".")).shift(),d.sort()),a=f.indexOf(":")<0&&"on"+f,(e=e[S.expando]?e:new S.Event(f,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:S.makeArray(t,[e]),l=S.event.special[f]||{},n||!l.trigger||!1!==l.trigger.apply(r,t))){if(!n&&!l.noBubble&&!g(r)){for(s=l.delegateType||f,Ct.test(s+f)||(p=p.parentNode);p;p=p.parentNode)h.push(p),o=p;o===(r.ownerDocument||x)&&h.push(o.defaultView||o.parentWindow||_)}for(i=0;(p=h[i++])&&!e.isPropagationStopped();)u=p,e.type=1<i?s:l.bindType||f,(c=(w.get(p,"events")||Object.create(null))[e.type]&&w.get(p,"handle"))&&c.apply(p,t),(c=a&&p[a])&&c.apply&&b(p)&&(e.result=c.apply(p,t),!1===e.result)&&e.preventDefault();return e.type=f,n||e.isDefaultPrevented()||l._default&&!1!==l._default.apply(h.pop(),t)||!b(r)||a&&y(r[f])&&!g(r)&&((o=r[a])&&(r[a]=null),S.event.triggered=f,e.isPropagationStopped()&&u.addEventListener(f,Et),r[f](),e.isPropagationStopped()&&u.removeEventListener(f,Et),S.event.triggered=void 0,o)&&(r[a]=o),e.result}},simulate:function(e,t,r){r=S.extend(new S.Event,r,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return S.event.trigger(e,t,r,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},function(r,n){function i(e){S.event.simulate(n,e.target,S.event.fix(e))}S.event.special[n]={setup:function(){var e=this.ownerDocument||this.document||this,t=w.access(e,n);t||e.addEventListener(r,i,!0),w.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=w.access(e,n)-1;t?w.access(e,n,t):(e.removeEventListener(r,i,!0),w.remove(e,n))}}}),_.location),Tt={guid:Date.now()},It=/\?/,Pt=(S.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{t=(new _.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||S.error("Invalid XML: "+(r?S.map(r.childNodes,function(e){return e.textContent}).join("\n"):e)),t},/\[\]$/),Ot=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){function r(e,t){t=y(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var n,i=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){r(this.name,this.value)});else for(n in e)!function r(n,e,i,o){if(Array.isArray(e))S.each(e,function(e,t){i||Pt.test(n)?o(n,t):r(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,o)});else if(i||"object"!==p(e))o(n,e);else for(var t in e)r(n+"["+t+"]",e[t],i,o)}(n,e[n],t,r);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Mt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!_e.test(e))}).map(function(e,t){var r=S(this).val();return null==r?null:Array.isArray(r)?S.map(r,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:r.replace(Ot,"\r\n")}}).get()}});var jt=/%20/g,Lt=/#.*$/,Nt=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dt=/^(?:GET|HEAD)$/,Ut=/^\/\//,qt={},Ft={},Ht="*/".concat("*"),Wt=x.createElement("a");function zt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var r,n=0,i=e.toLowerCase().match(E)||[];if(y(t))for(;r=i[n++];)"+"===r[0]?(r=r.slice(1)||"*",(o[r]=o[r]||[]).unshift(t)):(o[r]=o[r]||[]).push(t)}}function Vt(t,n,i,o){var s={},a=t===Ft;function c(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){t=t(n,i,o);return"string"!=typeof t||a||s[t]?a?!(r=t):void 0:(n.dataTypes.unshift(t),c(t),!1)}),r}return c(n.dataTypes[0])||!s["*"]&&c("*")}function Kt(e,t){var r,n,i=S.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n=n||{})[r]=t[r]);return n&&S.extend(!0,e,n),e}Wt.href=At.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Kt(Kt(e,S.ajaxSettings),t):Kt(S.ajaxSettings,e)},ajaxPrefilter:zt(qt),ajaxTransport:zt(Ft),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var c,l,u,r,h,f,d,n,p=S.ajaxSetup({},t=t||{}),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?S(g):S.event,b=S.Deferred(),y=S.Callbacks("once memory"),v=p.statusCode||{},i={},o={},s="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(f){if(!r)for(r={};t=Bt.exec(u);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?u:null},setRequestHeader:function(e,t){return null==f&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,i[e]=t),this},overrideMimeType:function(e){return null==f&&(p.mimeType=e),this},statusCode:function(e){if(e)if(f)w.always(e[w.status]);else for(var t in e)v[t]=[v[t],e[t]];return this},abort:function(e){e=e||s;return c&&c.abort(e),a(0,e),this}};if(b.promise(w),p.url=((e||p.url||At.href)+"").replace(Ut,At.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(E)||[""],null==p.crossDomain){e=x.createElement("a");try{e.href=p.url,e.href=e.href,p.crossDomain=Wt.protocol+"//"+Wt.host!=e.protocol+"//"+e.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Vt(qt,p,t,w),!f){for(n in(d=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Dt.test(p.type),l=p.url.replace(Lt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(jt,"+")):(e=p.url.slice(l.length),p.data&&(p.processData||"string"==typeof p.data)&&(l+=(It.test(l)?"&":"?")+p.data,delete p.data),!1===p.cache&&(l=l.replace(Nt,"$1"),e=(It.test(l)?"&":"?")+"_="+Tt.guid+++e),p.url=l+e),p.ifModified&&(S.lastModified[l]&&w.setRequestHeader("If-Modified-Since",S.lastModified[l]),S.etag[l])&&w.setRequestHeader("If-None-Match",S.etag[l]),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ht+"; q=0.01":""):p.accepts["*"]),p.headers)w.setRequestHeader(n,p.headers[n]);if(p.beforeSend&&(!1===p.beforeSend.call(g,w,p)||f))return w.abort();if(s="abort",y.add(p.complete),w.done(p.success),w.fail(p.error),c=Vt(Ft,p,t,w)){if(w.readyState=1,d&&m.trigger("ajaxSend",[w,p]),f)return w;p.async&&0<p.timeout&&(h=_.setTimeout(function(){w.abort("timeout")},p.timeout));try{f=!1,c.send(i,a)}catch(e){if(f)throw e;a(-1,e)}}else a(-1,"No Transport")}return w;function a(e,t,r,n){var i,o,s,a=t;f||(f=!0,h&&_.clearTimeout(h),c=void 0,u=n||"",w.readyState=0<e?4:0,n=200<=e&&e<300||304===e,r&&(s=function(e,t,r){for(var n,i,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){c.unshift(i);break}if(c[0]in r)o=c[0];else{for(i in r){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}s=s||i}o=o||s}if(o)return o!==c[0]&&c.unshift(o),r[o]}(p,w,r)),!n&&-1<S.inArray("script",p.dataTypes)&&S.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),s=function(e,t,r,n){var i,o,s,a,c,l={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=l[c+" "+o]||l["* "+o]))for(i in l)if((a=i.split(" "))[1]===o&&(s=l[c+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[i]:!0!==l[i]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(p,s,w,n),n?(p.ifModified&&((r=w.getResponseHeader("Last-Modified"))&&(S.lastModified[l]=r),r=w.getResponseHeader("etag"))&&(S.etag[l]=r),204===e||"HEAD"===p.type?a="nocontent":304===e?a="notmodified":(a=s.state,i=s.data,n=!(o=s.error))):(o=a,!e&&a||(a="error",e<0&&(e=0))),w.status=e,w.statusText=(t||a)+"",n?b.resolveWith(g,[i,a,w]):b.rejectWith(g,[w,a,o]),w.statusCode(v),v=void 0,d&&m.trigger(n?"ajaxSuccess":"ajaxError",[w,p,n?i:o]),y.fireWith(g,[w,a]),d&&(m.trigger("ajaxComplete",[w,p]),--S.active||S.event.trigger("ajaxStop")))}},getJSON:function(e,t,r){return S.get(e,t,r,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,r,n){return y(t)&&(n=n||r,r=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:n,data:t,success:r},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,r){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,r)}})},S.fn.extend({wrapAll:function(e){return this[0]&&(y(e)&&(e=e.call(this[0])),e=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(r){return y(r)?this.each(function(e){S(this).wrapInner(r.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(r):e.append(r)})},wrap:function(t){var r=y(t);return this.each(function(e){S(this).wrapAll(r?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new _.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},Yt=S.ajaxSettings.xhr(),Qt=(m.cors=!!Yt&&"withCredentials"in Yt,m.ajax=Yt=!!Yt,S.ajaxTransport(function(i){var o,s;if(m.cors||Yt&&!i.crossDomain)return{send:function(e,t){var r,n=i.xhr();if(n.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(r in i.xhrFields)n[r]=i.xhrFields[r];for(r in i.mimeType&&n.overrideMimeType&&n.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(r,e[r]);o=function(e){return function(){o&&(o=s=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Gt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),s=n.onerror=n.ontimeout=o("error"),void 0!==n.onabort?n.onabort=s:n.onreadystatechange=function(){4===n.readyState&&_.setTimeout(function(){o&&s()})},o=o("abort");try{n.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(r){var n,i;if(r.crossDomain||r.scriptAttrs)return{send:function(e,t){n=S("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",i=function(e){n.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),x.head.appendChild(n[0])},abort:function(){i&&i()}}}),[]),$t=/(=)\?(?=&|$)|\?\?/,Xt=(S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Qt.pop()||S.expando+"_"+Tt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,r){var n,i,o,s=!1!==e.jsonp&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace($t,"$1"+n):!1!==e.jsonp&&(e.url+=(It.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||S.error(n+" was not called"),o[0]},e.dataTypes[0]="json",i=_[n],_[n]=function(){o=arguments},r.always(function(){void 0===i?S(_).removeProp(n):_[n]=i,e[n]&&(e.jsonpCallback=t.jsonpCallback,Qt.push(n)),o&&y(i)&&i(o[0]),o=i=void 0}),"script"}),m.createHTMLDocument=((o=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===o.childNodes.length),S.parseHTML=function(e,t,r){var n;return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(m.createHTMLDocument?((n=(t=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,t.head.appendChild(n)):t=x),n=!r&&[],(r=X.exec(e))?[t.createElement(r[1])]:(r=Ce([e],t,n),n&&n.length&&S(n).remove(),S.merge([],r.childNodes)))},S.fn.load=function(e,t,r){var n,i,o,s=this,a=e.indexOf(" ");return-1<a&&(n=j(e.slice(a)),e=e.slice(0,a)),y(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<s.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)}).always(r&&function(e,t){s.each(function(){r.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,r){var n,i,o,s,a=S.css(e,"position"),c=S(e),l={};"static"===a&&(e.style.position="relative"),o=c.offset(),n=S.css(e,"top"),s=S.css(e,"left"),a=("absolute"===a||"fixed"===a)&&-1<(n+s).indexOf("auto")?(i=(a=c.position()).top,a.left):(i=parseFloat(n)||0,parseFloat(s)||0),null!=(t=y(t)?t.call(e,r,S.extend({},o)):t).top&&(l.top=t.top-o.top+i),null!=t.left&&(l.left=t.left-o.left+a),"using"in t?t.using.call(e,l):c.css(l)}},S.fn.extend({offset:function(t){var e,r;return arguments.length?void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)}):(r=this[0])?r.getClientRects().length?(e=r.getBoundingClientRect(),r=r.ownerDocument.defaultView,{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===S.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(n,"marginTop",!0),left:t.left-i.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||k})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return h(this,function(e,t,r){var n;if(g(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===r)return n?n[i]:e[t];n?n.scrollTo(o?n.pageXOffset:r,o?r:n.pageYOffset):e[t]=r},t,e,arguments.length)}}),S.each(["top","left"],function(e,r){S.cssHooks[r]=tt(m.pixelPosition,function(e,t){if(t)return t=et(e,r),Ye.test(t)?S(e).position()[r]+"px":t})}),S.each({Height:"height",Width:"width"},function(s,a){S.each({padding:"inner"+s,content:a,"":"outer"+s},function(n,o){S.fn[o]=function(e,t){var r=arguments.length&&(n||"boolean"!=typeof e),i=n||(!0===e||!0===t?"margin":"border");return h(this,function(e,t,r){var n;return g(e)?0===o.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+s],n["scroll"+s],e.body["offset"+s],n["offset"+s],n["client"+s])):void 0===r?S.css(e,t,i):S.style(e,t,r,i)},a,r?e:void 0,r)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){S.fn[r]=function(e,t){return 0<arguments.length?this.on(r,null,e,t):this.trigger(r)}}),/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g),Jt=(S.proxy=function(e,t){var r,n;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=a.call(arguments,2),(n=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||S.guid++,n},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=c,S.isFunction=y,S.isWindow=g,S.camelCase=v,S.type=p,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S}),_.jQuery),Zt=_.$;return S.noConflict=function(e){return _.$===S&&(_.$=Zt),e&&_.jQuery===S&&(_.jQuery=Jt),S},void 0===N&&(_.jQuery=_.$=S),S})},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;r.ContainerIterator=class{constructor(e=0){this.iteratorType=e}equals(e){return this.o===e.o}};class n{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return 0===this.i}}r.Base=n;r.Container=class extends n{}},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var n,i=e("../../ContainerBase"),o=(n=e("../../../utils/checkObject"))&&n.t?n:{default:n},s=e("../../../utils/throwError");class a extends i.ContainerIterator{constructor(e,t,r){super(r),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this})}}r.HashContainerIterator=a;class c extends i.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){var{L:t,B:r}=e;(t.B=r).L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),--this.i}M(e,t,r){let n;if(r=void 0===r?(0,o.default)(e):r){const r=e[this.HASH_TAG];if(void 0!==r)return this.H[r].l=t,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),n={u:e,l:t,L:this._,B:this.h},this.H.push(n)}else{const r=this.g[e];if(r)return r.l=t,this.i;n={u:e,l:t,L:this._,B:this.h},this.g[e]=n}return 0===this.i?(this.p=n,this.h.B=n):this._.B=n,this._=n,this.h.L=n,++this.i}I(e,t){if(t=void 0===t?(0,o.default)(e):t){const t=e[this.HASH_TAG];return void 0===t?this.h:this.H[t]}return this.g[e]||this.h}clear(){const t=this.HASH_TAG;this.H.forEach(function(e){delete e.u[t]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,t){let r;if(t=void 0===t?(0,o.default)(e):t){const t=e[this.HASH_TAG];if(void 0===t)return!1;delete e[this.HASH_TAG],r=this.H[t],delete this.H[t]}else{if(void 0===(r=this.g[e]))return!1;delete this.g[e]}return this.V(r),!0}eraseElementByIterator(e){var t=e.o;return t===this.h&&(0,s.throwIteratorAccessError)(),this.V(t),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}}r.HashContainer=c},{"../../../utils/checkObject":34,"../../../utils/throwError":35,"../../ContainerBase":16}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n,i=e("./Base"),o=(n=e("../../utils/checkObject"))&&n.t?n:{default:n},s=e("../../utils/throwError");class a extends i.HashContainerIterator{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){this.o===this.h&&(0,s.throwIteratorAccessError)();const n=this;return new Proxy([],{get(e,t){return"0"===t?n.o.u:"1"===t?n.o.l:void 0},set(e,t,r){if("1"!==t)throw new TypeError("props must be 1");return n.o.l=r,!0}})}copy(){return new a(this.o,this.h,this.container,this.iteratorType)}}class c extends i.HashContainer{constructor(e=[]){super();const t=this;e.forEach(function(e){t.setElement(e[0],e[1])})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){if(0!==this.i)return[this.p.u,this.p.l]}back(){if(0!==this.i)return[this._.u,this._.l]}setElement(e,t,r){return this.M(e,t,r)}getElementByKey(e,t){if(t=void 0===t?(0,o.default)(e):t){const t=e[this.HASH_TAG];return void 0!==t?this.H[t].l:void 0}t=this.g[e];return t?t.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return[t.u,t.l]}find(e,t){e=this.I(e,t);return new a(e,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e([r.u,r.l],t++,this),r=r.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}.bind(this)()}}r.default=c},{"../../utils/checkObject":34,"../../utils/throwError":35,"./Base":17}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n=e("./Base"),i=e("../../utils/throwError");class o extends n.HashContainerIterator{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.u}copy(){return new o(this.o,this.h,this.container,this.iteratorType)}}class s extends n.HashContainer{constructor(e=[]){super();const t=this;e.forEach(function(e){t.insert(e)})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,t){return this.M(e,void 0,t)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return t.u}find(e,t){e=this.I(e,t);return new o(e,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e(r.u,t++,this),r=r.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}.bind(this)()}}r.default=s},{"../../utils/throwError":35,"./Base":17}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;class n extends e("../ContainerBase").Base{constructor(e=[],t=function(e,t){return t<e?-1:e<t?1:0},r=!0){if(super(),this.v=t,Array.isArray(e))this.C=r?[...e]:e;else{this.C=[];const t=this;e.forEach(function(e){t.C.push(e)})}this.i=this.C.length;var n=this.i>>1;for(let e=this.i-1>>1;0<=e;--e)this.k(e,n)}m(e){for(var t=this.C[e];0<e;){var r=e-1>>1,n=this.C[r];if(this.v(n,t)<=0)break;this.C[e]=n,e=r}this.C[e]=t}k(r,e){for(var n=this.C[r];r<e;){let e=r<<1|1;var i=e+1;let t=this.C[e];if(i<this.i&&0<this.v(t,this.C[i])&&(e=i,t=this.C[i]),0<=this.v(t,n))break;this.C[r]=t,r=e}this.C[r]=n}clear(){this.i=0,this.C.length=0}push(e){this.C.push(e),this.m(this.i),this.i+=1}pop(){var e,t;if(0!==this.i)return e=this.C[0],t=this.C.pop(),--this.i,this.i&&(this.C[0]=t,this.k(0,this.i>>1)),e}top(){return this.C[0]}find(e){return 0<=this.C.indexOf(e)}remove(e){e=this.C.indexOf(e);return!(e<0||(0===e?this.pop():e===this.i-1?(this.C.pop(),--this.i):(this.C.splice(e,1,this.C.pop()),--this.i,this.m(e),this.k(e,this.i>>1)),0))}updateItem(e){e=this.C.indexOf(e);return!(e<0||(this.m(e),this.k(e,this.i>>1),0))}toArray(){return[...this.C]}}r.default=n},{"../ContainerBase":16}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;class n extends e("../ContainerBase").Base{constructor(e=[]){super(),this.j=0,this.q=[];const t=this;e.forEach(function(e){t.push(e)})}clear(){this.q=[],this.i=this.j=0}push(e){const t=this.q.length;if(.5<this.j/t&&this.j+this.i>=t&&4096<t){const t=this.i;for(let e=0;e<t;++e)this.q[e]=this.q[this.j+e];this.j=0,this.q[this.i]=e}else this.q[this.j+this.i]=e;return++this.i}pop(){var e;if(0!==this.i)return e=this.q[this.j++],--this.i,e}front(){if(0!==this.i)return this.q[this.j]}}r.default=n},{"../ContainerBase":16}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;class n extends e("../ContainerBase").Base{constructor(e=[]){super(),this.S=[];const t=this;e.forEach(function(e){t.push(e)})}clear(){this.i=0,this.S=[]}push(e){return this.S.push(e),this.i+=1,this.i}pop(){if(0!==this.i)return--this.i,this.S.pop()}top(){return this.S[this.i-1]}}r.default=n},{"../ContainerBase":16}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var n=e("../../ContainerBase"),i=e("../../../utils/throwError");class o extends n.ContainerIterator{constructor(e,t){super(t),this.o=e,0===this.iteratorType?(this.pre=function(){return 0===this.o&&(0,i.throwIteratorAccessError)(),--this.o,this},this.next=function(){return this.o===this.container.size()&&(0,i.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,i.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return-1===this.o&&(0,i.throwIteratorAccessError)(),--this.o,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(e){this.container.setElementByPos(this.o,e)}}r.RandomIterator=o},{"../../../utils/throwError":35,"../../ContainerBase":16}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;class n extends e("../../ContainerBase").Container{}r.default=n},{"../../ContainerBase":16}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n=(n=e("./Base"))&&n.t?n:{default:n};class i extends e("./Base/RandomIterator").RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new i(this.o,this.container,this.iteratorType)}}class o extends n.default{constructor(e=[],t=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];var r=(()=>{if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("function"==typeof e.size)return e.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(r/this.F),1);for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));t=Math.ceil(r/this.F);this.j=this.R=(this.P>>1)-(t>>1),this.D=this.N=this.F-r%this.F>>1;const n=this;e.forEach(function(e){n.pushBack(e)})}T(){var t=[],r=Math.max(this.P>>1,1);for(let e=0;e<r;++e)t[e]=new Array(this.F);for(let e=this.j;e<this.P;++e)t[t.length]=this.A[e];for(let e=0;e<this.R;++e)t[t.length]=this.A[e];t[t.length]=[...this.A[this.R]],this.j=r,this.R=t.length-1;for(let e=0;e<r;++e)t[t.length]=new Array(this.F);this.A=t,this.P=t.length}O(e){var e=this.D+e+1,t=e%this.F;let r=t-1,n=this.j+(e-t)/this.F;return 0==t&&--n,n%=this.P,r<0&&(r+=this.F),{curNodeBucketIndex:n,curNodePointerIndex:r}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){if(0!==this.i)return this.A[this.j][this.D]}back(){if(0!==this.i)return this.A[this.R][this.N]}pushBack(e){return this.i&&(this.N<this.F-1?this.N+=1:(this.R<this.P-1?this.R+=1:this.R=0,this.N=0),this.R===this.j)&&this.N===this.D&&this.T(),this.i+=1,this.A[this.R][this.N]=e,this.i}popBack(){var e;if(0!==this.i)return e=this.A[this.R][this.N],1!==this.i&&(0<this.N?--this.N:(0<this.R?--this.R:this.R=this.P-1,this.N=this.F-1)),--this.i,e}pushFront(e){return this.i&&(0<this.D?--this.D:(0<this.j?--this.j:this.j=this.P-1,this.D=this.F-1),this.j===this.R)&&this.D===this.N&&this.T(),this.i+=1,this.A[this.j][this.D]=e,this.i}popFront(){var e;if(0!==this.i)return e=this.A[this.j][this.D],1!==this.i&&(this.D<this.F-1?this.D+=1:(this.j<this.P-1?this.j+=1:this.j=0,this.D=0)),--this.i,e}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;var{curNodeBucketIndex:e,curNodePointerIndex:t}=this.O(e);return this.A[e][t]}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;var{curNodeBucketIndex:e,curNodePointerIndex:r}=this.O(e);this.A[e][r]=t}insert(t,r,n=1){if(t<0||t>this.i)throw new RangeError;if(0===t)for(;n--;)this.pushFront(r);else if(t===this.i)for(;n--;)this.pushBack(r);else{var i=[];for(let e=t;e<this.i;++e)i.push(this.getElementByPos(e));this.cut(t-1);for(let e=0;e<n;++e)this.pushBack(r);for(let e=0;e<i.length;++e)this.pushBack(i[e])}return this.i}cut(e){var t,r;return e<0?(this.clear(),0):({curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e),this.R=t,this.N=r,this.i=e+1,this.i)}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;if(0===t)this.popFront();else if(t===this.i-1)this.popBack();else{var r=[];for(let e=t+1;e<this.i;++e)r.push(this.getElementByPos(e));this.cut(t),this.popBack();const n=this;r.forEach(function(e){n.pushBack(e)})}return this.i}eraseElementByValue(t){if(0===this.i)return 0;var r=[];for(let e=0;e<this.i;++e){var n=this.getElementByPos(e);n!==t&&r.push(n)}var i=r.length;for(let e=0;e<i;++e)this.setElementByPos(e,r[e]);return this.cut(i-1)}eraseElementByIterator(e){var t=e.o;return this.eraseElementByPos(t),e=e.next()}find(t){for(let e=0;e<this.i;++e)if(this.getElementByPos(e)===t)return new i(e,this);return this.end()}reverse(){let e=0,t=this.i-1;for(;e<t;){var r=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,r),e+=1,--t}}unique(){if(!(this.i<=1)){let t=1,r=this.getElementByPos(0);for(let e=1;e<this.i;++e){var n=this.getElementByPos(e);n!==r&&(r=n,this.setElementByPos(t++,n))}for(;this.i>t;)this.popBack()}return this.i}sort(e){var t=[];for(let e=0;e<this.i;++e)t.push(this.getElementByPos(e));t.sort(e);for(let e=0;e<this.i;++e)this.setElementByPos(e,t[e])}shrinkToFit(){if(0!==this.i){const t=[];this.forEach(function(e){t.push(e)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));for(let e=0;e<t.length;++e)this.pushBack(t[e])}}forEach(t){for(let e=0;e<this.i;++e)t(this.getElementByPos(e),e,this)}[Symbol.iterator](){return function*(){for(let e=0;e<this.i;++e)yield this.getElementByPos(e)}.bind(this)()}}r.default=o},{"./Base":24,"./Base/RandomIterator":23}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n=(n=e("./Base"))&&n.t?n:{default:n},i=e("../ContainerBase"),o=e("../../utils/throwError");class s extends i.ContainerIterator{constructor(e,t,r,n){super(n),this.o=e,this.h=t,this.container=r,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l}set pointer(e){this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l=e}copy(){return new s(this.o,this.h,this.container,this.iteratorType)}}class a extends n.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;const t=this;e.forEach(function(e){t.pushBack(e)})}V(e){var{L:t,B:r}=e;(t.B=r).L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),--this.i}G(e,t){var r=t.B,e={l:e,L:t,B:r};t.B=e,r.L=e,t===this.h&&(this.p=e),r===this.h&&(this._=e),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return t.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}eraseElementByValue(e){let t=this.p;for(;t!==this.h;)t.l===e&&this.V(t),t=t.B;return this.i}eraseElementByIterator(e){var t=e.o;return t===this.h&&(0,o.throwIteratorAccessError)(),e=e.next(),this.V(t),e}pushBack(e){return this.G(e,this._),this.i}popBack(){var e;if(0!==this.i)return e=this._.l,this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){var e;if(0!==this.i)return e=this.p.l,this.V(this.p),e}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;r.l=t}insert(r,e,n=1){if(r<0||r>this.i)throw new RangeError;if(!(n<=0))if(0===r)for(;n--;)this.pushFront(e);else if(r===this.i)for(;n--;)this.pushBack(e);else{let t=this.p;for(let e=1;e<r;++e)t=t.B;var i=t.B;for(this.i+=n;n--;)t.B={l:e,L:t},t=(t.B.L=t).B;(t.B=i).L=t}return this.i}find(e){let t=this.p;for(;t!==this.h;){if(t.l===e)return new s(t,this.h,this);t=t.B}return this.end()}reverse(){if(!(this.i<=1)){let e=this.p,t=this._,r=0;for(;r<<1<this.i;){var n=e.l;e.l=t.l,t.l=n,e=e.B,t=t.L,r+=1}}}unique(){if(!(this.i<=1)){let t=this.p;for(;t!==this.h;){let e=t;for(;e.B!==this.h&&e.l===e.B.l;)e=e.B,--this.i;t.B=e.B,t=(t.B.L=t).B}}return this.i}sort(e){if(!(this.i<=1)){const r=[];this.forEach(function(e){r.push(e)}),r.sort(e);let t=this.p;r.forEach(function(e){t.l=e,t=t.B})}}merge(e){const r=this;if(0===this.i)e.forEach(function(e){r.pushBack(e)});else{let t=this.p;e.forEach(function(e){for(;t!==r.h&&t.l<=e;)t=t.B;r.G(e,t.L)})}return this.i}forEach(e){let t=this.p,r=0;for(;t!==this.h;)e(t.l,r++,this),t=t.B}[Symbol.iterator](){return function*(){if(0!==this.i){let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}}.bind(this)()}}r.default=a},{"../../utils/throwError":35,"../ContainerBase":16,"./Base":24}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n=(n=e("./Base"))&&n.t?n:{default:n};class i extends e("./Base/RandomIterator").RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new i(this.o,this.container,this.iteratorType)}}class o extends n.default{constructor(e=[],t=!0){if(super(),Array.isArray(e))this.J=t?[...e]:e,this.i=e.length;else{this.J=[];const t=this;e.forEach(function(e){t.pushBack(e)})}}clear(){this.i=0,this.J.length=0}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J[e]}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J.splice(e,1),--this.i,this.i}eraseElementByValue(t){let r=0;for(let e=0;e<this.i;++e)this.J[e]!==t&&(this.J[r++]=this.J[e]);return this.i=this.J.length=r,this.i}eraseElementByIterator(e){var t=e.o;return e=e.next(),this.eraseElementByPos(t),e}pushBack(e){return this.J.push(e),this.i+=1,this.i}popBack(){if(0!==this.i)return--this.i,this.J.pop()}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;this.J[e]=t}insert(e,t,r=1){if(e<0||e>this.i)throw new RangeError;return this.J.splice(e,0,...new Array(r).fill(t)),this.i+=r,this.i}find(t){for(let e=0;e<this.i;++e)if(this.J[e]===t)return new i(e,this);return this.end()}reverse(){this.J.reverse()}unique(){let t=1;for(let e=1;e<this.i;++e)this.J[e]!==this.J[e-1]&&(this.J[t++]=this.J[e]);return this.i=this.J.length=t,this.i}sort(e){this.J.sort(e)}forEach(t){for(let e=0;e<this.i;++e)t(this.J[e],e,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}}r.default=o},{"./Base":24,"./Base/RandomIterator":23}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n=e("../../ContainerBase"),i=e("../../../utils/throwError");class o extends n.ContainerIterator{constructor(e,t,r){super(r),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o===this.h.U&&(0,i.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,i.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o;const t=this.h.tt;if(e===this.h)return t?t.rt-1:0;let r=0;for(e.U&&(r+=e.U.rt);e!==t;){const t=e.tt;e===t.W&&(r+=1,t.U)&&(r+=t.U.rt),e=t}return r}}r.default=o},{"../../../utils/throwError":35,"../../ContainerBase":16}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;class n{constructor(e,t){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=e,this.l=t}L(){let t=this;if(1===t.ee&&t.tt.tt===t)t=t.W;else if(t.U)for(t=t.U;t.W;)t=t.W;else{let e=t.tt;for(;e.U===t;)e=(t=e).tt;t=e}return t}B(){let t=this;if(t.W){for(t=t.W;t.U;)t=t.U;return t}{let e=t.tt;for(;e.W===t;)e=(t=e).tt;return t.W!==e?e:t}}te(){var e=this.tt,t=this.W,r=t.U;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,(t.U=this).tt=t,(this.W=r)&&(r.tt=this),t}se(){var e=this.tt,t=this.U,r=t.W;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,(t.W=this).tt=t,(this.U=r)&&(r.tt=this),t}}r.TreeNode=n;r.TreeNodeEnableIndex=class extends n{constructor(){super(...arguments),this.rt=1}te(){var e=super.te();return this.ie(),e.ie(),e}se(){var e=super.se();return this.ie(),e.ie(),e}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}}},{}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n=e("./TreeNode"),i=e("../../ContainerBase"),o=e("../../../utils/throwError");class s extends i.Container{constructor(e=function(e,t){return e<t?-1:t<e?1:0},t=!1){super(),this.Y=void 0,this.v=e,t?(this.re=n.TreeNodeEnableIndex,this.M=function(t,r,n){const i=this.ne(t,r,n);if(i){let e=i.tt;for(;e!==this.h;)e.rt+=1,e=e.tt;const r=this.he(i);if(r){const{parentNode:t,grandParent:n,curNode:i}=r;t.ie(),n.ie(),i.ie()}}return this.i},this.V=function(e){let t=this.fe(e);for(;t!==this.h;)--t.rt,t=t.tt}):(this.re=n.TreeNode,this.M=function(e,t,r){e=this.ne(e,t,r);return e&&this.he(e),this.i},this.V=this.fe),this.h=new this.re}X(e,t){let r=this.h;for(;e;){var n=this.v(e.u,t);if(n<0)e=e.W;else{if(!(0<n))return e;e=(r=e).U}}return r}Z(e,t){let r=this.h;for(;e;)e=this.v(e.u,t)<=0?e.W:(r=e).U;return r}$(e,t){let r=this.h;for(;e;){var n=this.v(e.u,t);if(n<0)e=(r=e).W;else{if(!(0<n))return e;e=e.U}}return r}rr(e,t){let r=this.h;for(;e;)e=this.v(e.u,t)<0?(r=e).W:e.U;return r}ue(e){for(;;){var t=e.tt;if(t===this.h)return;if(1===e.ee)return void(e.ee=0);if(e===t.U){var r=t.W;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.te():t.te();else{if(r.W&&1===r.W.ee)return r.ee=t.ee,t.ee=0,r.W.ee=0,void(t===this.Y?this.Y=t.te():t.te());r.U&&1===r.U.ee?(r.ee=1,r.U.ee=0,r.se()):(r.ee=1,e=t)}}else{r=t.U;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.se():t.se();else{if(r.U&&1===r.U.ee)return r.ee=t.ee,t.ee=0,r.U.ee=0,void(t===this.Y?this.Y=t.se():t.se());r.W&&1===r.W.ee?(r.ee=1,r.W.ee=0,r.te()):(r.ee=1,e=t)}}}}fe(e){if(1===this.i)return this.clear(),this.h;let t=e;for(;t.U||t.W;){if(t.W)for(t=t.W;t.U;)t=t.U;else t=t.U;[e.u,t.u]=[t.u,e.u],[e.l,t.l]=[t.l,e.l],e=t}this.h.U===t?this.h.U=t.tt:this.h.W===t&&(this.h.W=t.tt),this.ue(t);var r=t.tt;return t===r.U?r.U=void 0:r.W=void 0,--this.i,this.Y.ee=0,r}oe(e,t){return void 0!==e&&(!!this.oe(e.U,t)||!!t(e)||this.oe(e.W,t))}he(e){for(;;){var t=e.tt;if(0===t.ee)return;var r=t.tt;if(t===r.U){var n=r.W;if(n&&1===n.ee){if(n.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.W)return e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=r),t.W=e.U,r.U=e.W,e.U=t,(e.W=r)===this.Y?(this.Y=e,this.h.tt=e):(n=r.tt).U===r?n.U=e:n.W=e,e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e};t.ee=0,r===this.Y?this.Y=r.se():r.se()}else{var i,n=r.U;if(n&&1===n.ee){if(n.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.U)return e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=t),r.W=e.U,t.U=e.W,e.U=r,e.W=t,r===this.Y?(this.Y=e,this.h.tt=e):(i=r.tt).U===r?i.U=e:i.W=e,e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e};t.ee=0,r===this.Y?this.Y=r.te():r.te()}return void(r.ee=1)}}ne(t,r,n){if(void 0===this.Y)this.i+=1,this.Y=new this.re(t,r),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;else{let e;const i=this.h.U,o=this.v(i.u,t);if(0!==o){if(0<o)i.U=new this.re(t,r),i.U.tt=i,e=i.U,this.h.U=e;else{const i=this.h.W,o=this.v(i.u,t);if(0===o)return void(i.l=r);if(o<0)i.W=new this.re(t,r),i.W.tt=i,e=i.W,this.h.W=e;else{if(void 0!==n){const i=n.o;if(i!==this.h){const n=this.v(i.u,t);if(0===n)return void(i.l=r);if(0<n){const n=i.L(),o=this.v(n.u,t);if(0===o)return void(n.l=r);o<0&&(e=new this.re(t,r),void 0===n.W?(n.W=e).tt=n:(i.U=e).tt=i)}}}if(void 0===e)for(e=this.Y;;){const n=this.v(e.u,t);if(0<n){if(void 0===e.U){e.U=new this.re(t,r),e=(e.U.tt=e).U;break}e=e.U}else{if(!(n<0))return void(e.l=r);if(void 0===e.W){e.W=new this.re(t,r),e=(e.W.tt=e).W;break}e=e.W}}}}return this.i+=1,e}i.l=r}}I(e,t){for(;e;){var r=this.v(e.u,t);if(r<0)e=e.W;else{if(!(0<r))return e;e=e.U}}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,t){e=e.o;if(e===this.h&&(0,o.throwIteratorAccessError)(),1!==this.i){if(e===this.h.U)return 0<this.v(e.B().u,t)&&(e.u=t,!0);if(e===this.h.W)return this.v(e.L().u,t)<0&&(e.u=t,!0);var r=e.L().u;if(0<=this.v(r,t))return!1;if(r=e.B().u,this.v(r,t)<=0)return!1}return e.u=t,!0}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r=0;const n=this;return this.oe(this.Y,function(e){return t===r?(n.V(e),!0):(r+=1,!1)}),this.i}eraseElementByKey(e){return 0!==this.i&&(e=this.I(this.Y,e))!==this.h&&(this.V(e),!0)}eraseElementByIterator(e){var t=e.o,r=(t===this.h&&(0,o.throwIteratorAccessError)(),void 0===t.W);return 0===e.iteratorType?r&&e.next():r&&void 0!==t.U||e.next(),this.V(t),e}forEach(e){let t=0;for(const r of this)e(r,t++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t,r=0;for(const n of this){if(r===e){t=n;break}r+=1}return t}getHeight(){if(0===this.i)return 0;function t(e){return e?Math.max(t(e.U),t(e.W))+1:0}return t(this.Y)}}r.default=s},{"../../../utils/throwError":35,"../../ContainerBase":16,"./TreeNode":29}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n=s(e("./Base")),i=s(e("./Base/TreeIterator")),o=e("../../utils/throwError");function s(e){return e&&e.t?e:{default:e}}class a extends i.default{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();const n=this;return new Proxy([],{get(e,t){return"0"===t?n.o.u:"1"===t?n.o.l:void 0},set(e,t,r){if("1"!==t)throw new TypeError("props must be 1");return n.o.l=r,!0}})}copy(){return new a(this.o,this.h,this.container,this.iteratorType)}}class c extends n.default{constructor(e=[],t,r){super(t,r);const n=this;e.forEach(function(e){n.setElement(e[0],e[1])})}*K(e){void 0!==e&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new a(this.h.U||this.h,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this.h.W||this.h,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){var e;if(0!==this.i)return[(e=this.h.U).u,e.l]}back(){var e;if(0!==this.i)return[(e=this.h.W).u,e.l]}lowerBound(e){e=this.X(this.Y,e);return new a(e,this.h,this)}upperBound(e){e=this.Z(this.Y,e);return new a(e,this.h,this)}reverseLowerBound(e){e=this.$(this.Y,e);return new a(e,this.h,this)}reverseUpperBound(e){e=this.rr(this.Y,e);return new a(e,this.h,this)}setElement(e,t,r){return this.M(e,t,r)}find(e){e=this.I(this.Y,e);return new a(e,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){const t=this;return e.forEach(function(e){t.setElement(e[0],e[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}}r.default=c},{"../../utils/throwError":35,"./Base":30,"./Base/TreeIterator":28}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var n=s(e("./Base")),i=s(e("./Base/TreeIterator")),o=e("../../utils/throwError");function s(e){return e&&e.t?e:{default:e}}class a extends i.default{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new a(this.o,this.h,this.container,this.iteratorType)}}class c extends n.default{constructor(e=[],t,r){super(t,r);const n=this;e.forEach(function(e){n.insert(e)})}*K(e){void 0!==e&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new a(this.h.U||this.h,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this.h.W||this.h,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,t){return this.M(e,void 0,t)}find(e){e=this.I(this.Y,e);return new a(e,this.h,this)}lowerBound(e){e=this.X(this.Y,e);return new a(e,this.h,this)}upperBound(e){e=this.Z(this.Y,e);return new a(e,this.h,this)}reverseLowerBound(e){e=this.$(this.Y,e);return new a(e,this.h,this)}reverseUpperBound(e){e=this.rr(this.Y,e);return new a(e,this.h,this)}union(e){const t=this;return e.forEach(function(e){t.insert(e)}),this.i}[Symbol.iterator](){return this.K(this.Y)}}r.default=c},{"../../utils/throwError":35,"./Base":30,"./Base/TreeIterator":28}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return s.default}});var n=d(e("./container/OtherContainer/Stack")),i=d(e("./container/OtherContainer/Queue")),o=d(e("./container/OtherContainer/PriorityQueue")),s=d(e("./container/SequentialContainer/Vector")),a=d(e("./container/SequentialContainer/LinkList")),c=d(e("./container/SequentialContainer/Deque")),l=d(e("./container/TreeContainer/OrderedSet")),u=d(e("./container/TreeContainer/OrderedMap")),h=d(e("./container/HashContainer/HashSet")),f=d(e("./container/HashContainer/HashMap"));function d(e){return e&&e.t?e:{default:e}}},{"./container/HashContainer/HashMap":18,"./container/HashContainer/HashSet":19,"./container/OtherContainer/PriorityQueue":20,"./container/OtherContainer/Queue":21,"./container/OtherContainer/Stack":22,"./container/SequentialContainer/Deque":25,"./container/SequentialContainer/LinkList":26,"./container/SequentialContainer/Vector":27,"./container/TreeContainer/OrderedMap":31,"./container/TreeContainer/OrderedSet":32}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.default=function(e){var t=typeof e;return"object"==t&&null!==e||"function"==t}},{}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=function(){throw new RangeError("Iterator access denied!")}},{}],36:[function(e,a,t){!function(s){!function(){const o=a.exports;o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.codes={};for(const n in o.types){var e=o.types[n];o.codes[e]=n}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=s.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=s.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=s.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(const i in o.properties){var t=o.properties[i];o.propertiesCodes[t]=i}function r(i){return[0,1,2].map(n=>[0,1].map(r=>[0,1].map(e=>{var t=s.alloc(1);return t.writeUInt8(o.codes[i]<<o.CMD_SHIFT|(r?o.DUP_MASK:0)|n<<o.QOS_SHIFT|e,0,!0),t})))}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},o.PUBLISH_HEADER=r("publish"),o.SUBSCRIBE_HEADER=r("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=r("unsubscribe"),o.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},o.SUBACK_HEADER=s.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=s.from([3]),o.VERSION4=s.from([4]),o.VERSION5=s.from([5]),o.VERSION131=s.from([131]),o.VERSION132=s.from([132]),o.QOS=[0,1,2].map(e=>s.from([e])),o.EMPTY={pingreq:s.from([o.codes.pingreq<<4,0]),pingresp:s.from([o.codes.pingresp<<4,0]),disconnect:s.from([o.codes.disconnect<<4,0])}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:3}],37:[function(t,r,e){!function(s){!function(){const n=t("./writeToStream");var e=t("events");class i extends e{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;var t=new Array(this._array.length),r=this._array;let n=0,i;for(i=0;i<r.length&&void 0!==r[i];i++)"string"!=typeof r[i]?t[i]=r[i].length:t[i]=s.byteLength(r[i]),e+=t[i];var o=s.allocUnsafe(e);for(i=0;i<r.length&&void 0!==r[i];i++)"string"!=typeof r[i]?r[i].copy(o,n):o.write(r[i],n),n+=t[i];return o}}r.exports=function(e,t){var r=new i;return n(e,r,t),r.concat()}}.call(this)}.call(this,t("buffer").Buffer)},{"./writeToStream":59,buffer:3,events:11}],38:[function(e,t,r){r.parser=e("./parser").parser,r.generate=e("./generate"),r.writeToStream=e("./writeToStream")},{"./generate":37,"./parser":58,"./writeToStream":59}],39:[function(e,t,r){"use strict";const h=e("buffer")["Buffer"],n=Symbol.for("BufferList");function i(e){if(!(this instanceof i))return new i(e);i._init.call(this,e)}i._init=function(e){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},i.prototype._new=function(e){return new i(e)},i.prototype._offset=function(t){if(0===t)return[0,0];let r=0;for(let e=0;e<this._bufs.length;e++){var n=r+this._bufs[e].length;if(t<n||e===this._bufs.length-1)return[e,t-r];r=n}},i.prototype._reverseOffset=function(e){var t=e[0];let r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},i.prototype.get=function(e){if(!(e>this.length||e<0))return e=this._offset(e),this._bufs[e[0]][e[1]]},i.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(t,e,r,n){if(("number"!=typeof n||n>this.length)&&(n=this.length),(r="number"!=typeof r||r<0?0:r)>=this.length)return t||h.alloc(0);if(n<=0)return t||h.alloc(0);var i=!!t,o=this._offset(r),s=n-r;let a=s,c=i&&e||0,l=o[1];if(0===r&&n===this.length){if(!i)return 1===this._bufs.length?this._bufs[0]:h.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(a<=this._bufs[o[0]].length-l)return i?this._bufs[o[0]].copy(t,e,l,l+a):this._bufs[o[0]].slice(l,l+a);i||(t=h.allocUnsafe(s));for(let e=o[0];e<this._bufs.length;e++){var u=this._bufs[e].length-l;if(!(a>u)){this._bufs[e].copy(t,c,l,l+a),c+=u;break}this._bufs[e].copy(t,c,l),c+=u,a-=u,l=l&&0}return t.length>c?t.slice(0,c):t},i.prototype.shallowSlice=function(e,t){var r;return t="number"!=typeof t?this.length:t,(e=e||0)<0&&(e+=this.length),t<0&&(t+=this.length),e===t?this._new():(e=this._offset(e),t=this._offset(t),r=this._bufs.slice(e[0],t[0]+1),0===t[1]?r.pop():r[r.length-1]=r[r.length-1].slice(0,t[1]),0!==e[1]&&(r[0]=r[0].slice(e[1])),this._new(r))},i.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},i.prototype.consume=function(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0))for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){var t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},i.prototype.append=function(t){if(null!=t)if(t.buffer)this._appendBuffer(h.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"==typeof t&&(t=t.toString()),this._appendBuffer(h.from(t));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=h.from([e]):"string"==typeof e?e=h.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=h.from(e.buffer,e.byteOffset,e.byteLength):h.isBuffer(e)||(e=h.from(e)),t=Number(t||0),(t=(t=isNaN(t)?0:t)<0?this.length+t:t)<0&&(t=0),0===e.length)return t>this.length?this.length:t;r=this._offset(t);let n=r[0],i=r[1];for(;n<this._bufs.length;n++){for(var o=this._bufs[n];i<o.length;)if(o.length-i>=e.length){var s=o.indexOf(e,i);if(-1!==s)return this._reverseOffset([n,s]);i=o.length-e.length+1}else{s=this._reverseOffset([n,i]);if(this._match(s,e))return s;i++}i=0}return-1},i.prototype._match=function(t,r){if(this.length-t<r.length)return!1;for(let e=0;e<r.length;e++)if(this.get(t+e)!==r[e])return!1;return!0};{const o={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const s in o)!function(r){null===o[r]?i.prototype[r]=function(e,t){return this.slice(e,e+t)[r](0,t)}:i.prototype[r]=function(e=0){return this.slice(e,e+o[r])[r](0)}}(s)}i.prototype._isBufferList=function(e){return e instanceof i||i.isBufferList(e)},i.isBufferList=function(e){return null!=e&&e[n]},t.exports=i},{buffer:3}],40:[function(e,t,r){"use strict";const n=e("readable-stream").Duplex;var i=e("inherits");const o=e("./BufferList");function s(e){if(!(this instanceof s))return new s(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}o._init.call(this,e),n.call(this)}i(s,n),Object.assign(s.prototype,o.prototype),s.prototype._new=function(e){return new s(e)},s.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},s.prototype._isBufferList=function(e){return e instanceof s||e instanceof o||s.isBufferList(e)},s.isBufferList=o.isBufferList,t.exports=s,t.exports.BufferListStream=s,t.exports.BufferList=o},{"./BufferList":39,inherits:13,"readable-stream":55}],41:[function(e,t,r){"use strict";var n={};function i(e,i,t){var r=function(n){var e,t;function r(e,t,r){return n.call(this,(e=e,t=t,r=r,"string"==typeof i?i:i(e,t,r)))||this}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(t=t||Error);r.prototype.name=t.name,r.prototype.code=e,n[e]=r}function c(e,t){var r;return Array.isArray(e)?(r=e.length,e=e.map(function(e){return String(e)}),2<r?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,r){var n,i,o,s,a;return"string"==typeof t&&(s="not ",t.substr(!o||o<0?0:+o,s.length)===s)?(n="must not be",t=t.replace(/^not /,"")):n="must be",o=e,s=" argument",(void 0===a||a>o.length)&&(a=o.length),o=(o.substring(a-s.length,a)===s?"The ".concat(e," "):(a=(i="number"!=typeof i?0:i)+(o=".").length>(a=e).length||-1===a.indexOf(o,i)?"argument":"property",'The "'.concat(e,'" ').concat(a," "))).concat(n," ").concat(c(t,"type")),o+=". Received type ".concat(typeof r)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},{}],42:[function(u,h,e){!function(l){!function(){"use strict";var e=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},t=(h.exports=s,u("./_stream_readable")),r=u("./_stream_writable");u("inherits")(s,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var o=n[i];s.prototype[o]||(s.prototype[o]=r.prototype[o])}function s(e){if(!(this instanceof s))return new s(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",a))}function a(){this._writableState.ended||l.nextTick(c,this)}function c(e){e.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}.call(this)}.call(this,u("_process"))},{"./_stream_readable":44,"./_stream_writable":46,_process:96,inherits:13}],43:[function(e,t,r){"use strict";t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":45,inherits:13}],44:[function(U,q,e){!function(B,D){!function(){"use strict";function p(e,t){return e.listeners(t).length}(q.exports=w).ReadableState=v,U("events").EventEmitter;var n,i=U("./internal/streams/stream"),u=U("buffer").Buffer,h=(void 0!==D?D:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var o,e,r,t=U("util"),g=t&&t.debuglog?t.debuglog("stream"):function(){},s=U("./internal/streams/buffer_list"),t=U("./internal/streams/destroy"),a=U("./internal/streams/state").getHighWaterMark,c=U("../errors").codes,f=c.ERR_INVALID_ARG_TYPE,d=c.ERR_STREAM_PUSH_AFTER_EOF,l=c.ERR_METHOD_NOT_IMPLEMENTED,m=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,b=(U("inherits")(w,i),t.errorOrDestroy),y=["error","close","destroy","pause","resume"];function v(e,t,r){n=n||U("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=t instanceof n),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=a(this,e,"readableHighWaterMark",r),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o=o||U("string_decoder/").StringDecoder,this.decoder=new o(e.encoding),this.encoding=e.encoding)}function w(e){if(n=n||U("./_stream_duplex"),!(this instanceof w))return new w(e);var t=this instanceof n;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy)&&(this._destroy=e.destroy),i.call(this)}function _(e,t,r,n,i){g("readableAddChunk",t);var o,s,a,c,l=e._readableState;if(null===t)l.reading=!1,s=e,a=l,g("onEofChunk"),a.ended||(a.decoder&&(c=a.decoder.end())&&c.length&&(a.buffer.push(c),a.length+=a.objectMode?1:c.length),a.ended=!0,a.sync?k(s):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,C(s))));else if(o=i?o:function(e,t){var r;!function(e){return u.isBuffer(e)||e instanceof h}(t)&&"string"!=typeof t&&void 0!==t&&!e.objectMode&&(r=new f("chunk",["string","Buffer","Uint8Array"],t));return r}(l,t))b(e,o);else if(l.objectMode||t&&0<t.length)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===u.prototype||(c=t,t=u.from(c)),n)l.endEmitted?b(e,new m):x(e,l,t,!0);else if(l.ended)b(e,new d);else{if(l.destroyed)return!1;l.reading=!1,!l.decoder||r||(t=l.decoder.write(t),l.objectMode)||0!==t.length?x(e,l,t,!1):A(e,l)}else n||(l.reading=!1,A(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function x(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&k(e)),A(e,t)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=t.destroy,w.prototype._undestroy=t.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},w.prototype.unshift=function(e){return _(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){for(var t=new(o=o||U("string_decoder/").StringDecoder)(e),r=(this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var S=1073741824;function E(e,t){var r;return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(S<=(r=e)?r=S:(r--,r=(r=(r=(r=(r|=r>>>1)|r>>>2)|r>>>4)|r>>>8)|r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;g("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(g("emitReadable",t.flowing),t.emittedReadable=!0,B.nextTick(C,e))}function C(e){var t=e._readableState;g("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,R(e)}function A(e,t){t.readingMore||(t.readingMore=!0,B.nextTick(T,e,t))}function T(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(g("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function P(e){g("readable nexttick read 0"),e.read(0)}function O(e,t){g("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(g("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function j(e){var t=e._readableState;g("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,B.nextTick(N,t,e))}function N(e,t){g("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy())}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){g("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;return 0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:0<r.length)||r.ended)?(g("read: emitReadable",r.length,r.ended),(0===r.length&&r.ended?j:k)(this),null):0===(e=E(e,r))&&r.ended?(0===r.length&&j(this),null):(t=r.needReadable,g("need readable",t),(0===r.length||r.length-e<r.highWaterMark)&&g("length less than watermark",t=!0),r.ended||r.reading?g("reading or ended",t=!1):t&&(g("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=E(n,r))),null===(t=0<e?M(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e)&&r.ended&&j(this),null!==t&&this.emit("data",t),t)},w.prototype._read=function(e){b(this,new l("_read()"))},w.prototype.pipe=function(r,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r)}i.pipesCount+=1,g("pipe count=%d opts=%j",i.pipesCount,e);e=(!e||!1!==e.end)&&r!==B.stdout&&r!==B.stderr?s:d;function o(e,t){g("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,g("cleanup"),r.removeListener("close",h),r.removeListener("finish",f),r.removeListener("drain",a),r.removeListener("error",u),r.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",d),n.removeListener("data",l),c=!0,!i.awaitDrain||r._writableState&&!r._writableState.needDrain||a())}function s(){g("onend"),r.end()}i.endEmitted?B.nextTick(e):n.once("end",e),r.on("unpipe",o);t=n;var t,a=function(){var e=t._readableState;g("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&p(t,"data")&&(e.flowing=!0,R(t))},c=(r.on("drain",a),!1);function l(e){g("ondata");e=r.write(e);g("dest.write",e),!1===e&&((1===i.pipesCount&&i.pipes===r||1<i.pipesCount&&-1!==L(i.pipes,r))&&!c&&(g("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function u(e){g("onerror",e),d(),r.removeListener("error",u),0===p(r,"error")&&b(r,e)}function h(){r.removeListener("finish",f),d()}function f(){g("onfinish"),r.removeListener("close",h),d()}function d(){g("unpipe"),n.unpipe(r)}return n.on("data",l),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(r,"error",u),r.once("close",h),r.once("finish",f),r.emit("pipe",n),i.flowing||(g("pipe resume"),n.resume()),r},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0!==t.pipesCount)if(1===t.pipesCount)e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r));else if(e){var n=L(t.pipes,e);-1!==n&&(t.pipes.splice(n,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r))}else{var i=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<o;s++)i[s].emit("unpipe",this,{hasUnpiped:!1})}return this},w.prototype.addListener=w.prototype.on=function(e,t){var t=i.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"!==e||r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,g("on readable",r.length,r.reading),r.length?k(this):r.reading||B.nextTick(P,this)),t},w.prototype.removeListener=function(e,t){t=i.prototype.removeListener.call(this,e,t);return"readable"===e&&B.nextTick(I,this),t},w.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||B.nextTick(I,this),t},w.prototype.resume=function(){var e,t,r=this._readableState;return r.flowing||(g("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled)||(t.resumeScheduled=!0,B.nextTick(O,e,t)),r.paused=!1,this},w.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(t){var e,r=this,n=this._readableState,i=!1;for(e in t.on("end",function(){var e;g("wrapped end"),n.decoder&&!n.ended&&(e=n.decoder.end())&&e.length&&r.push(e),r.push(null)}),t.on("data",function(e){g("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&!r.push(e)&&(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){g("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return(e=void 0===e?U("./internal/streams/async_iterator"):e)(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=M,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return(r=void 0===r?U("./internal/streams/from"):r)(w,e,t)})}.call(this)}.call(this,U("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":41,"./_stream_duplex":42,"./internal/streams/async_iterator":47,"./internal/streams/buffer_list":48,"./internal/streams/destroy":49,"./internal/streams/from":51,"./internal/streams/state":53,"./internal/streams/stream":54,_process:96,buffer:3,events:11,inherits:13,"string_decoder/":106,util:2}],45:[function(e,t,r){"use strict";t.exports=c;var t=e("../errors").codes,n=t.ERR_METHOD_NOT_IMPLEMENTED,i=t.ERR_MULTIPLE_CALLBACK,o=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=t.ERR_TRANSFORM_WITH_LENGTH_0,a=e("./_stream_duplex");function c(e){if(!(this instanceof c))return new c(e);a.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState,n=(r.transforming=!1,r.writecb);if(null===n)return this.emit("error",new i);r.writechunk=null,(r.writecb=null)!=t&&this.push(t),n(e),(r=this._readableState).reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush)&&(this._flush=e.flush),this.on("prefinish",l)}function l(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush(function(e,t){u(r,e,t)})}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;e.push(null)}e("inherits")(c,a),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new n("_transform()"))},c.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming&&(r=this._readableState,n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){a.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":41,"./_stream_duplex":42,inherits:13}],46:[function(P,O,e){!function(T,I){!function(){"use strict";function h(o){var s=this;this.next=null,this.entry=null,this.finish=function(){var e=s,t=o,r=void 0,n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}}(O.exports=_).WritableState=w;var r,e={deprecate:P("util-deprecate")},n=P("./internal/streams/stream"),l=P("buffer").Buffer,u=(void 0!==I?I:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var i,t=P("./internal/streams/destroy"),o=P("./internal/streams/state").getHighWaterMark,s=P("../errors").codes,f=s.ERR_INVALID_ARG_TYPE,a=s.ERR_METHOD_NOT_IMPLEMENTED,d=s.ERR_MULTIPLE_CALLBACK,c=s.ERR_STREAM_CANNOT_PIPE,p=s.ERR_STREAM_DESTROYED,g=s.ERR_STREAM_NULL_VALUES,m=s.ERR_STREAM_WRITE_AFTER_END,b=s.ERR_UNKNOWN_ENCODING,y=t.errorOrDestroy;function v(){}function w(e,u,t){r=r||P("./_stream_duplex"),e=e||{},"boolean"!=typeof t&&(t=u instanceof r),this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=o(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t=u,r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new d;var o,s,a,c,l=r;l.writing=!1,l.writecb=null,l.length-=l.writelen,l.writelen=0,e?(l=t,s=n,a=e,c=i,--(o=r).pendingcb,s?(T.nextTick(c,a),T.nextTick(A,l,o),l._writableState.errorEmitted=!0,y(l,a)):(c(a),l._writableState.errorEmitted=!0,y(l,a),A(l,o))):((e=k(r)||t.destroyed)||r.corked||r.bufferProcessing||!r.bufferedRequest||E(t,r),n?T.nextTick(S,t,r,e,i):S(t,r,e,i))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}P("inherits")(_,n),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(w.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function _(e){var t=this instanceof(r=r||P("./_stream_duplex"));if(!t&&!i.call(_,this))return new _(e);this._writableState=new w(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final)&&(this._final=e.final),n.call(this)}function x(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function S(e,t,r,n){var i;r||(r=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,r.emit("drain"))),t.pendingcb--,n(),A(e,t)}function E(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){for(var n=t.bufferedRequestCount,i=new Array(n),n=t.corkedRequestsFree,o=(n.entry=r,0),s=!0;r;)(i[o]=r).isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,x(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new h(t),t.bufferedRequestCount=0}else{for(;r;){var a=r.chunk,c=r.encoding,l=r.callback;if(x(e,t,!1,t.objectMode?1:a.length,a,c,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(t,r){t._final(function(e){r.pendingcb--,e&&y(t,e),r.prefinished=!0,t.emit("prefinish"),A(t,r)})}function A(e,t){var r,n,i=k(t);return i&&(r=e,(n=t).prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,T.nextTick(C,r,n))),0===t.pendingcb)&&(t.finished=!0,e.emit("finish"),t.autoDestroy)&&(!(r=e._readableState)||r.autoDestroy&&r.endEmitted)&&e.destroy(),i}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===_&&e&&e._writableState instanceof w}})):i=function(e){return e instanceof this},_.prototype.pipe=function(){y(this,new c)},_.prototype.write=function(e,t,r){var n,i,o,s=this._writableState,a=!1,c=!s.objectMode&&(c=e,l.isBuffer(c)||c instanceof u);return c&&!l.isBuffer(e)&&(n=e,e=l.from(n)),"function"==typeof t&&(r=t,t=null),t=c?"buffer":t||s.defaultEncoding,"function"!=typeof r&&(r=v),s.ending?(n=this,i=r,o=new m,y(n,o),T.nextTick(i,o)):(c||function(e,t,r,n){var i;if(null===r?i=new g:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i)return 1;y(e,i),T.nextTick(n,i)}(this,s,e,r))&&(s.pendingcb++,a=function(e,t,r,n,i,o){r||(s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r));return t}(t,n,i),n!==s&&(r=!0,i="buffer",n=s));var s=t.objectMode?1:n.length,a=(t.length+=s,t.length<t.highWaterMark);a||(t.needDrain=!0);{var c;t.writing||t.corked?(c=t.lastBufferedRequest,t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):x(e,t,!1,s,n,i,o)}return a}(this,s,c,e,t,r)),a},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new b(e)},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new a("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var n=this._writableState;if("function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending){e=this,t=n,n=r;t.ending=!0,A(e,t),n&&(t.finished?T.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}return this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=t.destroy,_.prototype._undestroy=t.undestroy,_.prototype._destroy=function(e,t){t(e)}}.call(this)}.call(this,P("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":41,"./_stream_duplex":42,"./internal/streams/destroy":49,"./internal/streams/state":53,"./internal/streams/stream":54,_process:96,buffer:3,inherits:13,"util-deprecate":110}],47:[function(n,m,e){!function(g){!function(){"use strict";var e;function r(e,t,r){(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var i=n("./end-of-stream"),o=Symbol("lastResolve"),s=Symbol("lastReject"),a=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function d(e){var t,r=e[o];null!==r&&null!==(t=e[h].read())&&(e[l]=null,e[o]=null,e[s]=null,r(f(t,!1)))}var t=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((r(e={get stream(){return this[h]},next:function(){var r=this,e=this[a];if(null!==e)return Promise.reject(e);if(this[c])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(e,t){g.nextTick(function(){r[a]?t(r[a]):e(f(void 0,!0))})});var t,n,i,e=this[l];if(e)t=new Promise((n=e,i=this,function(e,t){n.then(function(){i[c]?e(f(void 0,!0)):i[u](e,t)},t)}));else{e=this[h].read();if(null!==e)return Promise.resolve(f(e,!1));t=new Promise(this[u])}return this[l]=t}},Symbol.asyncIterator,function(){return this}),r(e,"return",function(){var e=this;return new Promise(function(t,r){e[h].destroy(null,function(e){e?r(e):t(f(void 0,!0))})})}),e),t);m.exports=function(e){var t,n=Object.create(p,(r(t={},h,{value:e,writable:!0}),r(t,o,{value:null,writable:!0}),r(t,s,{value:null,writable:!0}),r(t,a,{value:null,writable:!0}),r(t,c,{value:e._readableState.endEmitted,writable:!0}),r(t,u,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[o]=null,n[s]=null,e(f(r,!1))):(n[o]=e,n[s]=t)},writable:!0}),t));return n[l]=null,i(e,function(e){var t;e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code?(null!==(t=n[s])&&(n[l]=null,n[o]=null,n[s]=null,t(e)),n[a]=e):(null!==(t=n[o])&&(n[l]=null,n[o]=null,t(f(void 0,!(n[s]=null)))),n[c]=!0)}),e.on("readable",function(e){g.nextTick(d,e)}.bind(null,n)),n}}.call(this)}.call(this,n("_process"))},{"./end-of-stream":50,_process:96}],48:[function(e,t,r){"use strict";function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function i(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}var c=e("buffer").Buffer,l=e("util").inspect,u=l&&l.custom||"inspect";t.exports=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,r,n=c.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,r=o,c.prototype.copy.call(t,n,r),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=i.slice(o);break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r).data=i.slice(o);break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return l(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},{buffer:3,util:2}],49:[function(e,t,r){!function(c){!function(){"use strict";function o(e,t){a(e,t),s(e)}function s(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(a,this,e)):c.nextTick(a,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?c.nextTick(s,r):(r._writableState.errorEmitted=!0,c.nextTick(o,r,e)):c.nextTick(o,r,e):t?(c.nextTick(s,r),t(e)):c.nextTick(s,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}.call(this)}.call(this,e("_process"))},{_process:96}],50:[function(e,t,r){"use strict";var b=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function y(){}t.exports=function e(t,r,n){var i,o,s,a,c,l,u,h,f,d,p,g,m;return"function"==typeof r?e(t,null,r):(i=n||y,o=!1,n=function(){if(!o){o=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.apply(this,t)}},s=(r=r||{}).readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){l=!(a=!1),s||n.call(t)},h=t._readableState&&t._readableState.endEmitted,f=function(){h=!(s=!1),a||n.call(t)},d=function(e){n.call(t,e)},p=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new b),n.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new b),n.call(t,e)):void 0},g=function(){t.req.on("finish",u)},(m=t).setHeader&&"function"==typeof m.abort?(t.on("complete",u),t.on("abort",p),t.req?g():t.on("request",g)):a&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",f),t.on("finish",u),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",f),t.removeListener("error",d),t.removeListener("close",p)})}},{"../../../errors":41}],51:[function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],52:[function(c,e,t){"use strict";var l;var r=c("../../../errors").codes,a=r.ERR_MISSING_ARGS,u=r.ERR_STREAM_DESTROYED;function h(e){if(e)throw e}function f(r,e,t,n){i=n,o=!1;var i,o,s=!(n=function(){o||(o=!0,i.apply(void 0,arguments))}),a=(r.on("close",function(){s=!0}),(l=void 0===l?c("./end-of-stream"):l)(r,{readable:e,writable:t},function(e){if(e)return n(e);s=!0,n()}),!1);return function(e){var t;if(!s&&!a)return a=!0,(t=r).setHeader&&"function"==typeof t.abort?r.abort():"function"==typeof r.destroy?r.destroy():void n(e||new u("pipe"))}}function d(e){e()}function p(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r,i,o=!(r=n).length||"function"!=typeof r[r.length-1]?h:r.pop();if((n=Array.isArray(n[0])?n[0]:n).length<2)throw new a("streams");var s=n.map(function(e,t){var r=t<n.length-1;return f(e,r,0<t,function(e){i=i||e,e&&s.forEach(d),r||(s.forEach(d),o(i))})});return n.reduce(p)}},{"../../../errors":41,"./end-of-stream":50}],53:[function(e,t,r){"use strict";var s=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,n){o=n,i=r;var i,o=null!=(t=t).highWaterMark?t.highWaterMark:o?t[i]:null;if(null==o)return e.objectMode?16:16384;if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new s(n?r:"highWaterMark",o);return Math.floor(o)}}},{"../../../errors":41}],54:[function(e,t,r){t.exports=e("events").EventEmitter},{events:11}],55:[function(e,t,r){(((r=t.exports=e("./lib/_stream_readable.js")).Stream=r).Readable=r).Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":42,"./lib/_stream_passthrough.js":43,"./lib/_stream_readable.js":44,"./lib/_stream_transform.js":45,"./lib/_stream_writable.js":46,"./lib/internal/streams/end-of-stream.js":50,"./lib/internal/streams/pipeline.js":52}],56:[function(e,n,t){!function(o){!function(){const t={},i=o.isBuffer(o.from([1,2]).subarray(0,1));function r(e){var t=o.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}n.exports={cache:t,generateCache:function(){for(let e=0;e<65536;e++)t[e]=r(e)},generateNumber:r,genBufVariableByteInt:function(e){let t=0,r=0;for(var n=o.allocUnsafe(4);t=e%128|0,0<(e=e/128|0)&&(t|=128),n.writeUInt8(t,r++),0<e&&r<4;);return 0<e&&(r=0),i?n.subarray(0,r):n.slice(0,r)},generate4ByteBuffer:function(e){var t=o.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:3}],57:[function(e,t,r){t.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],58:[function(e,t,r){const n=e("bl");var i=e("events");const o=e("./packet"),a=e("./constants"),c=e("debug")("mqtt-packet:parser");class s extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof s?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new s).parser(e)}_resetState(){c("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=n(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),c("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||0<this._list.length)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,c("parse: state complete. _stateCounter is now: %d",this._stateCounter),c("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return c("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){var e=this._list.readUInt8(0);return this.packet.cmd=a.types[e>>a.CMD_SHIFT],this.packet.retain=0!=(e&a.RETAIN_MASK),this.packet.qos=e>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(e&a.DUP_MASK),c("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){var e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),c("_parseLength %d",e.value),!!e}_parsePayload(){c("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return c("_parsePayload complete result: %s",e),e}_parseConnect(){c("_parseConnect");var e={},t=this.packet,r=this._parseString();if(null===r)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==r&&"MQIsdp"!==r)return this._emitError(new Error("Invalid protocolId"));if(t.protocolId=r,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(t.protocolVersion=this._list.readUInt8(this._pos),128<=t.protocolVersion&&(t.bridgeMode=!0,t.protocolVersion=t.protocolVersion-128),3!==t.protocolVersion&&4!==t.protocolVersion&&5!==t.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(e.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,e.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,e.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,e.will&&(t.will={},t.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),t.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),t.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,t.keepalive=this._parseNum(),-1===t.keepalive)return this._emitError(new Error("Packet too short"));5===t.protocolVersion&&(r=this._parseProperties(),Object.getOwnPropertyNames(r).length)&&(t.properties=r);var r=this._parseString();if(null===r)return this._emitError(new Error("Packet too short"));if(t.clientId=r,c("_parseConnect: packet.clientId: %s",t.clientId),e.will){if(5===t.protocolVersion&&(r=this._parseProperties(),Object.getOwnPropertyNames(r).length)&&(t.will.properties=r),null===(r=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(t.will.topic=r,c("_parseConnect: packet.will.topic: %s",t.will.topic),null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));t.will.payload=r,c("_parseConnect: packet.will.paylaod: %s",t.will.payload)}if(e.username){if(null===(r=this._parseString()))return this._emitError(new Error("Cannot parse username"));t.username=r,c("_parseConnect: packet.username: %s",t.username)}if(e.password){if(null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));t.password=r}return this.settings=t,c("_parseConnect: complete"),t}_parseConnack(){c("_parseConnack");var e,t=this.packet;if(this._list.length<1)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)2<=this._list.length?t.reasonCode=this._list.readUInt8(this._pos++):t.reasonCode=0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(-1===t.returnCode||-1===t.reasonCode)return this._emitError(new Error("Cannot parse return code"));5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e),c("_parseConnack: complete")}_parsePublish(){c("_parsePublish");var e,t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));0<t.qos&&!this._parseMessageId()||(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e),t.payload=this._list.slice(this._pos,t.length),c("_parsePublish: payload from buffer list: %o",t.payload))}_parseSubscribe(){c("_parseSubscribe");var e,t,r,n,i,o,s=this.packet;if(1!==s.qos)return this._emitError(new Error("Wrong subscribe header"));if(s.subscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(o=this._parseProperties(),Object.getOwnPropertyNames(o).length)&&(s.properties=o);this._pos<s.length;){if(null===(i=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=s.length)return this._emitError(new Error("Malformed Subscribe Payload"));e=(t=this._parseByte())&a.SUBSCRIBE_OPTIONS_QOS_MASK,n=0!=(t>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK),r=0!=(t>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK),t=t>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:i,qos:e},5===this.settings.protocolVersion?(i.nl=n,i.rap=r,i.rh=t):this.settings.bridgeMode&&(i.rh=0,i.rap=!0,i.nl=!0),c("_parseSubscribe: push subscription `%s` to subscription",i),s.subscriptions.push(i)}}_parseSuback(){c("_parseSuback");var e,t=this.packet;if(this.packet.granted=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e);this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}_parseUnsubscribe(){c("_parseUnsubscribe");var e,t=this.packet;if(t.unsubscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e);this._pos<t.length;){var r=this._parseString();if(null===r)return this._emitError(new Error("Cannot parse topic"));c("_parseUnsubscribe: push topic `%s` to unsubscriptions",r),t.unsubscriptions.push(r)}}_parseUnsuback(){c("_parseUnsuback");var e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){var t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){c("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);var e,t=this.packet;return this._parseMessageId(),5===this.settings.protocolVersion&&(2<t.length?(t.reasonCode=this._parseByte(),c("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)):t.reasonCode=0,3<t.length)&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e),!0}_parseDisconnect(){var e,t=this.packet;return c("_parseDisconnect"),5===this.settings.protocolVersion&&(0<this._list.length?t.reasonCode=this._parseByte():t.reasonCode=0,e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e),c("_parseDisconnect result: true"),!0}_parseAuth(){c("_parseAuth");var e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();var t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),c("_parseAuth: result: true"),!0}_parseMessageId(){var e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(c("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){var t=this._parseNum(),r=t+this._pos;return-1===t||r>this._list.length||r>this.packet.length?null:(r=this._list.toString("utf8",this._pos,r),this._pos+=t,c("_parseString: result: %s",r),r)}_parseStringPair(){return c("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){var e=this._parseNum(),t=e+this._pos;return-1===e||t>this._list.length||t>this.packet.length?null:(t=this._list.slice(this._pos,t),this._pos+=e,c("_parseBuffer: result: %o",t),t)}_parseNum(){var e;return this._list.length-this._pos<2?-1:(e=this._list.readUInt16BE(this._pos),this._pos+=2,c("_parseNum: result: %s",e),e)}_parse4ByteNum(){var e;return this._list.length-this._pos<4?-1:(e=this._list.readUInt32BE(this._pos),this._pos+=4,c("_parse4ByteNum: result: %s",e),e)}_parseVarByteNum(e){c("_parseVarByteNum");var t;let r=0,n=1,i=0,o=!1;for(var s=this._pos||0;r<4&&s+r<this._list.length;){if(t=this._list.readUInt8(s+r++),i+=n*(t&a.VARBYTEINT_MASK),n*=128,0==(t&a.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=r)break}return!o&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),s&&(this._pos+=r),o=!!o&&(e?{bytes:r,value:i}:i),c("_parseVarByteNum: result: %o",o),o}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),c("_parseByte: result: %o",e),e}_parseByType(e){switch(c("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){c("_parseProperties");for(var e=this._parseVarByteNum(),t=this._pos+e,r={};this._pos<t;){var n=this._parseByte();if(!n)return this._emitError(new Error("Cannot parse property code type")),!1;var i,o,n=a.propertiesCodes[n];if(!n)return this._emitError(new Error("Unknown property")),!1;"userProperties"===n?(r[n]||(r[n]=Object.create(null)),i=this._parseByType(a.propertiesTypes[n]),r[n][i.name]?(Array.isArray(r[n][i.name])||(o=r[n][i.name],r[n][i.name]=[o]),r[n][i.name].push(i.value)):r[n][i.name]=i.value):r[n]?(Array.isArray(r[n])||(r[n]=[r[n]]),r[n].push(this._parseByType(a.propertiesTypes[n]))):r[n]=this._parseByType(a.propertiesTypes[n])}return r}_newPacket(){return c("_newPacket"),this.packet&&(this._list.consume(this.packet.length),c("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),c("_newPacket: new packet"),this.packet=new o,!(this._pos=0)}_emitError(e){c("_emitError"),this.error=e,this.emit("error",e)}}t.exports=s},{"./constants":36,"./packet":57,bl:40,debug:8,events:11}],59:[function(f,d,e){!function(ge){!function(){const Z=f("./constants"),ee=ge.allocUnsafe(0),te=ge.from([0]);var e=f("./numbers");const re=f("process-nextick-args").nextTick,ne=f("debug")("mqtt-packet:writeToStream"),r=e.cache,n=e.generateNumber,ie=e.generateCache,a=e.genBufVariableByteInt,o=e.generate4ByteBuffer;let oe=c,se=!0;function t(i,o,n){switch(ne("generate called"),o.cork&&(o.cork(),re(ae,o)),se&&(se=!1,ie()),ne("generate: packet.cmd: %s",i.cmd),i.cmd){case"connect":{var s=i;var a=o;var s=s||{},c=s.protocolId||"MQTT";let e=s.protocolVersion||4;var l=s.will;let t=s.clean;var u=s.keepalive||0,h=s.clientId||"",f=s.username,d=s.password,p=s.properties;void 0===t&&(t=!0);let r=0;{if(!c||"string"!=typeof c&&!ge.isBuffer(c))return a.emit("error",new Error("Invalid protocolId")),!1;r+=c.length+2}{if(3!==e&&4!==e&&5!==e)return a.emit("error",new Error("Invalid protocol version")),!1;r+=1}if(("string"==typeof h||ge.isBuffer(h))&&(h||4<=e)&&(h||t))r+=ge.byteLength(h)+2;else{if(e<4)return a.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(0==+t)return a.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}{if("number"!=typeof u||u<0||65535<u||u%1!=0)return a.emit("error",new Error("Invalid keepalive")),!1;r+=2}if(r+=1,5===e){var B=he(a,p);if(!B)return!1;r+=B.length}if(l){if("object"!=typeof l)return a.emit("error",new Error("Invalid will")),!1;if(!l.topic||"string"!=typeof l.topic)return a.emit("error",new Error("Invalid will topic")),!1;if(r=r+(ge.byteLength(l.topic)+2)+2,l.payload){if(!(0<=l.payload.length))return a.emit("error",new Error("Invalid will payload")),!1;"string"==typeof l.payload?r+=ge.byteLength(l.payload):r+=l.payload.length}var g={};if(5===e){if(!(g=he(a,l.properties)))return!1;r+=g.length}}let n=!1;if(null!=f){if(!pe(f))return a.emit("error",new Error("Invalid username")),!1;n=!0,r+=ge.byteLength(f)+2}if(null!=d){if(!n)return a.emit("error",new Error("Username is required to use password")),!1;if(!pe(d))return a.emit("error",new Error("Invalid password")),!1;r+=de(d)+2}a.write(Z.CONNECT_HEADER),ce(a,r),ue(a,c),s.bridgeMode&&(e+=128);a.write(131===e?Z.VERSION131:132===e?Z.VERSION132:4===e?Z.VERSION4:5===e?Z.VERSION5:Z.VERSION3);p=0;p=(p=(p=(p=(p=(p|=null!=f?Z.USERNAME_MASK:0)|(null!=d?Z.PASSWORD_MASK:0))|(l&&l.retain?Z.WILL_RETAIN_MASK:0))|(l&&l.qos?l.qos<<Z.WILL_QOS_SHIFT:0))|(l?Z.WILL_FLAG_MASK:0))|(t?Z.CLEAN_SESSION_MASK:0),a.write(ge.from([p])),oe(a,u),5===e&&B.write();ue(a,h),l&&(5===e&&g.write(),le(a,l.topic),ue(a,l.payload));null!=f&&ue(a,f);null!=d&&ue(a,d);return!0;return}case"connack":{c=i;s=o;p=n;p=p?p.protocolVersion:4,c=c||{},u=5===p?c.reasonCode:c.returnCode,B=c.properties;let e=2;if("number"!=typeof u)return s.emit("error",new Error("Invalid return code")),!1;let t=null;if(5===p){if(!(t=he(s,B)))return!1;e+=t.length}s.write(Z.CONNACK_HEADER),ce(s,e),s.write(c.sessionPresent?Z.SESSIONPRESENT_HEADER:te),s.write(ge.from([u])),null!=t&&t.write();return!0;return}case"publish":{h=i;g=o;l=n;ne("publish: packet: %o",h);var l=l?l.protocolVersion:4,h=h||{},f=h.qos||0,a=h.retain?Z.RETAIN_MASK:0,d=h.topic,m=h.payload||ee,b=h.messageId,y=h.properties;let e=0;if("string"==typeof d)e+=ge.byteLength(d)+2;else{if(!ge.isBuffer(d))return g.emit("error",new Error("Invalid topic")),!1;e+=d.length+2}ge.isBuffer(m)?e+=m.length:e+=ge.byteLength(m);{if(f&&"number"!=typeof b)return g.emit("error",new Error("Invalid messageId")),!1;f&&(e+=2)}let t=null;if(5===l){if(!(t=he(g,y)))return!1;e+=t.length}g.write(Z.PUBLISH_HEADER[f][h.dup?1:0][a?1:0]),ce(g,e),oe(g,de(d)),g.write(d),0<f&&oe(g,b);null!=t&&t.write();return ne("publish: payload: %o",m),g.write(m);return}case"puback":case"pubrec":case"pubrel":case"pubcomp":{y=i;b=o;m=n;var v=m?m.protocolVersion:4,y=y||{},w=y.cmd||"puback",D=y.messageId,_=y.dup&&"pubrel"===w?Z.DUP_MASK:0;let e=0;var U=y.reasonCode,y=y.properties;let t=5===v?3:2;"pubrel"===w&&(e=1);if("number"!=typeof D)return b.emit("error",new Error("Invalid messageId")),!1;let r=null;if(5===v&&"object"==typeof y){if(!(r=fe(b,y,m,t)))return!1;t+=r.length}b.write(Z.ACKS[w][e][_][0]),ce(b,t),oe(b,D),5===v&&b.write(ge.from([U]));null!==r&&r.write();return!0;return}case"subscribe":{w=i;var x=o;_=n;ne("subscribe: packet: ");var q=_?_.protocolVersion:4,_=w||{},w=_.dup?Z.DUP_MASK:0,D=_.messageId,S=_.subscriptions,_=_.properties;let t=0;{if("number"!=typeof D)return x.emit("error",new Error("Invalid messageId")),!1;t+=2}let e=null;if(5===q){if(!(e=he(x,_)))return!1;t+=e.length}{if("object"!=typeof S||!S.length)return x.emit("error",new Error("Invalid subscriptions")),!1;for(let e=0;e<S.length;e+=1){var F=S[e].topic,H=S[e].qos;if("string"!=typeof F)return x.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof H)return x.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===q){if("boolean"!=typeof(S[e].nl||!1))return x.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(S[e].rap||!1))return x.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;H=S[e].rh||0;if("number"!=typeof H||2<H)return x.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}t+=ge.byteLength(F)+2+1}}ne("subscribe: writing to stream: %o",Z.SUBSCRIBE_HEADER),x.write(Z.SUBSCRIBE_HEADER[1][w?1:0][0]),ce(x,t),oe(x,D),null!==e&&e.write();let r=!0;for(const N of S){var W=N.topic,z=N.qos,V=+N.nl,K=+N.rap,G=N.rh;let e;le(x,W),e=Z.SUBSCRIBE_OPTIONS_QOS[z],5===q&&(e=(e=(e|=V?Z.SUBSCRIBE_OPTIONS_NL:0)|(K?Z.SUBSCRIBE_OPTIONS_RAP:0))|(G?Z.SUBSCRIBE_OPTIONS_RH[G]:0)),r=x.write(ge.from([e]))}return r;return}case"suback":{v=i;var r=o;U=n;var E=U?U.protocolVersion:4,v=v||{},k=v.messageId,Y=v.granted,v=v.properties;let t=0;{if("number"!=typeof k)return r.emit("error",new Error("Invalid messageId")),!1;t+=2}{if("object"!=typeof Y||!Y.length)return r.emit("error",new Error("Invalid qos vector")),!1;for(let e=0;e<Y.length;e+=1){if("number"!=typeof Y[e])return r.emit("error",new Error("Invalid qos vector")),!1;t+=1}}let e=null;if(5===E){if(!(e=fe(r,v,U,t)))return!1;t+=e.length}r.write(Z.SUBACK_HEADER),ce(r,t),oe(r,k),null!==e&&e.write();return r.write(ge.from(Y));return}case"unsubscribe":{E=i;var C=o;k=n;var k=k?k.protocolVersion:4,E=E||{},A=E.messageId,T=E.dup?Z.DUP_MASK:0,I=E.unsubscriptions,E=E.properties;let t=0;{if("number"!=typeof A)return C.emit("error",new Error("Invalid messageId")),!1;t+=2}{if("object"!=typeof I||!I.length)return C.emit("error",new Error("Invalid unsubscriptions")),!1;for(let e=0;e<I.length;e+=1){if("string"!=typeof I[e])return C.emit("error",new Error("Invalid unsubscriptions")),!1;t+=ge.byteLength(I[e])+2}}let e=null;if(5===k){if(!(e=he(C,E)))return!1;t+=e.length}C.write(Z.UNSUBSCRIBE_HEADER[1][T?1:0][0]),ce(C,t),oe(C,A),null!==e&&e.write();let r=!0;for(let e=0;e<I.length;e++)r=le(C,I[e]);return r;return}case"unsuback":{T=i;var P=o;A=n;var O=A?A.protocolVersion:4,T=T||{},R=T.messageId,M=T.dup?Z.DUP_MASK:0,Q=T.granted,$=T.properties,T=T.cmd;let t=2;if("number"!=typeof R)return P.emit("error",new Error("Invalid messageId")),!1;if(5===O){if("object"!=typeof Q||!Q.length)return P.emit("error",new Error("Invalid qos vector")),!1;for(let e=0;e<Q.length;e+=1){if("number"!=typeof Q[e])return P.emit("error",new Error("Invalid qos vector")),!1;t+=1}}let e=null;if(5===O){if(!(e=fe(P,$,A,t)))return!1;t+=e.length}P.write(Z.ACKS[T][0][M][0]),ce(P,t),oe(P,R),null!==e&&e.write();5===O&&P.write(ge.from(Q));return!0;return}case"pingreq":case"pingresp":return $=i,o.write(Z.EMPTY[$.cmd]);case"disconnect":{M=i;R=o;O=n;var j=O?O.protocolVersion:4,M=M||{},L=M.reasonCode,M=M.properties;let e=5===j?1:0,t=null;if(5===j){if(!(t=fe(R,M,O,e)))return!1;e+=t.length}R.write(ge.from([Z.codes.disconnect<<4])),ce(R,e),5===j&&R.write(ge.from([L]));null!==t&&t.write();return!0;return}case"auth":var j=i,L=o,t=n,e=t?t.protocolVersion:4,X=(j=j||{}).reasonCode,j=j.properties,J=5===e?1:0;return(5!==e&&L.emit("error",new Error("Invalid mqtt version for auth packet")),e=fe(L,j,t,J))?(J+=e.length,L.write(ge.from([Z.codes.auth<<4])),ce(L,J),L.write(ge.from([X])),null!==e&&e.write(),!0):!1;default:return o.emit("error",new Error("Unknown command")),!1}}function ae(e){e.uncork()}Object.defineProperty(t,"cacheNumbers",{get(){return oe===c},set(e){oe=e?(r&&0!==Object.keys(r).length||(se=!0),c):(se=!1,l)}});const i={};function ce(t,r){if(r>Z.VARBYTEINT_MAX)t.emit("error",new Error("Invalid variable byte integer: "+r));else{let e=i[r];e||(e=a(r),r<16384&&(i[r]=e)),ne("writeVarByteInt: writing to stream: %o",e),t.write(e)}}function le(e,t){var r=ge.byteLength(t);return oe(e,r),ne("writeString: %s",t),e.write(t,"utf8")}function s(e,t,r){le(e,t),le(e,r)}function c(e,t){return ne("writeNumberCached: number: %d",t),ne("writeNumberCached: %o",r[t]),e.write(r[t])}function l(e,t){t=n(t);return ne("writeNumberGenerated: %o",t),e.write(t)}function ue(e,t){"string"==typeof t?le(e,t):t?(oe(e,t.length),e.write(t)):oe(e,0)}function he(r,e){if("object"!=typeof e||null!=e.length)return{length:1,write(){h(r,{},0)}};let n=0;function i(e,n){let t=0;switch(Z.propertiesTypes[e]){case"byte":if("boolean"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=2;break;case"int8":if("number"!=typeof n||n<0||255<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=2;break;case"binary":if(n&&null===n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=1+ge.byteLength(n)+2;break;case"int16":if("number"!=typeof n||n<0||65535<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=3;break;case"int32":if("number"!=typeof n||n<0||4294967295<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=5;break;case"var":if("number"!=typeof n||n<0||268435455<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=1+ge.byteLength(a(n));break;case"string":if("string"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=3+ge.byteLength(n.toString());break;case"pair":if("object"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=Object.getOwnPropertyNames(n).reduce((e,r)=>{var t=n[r];return Array.isArray(t)?e+=t.reduce((e,t)=>e+=3+ge.byteLength(r.toString())+2+ge.byteLength(t.toString()),0):e+=3+ge.byteLength(r.toString())+2+ge.byteLength(n[r].toString()),e},0);break;default:return r.emit("error",new Error(`Invalid property ${e}: `+n)),!1}return t}if(e)for(const s in e){let t=0,r=0;var o=e[s];if(Array.isArray(o))for(let e=0;e<o.length;e++){if(!(r=i(s,o[e])))return!1;t+=r}else{if(!(r=i(s,o)))return!1;t=r}if(!t)return!1;n+=t}return{length:ge.byteLength(a(n))+n,write(){h(r,e,n)}}}function fe(e,t,r,n){var i=["reasonString","userProperties"],o=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let s=he(e,t);if(o)for(;n+s.length>o;){var a=i.shift();if(!a||!t[a])return!1;delete t[a],s=he(e,t)}return s}function u(r,n,i){var e,t;switch(Z.propertiesTypes[n]){case"byte":r.write(ge.from([Z.properties[n]])),r.write(ge.from([+i]));break;case"int8":r.write(ge.from([Z.properties[n]])),r.write(ge.from([i]));break;case"binary":r.write(ge.from([Z.properties[n]])),ue(r,i);break;case"int16":r.write(ge.from([Z.properties[n]])),oe(r,i);break;case"int32":r.write(ge.from([Z.properties[n]])),e=r,t=i,t=o(t),ne("write4ByteNumber: %o",t),e.write(t);break;case"var":r.write(ge.from([Z.properties[n]])),ce(r,i);break;case"string":r.write(ge.from([Z.properties[n]])),le(r,i);break;case"pair":Object.getOwnPropertyNames(i).forEach(t=>{var e=i[t];Array.isArray(e)?e.forEach(e=>{r.write(ge.from([Z.properties[n]])),s(r,t.toString(),e.toString())}):(r.write(ge.from([Z.properties[n]])),s(r,t.toString(),e.toString()))});break;default:r.emit("error",new Error(`Invalid property ${n} value: `+i))}}function h(t,e,r){ce(t,r);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&null!==e[i]){var n=e[i];if(Array.isArray(n))for(let e=0;e<n.length;e++)u(t,i,n[e]);else u(t,i,n)}}function de(e){return e?e instanceof ge?e.length:ge.byteLength(e):0}function pe(e){return"string"==typeof e||e instanceof ge}d.exports=t}.call(this)}.call(this,f("buffer").Buffer)},{"./constants":36,"./numbers":56,buffer:3,debug:8,"process-nextick-args":95}],60:[function(k,C,e){!function(r,E){!function(){"use strict";const n=k("events").EventEmitter,o=k("./store"),s=k("./topic-alias-recv"),i=k("./topic-alias-send"),a=k("mqtt-packet"),c=k("./default-message-id-provider"),l=k("readable-stream").Writable;var e=k("inherits");const t=k("reinterval"),u=k("rfdc/default"),h=k("./validations"),f=k("xtend"),d=k("debug")("mqttjs:client"),p=r?r.nextTick:function(e){setTimeout(e,0)},g=E.setImmediate||function(e){p(e)},m={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},b=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],y={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function v(e,t){let r;if(t.properties&&(r=t.properties.topicAlias),0===t.topic.toString().length){if(void 0===r)return new Error("Unregistered Topic Alias");if(void 0===(e=e.topicAliasSend.getTopicByAlias(r)))return new Error("Unregistered Topic Alias");t.topic=e}r&&delete t.properties.topicAlias}function w(e,t,r){d("sendPacket :: packet: %O",t),d("sendPacket :: emitting `packetsend`"),e.emit("packetsend",t),d("sendPacket :: writing to stream");t=a.writeToStream(t,e.stream,e.options);d("sendPacket :: writeToStream result %s",t),!t&&r&&r!==x?(d("sendPacket :: handle events on `drain` once through callback."),e.stream.once("drain",r)):r&&(d("sendPacket :: invoking cb"),r())}function _(t,r,n,i){d("storeAndSend :: store packet with cmd %s to outgoingStore",r.cmd);let e=r;var o;if("publish"===e.cmd&&(e=u(r),o=v(t,e)))return n&&n(o);t.outgoingStore.put(e,function(e){if(e)return n&&n(e);i(),w(t,r,n)})}function x(e){d("nop ::",e)}function S(e,t){let r;const i=this;if(!(this instanceof S))return new S(e,t);for(r in this.options=t||{},m)void 0===this.options[r]?this.options[r]=m[r]:this.options[r]=t[r];d("MqttClient :: options.protocol",t.protocol),d("MqttClient :: options.protocolVersion",t.protocolVersion),d("MqttClient :: options.username",t.username),d("MqttClient :: options.keepalive",t.keepalive),d("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),d("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),d("MqttClient :: options.topicAliasMaximum",t.topicAliasMaximum),this.options.clientId="string"==typeof t.clientId?t.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),d("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=e,this.messageIdProvider=void 0===this.options.messageIdProvider?new c:this.options.messageIdProvider,this.outgoingStore=t.outgoingStore||new o,this.incomingStore=t.incomingStore||new o,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,0<t.topicAliasMaximum&&(65535<t.topicAliasMaximum?d("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new s(t.topicAliasMaximum)),this.on("connect",function(){const e=this.queue;d("connect :: sending queued packets"),function t(){const r=e.shift();d("deliver :: entry %o",r);var n;if(r){n=r.packet,d("deliver :: call _sendPacket for %o",n);let e=!0;(e=!(n.messageId&&0!==n.messageId&&!i.messageIdProvider.register(n.messageId))&&e)?i._sendPacket(n,function(e){r.cb&&r.cb(e),t()}):(d("messageId: %d has already used. The message is skipped and removed.",n.messageId),t())}else i._resubscribe()}()}),this.on("close",function(){d("close :: connected set to `false`"),this.connected=!1,d("close :: clearing connackTimer"),clearTimeout(this.connackTimer),d("close :: clearing ping timer"),null!==i.pingTimer&&(i.pingTimer.clear(),i.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),d("close :: calling _setupReconnect"),this._setupReconnect()}),n.call(this),d("MqttClient :: setting up stream"),this._setupStream()}e(S,n),S.prototype._setupStream=function(){const r=this;var e=new l;const n=a.parser(this.options);let i=null;const t=[];function o(){var e;t.length?p(s):(e=i,i=null,e())}function s(){d("work :: getting next packet in queue");var e=t.shift();e?(d("work :: packet pulled from queue"),r._handlePacket(e,o)):(d("work :: no packets in queue"),e=i,i=null,d("work :: done flag is %s",!!e),e&&e())}d("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),d("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",function(e){d("parser :: on packet push to packets array."),t.push(e)}),e._write=function(e,t,r){i=r,d("writable stream :: parsing buffer"),n.parse(e),s()},d("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",function(e){d("streamErrorHandler :: error",e.message),b.includes(e.code)?(d("streamErrorHandler :: emitting error"),r.emit("error",e)):x(e)}),this.stream.on("close",function(){var t;d("(%s)stream :: on close",r.options.clientId),(t=r.outgoing)&&(d("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(t).forEach(function(e){t[e].volatile&&"function"==typeof t[e].cb&&(t[e].cb(new Error("Connection closed")),delete t[e])})),d("stream: emit close to MqttClient"),r.emit("close")}),d("_setupStream: sending packet `connect`");e=Object.create(this.options);if(e.cmd="connect",this.topicAliasRecv&&(e.properties||(e.properties={}),this.topicAliasRecv)&&(e.properties.topicAliasMaximum=this.topicAliasRecv.max),w(this,e),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return r.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&w(this,f({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){d("!!connectTimeout hit!! Calling _cleanUp with force `true`"),r._cleanUp(!0)},this.options.connectTimeout)},S.prototype._handlePacket=function(e,t){var r=this.options;if(5===r.protocolVersion&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<e.length)return this.emit("error",new Error("exceeding packets size "+e.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(d("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"auth":this._handleAuth(e),t();break;case"pingresp":this._handlePingresp(e),t();break;case"disconnect":this._handleDisconnect(e),t()}},S.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e&&e!==x?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},S.prototype.publish=function(r,n,i,o){d("publish :: message `%s` to topic `%s`",n,r);const s=this.options;"function"==typeof i&&(o=i,i=null);if(i=f({qos:0,retain:!1,dup:!1},i),!this._checkDisconnecting(o)){const a=this;var e=function(){let e=0;if((1===i.qos||2===i.qos)&&null===(e=a._nextId()))return d("No messageId left"),!1;var t={cmd:"publish",topic:r,payload:n,qos:i.qos,retain:i.retain,messageId:e,dup:i.dup};switch(5===s.protocolVersion&&(t.properties=i.properties),d("publish :: qos",i.qos),i.qos){case 1:case 2:a.outgoing[t.messageId]={volatile:!1,cb:o||x},d("MqttClient:publish: packet cmd: %s",t.cmd),a._sendPacket(t,void 0,i.cbStorePut);break;default:d("MqttClient:publish: packet cmd: %s",t.cmd),a._sendPacket(t,o,i.cbStorePut)}return!0};(this._storeProcessing||0<this._storeProcessingQueue.length||!e())&&this._storeProcessingQueue.push({invoke:e,cbStorePut:i.cbStorePut,callback:o})}return this},S.prototype.subscribe=function(){const n=this;var t=new Array(arguments.length);for(let e=0;e<arguments.length;e++)t[e]=arguments[e];const i=[];let r=t.shift();const o=r.resubscribe;let s=t.pop()||x,a=t.pop();const c=this.options.protocolVersion;delete r.resubscribe,"string"==typeof r&&(r=[r]),"function"!=typeof s&&(a=s,s=x);var e=h.validateTopics(r);return null!==e?g(s,new Error("Invalid topic "+e)):this._checkDisconnecting(s)?d("subscribe: discconecting true"):(e={qos:0},5===c&&(e.nl=!1,e.rap=!1,e.rh=0),a=f(e,a),Array.isArray(r)?r.forEach(function(e){d("subscribe: array topic %s",e),(!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,e)||n._resubscribeTopics[e].qos<a.qos||o)&&(e={topic:e,qos:a.qos},5===c&&(e.nl=a.nl,e.rap=a.rap,e.rh=a.rh,e.properties=a.properties),d("subscribe: pushing topic `%s` and qos `%s` to subs list",e.topic,e.qos),i.push(e))}):Object.keys(r).forEach(function(e){var t;d("subscribe: object topic %s",e),(!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,e)||n._resubscribeTopics[e].qos<r[e].qos||o)&&(t={topic:e,qos:r[e].qos},5===c&&(t.nl=r[e].nl,t.rap=r[e].rap,t.rh=r[e].rh,t.properties=a.properties),d("subscribe: pushing `%s` to subs list",t),i.push(t))}),i.length?(e=function(){var e=n._nextId();if(null===e)return d("No messageId left"),!1;e={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:e};if(a.properties&&(e.properties=a.properties),n.options.resubscribe){d("subscribe :: resubscribe true");const r=[];i.forEach(function(e){var t;0<n.options.reconnectPeriod&&(t={qos:e.qos},5===c&&(t.nl=e.nl||!1,t.rap=e.rap||!1,t.rh=e.rh||0,t.properties=e.properties),n._resubscribeTopics[e.topic]=t,r.push(e.topic))}),n.messageIdToTopic[e.messageId]=r}return n.outgoing[e.messageId]={volatile:!0,cb:function(e,t){if(!e){var r=t.granted;for(let e=0;e<r.length;e+=1)i[e].qos=r[e]}s(e,i)}},d("subscribe :: call _sendPacket"),n._sendPacket(e),!0},(this._storeProcessing||0<this._storeProcessingQueue.length||!e())&&this._storeProcessingQueue.push({invoke:e,callback:s})):s(null,[])),this},S.prototype.unsubscribe=function(){const t=this;var r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];let n=r.shift(),i=r.pop()||x,o=r.pop();"string"==typeof n&&(n=[n]),"function"!=typeof i&&(o=i,i=x);var e=h.validateTopics(n);return null!==e?g(i,new Error("Invalid topic "+e)):!t._checkDisconnecting(i)&&(e=function(){var e=t._nextId();return null===e?(d("No messageId left"),!1):(e={cmd:"unsubscribe",qos:1,messageId:e},"string"==typeof n?e.unsubscriptions=[n]:Array.isArray(n)&&(e.unsubscriptions=n),t.options.resubscribe&&e.unsubscriptions.forEach(function(e){delete t._resubscribeTopics[e]}),"object"==typeof o&&o.properties&&(e.properties=o.properties),t.outgoing[e.messageId]={volatile:!0,cb:i},d("unsubscribe: call _sendPacket"),t._sendPacket(e),!0)},this._storeProcessing||0<this._storeProcessingQueue.length||!e())&&this._storeProcessingQueue.push({invoke:e,callback:i}),this},S.prototype.end=function(e,t,r){const n=this;function i(){d("end :: (%s) :: finish :: calling _cleanUp with force %s",n.options.clientId,e),n._cleanUp(e,()=>{d("end :: finish :: calling process.nextTick on closeStores"),p(function(){d("end :: closeStores: closing incoming and outgoing stores"),n.disconnected=!0,n.incomingStore.close(function(t){n.outgoingStore.close(function(e){d("end :: closeStores: emitting end"),n.emit("end"),r&&(e=t||e,d("end :: closeStores: invoking callback with args"),r(e))})}),n._deferredReconnect&&n._deferredReconnect()}.bind(n))},t)}return d("end :: (%s)",this.options.clientId),null!=e&&"boolean"==typeof e||(r=t||x,t=e,e=!1,"object"!=typeof t&&(r=t,t=null,"function"!=typeof r)&&(r=x)),"object"!=typeof t&&(r=t,t=null),d("end :: cb? %s",!!r),r=r||x,this.disconnecting?r():(this._clearReconnect(),this.disconnecting=!0,!e&&0<Object.keys(this.outgoing).length?(d("end :: (%s) :: calling finish in 10ms once outgoing is empty",n.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(d("end :: (%s) :: immediately calling finish",n.options.clientId),i())),this},S.prototype.removeOutgoingMessage=function(e){const t=this.outgoing[e]?this.outgoing[e].cb:null;return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},S.prototype.reconnect=function(e){d("client reconnect");const t=this;function r(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new o,t.outgoingStore=t.options.outgoingStore||new o,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()}return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this},S.prototype._reconnect=function(){d("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),d("client already connected. disconnecting first.")):(d("_reconnect: calling _setupStream"),this._setupStream())},S.prototype._setupReconnect=function(){const e=this;!e.disconnecting&&!e.reconnectTimer&&0<e.options.reconnectPeriod?(this.reconnecting||(d("_setupReconnect :: emit `offline` state"),this.emit("offline"),d("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),d("_setupReconnect :: setting reconnectTimer for %d ms",e.options.reconnectPeriod),e.reconnectTimer=setInterval(function(){d("reconnectTimer :: reconnect triggered!"),e._reconnect()},e.options.reconnectPeriod)):d("_setupReconnect :: doing nothing...")},S.prototype._clearReconnect=function(){d("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},S.prototype._cleanUp=function(e,t){var r,n=arguments[2];t&&(d("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),d("_cleanUp :: forced? %s",e),e?(0===this.options.reconnectPeriod&&this.options.clean&&(r=this.outgoing)&&(d("flush: queue exists? %b",!!r),Object.keys(r).forEach(function(e){"function"==typeof r[e].cb&&(r[e].cb(new Error("Connection closed")),delete r[e])})),d("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy()):(e=f({cmd:"disconnect"},n),d("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,g.bind(null,this.stream.end.bind(this.stream)))),this.disconnecting||(d("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(d("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(d("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())},S.prototype._sendPacket=function(e,t,r){d("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||x,t=t||x;var n=function(t,r){if(5===t.options.protocolVersion&&"publish"===r.cmd){let e;r.properties&&(e=r.properties.topicAlias);var n=r.topic.toString();if(t.topicAliasSend)if(e){if(0!==n.length&&(d("applyTopicAlias :: register topic: %s - alias: %d",n,e),!t.topicAliasSend.put(n,e)))return d("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,e),new Error("Sending Topic Alias out of range")}else 0!==n.length&&(t.options.autoAssignTopicAlias?(e=t.topicAliasSend.getAliasByTopic(n))?(r.topic="",r.properties={...r.properties,topicAlias:e},d("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",n,e)):(e=t.topicAliasSend.getLruAlias(),t.topicAliasSend.put(n,e),r.properties={...r.properties,topicAlias:e},d("applyTopicAlias :: auto assign topic: %s - alias: %d",n,e)):t.options.autoUseTopicAlias&&(e=t.topicAliasSend.getAliasByTopic(n))&&(r.topic="",r.properties={...r.properties,topicAlias:e},d("applyTopicAlias :: auto use topic: %s - alias: %d",n,e)));else if(e)return d("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,e),new Error("Sending Topic Alias out of range")}}(this,e);if(n)t(n);else{if(!this.connected)return"auth"===e.cmd?(this._shiftPingInterval(),void w(this,e,t)):(d("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void _(this,e,t,r);default:return void w(this,e,t)}switch(e.qos){case 2:case 1:_(this,e,t,r);break;default:w(this,e,t)}d("_sendPacket :: (%s) ::  end",this.options.clientId)}},S.prototype._storePacket=function(e,t,r){d("_storePacket :: packet: %o",e),d("_storePacket :: cb? %s",!!t),r=r||x;let n=e;if("publish"===n.cmd){e=v(this,n=u(e));if(e)return t&&t(e)}0===(n.qos||0)&&this.queueQoSZero||"publish"!==n.cmd?this.queue.push({packet:n,cb:t}):0<n.qos?(t=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,function(e){if(e)return t&&t(e);r()})):t&&t(new Error("No connection to broker"))},S.prototype._setupPingTimer=function(){d("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=t(function(){e._checkPing()},1e3*this.options.keepalive))},S.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},S.prototype._checkPing=function(){d("_checkPing :: checking ping..."),this.pingResp?(d("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(d("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},S.prototype._handlePingresp=function(){this.pingResp=!0},S.prototype._handleConnack=function(e){d("_handleConnack");var t=this.options,r=5===t.protocolVersion?e.reasonCode:e.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,e.properties){if(e.properties.topicAliasMaximum){if(65535<e.properties.topicAliasMaximum)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));0<e.properties.topicAliasMaximum&&(this.topicAliasSend=new i(e.properties.topicAliasMaximum))}e.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=e.properties.serverKeepAlive,this._shiftPingInterval()),e.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=e.properties.maximumPacketSize)}0===r?(this.reconnecting=!1,this._onConnect(e)):0<r&&((t=new Error("Connection refused: "+y[r])).code=r,this.emit("error",t))},S.prototype._handleAuth=function(e){var t=this.options.protocolVersion;const r=5===t?e.reasonCode:e.returnCode;if(5!==t)(t=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+t)).code=r,this.emit("error",t);else{const n=this;this.handleAuth(e,function(e,t){e?n.emit("error",e):24===r?(n.reconnecting=!1,n._sendPacket(t)):(t=new Error("Connection refused: "+y[r]),e.code=r,n.emit("error",t))})}},S.prototype.handleAuth=function(e,t){t()},S.prototype._handlePublish=function(r,n){d("_handlePublish: packet %o",r),n=void 0!==n?n:x;let i=r.topic.toString();const o=r.payload;var e=r.qos;const s=r.messageId,a=this;var t=this.options;const c=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let e;if(void 0!==(e=r.properties?r.properties.topicAlias:e))if(0===i.length){if(!(0<e&&e<=65535))return d("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));var l=this.topicAliasRecv.getTopicByAlias(e);if(!l)return d("_handlePublish :: unregistered topic alias. alias: %d",e),void this.emit("error",new Error("Received unregistered Topic Alias"));i=l,d("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,e)}else{if(!this.topicAliasRecv.put(i,e))return d("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));d("_handlePublish :: registered topic: %s - alias: %d",i,e)}}switch(d("_handlePublish: qos %d",e),e){case 2:t.customHandleAcks(i,o,r,function(e,t){return e instanceof Error||(t=e,e=null),e?a.emit("error",e):-1===c.indexOf(t)?a.emit("error",new Error("Wrong reason code for pubrec")):void(t?a._sendPacket({cmd:"pubrec",messageId:s,reasonCode:t},n):a.incomingStore.put(r,function(){a._sendPacket({cmd:"pubrec",messageId:s},n)}))});break;case 1:t.customHandleAcks(i,o,r,function(e,t){return e instanceof Error||(t=e,e=null),e?a.emit("error",e):-1===c.indexOf(t)?a.emit("error",new Error("Wrong reason code for puback")):(t||a.emit("message",i,o,r),void a.handleMessage(r,function(e){if(e)return n&&n(e);a._sendPacket({cmd:"puback",messageId:s,reasonCode:t},n)}))});break;case 0:this.emit("message",i,o,r),this.handleMessage(r,n);break;default:d("_handlePublish: unknown QoS. Doing nothing.")}},S.prototype.handleMessage=function(e,t){t()},S.prototype._handleAck=function(t){var r,n=t.messageId,e=t.cmd,i=this.outgoing[n]?this.outgoing[n].cb:null;const o=this;let s;if(i){switch(d("_handleAck :: packet type",e),e){case"pubcomp":case"puback":var a=t.reasonCode;a&&0<a&&16!==a&&((s=new Error("Publish error: "+y[a])).code=a,i(s,t)),delete this.outgoing[n],this.outgoingStore.del(t,i),this.messageIdProvider.deallocate(n),this._invokeStoreProcessingQueue();break;case"pubrec":var a={cmd:"pubrel",qos:2,messageId:n},c=t.reasonCode;c&&0<c&&16!==c?((s=new Error("Publish error: "+y[c])).code=c,i(s,t)):this._sendPacket(a);break;case"suback":delete this.outgoing[n],this.messageIdProvider.deallocate(n);for(let e=0;e<t.granted.length;e++)0!=(128&t.granted[e])&&(r=this.messageIdToTopic[n])&&r.forEach(function(e){delete o._resubscribeTopics[e]});this._invokeStoreProcessingQueue(),i(null,t);break;case"unsuback":delete this.outgoing[n],this.messageIdProvider.deallocate(n),this._invokeStoreProcessingQueue(),i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else d("_handleAck :: Server sent an ack in error. Ignoring.")},S.prototype._handlePubrel=function(e,r){d("handling pubrel packet"),r=void 0!==r?r:x;var t=e.messageId;const n=this,i={cmd:"pubcomp",messageId:t};n.incomingStore.get(e,function(e,t){e?n._sendPacket(i,r):(n.emit("message",t.topic,t.payload,t),n.handleMessage(t,function(e){if(e)return r(e);n.incomingStore.del(t,x),n._sendPacket(i,r)}))})},S.prototype._handleDisconnect=function(e){this.emit("disconnect",e)},S.prototype._nextId=function(){return this.messageIdProvider.allocate()},S.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},S.prototype._resubscribe=function(){d("_resubscribe");var t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&0<t.length)if(this.options.resubscribe)if(5===this.options.protocolVersion){d("_resubscribe: protocolVersion 5");for(let e=0;e<t.length;e++){var r={};r[t[e]]=this._resubscribeTopics[t[e]],r.resubscribe=!0,this.subscribe(r,{properties:r[t[e]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},S.prototype._onConnect=function(o){if(this.disconnected)this.emit("connect",o);else{const s=this;this.connackPacket=o,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,!function r(){let t=s.outgoingStore.createStream();function n(){s._storeProcessing=!1,s._packetIdsDuringStoreProcessing={}}function i(){t.destroy(),t=null,s._flushStoreProcessingQueue(),n()}s.once("close",i),t.on("error",function(e){n(),s._flushStoreProcessingQueue(),s.removeListener("close",i),s.emit("error",e)}),t.on("end",function(){let e=!0;for(const t in s._packetIdsDuringStoreProcessing)if(!s._packetIdsDuringStoreProcessing[t]){e=!1;break}e?(n(),s.removeListener("close",i),s._invokeAllStoreProcessingQueue(),s.emit("connect",o)):r()}),function n(){if(t){s._storeProcessing=!0;var e=t.read(1);let r;e?s._packetIdsDuringStoreProcessing[e.messageId]?n():s.disconnecting||s.reconnectTimer?t.destroy&&t.destroy():(r=s.outgoing[e.messageId]?s.outgoing[e.messageId].cb:null,s.outgoing[e.messageId]={volatile:!1,cb:function(e,t){r&&r(e,t),n()}},s._packetIdsDuringStoreProcessing[e.messageId]=!0,s.messageIdProvider.register(e.messageId)?s._sendPacket(e):d("messageId: %d has already used.",e.messageId)):t.once("readable",n)}}()}()}},S.prototype._invokeStoreProcessingQueue=function(){if(0<this._storeProcessingQueue.length){var e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1},S.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},S.prototype._flushStoreProcessingQueue=function(){for(const e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},C.exports=S}.call(this)}.call(this,k("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-message-id-provider":67,"./store":68,"./topic-alias-recv":69,"./topic-alias-send":70,"./validations":71,_process:96,debug:8,events:11,inherits:13,"mqtt-packet":38,"readable-stream":88,reinterval:101,"rfdc/default":102,xtend:129}],61:[function(e,t,r){"use strict";const i=e("buffer")["Buffer"],o=e("readable-stream").Transform,s=e("duplexify");let a,c,l,u=!1;t.exports=function(e,t){var r,n;if(t.hostname=t.hostname||t.host,t.hostname)return r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",(n=t).hostname||(n.hostname="localhost"),n.path||(n.path="/"),n.wsOptions||(n.wsOptions={}),n=function(e,t){var r="alis"===e.protocol?"wss":"ws";let n=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(n=r+"://"+e.hostname+":"+e.port+e.path),n="function"==typeof e.transformWsUrl?e.transformWsUrl(n,e,t):n}(t,e),(a=t.my).connectSocket({url:n,protocols:r}),c=((e=new o)._write=function(e,t,r){a.sendSocketMessage({data:e.buffer,success:function(){r()},fail:function(){r(new Error)}})},e._flush=function(e){a.closeSocket({success:function(){e()}})},e),l=s.obj(),u||(u=!0,a.onSocketOpen(function(){l.setReadable(c),l.setWritable(c),l.emit("connect")}),a.onSocketMessage(function(e){if("string"==typeof e.data){var t=i.from(e.data,"base64");c.push(t)}else{const r=new FileReader;r.addEventListener("load",function(){let e=r.result;e=e instanceof ArrayBuffer?i.from(e):i.from(e,"utf8"),c.push(e)}),r.readAsArrayBuffer(e.data)}}),a.onSocketClose(function(){l.end(),l.destroy()}),a.onSocketError(function(e){l.destroy(e)})),l;throw new Error("Could not determine host. Specify host manually.")}},{buffer:3,duplexify:72,"readable-stream":88}],62:[function(n,l,e){!function(r){!function(){"use strict";const i=n("../client");var e=n("../store");const o=n("url"),s=n("xtend"),a=n("debug")("mqttjs"),c={};function t(e,t){if(a("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=null),t=t||{},e){e=o.parse(e,!0);if(null!=e.port&&(e.port=Number(e.port)),null===(t=s(e,t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if((e=t).auth&&((r=e.auth.match(/^(.+):(.+)$/))?(e.username=r[1],e.password=r[2]):e.username=e.auth),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!c[t.protocol]){const n=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(e,t){return(!n||t%2!=0)&&"function"==typeof c[e]})[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);var r=new i(function(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol||t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),a("calling streambuilder for",t.protocol),c[t.protocol](e,t)},t);return r.on("error",function(){}),r}void 0!==r&&"browser"!==r.title||"function"!=typeof __webpack_require__?(c.mqtt=n("./tcp"),c.tcp=n("./tcp"),c.ssl=n("./tls"),c.tls=n("./tls"),c.mqtts=n("./tls")):(c.wx=n("./wx"),c.wxs=n("./wx"),c.ali=n("./ali"),c.alis=n("./ali")),c.ws=n("./ws"),c.wss=n("./ws"),l.exports=t,l.exports.connect=t,l.exports.MqttClient=i,l.exports.Store=e}.call(this)}.call(this,n("_process"))},{"../client":60,"../store":68,"./ali":61,"./tcp":63,"./tls":64,"./ws":65,"./wx":66,_process:96,debug:8,url:108,xtend:129}],63:[function(e,t,r){"use strict";const n=e("net"),i=e("debug")("mqttjs:tcp");t.exports=function(e,t){t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost";var r=t.port,t=t.hostname;return i("port %d and host %s",r,t),n.createConnection(r,t)}},{debug:8,net:2}],64:[function(e,t,r){"use strict";const i=e("tls"),o=e("net"),s=e("debug")("mqttjs:tls");t.exports=function(t,r){r.port=r.port||8883,r.host=r.hostname||r.host||"localhost",0===o.isIP(r.host)&&(r.servername=r.host),r.rejectUnauthorized=!1!==r.rejectUnauthorized,delete r.path,s("port %d host %s rejectUnauthorized %b",r.port,r.host,r.rejectUnauthorized);const n=i.connect(r);function e(e){r.rejectUnauthorized&&t.emit("error",e),n.end()}return n.on("secureConnect",function(){r.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",e)}),n.on("error",e),n}},{debug:8,net:2,tls:2}],65:[function(o,a,e){!function(i){!function(){"use strict";const g=o("buffer")["Buffer"],s=o("ws"),m=o("debug")("mqttjs:ws"),b=o("duplexify"),y=o("readable-stream").Transform,e=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],n=void 0!==i&&"browser"===i.title||"function"==typeof __webpack_require__;function v(e,t){let r=e.protocol+"://"+e.hostname+":"+e.port+e.path;return r="function"==typeof e.transformWsUrl?e.transformWsUrl(r,e,t):r}function w(t){const r=t;return t.hostname||(r.hostname="localhost"),t.port||("wss"===t.protocol?r.port=443:r.port=80),t.path||(r.path="/"),t.wsOptions||(r.wsOptions={}),n||"wss"!==t.protocol||e.forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,e)&&(r.wsOptions[e]=t[e])}),r}function t(e,t){m("streamBuilder");var r,n,t=w(t),e=v(t,e),i=(r=e,n=t,m("createWebSocket"),m("protocol: "+n.protocolId+" "+n.protocolVersion),i="MQIsdp"===n.protocolId&&3===n.protocolVersion?"mqttv3.1":"mqtt",m("creating new Websocket for url: "+r+" and protocol: "+i),r=new s(r,[i],n.wsOptions));const o=s.createWebSocketStream(i,t.wsOptions);return o.url=e,i.on("close",()=>{o.destroy()}),o}function r(e,t){m("browserStreamBuilder");let r;var n;const i=function(e){if((e=w(e)).hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var t=new URL(document.URL);e.hostname=t.hostname,e.port||(e.port=t.port)}return void 0===e.objectMode&&(e.objectMode=!(!0===e.binary||void 0===e.binary)),e}(t).browserBufferSize||524288,o=t.browserBufferTimeout||1e3,s=!t.objectMode,a=(e=e,n="MQIsdp"===(l=t).protocolId&&3===l.protocolVersion?"mqttv3.1":"mqtt",l=v(l,e),(e=new WebSocket(l,[n])).binaryType="arraybuffer",e),c=function(e,t,r){e=new y({objectModeMode:e.objectMode});return e._write=t,e._flush=r,e}(t,function e(t,r,n){a.bufferedAmount>i&&setTimeout(e,o,t,r,n);s&&"string"==typeof t&&(t=g.from(t,"utf8"));try{a.send(t)}catch(e){return n(e)}n()},function(e){a.close(),e()});t.objectMode||(c._writev=p),c.on("close",()=>{a.close()});var l=void 0!==a.addEventListener;function u(){r.setReadable(c),r.setWritable(c),r.emit("connect")}function h(){r.end(),r.destroy()}function f(e){r.destroy(e)}function d(e){let t=e.data;t=t instanceof ArrayBuffer?g.from(t):g.from(t,"utf8"),c.push(t)}function p(t,e){var r=new Array(t.length);for(let e=0;e<t.length;e++)"string"==typeof t[e].chunk?r[e]=g.from(t[e],"utf8"):r[e]=t[e].chunk;this._write(g.concat(r),"binary",e)}return a.readyState===a.OPEN?r=c:(r=r=b(void 0,void 0,t),t.objectMode||(r._writev=p),l?a.addEventListener("open",u):a.onopen=u),r.socket=a,l?(a.addEventListener("close",h),a.addEventListener("error",f),a.addEventListener("message",d)):(a.onclose=h,a.onerror=f,a.onmessage=d),r}n?a.exports=r:a.exports=t}.call(this)}.call(this,o("_process"))},{_process:96,buffer:3,debug:8,duplexify:72,"readable-stream":88,ws:128}],66:[function(e,t,r){"use strict";const o=e("buffer")["Buffer"],s=e("readable-stream").Transform,a=e("duplexify");let c,l,u;t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",n=((n=t).hostname||(n.hostname="localhost"),n.path||(n.path="/"),n.wsOptions||(n.wsOptions={}),function(e,t){var r="wxs"===e.protocol?"wss":"ws";let n=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(n=r+"://"+e.hostname+":"+e.port+e.path),n="function"==typeof e.transformWsUrl?e.transformWsUrl(n,e,t):n}(t,e));c=wx.connectSocket({url:n,protocols:[r]}),l=((t=new s)._write=function(e,t,r){c.send({data:e.buffer,success:function(){r()},fail:function(e){r(new Error(e))}})},t._flush=function(e){c.close({success:function(){e()}})},t),(u=a.obj())._destroy=function(e,t){c.close({success:function(){t&&t(e)}})};const i=u.destroy;return u.destroy=function(){u.destroy=i;const e=this;setTimeout(function(){c.close({fail:function(){e._destroy(new Error)}})},0)}.bind(u),c.onOpen(function(){u.setReadable(l),u.setWritable(l),u.emit("connect")}),c.onMessage(function(e){let t=e.data;t=t instanceof ArrayBuffer?o.from(t):o.from(t,"utf8"),l.push(t)}),c.onClose(function(){u.end(),u.destroy()}),c.onError(function(e){u.destroy(new Error(e.errMsg))}),u}},{buffer:3,duplexify:72,"readable-stream":88}],67:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}n.prototype.allocate=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},n.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},n.prototype.register=function(e){return!0},n.prototype.deallocate=function(e){},n.prototype.clear=function(){},t.exports=n},{}],68:[function(e,t,r){"use strict";const n=e("xtend"),i=e("readable-stream").Readable,o={objectMode:!0},s={clean:!0};function a(e){if(!(this instanceof a))return new a(e);this.options=e||{},this.options=n(s,e),this._inflights=new Map}a.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},a.prototype.createStream=function(){var e=new i(o);const r=[];let t=!1,n=0;return this._inflights.forEach(function(e,t){r.push(e)}),e._read=function(){!t&&n<r.length?this.push(r[n++]):this.push(null)},e.destroy=function(){if(!t){const e=this;t=!0,setTimeout(function(){e.emit("close")},0)}},e},a.prototype.del=function(e,t){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},a.prototype.get=function(e,t){return(e=this._inflights.get(e.messageId))?t(null,e):t&&t(new Error("missing packet")),this},a.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},t.exports=a},{"readable-stream":88,xtend:129}],69:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.aliasToTopic={},this.max=e}n.prototype.put=function(e,t){return!(0===t||t>this.max||(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,0))},n.prototype.getTopicByAlias=function(e){return this.aliasToTopic[e]},n.prototype.clear=function(){this.aliasToTopic={}},t.exports=n},{}],70:[function(e,t,r){"use strict";const n=e("lru-cache"),i=e("number-allocator").NumberAllocator;function o(e){if(!(this instanceof o))return new o(e);0<e&&(this.aliasToTopic=new n({max:e}),this.topicToAlias={},this.numberAllocator=new i(1,e),this.max=e,this.length=0)}o.prototype.put=function(e,t){var r;return!(0===t||t>this.max||((r=this.aliasToTopic.get(t))&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.length,0))},o.prototype.getTopicByAlias=function(e){return this.aliasToTopic.get(e)},o.prototype.getAliasByTopic=function(e){e=this.topicToAlias[e];return void 0!==e&&this.aliasToTopic.get(e),e},o.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},o.prototype.getLruAlias=function(){var e=this.numberAllocator.firstVacant();return e||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},t.exports=o},{"lru-cache":73,"number-allocator":92}],71:[function(e,t,r){"use strict";t.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!function(e){var t=e.split("/");for(let e=0;e<t.length;e++)if("+"!==t[e]){if("#"===t[e])return e===t.length-1;if(-1!==t[e].indexOf("+")||-1!==t[e].indexOf("#"))return}return 1}(t[e]))return t[e];return null}}},{}],72:[function(h,f,e){!function(u,r){!function(){function i(e,t){e._corked?e.once("uncork",t):t()}function o(r,n){return function(e){var t;e?(t=r,e="premature close"===e.message?null:e,t._autoDestroy&&t.destroy(e)):n&&!r._ended&&r.end()}}function n(){}function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);a.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)}var a=h("readable-stream"),c=h("end-of-stream"),e=h("inherits"),t=h("stream-shift"),l=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]);e(s,a.Duplex),s.obj=function(e,t,r){return(r=r||{}).objectMode=!0,r.highWaterMark=16,new s(e,t,r)},s.prototype.cork=function(){1==++this._corked&&this.emit("cork")},s.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},s.prototype.setWritable=function(e){var t,r,n;this._unwrite&&this._unwrite(),this.destroyed?e&&e.destroy&&e.destroy():null===e||!1===e?this.end():(r=c(e,{writable:!0,readable:!1},o(t=this,this._forwardEnd)),n=function(){var e=t._ondrain;t._ondrain=null,e&&e()},this._unwrite&&u.nextTick(n),this._writable=e,this._writable.on("drain",n),this._unwrite=function(){t._writable.removeListener("drain",n),r()},this.uncork())},s.prototype.setReadable=function(e){var t,r,n,i;this._unread&&this._unread(),this.destroyed?e&&e.destroy&&e.destroy():null===e||!1===e?(this.push(null),this.resume()):(r=c(e,{writable:!1,readable:!0},o(t=this)),n=function(){t._forward()},i=function(){t.push(null)},this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(e=e,new a.Readable({objectMode:!0,highWaterMark:16}).wrap(e)),this._readable2.on("readable",n),this._readable2.on("end",i),this._unread=function(){t._readable2.removeListener("readable",n),t._readable2.removeListener("end",i),r()},this._forward())},s.prototype._read=function(){this._drained=!0,this._forward()},s.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=t(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},s.prototype.destroy=function(e,t){if(t=t||n,this.destroyed)return t(null);this.destroyed=!0;var r=this;u.nextTick(function(){r._destroy(e),t(null)})},s.prototype._destroy=function(e){var t;e&&(t=this._ondrain,this._ondrain=null,t?t(e):this.emit("error",e)),this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable)&&this._writable.destroy&&this._writable.destroy(),this.emit("close")},s.prototype._write=function(e,t,r){if(!this.destroyed)return this._corked?i(this,this._write.bind(this,e,t,r)):e===l?this._finish(r):this._writable?void(!1===this._writable.write(e)?this._ondrain=r:this.destroyed||r()):r()},s.prototype._finish=function(r){var n=this;this.emit("preend"),i(this,function(){var e,t;e=n._forwardEnd&&n._writable,t=function(){!1===n._writableState.prefinished&&(n._writableState.prefinished=!0),n.emit("prefinish"),i(n,r)},!e||e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),t())})},s.prototype.end=function(e,t,r){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this._writableState.destroyed||this.write(l),a.Writable.prototype.end.call(this,r))},f.exports=s}.call(this)}.call(this,h("_process"),h("buffer").Buffer)},{_process:96,buffer:3,"end-of-stream":10,inherits:13,"readable-stream":88,"stream-shift":105}],73:[function(e,t,r){"use strict";const n=e("yallist"),s=Symbol("max"),a=Symbol("length"),c=Symbol("lengthCalculator"),o=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),h=Symbol("noDisposeOnSet"),f=Symbol("lruList"),d=Symbol("cache"),i=Symbol("updateAgeOnGet"),p=()=>1;const g=(e,t,r)=>{t=e[d].get(t);if(t){var n=t.value;if(m(e,n)){if(y(e,t),!e[o])return}else r&&(e[i]&&(t.value.now=Date.now()),e[f].unshiftNode(t));return n.value}},m=(e,t)=>{var r;return!(!t||!t.maxAge&&!e[l])&&(r=Date.now()-t.now,t.maxAge?r>t.maxAge:e[l]&&r>e[l])},b=t=>{if(t[a]>t[s])for(let e=t[f].tail;t[a]>t[s]&&null!==e;){var r=e.prev;y(t,e),e=r}},y=(e,t)=>{var r;t&&(r=t.value,e[u]&&e[u](r.key,r.value),e[a]-=r.length,e[d].delete(r.key),e[f].removeNode(t))};class v{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const w=(e,t,r,n)=>{let i=r.value;m(e,i)&&(y(e,r),e[o]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};t.exports=class{constructor(e){if((e=(e="number"==typeof e?{max:e}:e)||{}).max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[s]=e.max||1/0;var t=e.length||p;if(this[c]="function"!=typeof t?p:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[h]=e.noDisposeOnSet||!1,this[i]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[s]=e||1/0,b(this)}get max(){return this[s]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,b(this)}get maxAge(){return this[l]}set lengthCalculator(e){(e="function"!=typeof e?p:e)!==this[c]&&(this[c]=e,this[a]=0,this[f].forEach(e=>{e.length=this[c](e.value,e.key),this[a]+=e.length})),b(this)}get lengthCalculator(){return this[c]}get length(){return this[a]}get itemCount(){return this[f].length}rforEach(t,r){r=r||this;for(let e=this[f].tail;null!==e;){var n=e.prev;w(this,t,e,r),e=n}}forEach(t,r){r=r||this;for(let e=this[f].head;null!==e;){var n=e.next;w(this,t,e,r),e=n}}keys(){return this[f].toArray().map(e=>e.key)}values(){return this[f].toArray().map(e=>e.value)}reset(){this[u]&&this[f]&&this[f].length&&this[f].forEach(e=>this[u](e.key,e.value)),this[d]=new Map,this[f]=new n,this[a]=0}dump(){return this[f].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[f]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var n,i=r?Date.now():0,o=this[c](t,e);return this[d].has(e)?o>this[s]?(y(this,this[d].get(e)),!1):(n=this[d].get(e).value,this[u]&&!this[h]&&this[u](e,n.value),n.now=i,n.maxAge=r,n.value=t,this[a]+=o-n.length,n.length=o,this.get(e),b(this),!0):(n=new v(e,t,o,i,r)).length>this[s]?(this[u]&&this[u](e,t),!1):(this[a]+=n.length,this[f].unshift(n),this[d].set(e,this[f].head),b(this),!0)}has(e){return!!this[d].has(e)&&(e=this[d].get(e).value,!m(this,e))}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){var e=this[f].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[d].get(e))}load(t){this.reset();var r=Date.now();for(let e=t.length-1;0<=e;e--){var n=t[e],i=n.e||0;0===i?this.set(n.k,n.v):0<(i=i-r)&&this.set(n.k,n.v,i)}}prune(){this[d].forEach((e,t)=>g(this,t,!1))}}},{yallist:90}],74:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{dup:41}],75:[function(u,h,e){!function(l){!function(){"use strict";var e=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},t=(h.exports=s,u("./_stream_readable")),r=u("./_stream_writable");u("inherits")(s,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var o=n[i];s.prototype[o]||(s.prototype[o]=r.prototype[o])}function s(e){if(!(this instanceof s))return new s(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",a))}function a(){this._writableState.ended||l.nextTick(c,this)}function c(e){e.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}.call(this)}.call(this,u("_process"))},{"./_stream_readable":77,"./_stream_writable":79,_process:96,inherits:13}],76:[function(e,t,r){arguments[4][43][0].apply(r,arguments)},{"./_stream_transform":78,dup:43,inherits:13}],77:[function(U,q,e){!function(B,D){!function(){"use strict";function p(e,t){return e.listeners(t).length}(q.exports=w).ReadableState=v,U("events").EventEmitter;var n,i=U("./internal/streams/stream"),u=U("buffer").Buffer,h=(void 0!==D?D:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var o,e,r,t=U("util"),g=t&&t.debuglog?t.debuglog("stream"):function(){},s=U("./internal/streams/buffer_list"),t=U("./internal/streams/destroy"),a=U("./internal/streams/state").getHighWaterMark,c=U("../errors").codes,f=c.ERR_INVALID_ARG_TYPE,d=c.ERR_STREAM_PUSH_AFTER_EOF,l=c.ERR_METHOD_NOT_IMPLEMENTED,m=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,b=(U("inherits")(w,i),t.errorOrDestroy),y=["error","close","destroy","pause","resume"];function v(e,t,r){n=n||U("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=t instanceof n),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=a(this,e,"readableHighWaterMark",r),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o=o||U("string_decoder/").StringDecoder,this.decoder=new o(e.encoding),this.encoding=e.encoding)}function w(e){if(n=n||U("./_stream_duplex"),!(this instanceof w))return new w(e);var t=this instanceof n;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy)&&(this._destroy=e.destroy),i.call(this)}function _(e,t,r,n,i){g("readableAddChunk",t);var o,s,a,c,l=e._readableState;if(null===t)l.reading=!1,s=e,a=l,g("onEofChunk"),a.ended||(a.decoder&&(c=a.decoder.end())&&c.length&&(a.buffer.push(c),a.length+=a.objectMode?1:c.length),a.ended=!0,a.sync?k(s):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,C(s))));else if(o=i?o:function(e,t){var r;!function(e){return u.isBuffer(e)||e instanceof h}(t)&&"string"!=typeof t&&void 0!==t&&!e.objectMode&&(r=new f("chunk",["string","Buffer","Uint8Array"],t));return r}(l,t))b(e,o);else if(l.objectMode||t&&0<t.length)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===u.prototype||(c=t,t=u.from(c)),n)l.endEmitted?b(e,new m):x(e,l,t,!0);else if(l.ended)b(e,new d);else{if(l.destroyed)return!1;l.reading=!1,!l.decoder||r||(t=l.decoder.write(t),l.objectMode)||0!==t.length?x(e,l,t,!1):A(e,l)}else n||(l.reading=!1,A(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function x(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&k(e)),A(e,t)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=t.destroy,w.prototype._undestroy=t.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},w.prototype.unshift=function(e){return _(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){for(var t=new(o=o||U("string_decoder/").StringDecoder)(e),r=(this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var S=1073741824;function E(e,t){var r;return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(S<=(r=e)?r=S:(r--,r=(r=(r=(r=(r|=r>>>1)|r>>>2)|r>>>4)|r>>>8)|r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;g("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(g("emitReadable",t.flowing),t.emittedReadable=!0,B.nextTick(C,e))}function C(e){var t=e._readableState;g("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,R(e)}function A(e,t){t.readingMore||(t.readingMore=!0,B.nextTick(T,e,t))}function T(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(g("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function P(e){g("readable nexttick read 0"),e.read(0)}function O(e,t){g("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(g("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function j(e){var t=e._readableState;g("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,B.nextTick(N,t,e))}function N(e,t){g("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy())}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){g("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;return 0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:0<r.length)||r.ended)?(g("read: emitReadable",r.length,r.ended),(0===r.length&&r.ended?j:k)(this),null):0===(e=E(e,r))&&r.ended?(0===r.length&&j(this),null):(t=r.needReadable,g("need readable",t),(0===r.length||r.length-e<r.highWaterMark)&&g("length less than watermark",t=!0),r.ended||r.reading?g("reading or ended",t=!1):t&&(g("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=E(n,r))),null===(t=0<e?M(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e)&&r.ended&&j(this),null!==t&&this.emit("data",t),t)},w.prototype._read=function(e){b(this,new l("_read()"))},w.prototype.pipe=function(r,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r)}i.pipesCount+=1,g("pipe count=%d opts=%j",i.pipesCount,e);e=(!e||!1!==e.end)&&r!==B.stdout&&r!==B.stderr?s:d;function o(e,t){g("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,g("cleanup"),r.removeListener("close",h),r.removeListener("finish",f),r.removeListener("drain",a),r.removeListener("error",u),r.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",d),n.removeListener("data",l),c=!0,!i.awaitDrain||r._writableState&&!r._writableState.needDrain||a())}function s(){g("onend"),r.end()}i.endEmitted?B.nextTick(e):n.once("end",e),r.on("unpipe",o);t=n;var t,a=function(){var e=t._readableState;g("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&p(t,"data")&&(e.flowing=!0,R(t))},c=(r.on("drain",a),!1);function l(e){g("ondata");e=r.write(e);g("dest.write",e),!1===e&&((1===i.pipesCount&&i.pipes===r||1<i.pipesCount&&-1!==L(i.pipes,r))&&!c&&(g("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function u(e){g("onerror",e),d(),r.removeListener("error",u),0===p(r,"error")&&b(r,e)}function h(){r.removeListener("finish",f),d()}function f(){g("onfinish"),r.removeListener("close",h),d()}function d(){g("unpipe"),n.unpipe(r)}return n.on("data",l),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(r,"error",u),r.once("close",h),r.once("finish",f),r.emit("pipe",n),i.flowing||(g("pipe resume"),n.resume()),r},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0!==t.pipesCount)if(1===t.pipesCount)e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r));else if(e){var n=L(t.pipes,e);-1!==n&&(t.pipes.splice(n,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r))}else{var i=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<o;s++)i[s].emit("unpipe",this,{hasUnpiped:!1})}return this},w.prototype.addListener=w.prototype.on=function(e,t){var t=i.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"!==e||r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,g("on readable",r.length,r.reading),r.length?k(this):r.reading||B.nextTick(P,this)),t},w.prototype.removeListener=function(e,t){t=i.prototype.removeListener.call(this,e,t);return"readable"===e&&B.nextTick(I,this),t},w.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||B.nextTick(I,this),t},w.prototype.resume=function(){var e,t,r=this._readableState;return r.flowing||(g("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled)||(t.resumeScheduled=!0,B.nextTick(O,e,t)),r.paused=!1,this},w.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(t){var e,r=this,n=this._readableState,i=!1;for(e in t.on("end",function(){var e;g("wrapped end"),n.decoder&&!n.ended&&(e=n.decoder.end())&&e.length&&r.push(e),r.push(null)}),t.on("data",function(e){g("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&!r.push(e)&&(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){g("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return(e=void 0===e?U("./internal/streams/async_iterator"):e)(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=M,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return(r=void 0===r?U("./internal/streams/from"):r)(w,e,t)})}.call(this)}.call(this,U("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":74,"./_stream_duplex":75,"./internal/streams/async_iterator":80,"./internal/streams/buffer_list":81,"./internal/streams/destroy":82,"./internal/streams/from":84,"./internal/streams/state":86,"./internal/streams/stream":87,_process:96,buffer:3,events:11,inherits:13,"string_decoder/":106,util:2}],78:[function(e,t,r){arguments[4][45][0].apply(r,arguments)},{"../errors":74,"./_stream_duplex":75,dup:45,inherits:13}],79:[function(P,O,e){!function(T,I){!function(){"use strict";function h(o){var s=this;this.next=null,this.entry=null,this.finish=function(){var e=s,t=o,r=void 0,n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}}(O.exports=_).WritableState=w;var r,e={deprecate:P("util-deprecate")},n=P("./internal/streams/stream"),l=P("buffer").Buffer,u=(void 0!==I?I:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var i,t=P("./internal/streams/destroy"),o=P("./internal/streams/state").getHighWaterMark,s=P("../errors").codes,f=s.ERR_INVALID_ARG_TYPE,a=s.ERR_METHOD_NOT_IMPLEMENTED,d=s.ERR_MULTIPLE_CALLBACK,c=s.ERR_STREAM_CANNOT_PIPE,p=s.ERR_STREAM_DESTROYED,g=s.ERR_STREAM_NULL_VALUES,m=s.ERR_STREAM_WRITE_AFTER_END,b=s.ERR_UNKNOWN_ENCODING,y=t.errorOrDestroy;function v(){}function w(e,u,t){r=r||P("./_stream_duplex"),e=e||{},"boolean"!=typeof t&&(t=u instanceof r),this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=o(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t=u,r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new d;var o,s,a,c,l=r;l.writing=!1,l.writecb=null,l.length-=l.writelen,l.writelen=0,e?(l=t,s=n,a=e,c=i,--(o=r).pendingcb,s?(T.nextTick(c,a),T.nextTick(A,l,o),l._writableState.errorEmitted=!0,y(l,a)):(c(a),l._writableState.errorEmitted=!0,y(l,a),A(l,o))):((e=k(r)||t.destroyed)||r.corked||r.bufferProcessing||!r.bufferedRequest||E(t,r),n?T.nextTick(S,t,r,e,i):S(t,r,e,i))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}P("inherits")(_,n),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(w.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function _(e){var t=this instanceof(r=r||P("./_stream_duplex"));if(!t&&!i.call(_,this))return new _(e);this._writableState=new w(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final)&&(this._final=e.final),n.call(this)}function x(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function S(e,t,r,n){var i;r||(r=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,r.emit("drain"))),t.pendingcb--,n(),A(e,t)}function E(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){for(var n=t.bufferedRequestCount,i=new Array(n),n=t.corkedRequestsFree,o=(n.entry=r,0),s=!0;r;)(i[o]=r).isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,x(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new h(t),t.bufferedRequestCount=0}else{for(;r;){var a=r.chunk,c=r.encoding,l=r.callback;if(x(e,t,!1,t.objectMode?1:a.length,a,c,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(t,r){t._final(function(e){r.pendingcb--,e&&y(t,e),r.prefinished=!0,t.emit("prefinish"),A(t,r)})}function A(e,t){var r,n,i=k(t);return i&&(r=e,(n=t).prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,T.nextTick(C,r,n))),0===t.pendingcb)&&(t.finished=!0,e.emit("finish"),t.autoDestroy)&&(!(r=e._readableState)||r.autoDestroy&&r.endEmitted)&&e.destroy(),i}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===_&&e&&e._writableState instanceof w}})):i=function(e){return e instanceof this},_.prototype.pipe=function(){y(this,new c)},_.prototype.write=function(e,t,r){var n,i,o,s=this._writableState,a=!1,c=!s.objectMode&&(c=e,l.isBuffer(c)||c instanceof u);return c&&!l.isBuffer(e)&&(n=e,e=l.from(n)),"function"==typeof t&&(r=t,t=null),t=c?"buffer":t||s.defaultEncoding,"function"!=typeof r&&(r=v),s.ending?(n=this,i=r,o=new m,y(n,o),T.nextTick(i,o)):(c||function(e,t,r,n){var i;if(null===r?i=new g:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i)return 1;y(e,i),T.nextTick(n,i)}(this,s,e,r))&&(s.pendingcb++,a=function(e,t,r,n,i,o){r||(s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r));return t}(t,n,i),n!==s&&(r=!0,i="buffer",n=s));var s=t.objectMode?1:n.length,a=(t.length+=s,t.length<t.highWaterMark);a||(t.needDrain=!0);{var c;t.writing||t.corked?(c=t.lastBufferedRequest,t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):x(e,t,!1,s,n,i,o)}return a}(this,s,c,e,t,r)),a},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new b(e)},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new a("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var n=this._writableState;if("function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending){e=this,t=n,n=r;t.ending=!0,A(e,t),n&&(t.finished?T.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}return this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=t.destroy,_.prototype._undestroy=t.undestroy,_.prototype._destroy=function(e,t){t(e)}}.call(this)}.call(this,P("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":74,"./_stream_duplex":75,"./internal/streams/destroy":82,"./internal/streams/state":86,"./internal/streams/stream":87,_process:96,buffer:3,inherits:13,"util-deprecate":110}],80:[function(n,m,e){!function(g){!function(){"use strict";var e;function r(e,t,r){(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var i=n("./end-of-stream"),o=Symbol("lastResolve"),s=Symbol("lastReject"),a=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function d(e){var t,r=e[o];null!==r&&null!==(t=e[h].read())&&(e[l]=null,e[o]=null,e[s]=null,r(f(t,!1)))}var t=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((r(e={get stream(){return this[h]},next:function(){var r=this,e=this[a];if(null!==e)return Promise.reject(e);if(this[c])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(e,t){g.nextTick(function(){r[a]?t(r[a]):e(f(void 0,!0))})});var t,n,i,e=this[l];if(e)t=new Promise((n=e,i=this,function(e,t){n.then(function(){i[c]?e(f(void 0,!0)):i[u](e,t)},t)}));else{e=this[h].read();if(null!==e)return Promise.resolve(f(e,!1));t=new Promise(this[u])}return this[l]=t}},Symbol.asyncIterator,function(){return this}),r(e,"return",function(){var e=this;return new Promise(function(t,r){e[h].destroy(null,function(e){e?r(e):t(f(void 0,!0))})})}),e),t);m.exports=function(e){var t,n=Object.create(p,(r(t={},h,{value:e,writable:!0}),r(t,o,{value:null,writable:!0}),r(t,s,{value:null,writable:!0}),r(t,a,{value:null,writable:!0}),r(t,c,{value:e._readableState.endEmitted,writable:!0}),r(t,u,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[o]=null,n[s]=null,e(f(r,!1))):(n[o]=e,n[s]=t)},writable:!0}),t));return n[l]=null,i(e,function(e){var t;e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code?(null!==(t=n[s])&&(n[l]=null,n[o]=null,n[s]=null,t(e)),n[a]=e):(null!==(t=n[o])&&(n[l]=null,n[o]=null,t(f(void 0,!(n[s]=null)))),n[c]=!0)}),e.on("readable",function(e){g.nextTick(d,e)}.bind(null,n)),n}}.call(this)}.call(this,n("_process"))},{"./end-of-stream":83,_process:96}],81:[function(e,t,r){arguments[4][48][0].apply(r,arguments)},{buffer:3,dup:48,util:2}],82:[function(e,t,r){!function(c){!function(){"use strict";function o(e,t){a(e,t),s(e)}function s(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(a,this,e)):c.nextTick(a,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?c.nextTick(s,r):(r._writableState.errorEmitted=!0,c.nextTick(o,r,e)):c.nextTick(o,r,e):t?(c.nextTick(s,r),t(e)):c.nextTick(s,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}.call(this)}.call(this,e("_process"))},{_process:96}],83:[function(e,t,r){arguments[4][50][0].apply(r,arguments)},{"../../../errors":74,dup:50}],84:[function(e,t,r){arguments[4][51][0].apply(r,arguments)},{dup:51}],85:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{"../../../errors":74,"./end-of-stream":83,dup:52}],86:[function(e,t,r){arguments[4][53][0].apply(r,arguments)},{"../../../errors":74,dup:53}],87:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{dup:54,events:11}],88:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{"./lib/_stream_duplex.js":75,"./lib/_stream_passthrough.js":76,"./lib/_stream_readable.js":77,"./lib/_stream_transform.js":78,"./lib/_stream_writable.js":79,"./lib/internal/streams/end-of-stream.js":83,"./lib/internal/streams/pipeline.js":85,dup:55}],89:[function(e,t,r){"use strict";t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},{}],90:[function(e,t,r){"use strict";function o(e){var t=this;if((t=t instanceof o?t:new o).tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(0<arguments.length)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this).prev=t:this.prev=null,r?(r.prev=this).next=r:this.next=null}(t.exports=o).Node=s,(o.create=o).prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},o.prototype.unshiftNode=function(e){var t;e!==this.head&&(e.list&&e.list.removeNode(e),t=this.head,e.list=this,(e.next=t)&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++)},o.prototype.pushNode=function(e){var t;e!==this.tail&&(e.list&&e.list.removeNode(e),t=this.tail,e.list=this,(e.prev=t)&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++)},o.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){n=r=void 0;var r=this,n=arguments[e];r.tail=new s(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++}return this.length},o.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){n=r=void 0;var r=this,n=arguments[e];r.head=new s(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++}return this.length},o.prototype.pop=function(){var e;if(this.tail)return e=this.tail.value,this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e},o.prototype.shift=function(){var e;if(this.head)return e=this.head.value,this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e},o.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},o.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},o.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},o.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},o.prototype.map=function(e,t){t=t||this;for(var r=new o,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},o.prototype.mapReverse=function(e,t){t=t||this;for(var r=new o,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},o.prototype.reduce=function(e,t){var r,n=this.head;if(1<arguments.length)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},o.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(1<arguments.length)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},o.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},o.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},o.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new o;if(!(t<e||t<0)){e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value)}return r},o.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new o;if(!(t<e||t<0)){e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&t<n;n--)i=i.prev;for(;null!==i&&e<n;n--,i=i.prev)r.push(i.value)}return r},o.prototype.splice=function(e,t,...r){(e=e>this.length?this.length-1:e)<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(var o=[],n=0;i&&n<t;n++)o.push(i.value),i=this.removeNode(i);(i=null===i?this.tail:i)!==this.head&&i!==this.tail&&(i=i.prev);for(n=0;n<r.length;n++)i=function(e,t,r){r=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);null===r.next&&(e.tail=r);null===r.prev&&(e.head=r);return e.length++,r}(this,i,r[n]);return o},o.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{e("./iterator.js")(o)}catch(e){}},{"./iterator.js":89}],91:[function(e,t,r){var i=864e5;function o(e,t,r,n){t=1.5*r<=t;return Math.round(e/r)+" "+n+(t?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if(!("string"==r&&0<e.length)){if("number"==r&&isFinite(e))return(t.long?function(e){var t=Math.abs(e);if(i<=t)return o(e,t,i,"day");if(36e5<=t)return o(e,t,36e5,"hour");if(6e4<=t)return o(e,t,6e4,"minute");if(1e3<=t)return o(e,t,1e3,"second");return e+" ms"}:function(e){var t=Math.abs(e);if(i<=t)return Math.round(e/i)+"d";if(36e5<=t)return Math.round(e/36e5)+"h";if(6e4<=t)return Math.round(e/6e4)+"m";if(1e3<=t)return Math.round(e/1e3)+"s";return e+"ms"})(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}r=e;if(!(100<(r=String(r)).length)){r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(r){var n=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}},{}],92:[function(e,t,r){e=e("./lib/number-allocator.js");t.exports.NumberAllocator=e},{"./lib/number-allocator.js":93}],93:[function(e,t,r){"use strict";const n=e("js-sdsl").OrderedSet,s=e("debug")("number-allocator:trace"),a=e("debug")("number-allocator:error");function c(e,t){this.low=e,this.high=t}function i(e,t){if(!(this instanceof i))return new i(e,t);this.min=e,this.max=t,this.ss=new n([],(e,t)=>e.compare(t)),s("Create"),this.clear()}c.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},c.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},i.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},i.prototype.alloc=function(){var e,t,r,n;return 0===this.ss.size()?(s("alloc():empty"),null):((n=t=(e=this.ss.begin()).pointer.low)+1<=(r=e.pointer.high)?this.ss.updateKeyByIterator(e,new c(t+1,r)):this.ss.eraseElementByPos(0),s("alloc():"+n),n)},i.prototype.use=function(e){var t=new c(e,e),r=this.ss.lowerBound(t);if(r.equals(this.ss.end()))return s("use():failed"),!1;var n=r.pointer.low,i=r.pointer.high;if(r.pointer.equals(t))this.ss.eraseElementByIterator(r);else{if(e<n)return!1;n===e?this.ss.updateKeyByIterator(r,new c(n+1,i)):i===e?this.ss.updateKeyByIterator(r,new c(n,i-1)):(this.ss.updateKeyByIterator(r,new c(e+1,i)),this.ss.insert(new c(n,e-1)))}return s("use():"+e),!0},i.prototype.free=function(e){if(e<this.min||e>this.max)a("free():"+e+" is out of range");else{var t,r,n=new c(e,e),i=this.ss.upperBound(n);if(i.equals(this.ss.end())){if(i.equals(this.ss.begin()))return void this.ss.insert(n);i.pre();var o=i.pointer.high;i.pointer.high+1===e?this.ss.updateKeyByIterator(i,new c(o,e)):this.ss.insert(n)}else i.equals(this.ss.begin())?e+1===i.pointer.low?(o=i.pointer.high,this.ss.updateKeyByIterator(i,new c(e,o))):this.ss.insert(n):(o=i.pointer.low,t=i.pointer.high,i.pre(),r=i.pointer.low,i.pointer.high+1===e?e+1===o?(this.ss.eraseElementByIterator(i),this.ss.updateKeyByIterator(i,new c(r,t))):this.ss.updateKeyByIterator(i,new c(r,e)):e+1===o?(this.ss.eraseElementByIterator(i.next()),this.ss.insert(new c(e,t))):this.ss.insert(n));s("free():"+e)}},i.prototype.clear=function(){s("clear()"),this.ss.clear(),this.ss.insert(new c(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(const e of this.ss)console.log(e)},t.exports=i},{debug:8,"js-sdsl":33}],94:[function(e,t,r){e=e("wrappy");function n(e){function t(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))}return t.called=!1,t}function i(e){function t(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)}var r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}t.exports=e(n),t.exports.strict=e(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},{wrappy:127}],95:[function(e,t,r){!function(a){!function(){"use strict";void 0===a||!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(e);case 2:return a.nextTick(function(){e.call(null,t)});case 3:return a.nextTick(function(){e.call(null,t,r)});case 4:return a.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return a.nextTick(function(){e.apply(null,i)})}}}:t.exports=a}.call(this)}.call(this,e("_process"))},{_process:96}],96:[function(e,t,r){var n,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length)&&d()}function d(){if(!u){for(var e=a(f),t=(u=!0,l.length);t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,u=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||u||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],97:[function(e,T,I){!function(A){!function(){var e=this,t="object"==typeof I&&I&&!I.nodeType&&I,r="object"==typeof T&&T&&!T.nodeType&&T,n="object"==typeof A&&A;n.global!==n&&n.window!==n&&n.self!==n||(e=n);var i,o,m=2147483647,b=36,y=26,s=38,a=700,c=/^xn--/,l=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=b-1,v=Math.floor,w=String.fromCharCode;function _(e){throw new RangeError(h[e])}function d(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function p(e,t){var r=e.split("@"),n="",r=(1<r.length&&(n=r[0]+"@",e=r[1]),(e=e.replace(u,".")).split("."));return n+d(r,t).join(".")}function x(e){for(var t,r,n=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function g(e){return d(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,r){var n=0;for(e=r?v(e/a):e>>1,e+=v(e/t);f*y>>1<e;n+=b)e=v(e/f);return v(n+(f+1)*e/(e+s))}function k(e){var t,r,n,i,o,s,a,c=[],l=e.length,u=0,h=128,f=72,d=e.lastIndexOf("-");for(d<0&&(d=0),r=0;r<d;++r)128<=e.charCodeAt(r)&&_("not-basic"),c.push(e.charCodeAt(r));for(n=0<d?d+1:0;n<l;){for(i=u,o=1,s=b;l<=n&&_("invalid-input"),a=e.charCodeAt(n++),(b<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:b)||a>v((m-u)/o))&&_("overflow"),u+=a*o,!(a<(a=s<=f?1:f+y<=s?y:s-f));s+=b)o>v(m/(a=b-a))&&_("overflow"),o*=a;f=E(u-i,t=c.length+1,0==i),v(u/t)>m-h&&_("overflow"),h+=v(u/t),u%=t,c.splice(u++,0,h)}return g(c)}function C(e){for(var t,r,n,i,o,s,a,c,l,u,h=[],f=(e=x(e)).length,d=128,p=72,g=t=0;g<f;++g)(a=e[g])<128&&h.push(w(a));for(r=n=h.length,n&&h.push("-");r<f;){for(i=m,g=0;g<f;++g)d<=(a=e[g])&&a<i&&(i=a);for(i-d>v((m-t)/(c=r+1))&&_("overflow"),t+=(i-d)*c,d=i,g=0;g<f;++g)if((a=e[g])<d&&++t>m&&_("overflow"),a==d){for(o=t,s=b;!(o<(l=s<=p?1:p+y<=s?y:s-p));s+=b)h.push(w(S(l+(u=o-l)%(l=b-l),0))),o=v(u/l);h.push(w(S(o,0))),p=E(t,c,r==n),t=0,++r}++t,++d}return h.join("")}if(i={version:"1.4.1",ucs2:{decode:x,encode:g},decode:k,encode:C,toASCII:function(e){return p(e,function(e){return l.test(e)?"xn--"+C(e):e})},toUnicode:function(e){return p(e,function(e){return c.test(e)?k(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return i});else if(t&&r)if(T.exports==t)r.exports=i;else for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);else e.punycode=i}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],98:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"==typeof e&&0!==e.length){var o=/\+/g,t=(e=e.split(t),1e3),s=(n&&"number"==typeof n.maxKeys&&(t=n.maxKeys),e.length);0<t&&t<s&&(s=t);for(var a=0;a<s;++a){var c,l=e[a].replace(o,"%20"),u=l.indexOf(r),u=0<=u?(c=l.substr(0,u),l.substr(u+1)):(c=l,""),l=decodeURIComponent(c),u=decodeURIComponent(u);Object.prototype.hasOwnProperty.call(i,l)?h(i[l])?i[l].push(u):i[l]=[i[l],u]:i[l]=u}}return i};var h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],99:[function(e,t,r){"use strict";function o(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(r,n,i,e){return n=n||"&",i=i||"=","object"==typeof(r=null===r?void 0:r)?a(c(r),function(e){var t=encodeURIComponent(o(e))+i;return s(r[e])?a(r[e],function(e){return t+encodeURIComponent(o(e))}).join(n):t+encodeURIComponent(o(r[e]))}).join(n):e?encodeURIComponent(o(e))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var c=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}},{}],100:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":98,"./encode":99}],101:[function(e,t,r){"use strict";function n(e,t,r){var n=this;this._callback=e,this._args=r,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e=e||n._interval,n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,e,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");if(0<arguments.length)for(var e=new Array(arguments.length-2),t=0;t<e.length;t++)e[t]=arguments[t+2];return new n(arguments[0],arguments[1],e)}},{}],102:[function(e,t,r){"use strict";t.exports=e("./index.js")()},{"./index.js":103}],103:[function(e,r,t){!function(t){!function(){"use strict";function u(e){return e instanceof t?t.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}r.exports=function(e){var c,l;if((e=e||{}).circles)return c=[],l=[],e.proto?function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return s(t,e);if(t instanceof Map)return new Map(s(Array.from(t),e));if(t instanceof Set)return new Set(s(Array.from(t),e));var r={};c.push(t);l.push(r);for(var n in t){var i,o=t[n];"object"!=typeof o||null===o?r[n]=o:o instanceof Date?r[n]=new Date(o):o instanceof Map?r[n]=new Map(s(Array.from(o),e)):o instanceof Set?r[n]=new Set(s(Array.from(o),e)):ArrayBuffer.isView(o)?r[n]=u(o):(i=c.indexOf(o),r[n]=-1!==i?l[i]:e(o))}c.pop();l.pop();return r}:function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return s(t,e);if(t instanceof Map)return new Map(s(Array.from(t),e));if(t instanceof Set)return new Set(s(Array.from(t),e));var r={};c.push(t);l.push(r);for(var n in t){var i,o;!1!==Object.hasOwnProperty.call(t,n)&&("object"!=typeof(i=t[n])||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(s(Array.from(i),e)):i instanceof Set?r[n]=new Set(s(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=u(i):(o=c.indexOf(i),r[n]=-1!==o?l[o]:e(i)))}c.pop();l.pop();return r};return e.proto?function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return o(t,e);if(t instanceof Map)return new Map(o(Array.from(t),e));if(t instanceof Set)return new Set(o(Array.from(t),e));var r={};for(var n in t){var i=t[n];"object"!=typeof i||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(o(Array.from(i),e)):i instanceof Set?r[n]=new Set(o(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=u(i):r[n]=e(i)}return r}:function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return o(t,e);if(t instanceof Map)return new Map(o(Array.from(t),e));if(t instanceof Set)return new Set(o(Array.from(t),e));var r={};for(var n in t){var i;!1!==Object.hasOwnProperty.call(t,n)&&("object"!=typeof(i=t[n])||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(o(Array.from(i),e)):i instanceof Set?r[n]=new Set(o(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=u(i):r[n]=e(i))}return r};function s(e,t){for(var r=Object.keys(e),n=new Array(r.length),i=0;i<r.length;i++){var o,s=r[i],a=e[s];"object"!=typeof a||null===a?n[s]=a:a instanceof Date?n[s]=new Date(a):ArrayBuffer.isView(a)?n[s]=u(a):(o=c.indexOf(a),n[s]=-1!==o?l[o]:t(a))}return n}function o(e,t){for(var r=Object.keys(e),n=new Array(r.length),i=0;i<r.length;i++){var o=r[i],s=e[o];"object"!=typeof s||null===s?n[o]=s:s instanceof Date?n[o]=new Date(s):ArrayBuffer.isView(s)?n[o]=u(s):n[o]=t(s)}return n}}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:3}],104:[function(e,t,r){var n=e("buffer"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:3}],105:[function(e,t,r){t.exports=function(e){var t=e._readableState;return t?t.objectMode||"number"==typeof e._duplexState?e.read():e.read(function(e){if(e.buffer.length)return(e.buffer.head?e.buffer.head.data:e.buffer[0]).length;return e.length}(t)):null}},{}],106:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||n.isEncoding!==i&&i(e))return t||e;throw new Error("Unknown encoding: "+e)}function s(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=h,this.end=f,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,"�"):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,"�"):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,"�"):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function u(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function h(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}(r.StringDecoder=s).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"�":e},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(!(n<r)){var i=a(t[n]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(!(--n<r||-2===i)){if(0<=(i=a(t[n])))return 0<i&&(e.lastNeed=i-2),i;if(!(--n<r||-2===i)&&0<=(i=a(t[n])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i}}return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":104}],107:[function(e,i,o){!function(Nt){!function(){var e,t,r,n;e=this,t=function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof Nt&&Nt.global===Nt&&Nt||Function("return this")()||{},n=Array.prototype,N=Object.prototype,B="undefined"!=typeof Symbol?Symbol.prototype:null,D=n.push,c=n.slice,h=N.toString,U=N.hasOwnProperty,t="undefined"!=typeof ArrayBuffer,r="undefined"!=typeof DataView,q=Array.isArray,F=Object.keys,H=Object.create,W=t&&ArrayBuffer.isView,z=isNaN,V=isFinite,K=!{toString:null}.propertyIsEnumerable("toString"),G=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Y=Math.pow(2,53)-1;function u(i,o){return o=null==o?i.length-1:+o,function(){for(var e=Math.max(arguments.length-o,0),t=Array(e),r=0;r<e;r++)t[r]=arguments[r+o];switch(o){case 0:return i.call(this,t);case 1:return i.call(this,arguments[0],t);case 2:return i.call(this,arguments[0],arguments[1],t)}for(var n=Array(o+1),r=0;r<o;r++)n[r]=arguments[r];return n[o]=t,i.apply(this,n)}}function o(e){var t=typeof e;return"function"==t||"object"==t&&!!e}function Q(e){return void 0===e}function $(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)}function i(e){var t="[object "+e+"]";return function(e){return h.call(e)===t}}var X=i("String"),J=i("Number"),s=i("Date"),Z=i("RegExp"),ee=i("Error"),te=i("Symbol"),re=i("ArrayBuffer"),a=i("Function"),e=e.document&&e.document.childNodes,f=a="function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof e?function(e){return"function"==typeof e||!1}:a,e=i("Object"),ne=r&&e(new DataView(new ArrayBuffer(8))),a="undefined"!=typeof Map&&e(new Map),r=i("DataView");var d=ne?function(e){return null!=e&&f(e.getInt8)&&re(e.buffer)}:r,p=q||i("Array");function g(e,t){return null!=e&&U.call(e,t)}var ie=i("Arguments"),oe=(!function(){ie(arguments)||(ie=function(e){return g(e,"callee")})}(),ie);function se(e){return J(e)&&z(e)}function ae(e){return function(){return e}}function ce(t){return function(e){e=t(e);return"number"==typeof e&&0<=e&&e<=Y}}function le(t){return function(e){return null==e?void 0:e[t]}}var m=le("byteLength"),ue=ce(m),he=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var fe=t?function(e){return W?W(e)&&!d(e):ue(e)&&he.test(h.call(e))}:ae(!1),b=le("length");function de(e,t){t=function(t){for(var r={},e=t.length,n=0;n<e;++n)r[t[n]]=!0;return{contains:function(e){return!0===r[e]},push:function(e){return r[e]=!0,t.push(e)}}}(t);var r=G.length,n=e.constructor,i=f(n)&&n.prototype||N,o="constructor";for(g(e,o)&&!t.contains(o)&&t.push(o);r--;)(o=G[r])in e&&e[o]!==i[o]&&!t.contains(o)&&t.push(o)}function y(e){if(!o(e))return[];if(F)return F(e);var t,r=[];for(t in e)g(e,t)&&r.push(t);return K&&de(e,r),r}function pe(e,t){var r=y(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;o<n;o++){var s=r[o];if(t[s]!==i[s]||!(s in i))return!1}return!0}function v(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)}function ge(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,m(e))}v.VERSION="1.13.6",v.prototype.valueOf=v.prototype.toJSON=v.prototype.value=function(){return this._wrapped},v.prototype.toString=function(){return String(this._wrapped)};var me="[object DataView]";function be(e,t,r,n){var i;return e===t?0!==e||1/e==1/t:null!=e&&null!=t&&(e!=e?t!=t:("function"==(i=typeof e)||"object"==i||"object"==typeof t)&&function e(t,r,n,i){t instanceof v&&(t=t._wrapped);r instanceof v&&(r=r._wrapped);var o=h.call(t);if(o!==h.call(r))return!1;if(ne&&"[object Object]"==o&&d(t)){if(!d(r))return!1;o=me}switch(o){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!=+t?+r!=+r:0==+t?1/+t==1/r:+t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object Symbol]":return B.valueOf.call(t)===B.valueOf.call(r);case"[object ArrayBuffer]":case me:return e(ge(t),ge(r),n,i)}o="[object Array]"===o;if(!o&&fe(t)){var s=m(t);if(s!==m(r))return!1;if(t.buffer===r.buffer&&t.byteOffset===r.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof r)return!1;var s=t.constructor,a=r.constructor;if(s!==a&&!(f(s)&&s instanceof s&&f(a)&&a instanceof a)&&"constructor"in t&&"constructor"in r)return!1}n=n||[];i=i||[];var c=n.length;for(;c--;)if(n[c]===t)return i[c]===r;n.push(t);i.push(r);if(o){if((c=t.length)!==r.length)return!1;for(;c--;)if(!be(t[c],r[c],n,i))return!1}else{var l,u=y(t);if(c=u.length,y(r).length!==c)return!1;for(;c--;)if(l=u[c],!g(r,l)||!be(t[l],r[l],n,i))return!1}n.pop();i.pop();return!0}(e,t,r,n))}function l(e){if(!o(e))return[];var t,r=[];for(t in e)r.push(t);return K&&de(e,r),r}function ye(n){var i=b(n);return function(e){if(null==e)return!1;var t=l(e);if(b(t))return!1;for(var r=0;r<i;r++)if(!f(e[n[r]]))return!1;return n!==we||!f(e[ve])}}var ve="forEach",e=["clear","delete"],r=["get","has","set"],q=e.concat(ve,r),we=e.concat(r),t=["add"].concat(e,ve,"has"),r=a?ye(q):i("Map"),e=a?ye(we):i("WeakMap"),q=a?ye(t):i("Set"),a=i("WeakSet");function w(e){for(var t=y(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function _e(e){for(var t={},r=y(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function xe(e){var t,r=[];for(t in e)f(e[t])&&r.push(t);return r.sort()}function Se(c,l){return function(e){var t=arguments.length;if(l&&(e=Object(e)),!(t<2||null==e))for(var r=1;r<t;r++)for(var n=arguments[r],i=c(n),o=i.length,s=0;s<o;s++){var a=i[s];l&&void 0!==e[a]||(e[a]=n[a])}return e}}var Ee=Se(l),_=Se(y),ke=Se(l,!0);function Ce(e){var t;return o(e)?H?H(e):((t=function(){}).prototype=e,e=new t,t.prototype=null,e):{}}function Ae(e){return p(e)?e:[e]}function x(e){return v.toPath(e)}function Te(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}function Ie(e,t,r){e=Te(e,x(t));return Q(e)?r:e}function Pe(e){return e}function S(t){return t=_({},t),function(e){return pe(e,t)}}function Oe(t){return t=x(t),function(e){return Te(e,t)}}function E(i,o,e){if(void 0===o)return i;switch(null==e?3:e){case 1:return function(e){return i.call(o,e)};case 3:return function(e,t,r){return i.call(o,e,t,r)};case 4:return function(e,t,r,n){return i.call(o,e,t,r,n)}}return function(){return i.apply(o,arguments)}}function Re(e,t,r){return null==e?Pe:f(e)?E(e,t,r):(o(e)&&!p(e)?S:Oe)(e)}function Me(e,t){return Re(e,t,1/0)}function k(e,t,r){return v.iteratee!==Me?v.iteratee(e,t):Re(e,t,r)}function je(){}function Le(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}v.toPath=Ae,v.iteratee=Me;var C=Date.now||function(){return(new Date).getTime()};function Ne(t){function r(e){return t[e]}var e="(?:"+y(t).join("|")+")",n=RegExp(e),i=RegExp(e,"g");return function(e){return n.test(e=null==e?"":""+e)?e.replace(i,r):e}}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Be=Ne(t),t=Ne(_e(t)),De=v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ue=/(.)^/,qe={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Fe=/\\|'|\r|\n|\u2028|\u2029/g;function He(e){return"\\"+qe[e]}var We=/^\s*(\w|\$)+\s*$/;var ze=0;function Ve(e,t,r,n,i){return n instanceof t?(n=Ce(e.prototype),o(t=e.apply(n,i))?t:n):e.apply(r,i)}var A=u(function(i,o){function s(){for(var e=0,t=o.length,r=Array(t),n=0;n<t;n++)r[n]=o[n]===a?arguments[e++]:o[n];for(;e<arguments.length;)r.push(arguments[e++]);return Ve(i,s,this,this,r)}var a=A.placeholder;return s}),Ke=(A.placeholder=v,u(function(t,r,n){var i;if(f(t))return i=u(function(e){return Ve(t,i,r,this,n.concat(e))});throw new TypeError("Bind must be called on a function")})),T=ce(b);function I(e,t,r,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var i=n.length,o=0,s=b(e);o<s;o++){var a=e[o];if(T(a)&&(p(a)||oe(a)))if(1<t)I(a,t-1,r,n),i=n.length;else for(var c=0,l=a.length;c<l;)n[i++]=a[c++];else r||(n[i++]=a)}return n}var Ge=u(function(e,t){var r=(t=I(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=Ke(e[n],e)}return e});var Ye=u(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),Qe=A(Ye,v,1);function $e(e){return function(){return!e.apply(this,arguments)}}function Xe(e,t){var r;return function(){return 0<--e&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var Je=A(Xe,2);function Ze(e,t,r){t=k(t,r);for(var n,i=y(e),o=0,s=i.length;o<s;o++)if(t(e[n=i[o]],n,e))return n}function et(o){return function(e,t,r){t=k(t,r);for(var n=b(e),i=0<o?0:n-1;0<=i&&i<n;i+=o)if(t(e[i],i,e))return i;return-1}}var tt=et(1),rt=et(-1);function nt(e,t,r,n){for(var i=(r=k(r,n,1))(t),o=0,s=b(e);o<s;){var a=Math.floor((o+s)/2);r(e[a])<i?o=a+1:s=a}return o}function it(o,s,a){return function(e,t,r){var n=0,i=b(e);if("number"==typeof r)0<o?n=0<=r?r:Math.max(r+i,n):i=0<=r?Math.min(r+1,i):r+i+1;else if(a&&r&&i)return e[r=a(e,t)]===t?r:-1;if(t!=t)return 0<=(r=s(c.call(e,n,i),se))?r+n:-1;for(r=0<o?n:i-1;0<=r&&r<i;r+=o)if(e[r]===t)return r;return-1}}var ot=it(1,tt,nt),st=it(-1,rt);function at(e,t,r){t=(T(e)?tt:Ze)(e,t,r);if(void 0!==t&&-1!==t)return e[t]}function P(e,t,r){if(t=E(t,r),T(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else for(var n=y(e),i=0,o=n.length;i<o;i++)t(e[n[i]],n[i],e);return e}function O(e,t,r){t=k(t,r);for(var n=!T(e)&&y(e),i=(n||e).length,o=Array(i),s=0;s<i;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o}function ct(f){return function(e,t,r,n){var i=3<=arguments.length,o=e,s=E(t,n,4),a=r,c=!T(o)&&y(o),l=(c||o).length,u=0<f?0:l-1;for(i||(a=o[c?c[u]:u],u+=f);0<=u&&u<l;u+=f){var h=c?c[u]:u;a=s(a,o[h],h,o)}return a}}var lt=ct(1),ut=ct(-1);function R(e,n,t){var i=[];return n=k(n,t),P(e,function(e,t,r){n(e,t,r)&&i.push(e)}),i}function ht(e,t,r){t=k(t,r);for(var n=!T(e)&&y(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0}function ft(e,t,r){t=k(t,r);for(var n=!T(e)&&y(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1}function M(e,t,r,n){return T(e)||(e=w(e)),0<=ot(e,t,r="number"==typeof r&&!n?r:0)}var dt=u(function(e,r,n){var i,o;return f(r)?o=r:(r=x(r),i=r.slice(0,-1),r=r[r.length-1]),O(e,function(e){var t=o;if(!t){if(null==(e=i&&i.length?Te(e,i):e))return;t=e[r]}return null==t?t:t.apply(e,n)})});function pt(e,t){return O(e,Oe(t))}function gt(e,n,t){var r,i,o=-1/0,s=-1/0;if(null==n||"number"==typeof n&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=T(e)?e:w(e)).length;a<c;a++)null!=(r=e[a])&&o<r&&(o=r);else n=k(n,t),P(e,function(e,t,r){i=n(e,t,r),(s<i||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o}var mt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function bt(e){return e?p(e)?c.call(e):X(e)?e.match(mt):T(e)?O(e,Pe):w(e):[]}function yt(e,t,r){if(null==t||r)return(e=T(e)?e:w(e))[Le(e.length-1)];for(var n=bt(e),r=b(n),i=(t=Math.max(Math.min(t,r),0),r-1),o=0;o<t;o++){var s=Le(o,i),a=n[o];n[o]=n[s],n[s]=a}return n.slice(0,t)}function j(o,t){return function(r,n,e){var i=t?[[],[]]:{};return n=k(n,e),P(r,function(e,t){t=n(e,t,r);o(i,e,t)}),i}}var vt=j(function(e,t,r){g(e,r)?e[r].push(t):e[r]=[t]}),wt=j(function(e,t,r){e[r]=t}),_t=j(function(e,t,r){g(e,r)?e[r]++:e[r]=1}),xt=j(function(e,t,r){e[r?0:1].push(t)},!0);function St(e,t,r){return t in r}var Et=u(function(e,t){var r={},n=t[0];if(null!=e){f(n)?(1<t.length&&(n=E(n,t[1])),t=l(e)):(n=St,t=I(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];n(a,s,e)&&(r[s]=a)}}return r}),kt=u(function(e,r){var t,n=r[0];return f(n)?(n=$e(n),1<r.length&&(t=r[1])):(r=O(I(r,!1,!1),String),n=function(e,t){return!M(r,t)}),Et(e,n,t)});function Ct(e,t,r){return c.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function At(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[0]:Ct(e,e.length-t)}function L(e,t,r){return c.call(e,null==t||r?1:t)}var Tt=u(function(e,t){return t=I(t,!0,!0),R(e,function(e){return!M(t,e)})}),It=u(function(e,t){return Tt(e,t)});function Pt(e,t,r,n){$(t)||(n=r,r=t,t=!1),null!=r&&(r=k(r,n));for(var i=[],o=[],s=0,a=b(e);s<a;s++){var c=e[s],l=r?r(c,s,e):c;t&&!r?(s&&o===l||i.push(c),o=l):r?M(o,l)||(o.push(l),i.push(c)):M(i,c)||i.push(c)}return i}var Ot=u(function(e){return Pt(I(e,!0,!0))});function Rt(e){for(var t=e&&gt(e,b).length||0,r=Array(t),n=0;n<t;n++)r[n]=pt(e,n);return r}var Mt=u(Rt);function jt(e,t){return e._chain?v(t).chain():t}function Lt(r){return P(xe(r),function(e){var t=v[e]=r[e];v.prototype[e]=function(){var e=[this._wrapped];return D.apply(e,arguments),jt(this,t.apply(v,e))}}),v}P(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=n[t];v.prototype[t]=function(){var e=this._wrapped;return null!=e&&(r.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),jt(this,e)}}),P(["concat","join","slice"],function(e){var t=n[e];v.prototype[e]=function(){var e=this._wrapped;return jt(this,e=null!=e?t.apply(e,arguments):e)}});s=Lt({__proto__:null,VERSION:"1.13.6",restArguments:u,isObject:o,isNull:function(e){return null===e},isUndefined:Q,isBoolean:$,isElement:function(e){return!(!e||1!==e.nodeType)},isString:X,isNumber:J,isDate:s,isRegExp:Z,isError:ee,isSymbol:te,isArrayBuffer:re,isDataView:d,isArray:p,isFunction:f,isArguments:oe,isFinite:function(e){return!te(e)&&V(e)&&!isNaN(parseFloat(e))},isNaN:se,isTypedArray:fe,isEmpty:function(e){var t;return null==e||("number"==typeof(t=b(e))&&(p(e)||X(e)||oe(e))?0===t:0===b(y(e)))},isMatch:pe,isEqual:function(e,t){return be(e,t)},isMap:r,isWeakMap:e,isSet:q,isWeakSet:a,keys:y,allKeys:l,values:w,pairs:function(e){for(var t=y(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},invert:_e,functions:xe,methods:xe,extend:Ee,extendOwn:_,assign:_,defaults:ke,create:function(e,t){return e=Ce(e),t&&_(e,t),e},clone:function(e){return o(e)?p(e)?e.slice():Ee({},e):e},tap:function(e,t){return t(e),e},get:Ie,has:function(e,t){for(var r=(t=x(t)).length,n=0;n<r;n++){var i=t[n];if(!g(e,i))return!1;e=e[i]}return!!r},mapObject:function(e,t,r){t=k(t,r);for(var n=y(e),i=n.length,o={},s=0;s<i;s++){var a=n[s];o[a]=t(e[a],a,e)}return o},identity:Pe,constant:ae,noop:je,toPath:Ae,property:Oe,propertyOf:function(t){return null==t?je:function(e){return Ie(t,e)}},matcher:S,matches:S,times:function(e,t,r){var n=Array(Math.max(0,e));t=E(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},random:Le,now:C,escape:Be,unescape:t,templateSettings:De,template:function(o,e,t){e=ke({},e=!e&&t?t:e,v.templateSettings);var r,t=RegExp([(e.escape||Ue).source,(e.interpolate||Ue).source,(e.evaluate||Ue).source].join("|")+"|$","g"),s=0,a="__p+='";if(o.replace(t,function(e,t,r,n,i){return a+=o.slice(s,i).replace(Fe,He),s=i+e.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":n&&(a+="';\n"+n+"\n__p+='"),e}),a+="';\n",t=e.variable){if(!We.test(t))throw new Error("variable is not a bare identifier: "+t)}else a="with(obj||{}){\n"+a+"}\n",t="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(t,"_",a)}catch(e){throw e.source=a,e}function n(e){return r.call(this,e,v)}return n.source="function("+t+"){\n"+a+"}",n},result:function(e,t,r){var n=(t=x(t)).length;if(!n)return f(r)?r.call(e):r;for(var i=0;i<n;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=r,i=n),e=f(o)?o.call(e):o}return e},uniqueId:function(e){var t=++ze+"";return e?e+t:t},chain:function(e){return(e=v(e))._chain=!0,e},iteratee:Me,partial:A,bind:Ke,bindAll:Ge,memoize:function(n,i){function o(e){var t=o.cache,r=""+(i?i.apply(this,arguments):e);return g(t,r)||(t[r]=n.apply(this,arguments)),t[r]}return o.cache={},o},delay:Ye,defer:Qe,throttle:function(r,n,i){function o(){u=!1===i.leading?0:C(),s=null,l=r.apply(a,c),s||(a=c=null)}function e(){var e=C(),t=(u||!1!==i.leading||(u=e),n-(e-u));return a=this,c=arguments,t<=0||n<t?(s&&(clearTimeout(s),s=null),u=e,l=r.apply(a,c),s||(a=c=null)):s||!1===i.trailing||(s=setTimeout(o,t)),l}var s,a,c,l,u=0;return i=i||{},e.cancel=function(){clearTimeout(s),u=0,s=a=c=null},e},debounce:function(t,r,n){function i(){var e=C()-s;e<r?o=setTimeout(i,r-e):(o=null,n||(c=t.apply(l,a)),o||(a=l=null))}var o,s,a,c,l,e=u(function(e){return l=this,a=e,s=C(),o||(o=setTimeout(i,r),n&&(c=t.apply(l,a))),c});return e.cancel=function(){clearTimeout(o),o=a=l=null},e},wrap:function(e,t){return A(t,e)},negate:$e,compose:function(){var r=arguments,n=r.length-1;return function(){for(var e=n,t=r[n].apply(this,arguments);e--;)t=r[e].call(this,t);return t}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:Xe,once:Je,findKey:Ze,findIndex:tt,findLastIndex:rt,sortedIndex:nt,indexOf:ot,lastIndexOf:st,find:at,detect:at,findWhere:function(e,t){return at(e,S(t))},each:P,forEach:P,map:O,collect:O,reduce:lt,foldl:lt,inject:lt,reduceRight:ut,foldr:ut,filter:R,select:R,reject:function(e,t,r){return R(e,$e(k(t)),r)},every:ht,all:ht,some:ft,any:ft,contains:M,includes:M,include:M,invoke:dt,pluck:pt,where:function(e,t){return R(e,S(t))},max:gt,min:function(e,n,t){var r,i,o=1/0,s=1/0;if(null==n||"number"==typeof n&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=T(e)?e:w(e)).length;a<c;a++)null!=(r=e[a])&&r<o&&(o=r);else n=k(n,t),P(e,function(e,t,r){((i=n(e,t,r))<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},shuffle:function(e){return yt(e,1/0)},sample:yt,sortBy:function(e,n,t){var i=0;return n=k(n,t),pt(O(e,function(e,t,r){return{value:e,index:i++,criteria:n(e,t,r)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(n<r||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")},groupBy:vt,indexBy:wt,countBy:_t,partition:xt,toArray:bt,size:function(e){return null==e?0:(T(e)?e:y(e)).length},pick:Et,omit:kt,first:At,head:At,take:At,initial:Ct,last:function(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[e.length-1]:L(e,Math.max(0,e.length-t))},rest:L,tail:L,drop:L,compact:function(e){return R(e,Boolean)},flatten:function(e,t){return I(e,t,!1)},without:It,uniq:Pt,unique:Pt,union:Ot,intersection:function(e){for(var t=[],r=arguments.length,n=0,i=b(e);n<i;n++){var o=e[n];if(!M(t,o)){for(var s=1;s<r&&M(arguments[s],o);s++);s===r&&t.push(o)}}return t},difference:Tt,unzip:Rt,transpose:Rt,zip:Mt,object:function(e,t){for(var r={},n=0,i=b(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},range:function(e,t,r){null==t&&(t=e||0,e=0),r=r||(t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;o<n;o++,e+=r)i[o]=e;return i},chunk:function(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(c.call(e,n,n+=t));return r},mixin:Lt,default:v});return s._=s},"object"==typeof o&&void 0!==i?i.exports=t():"function"==typeof define&&define.amd?define("underscore",t):(e="undefined"!=typeof globalThis?globalThis:e||self,r=e._,(n=e._=t()).noConflict=function(){return e._=r,n})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],108:[function(e,t,r){"use strict";var S=e("punycode"),E=e("./util");function _(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=i,r.resolve=function(e,t){return i(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},r.format=function(e){E.isString(e)&&(e=i(e));return e instanceof _?e.format():_.prototype.format.call(e)},r.Url=_;var k=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,C=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),A=["'"].concat(r),T=["%","/","?",";","#"].concat(A),I=["/","?","#"],P=/^[+a-z0-9A-Z_-]{0,63}$/,O=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},M={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},L=e("querystring");function i(e,t,r){var n;return e&&E.isObject(e)&&e instanceof _?e:((n=new _).parse(e,t,r),n)}_.prototype.parse=function(e,t,r){if(!E.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),n=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(n);i[0]=i[0].replace(/\\/g,"/");var o=(o=e=i.join(n)).trim();if(!r&&1===e.split("#").length){i=C.exec(o);if(i)return this.path=o,this.href=o,this.pathname=i[1],i[2]?(this.search=i[2],this.query=t?L.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var s,n=k.exec(o);if(n&&(s=(n=n[0]).toLowerCase(),this.protocol=s,o=o.substr(n.length)),!(r||n||o.match(/^\/\/[^@\/]+@[^@\/]+/))||!(w="//"===o.substr(0,2))||n&&M[n]||(o=o.substr(2),this.slashes=!0),!M[n]&&(w||n&&!j[n])){for(var a=-1,c=0;c<I.length;c++)-1!==(l=o.indexOf(I[c]))&&(-1===a||l<a)&&(a=l);-1!==(e=-1===a?o.lastIndexOf("@"):o.lastIndexOf("@",a))&&(i=o.slice(0,e),o=o.slice(e+1),this.auth=decodeURIComponent(i));for(var l,a=-1,c=0;c<T.length;c++)-1!==(l=o.indexOf(T[c]))&&(-1===a||l<a)&&(a=l);-1===a&&(a=o.length),this.host=o.slice(0,a),o=o.slice(a),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var u=this.hostname.split(/\./),c=0,h=u.length;c<h;c++){var f=u[c];if(f&&!f.match(P)){for(var d="",p=0,g=f.length;p<g;p++)127<f.charCodeAt(p)?d+="x":d+=f[p];if(!d.match(P)){var m=u.slice(0,c),b=u.slice(c+1),y=f.match(O);y&&(m.push(y[1]),b.unshift(y[2])),b.length&&(o="/"+b.join(".")+o),this.hostname=m.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=S.toASCII(this.hostname));var v=this.port?":"+this.port:"",w=this.hostname||"";this.host=w+v,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0])&&(o="/"+o)}if(!R[s])for(c=0,h=A.length;c<h;c++){var _,x=A[c];-1!==o.indexOf(x)&&((_=encodeURIComponent(x))===x&&(_=escape(x)),o=o.split(x).join(_))}n=o.indexOf("#"),-1!==n&&(this.hash=o.substr(n),o=o.slice(0,n)),e=o.indexOf("?");return-1!==e?(this.search=o.substr(e),this.query=o.substr(e+1),t&&(this.query=L.parse(this.query)),o=o.slice(0,e)):t&&(this.search="",this.query={}),o&&(this.pathname=o),j[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(v=this.pathname||"",i=this.search||"",this.path=v+i),this.href=this.format(),this},_.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",i=!1,o="",e=(this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(i+=":"+this.port),this.query&&E.isObject(this.query)&&Object.keys(this.query).length&&(o=L.stringify(this.query)),this.search||o&&"?"+o||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||j[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i=i||"",n&&"#"!==n.charAt(0)&&(n="#"+n),e&&"?"!==e.charAt(0)&&(e="?"+e),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+n},_.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},_.prototype.resolveObject=function(e){E.isString(e)&&((f=new _).parse(e,!1,!0),e=f);for(var t=new _,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];t[i]=this[i]}if(t.hash=e.hash,""!==e.href)if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var a=o[s];"protocol"!==a&&(t[a]=e[a])}j[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/")}else if(e.protocol&&e.protocol!==t.protocol)if(j[e.protocol]){if(t.protocol=e.protocol,e.host||M[e.protocol])t.pathname=e.pathname;else{for(var c=(e.pathname||"").split("/");c.length&&!(e.host=c.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),t.pathname=c.join("/")}t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(f=t.pathname||"",d=t.search||"",t.path=f+d),t.slashes=t.slashes||e.slashes}else for(var l=Object.keys(e),u=0;u<l.length;u++){var h=l[u];t[h]=e[h]}else{var f=t.pathname&&"/"===t.pathname.charAt(0),d=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=d||f||t.host&&e.pathname,p=f,g=t.pathname&&t.pathname.split("/")||[],c=e.pathname&&e.pathname.split("/")||[],m=t.protocol&&!j[t.protocol];if(m&&(t.hostname="",t.port=null,t.host&&(""===g[0]?g[0]=t.host:g.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host=null),f=f&&(""===c[0]||""===g[0])),d)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,g=c;else if(c.length)(g=g||[]).pop(),g=g.concat(c),t.search=e.search,t.query=e.query;else if(!E.isNullOrUndefined(e.search))return m&&(t.hostname=t.host=g.shift(),w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift()),t.search=e.search,t.query=e.query,E.isNull(t.pathname)&&E.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(g.length){for(var b=g.slice(-1)[0],d=(t.host||e.host||1<g.length)&&("."===b||".."===b)||""===b,y=0,v=g.length;0<=v;v--)"."===(b=g[v])?g.splice(v,1):".."===b?(g.splice(v,1),y++):y&&(g.splice(v,1),y--);if(!f&&!p)for(;y--;)g.unshift("..");!f||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),d&&"/"!==g.join("/").substr(-1)&&g.push("");var w,p=""===g[0]||g[0]&&"/"===g[0].charAt(0);m&&(t.hostname=t.host=!p&&g.length?g.shift():"",w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift()),(f=f||t.host&&g.length)&&!p&&g.unshift(""),g.length?t.pathname=g.join("/"):(t.pathname=null,t.path=null),E.isNull(t.pathname)&&E.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes}else t.pathname=null,t.search?t.path="/"+t.search:t.path=null}return t.href=t.format(),t},_.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":109,punycode:97,querystring:100}],109:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],110:[function(e,r,t){!function(t){!function(){function n(e){try{if(!t.localStorage)return}catch(e){return}e=t.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}r.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=f(e("./v1.js")),i=f(e("./v3.js")),o=f(e("./v4.js")),s=f(e("./v5.js")),a=f(e("./nil.js")),c=f(e("./version.js")),l=f(e("./validate.js")),u=f(e("./stringify.js")),h=f(e("./parse.js"));function f(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":114,"./parse.js":115,"./stringify.js":119,"./v1.js":120,"./v3.js":121,"./v4.js":123,"./v5.js":124,"./validate.js":125,"./version.js":126}],112:[function(e,t,r){"use strict";function u(e){return 14+(e+64>>>9<<4)+1}function h(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function a(e,t,r,n,i,o){return h((t=h(h(t,e),h(n,o)))<<i|t>>>32-i,r)}function f(e,t,r,n,i,o,s){return a(t&r|~t&n,e,t,i,o,s)}function d(e,t,r,n,i,o,s){return a(t&n|r&~n,e,t,i,o,s)}function p(e,t,r,n,i,o,s){return a(t^r^n,e,t,i,o,s)}function g(e,t,r,n,i,o,s){return a(r^(t|~n),e,t,i,o,s)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=function(t){if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=new Uint8Array(r.length);for(let e=0;e<r.length;++e)t[e]=r.charCodeAt(e)}var n=function(t,e){t[e>>5]|=128<<e%32,t[u(e)-1]=e;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){var s=r,a=n,c=i,l=o;r=f(r,n,i,o,t[e],7,-680876936),o=f(o,r,n,i,t[e+1],12,-389564586),i=f(i,o,r,n,t[e+2],17,606105819),n=f(n,i,o,r,t[e+3],22,-1044525330),r=f(r,n,i,o,t[e+4],7,-176418897),o=f(o,r,n,i,t[e+5],12,1200080426),i=f(i,o,r,n,t[e+6],17,-1473231341),n=f(n,i,o,r,t[e+7],22,-45705983),r=f(r,n,i,o,t[e+8],7,1770035416),o=f(o,r,n,i,t[e+9],12,-1958414417),i=f(i,o,r,n,t[e+10],17,-42063),n=f(n,i,o,r,t[e+11],22,-1990404162),r=f(r,n,i,o,t[e+12],7,1804603682),o=f(o,r,n,i,t[e+13],12,-40341101),i=f(i,o,r,n,t[e+14],17,-1502002290),n=f(n,i,o,r,t[e+15],22,1236535329),r=d(r,n,i,o,t[e+1],5,-165796510),o=d(o,r,n,i,t[e+6],9,-1069501632),i=d(i,o,r,n,t[e+11],14,643717713),n=d(n,i,o,r,t[e],20,-373897302),r=d(r,n,i,o,t[e+5],5,-701558691),o=d(o,r,n,i,t[e+10],9,38016083),i=d(i,o,r,n,t[e+15],14,-660478335),n=d(n,i,o,r,t[e+4],20,-405537848),r=d(r,n,i,o,t[e+9],5,568446438),o=d(o,r,n,i,t[e+14],9,-1019803690),i=d(i,o,r,n,t[e+3],14,-187363961),n=d(n,i,o,r,t[e+8],20,1163531501),r=d(r,n,i,o,t[e+13],5,-1444681467),o=d(o,r,n,i,t[e+2],9,-51403784),i=d(i,o,r,n,t[e+7],14,1735328473),n=d(n,i,o,r,t[e+12],20,-1926607734),r=p(r,n,i,o,t[e+5],4,-378558),o=p(o,r,n,i,t[e+8],11,-2022574463),i=p(i,o,r,n,t[e+11],16,1839030562),n=p(n,i,o,r,t[e+14],23,-35309556),r=p(r,n,i,o,t[e+1],4,-1530992060),o=p(o,r,n,i,t[e+4],11,1272893353),i=p(i,o,r,n,t[e+7],16,-155497632),n=p(n,i,o,r,t[e+10],23,-1094730640),r=p(r,n,i,o,t[e+13],4,681279174),o=p(o,r,n,i,t[e],11,-358537222),i=p(i,o,r,n,t[e+3],16,-722521979),n=p(n,i,o,r,t[e+6],23,76029189),r=p(r,n,i,o,t[e+9],4,-640364487),o=p(o,r,n,i,t[e+12],11,-421815835),i=p(i,o,r,n,t[e+15],16,530742520),n=p(n,i,o,r,t[e+2],23,-995338651),r=g(r,n,i,o,t[e],6,-198630844),o=g(o,r,n,i,t[e+7],10,1126891415),i=g(i,o,r,n,t[e+14],15,-1416354905),n=g(n,i,o,r,t[e+5],21,-57434055),r=g(r,n,i,o,t[e+12],6,1700485571),o=g(o,r,n,i,t[e+3],10,-1894986606),i=g(i,o,r,n,t[e+10],15,-1051523),n=g(n,i,o,r,t[e+1],21,-2054922799),r=g(r,n,i,o,t[e+8],6,1873313359),o=g(o,r,n,i,t[e+15],10,-30611744),i=g(i,o,r,n,t[e+6],15,-1560198380),n=g(n,i,o,r,t[e+13],21,1309151649),r=g(r,n,i,o,t[e+4],6,-145523070),o=g(o,r,n,i,t[e+11],10,-1120210379),i=g(i,o,r,n,t[e+2],15,718787259),n=g(n,i,o,r,t[e+9],21,-343485551),r=h(r,s),n=h(n,a),i=h(i,c),o=h(o,l)}return[r,n,i,o]}(function(t){if(0===t.length)return[];var r=8*t.length,n=new Uint32Array(u(r));for(let e=0;e<r;e+=8)n[e>>5]|=(255&t[e/8])<<e%32;return n}(t),8*t.length),i=[],o=32*n.length,s="0123456789abcdef";for(let e=0;e<o;e+=8){var a=n[e>>5]>>>e%32&255,a=parseInt(s.charAt(a>>>4&15)+s.charAt(15&a),16);i.push(a)}return i}},{}],113:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);r.default={randomUUID:n}},{}],114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"},{}],115:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(e=e("./validate.js"))&&e.__esModule?e:{default:e};r.default=function(e){var t,r;if((0,n.default)(e))return(r=new Uint8Array(16))[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r;throw TypeError("Invalid UUID")}},{"./validate.js":125}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],117:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};let n;const i=new Uint8Array(16)},{}],118:[function(e,t,r){"use strict";function h(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=function(r){var a=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof r){var t=unescape(encodeURIComponent(r));r=[];for(let e=0;e<t.length;++e)r.push(t.charCodeAt(e))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);var n=r.length/4+2,i=Math.ceil(n/16),c=new Array(i);for(let t=0;t<i;++t){var o=new Uint32Array(16);for(let e=0;e<16;++e)o[e]=r[64*t+4*e]<<24|r[64*t+4*e+1]<<16|r[64*t+4*e+2]<<8|r[64*t+4*e+3];c[t]=o}c[i-1][14]=8*(r.length-1)/Math.pow(2,32),c[i-1][14]=Math.floor(c[i-1][14]),c[i-1][15]=8*(r.length-1)&4294967295;for(let s=0;s<i;++s){var l=new Uint32Array(80);for(let e=0;e<16;++e)l[e]=c[s][e];for(let e=16;e<80;++e)l[e]=h(l[e-3]^l[e-8]^l[e-14]^l[e-16],1);let t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];for(let e=0;e<80;++e){var u=Math.floor(e/20),u=h(t,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}(u,r,n,i)+o+a[u]+l[e]>>>0;o=i,i=n,n=h(r,30)>>>0,r=t,t=u}e[0]=e[0]+t>>>0,e[1]=e[1]+r>>>0,e[2]=e[2]+n>>>0,e[3]=e[3]+i>>>0,e[4]=e[4]+o>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]}},{}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=o;var n=(e=e("./validate.js"))&&e.__esModule?e:{default:e};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function o(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}r.default=function(e,t=0){if(e=o(e,t),(0,n.default)(e))return e;throw TypeError("Stringified UUID is invalid")}},{"./validate.js":125}],120:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,l=(n=e("./rng.js"))&&n.__esModule?n:{default:n},u=e("./stringify.js");let h,f,d=0,p=0;r.default=function(e,t,r){var n=t&&r||0,i=t||new Array(16);let o=(e=e||{}).node||h,s=void 0!==e.clockseq?e.clockseq:f,a=(null!=o&&null!=s||(r=e.random||(e.rng||l.default)(),null==o&&(o=h=[1|r[0],r[1],r[2],r[3],r[4],r[5]]),null==s&&(s=f=16383&(r[6]<<8|r[7]))),r=void 0!==e.msecs?e.msecs:Date.now(),void 0!==e.nsecs?e.nsecs:p+1);var c=r-d+(a-p)/1e4;if(c<0&&void 0===e.clockseq&&(s=s+1&16383),1e4<=(a=(c<0||r>d)&&void 0===e.nsecs?0:a))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=r,p=a,f=s,c=(1e4*(268435455&(r+=122192928e5))+a)%4294967296,i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=255&c,e=r/4294967296*1e4&268435455,i[n++]=e>>>8&255,i[n++]=255&e,i[n++]=e>>>24&15|16,i[n++]=e>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||(0,u.unsafeStringify)(i)}},{"./rng.js":117,"./stringify.js":119}],121:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),e=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}n=(0,n.default)("v3",48,e.default);r.default=n},{"./md5.js":112,"./v35.js":122}],122:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,s,a){function t(e,t,r,n){var i;if("string"==typeof e&&(e=function(t){t=unescape(encodeURIComponent(t));var r=[];for(let e=0;e<t.length;++e)r.push(t.charCodeAt(e));return r}(e)),16!==(null==(i=t="string"==typeof t?(0,l.default)(t):t)?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(t),o.set(e,t.length),(o=a(o))[6]=15&o[6]|s,o[8]=63&o[8]|128,r){n=n||0;for(let e=0;e<16;++e)r[n+e]=o[e];return r}return(0,c.unsafeStringify)(o)}try{t.name=e}catch(e){}return t.DNS=n,t.URL=i,t};var c=e("./stringify.js"),l=(e=e("./parse.js"))&&e.__esModule?e:{default:e};const n="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i=(r.DNS=n,"6ba7b811-9dad-11d1-80b4-00c04fd430c8");r.URL=i},{"./parse.js":115,"./stringify.js":119}],123:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./native.js")),o=n(e("./rng.js")),s=e("./stringify.js");function n(e){return e&&e.__esModule?e:{default:e}}r.default=function(e,t,r){if(i.default.randomUUID&&!t&&!e)return i.default.randomUUID();var n=(e=e||{}).random||(e.rng||o.default)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return(0,s.unsafeStringify)(n)}},{"./native.js":113,"./rng.js":117,"./stringify.js":119}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),e=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}n=(0,n.default)("v5",80,e.default);r.default=n},{"./sha1.js":118,"./v35.js":122}],125:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(e=e("./regex.js"))&&e.__esModule?e:{default:e};r.default=function(e){return"string"==typeof e&&n.default.test(e)}},{"./regex.js":116}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(e=e("./validate.js"))&&e.__esModule?e:{default:e};r.default=function(e){if((0,n.default)(e))return parseInt(e.slice(14,15),16);throw TypeError("Invalid UUID")}},{"./validate.js":125}],127:[function(e,t,r){t.exports=function e(i,t){if(i&&t)return e(i)(t);if("function"!=typeof i)throw new TypeError("need wrapper function");Object.keys(i).forEach(function(e){r[e]=i[e]});return r;function r(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];var r=i.apply(this,e),n=e[e.length-1];return"function"==typeof r&&r!==n&&Object.keys(n).forEach(function(e){r[e]=n[e]}),r}}},{}],128:[function(e,t,r){"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],129:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r,n=arguments[t];for(r in n)i.call(n,r)&&(e[r]=n[r])}return e};var i=Object.prototype.hasOwnProperty},{}],130:[function(e,t,r){"use strict";var l,u,h,f,d;e("./helpers"),e("jquery"),e("underscore"),u=e("./visualizer/visualizer"),l=e("dat-gui"),h=e("./model/world"),d=e("./settings"),f=e("./maps"),function(o,s){var a=o.length;new MutationObserver(function(e,i){return e.forEach(function(e){var t,r,n;if("childList"===e.type&&0<e.addedNodes.length){for(t=0,n=o.length;t<n;t++)r=o[t],document.getElementById(r)&&--a;if(0===a)return s(),i.disconnect()}})}).observe(document.body,{childList:!0,subtree:!0})}(["canvas","gui"],function(){var e,t,r,n,i,o,s,a,c;for(s in console.log("App started --\x3e "+(new Date).toLocaleTimeString()),window.settings=d,window.world=new h,d.defaultMap&&f[d.defaultMap]?((o=f[d.defaultMap]).carsNumber=d.carsNumber,world.load(o,d.defaultMap,!1)):(world.generateMap(),world.carsNumber=d.carsNumber),window.visualizer=new u(world),visualizer.start(),(t=new l.GUI({autoPlace:!1,closeOnTop:!1})).domElement.id="dat_gui",document.getElementById("gui").appendChild(t.domElement),document.getElementsByClassName("close-button")[0].remove(),e=function(e){switch(parseInt(e)){case 0:return visualizer.timeFactor=d.defaultTimeFactor,d.lightsFlipInterval=260;case 1:return visualizer.timeFactor=2,d.lightsFlipInterval=170;case 2:return visualizer.timeFactor=5,d.lightsFlipInterval=130;default:return visualizer.timeFactor=5,d.lightsFlipInterval=260}},a={QuickSetup:0},(i=t.addFolder("Map")).open(),i.add(world,"save"),i.add(world,"load"),i.add(world,"clear"),i.add(world,"generateMap"),(n=t.addFolder("Visualizer")).open(),n.add(visualizer,"running").listen(),t.add(a,"QuickSetup",{Normal:0,Slow:1,Fast:2}).onChange(e),t.add(d,"debug").listen(),t.add(d,"showRedLights").listen(),t.add(d,"triangles").listen(),t.add(d,"trafficHighlight").listen(),n.add(visualizer.zoomer,"scale",d.minZoomLevel,d.maxZoomLevel).listen(),n.add(visualizer,"timeFactor",.1,10).listen(),i.add(world,"carsNumber").min(0).max(1e3).step(1).listen(),i.add(world,"instantSpeed").step(1e-5).listen(),i.add(world,"time").listen(),i.add(world,"activeCars").listen(),t.add(d,"lightsFlipInterval",0,400,.01).listen(),r=t.addFolder("Saved maps"),c=[],f)o=f[s],c.push(r.add(world,s))})},{"./helpers":136,"./maps":137,"./model/world":147,"./settings":148,"./visualizer/visualizer":156,"dat-gui":5,jquery:15,underscore:107}],131:[function(e,t,r){var i=e("mqtt"),n=class{constructor(e,t,r,n){this.client=this.createClient(e,t,r,n)}subscribeTo(e){return this.client.subscribe(e)}publishTo(e,t){return this.client.publish(e,JSON.stringify(t))}createClient(e,t,r,n){t=i.connect({keepalive:3e3,port:t,hostname:e+"/sirmat",protocol:"ws",username:r,password:n});return t.on("connect",function(){return console.log("client connected")}),t.on("error",function(e){return console.log("Error "+e.toString())})}};t.exports=n},{mqtt:62}],132:[function(e,t,r){"use strict";var i;e("../helpers"),i=e("./segment"),e=function(){class e{constructor(e,t,r,n){this.A=e,this.B=t,this.O=r,this.Q=n,this.AB=new i(this.A,this.B),this.AO=new i(this.A,this.O),this.OQ=new i(this.O,this.Q),this.QB=new i(this.Q,this.B),this._length=null}getPoint(e){var t=this.AO.getPoint(e),r=this.OQ.getPoint(e),n=this.QB.getPoint(e),t=new i(t,r).getPoint(e),r=new i(r,n).getPoint(e);return new i(t,r).getPoint(e)}getDirection(e){var t=this.AO.getPoint(e),r=this.OQ.getPoint(e),n=this.QB.getPoint(e),t=new i(t,r).getPoint(e),r=new i(r,n).getPoint(e);return new i(t,r).direction}}return e.property("length",{get:function(){var e,t,r,n;if(null==this._length)for(n=null,e=t=this._length=0,0;t<=10;e=++t)r=this.getPoint(e/10),n&&(this._length+=r.subtract(n).length),n=r;return this._length}}),e}.call(this),t.exports=e},{"../helpers":136,"./segment":135}],133:[function(e,t,r){"use strict";var n,i;({sqrt:i,atan2:n}=Math),e("../helpers"),e=function(){class t{constructor(e=0,t=0){this.x=e,this.y=t}add(e){return new t(this.x+e.x,this.y+e.y)}subtract(e){return new t(this.x-e.x,this.y-e.y)}mult(e){return new t(this.x*e,this.y*e)}divide(e){return new t(this.x/e,this.y/e)}}return t.property("length",{get:function(){return i(this.x*this.x+this.y*this.y)}}),t.property("direction",{get:function(){return n(this.y,this.x)}}),t.property("normalized",{get:function(){return new t(this.x/this.length,this.y/this.length)}}),t}.call(this),t.exports=e},{"../helpers":136}],134:[function(e,t,r){"use strict";var n,i,o,s,a;a=Math.abs,e("../helpers"),s=e("underscore"),n=e("./point"),o=e("./segment"),t.exports=i=class i{constructor(e,t,r=0,n=0){this.x=e,this.y=t,this._width=r,this._height=n}static copy(e){return new i(e.x,e.y,e._width,e._height)}toJSON(){return s.extend({},this)}area(){return this.width()*this.height()}left(e){return null!=e&&(this.x=e),this.x}right(e){return null!=e&&(this.x=e-this.width()),this.x+this.width()}width(e){return null!=e&&(this._width=e),this._width}top(e){return null!=e&&(this.y=e),this.y}bottom(e){return null!=e&&(this.y=e-this.height()),this.y+this.height()}height(e){return null!=e&&(this._height=e),this._height}center(e){return null!=e&&(this.x=e.x-this.width()/2,this.y=e.y-this.height()/2),new n(this.x+this.width()/2,this.y+this.height()/2)}containsPoint(e){var t;return this.left()<=(t=e.x)&&t<=this.right()&&this.top()<=(t=e.y)&&t<=this.bottom()}containsRect(e){return this.left()<=e.left()&&e.right()<=this.right()&&this.top()<=e.top()&&e.bottom()<=this.bottom()}getVertices(){return[new n(this.left(),this.top()),new n(this.right(),this.top()),new n(this.right(),this.bottom()),new n(this.left(),this.bottom())]}getSide(e){var t=this.getVertices();return new o(t[e],t[(e+1)%4])}getSectorId(e){e=e.subtract(this.center());if(e.y<=0&&a(e.x)<=a(e.y))return 0;if(0<=e.x&&a(e.x)>=a(e.y))return 1;if(0<=e.y&&a(e.x)<=a(e.y))return 2;if(e.x<=0&&a(e.x)>=a(e.y))return 3;throw Error("algorithm error")}getSector(e){return this.getSide(this.getSectorId(e))}}},{"../helpers":136,"./point":133,"./segment":135,underscore:107}],135:[function(e,t,r){"use strict";e("../helpers"),e=function(){class n{constructor(e,t){this.source=e,this.target=t}split(n,e){for(var t,r,i=(e?function(){for(var e=[],t=r=n-1;r<=0?t<=0:0<=t;r<=0?t++:t--)e.push(t);return e}:function(){for(var e=[],t=0,r=n-1;0<=r?t<=r:r<=t;0<=r?t++:t--)e.push(t);return e}).apply(this),o=[],s=0,a=i.length;s<a;s++)t=i[s],o.push(this.subsegment(t/n,(t+1)/n));return o}getPoint(e){return this.source.add(this.vector.mult(e))}subsegment(e,t){var r=this.vector,e=this.source.add(r.mult(e)),r=this.source.add(r.mult(t));return new n(e,r)}}return n.property("vector",{get:function(){return this.target.subtract(this.source)}}),n.property("length",{get:function(){return this.vector.length}}),n.property("direction",{get:function(){return this.vector.direction}}),n.property("center",{get:function(){return this.getPoint(.5)}}),n}.call(this),t.exports=e},{"../helpers":136}],136:[function(e,t,r){"use strict";var n=e("./mapsIdCounter");Function.prototype.property=function(e,t){return Object.defineProperty(this.prototype,e,t)},t.exports=function(e){return e+(++n[e]||(n[e]=1))}},{"./mapsIdCounter":138}],137:[function(e,t,r){"use strict";t.exports={mappa_1:{intersections:{intersection1:{id:"intersection1",rect:{x:70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4284782784304746,phaseOffset:28.658636898714352}},intersection2:{id:"intersection2",rect:{x:70,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.0898200833189462,phaseOffset:7.547233934675912}},intersection3:{id:"intersection3",rect:{x:140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.7394536292660856,phaseOffset:60.22208817341812}},intersection4:{id:"intersection4",rect:{x:70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.891854929955477,phaseOffset:13.590502515252311}},intersection5:{id:"intersection5",rect:{x:-140,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.23457137951604823,phaseOffset:94.1982092114361}},intersection6:{id:"intersection6",rect:{x:70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.848434019798531,phaseOffset:84.98835703508658}},intersection7:{id:"intersection7",rect:{x:0,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.0782047520886826,phaseOffset:6.472198865007228}},intersection8:{id:"intersection8",rect:{x:-70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.5800481500934405,phaseOffset:12.228748768048803}},intersection9:{id:"intersection9",rect:{x:-140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.948217791813142,phaseOffset:59.45740655349556}},intersection10:{id:"intersection10",rect:{x:140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.19455249646033868,phaseOffset:40.51146773604899}},intersection11:{id:"intersection11",rect:{x:-70,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.4956315540636733,phaseOffset:16.985006622270227}},intersection12:{id:"intersection12",rect:{x:0,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.23029217995654916,phaseOffset:71.48240897880946}},intersection13:{id:"intersection13",rect:{x:0,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.7503868878207052,phaseOffset:68.75664306197041}},intersection14:{id:"intersection14",rect:{x:-70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4746725370909486,phaseOffset:88.90396412332984}},intersection15:{id:"intersection15",rect:{x:-140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.5688354704357494,phaseOffset:2.4338708877804205}},intersection16:{id:"intersection16",rect:{x:0,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.5032192572780732,phaseOffset:17.261162588205337}},intersection17:{id:"intersection17",rect:{x:140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.46610457461460153,phaseOffset:14.977529653072196}},intersection18:{id:"intersection18",rect:{x:-70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.37359064405476894,phaseOffset:82.01777475404081}},intersection19:{id:"intersection19",rect:{x:0,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.06831869672318769,phaseOffset:60.82505245869607}},intersection20:{id:"intersection20",rect:{x:-140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.1653227706797682,phaseOffset:16.43890071952423}}},roads:{road1:{id:"road1",source:"intersection15",target:"intersection5"},road2:{id:"road2",source:"intersection5",target:"intersection15"},road3:{id:"road3",source:"intersection9",target:"intersection15"},road4:{id:"road4",source:"intersection15",target:"intersection9"},road5:{id:"road5",source:"intersection20",target:"intersection9"},road6:{id:"road6",source:"intersection9",target:"intersection20"},road7:{id:"road7",source:"intersection8",target:"intersection18"},road8:{id:"road8",source:"intersection18",target:"intersection8"},road9:{id:"road9",source:"intersection14",target:"intersection8"},road10:{id:"road10",source:"intersection8",target:"intersection14"},road11:{id:"road11",source:"intersection11",target:"intersection14"},road12:{id:"road12",source:"intersection14",target:"intersection11"},road13:{id:"road13",source:"intersection7",target:"intersection13"},road14:{id:"road14",source:"intersection13",target:"intersection7"},road15:{id:"road15",source:"intersection12",target:"intersection7"},road16:{id:"road16",source:"intersection7",target:"intersection12"},road17:{id:"road17",source:"intersection19",target:"intersection12"},road18:{id:"road18",source:"intersection12",target:"intersection19"},road19:{id:"road19",source:"intersection16",target:"intersection19"},road20:{id:"road20",source:"intersection19",target:"intersection16"},road21:{id:"road21",source:"intersection4",target:"intersection6"},road22:{id:"road22",source:"intersection6",target:"intersection4"},road23:{id:"road23",source:"intersection1",target:"intersection4"},road24:{id:"road24",source:"intersection4",target:"intersection1"},road25:{id:"road25",source:"intersection2",target:"intersection1"},road26:{id:"road26",source:"intersection1",target:"intersection2"},road27:{id:"road27",source:"intersection10",target:"intersection17"},road28:{id:"road28",source:"intersection17",target:"intersection10"},road29:{id:"road29",source:"intersection3",target:"intersection10"},road30:{id:"road30",source:"intersection10",target:"intersection3"},road31:{id:"road31",source:"intersection13",target:"intersection18"},road32:{id:"road32",source:"intersection18",target:"intersection13"},road33:{id:"road33",source:"intersection6",target:"intersection13"},road34:{id:"road34",source:"intersection13",target:"intersection6"},road35:{id:"road35",source:"intersection17",target:"intersection6"},road36:{id:"road36",source:"intersection6",target:"intersection17"},road37:{id:"road37",source:"intersection8",target:"intersection5"},road38:{id:"road38",source:"intersection5",target:"intersection8"},road39:{id:"road39",source:"intersection7",target:"intersection8"},road40:{id:"road40",source:"intersection8",target:"intersection7"},road41:{id:"road41",source:"intersection4",target:"intersection7"},road42:{id:"road42",source:"intersection7",target:"intersection4"},road43:{id:"road43",source:"intersection14",target:"intersection15"},road44:{id:"road44",source:"intersection15",target:"intersection14"},road45:{id:"road45",source:"intersection12",target:"intersection14"},road46:{id:"road46",source:"intersection14",target:"intersection12"},road47:{id:"road47",source:"intersection1",target:"intersection12"},road48:{id:"road48",source:"intersection12",target:"intersection1"},road49:{id:"road49",source:"intersection10",target:"intersection1"},road50:{id:"road50",source:"intersection1",target:"intersection10"},road51:{id:"road51",source:"intersection11",target:"intersection9"},road52:{id:"road52",source:"intersection9",target:"intersection11"},road53:{id:"road53",source:"intersection19",target:"intersection11"},road54:{id:"road54",source:"intersection11",target:"intersection19"},road55:{id:"road55",source:"intersection16",target:"intersection20"},road56:{id:"road56",source:"intersection20",target:"intersection16"},road57:{id:"road57",source:"intersection2",target:"intersection16"},road58:{id:"road58",source:"intersection16",target:"intersection2"},road59:{id:"road59",source:"intersection3",target:"intersection2"},road60:{id:"road60",source:"intersection2",target:"intersection3"}},carsNumber:5,time:89.84187000000051,trackPath:[]},mappa_2:{intersections:{intersection1:{id:"intersection1",rect:{x:0,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.8195036818010117,phaseOffset:43.05691569747563}},intersection2:{id:"intersection2",rect:{x:-70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.7839621113402413,phaseOffset:54.85186710299183}},intersection3:{id:"intersection3",rect:{x:-140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.8605010343470274,phaseOffset:52.009945537280956}},intersection4:{id:"intersection4",rect:{x:140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.9534001565893311,phaseOffset:67.07241880957659}},intersection5:{id:"intersection5",rect:{x:0,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.643038403907791,phaseOffset:68.13512028364535}},intersection6:{id:"intersection6",rect:{x:-140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.37380539402505253,phaseOffset:31.27196616187815}},intersection7:{id:"intersection7",rect:{x:140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4963149095919319,phaseOffset:47.83831299664947}},intersection8:{id:"intersection8",rect:{x:70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.731320326488941,phaseOffset:69.20087968191918}},intersection9:{id:"intersection9",rect:{x:0,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.5442286422864608,phaseOffset:63.54506676772553}},intersection10:{id:"intersection10",rect:{x:140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.5683170413576415,phaseOffset:64.74235786900799}},intersection11:{id:"intersection11",rect:{x:70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.24542877402084895,phaseOffset:43.69732388988725}},intersection12:{id:"intersection12",rect:{x:0,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.8843254509453331,phaseOffset:6.251658476776956}},intersection13:{id:"intersection13",rect:{x:-70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.7066194883416201,phaseOffset:68.67433127969792}},intersection14:{id:"intersection14",rect:{x:140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.4986457175197059,phaseOffset:61.491359169211975}},intersection15:{id:"intersection15",rect:{x:140,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.07086881206266726,phaseOffset:77.4639076917909}},intersection16:{id:"intersection16",rect:{x:0,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.8556840167013604,phaseOffset:72.71767924869326}},intersection17:{id:"intersection17",rect:{x:-70,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.6707917710877507,phaseOffset:25.334133516842016}},intersection18:{id:"intersection18",rect:{x:70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.16026968798089714,phaseOffset:39.13271814936012}},intersection19:{id:"intersection19",rect:{x:-70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.2805167523312868,phaseOffset:97.90817119922757}},intersection20:{id:"intersection20",rect:{x:-70,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.4146838165663804,phaseOffset:37.53170590699628}}},roads:{road1:{id:"road1",source:"intersection6",target:"intersection3"},road2:{id:"road2",source:"intersection3",target:"intersection6"},road3:{id:"road3",source:"intersection2",target:"intersection19"},road4:{id:"road4",source:"intersection19",target:"intersection2"},road5:{id:"road5",source:"intersection20",target:"intersection13"},road6:{id:"road6",source:"intersection13",target:"intersection20"},road7:{id:"road7",source:"intersection17",target:"intersection20"},road8:{id:"road8",source:"intersection20",target:"intersection17"},road9:{id:"road9",source:"intersection1",target:"intersection5"},road10:{id:"road10",source:"intersection5",target:"intersection1"},road11:{id:"road11",source:"intersection16",target:"intersection1"},road12:{id:"road12",source:"intersection1",target:"intersection16"},road13:{id:"road13",source:"intersection9",target:"intersection16"},road14:{id:"road14",source:"intersection16",target:"intersection9"},road15:{id:"road15",source:"intersection12",target:"intersection9"},road16:{id:"road16",source:"intersection9",target:"intersection12"},road17:{id:"road17",source:"intersection11",target:"intersection18"},road18:{id:"road18",source:"intersection18",target:"intersection11"},road19:{id:"road19",source:"intersection8",target:"intersection11"},road20:{id:"road20",source:"intersection11",target:"intersection8"},road21:{id:"road21",source:"intersection15",target:"intersection4"},road22:{id:"road22",source:"intersection4",target:"intersection15"},road23:{id:"road23",source:"intersection7",target:"intersection15"},road24:{id:"road24",source:"intersection15",target:"intersection7"},road25:{id:"road25",source:"intersection10",target:"intersection7"},road26:{id:"road26",source:"intersection7",target:"intersection10"},road27:{id:"road27",source:"intersection14",target:"intersection10"},road28:{id:"road28",source:"intersection10",target:"intersection14"},road29:{id:"road29",source:"intersection19",target:"intersection3"},road30:{id:"road30",source:"intersection3",target:"intersection19"},road31:{id:"road31",source:"intersection5",target:"intersection19"},road32:{id:"road32",source:"intersection19",target:"intersection5"},road33:{id:"road33",source:"intersection18",target:"intersection5"},road34:{id:"road34",source:"intersection5",target:"intersection18"},road35:{id:"road35",source:"intersection4",target:"intersection18"},road36:{id:"road36",source:"intersection18",target:"intersection4"},road37:{id:"road37",source:"intersection1",target:"intersection2"},road38:{id:"road38",source:"intersection2",target:"intersection1"},road39:{id:"road39",source:"intersection11",target:"intersection1"},road40:{id:"road40",source:"intersection1",target:"intersection11"},road41:{id:"road41",source:"intersection15",target:"intersection11"},road42:{id:"road42",source:"intersection11",target:"intersection15"},road43:{id:"road43",source:"intersection16",target:"intersection13"},road44:{id:"road44",source:"intersection13",target:"intersection16"},road45:{id:"road45",source:"intersection8",target:"intersection16"},road46:{id:"road46",source:"intersection16",target:"intersection8"},road47:{id:"road47",source:"intersection7",target:"intersection8"},road48:{id:"road48",source:"intersection8",target:"intersection7"},road49:{id:"road49",source:"intersection20",target:"intersection6"},road50:{id:"road50",source:"intersection6",target:"intersection20"},road51:{id:"road51",source:"intersection9",target:"intersection20"},road52:{id:"road52",source:"intersection20",target:"intersection9"},road53:{id:"road53",source:"intersection10",target:"intersection9"},road54:{id:"road54",source:"intersection9",target:"intersection10"},road55:{id:"road55",source:"intersection12",target:"intersection17"},road56:{id:"road56",source:"intersection17",target:"intersection12"},road57:{id:"road57",source:"intersection14",target:"intersection12"},road58:{id:"road58",source:"intersection12",target:"intersection14"}},carsNumber:5,time:55.46011499999996,trackPath:[]},mappa_3:{intersections:{intersection1:{id:"intersection1",rect:{x:0,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.24550158107899755,phaseOffset:70.46884643065634}},intersection2:{id:"intersection2",rect:{x:70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.6015505990836838,phaseOffset:80.96485733666314}},intersection3:{id:"intersection3",rect:{x:0,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.6792892995356252,phaseOffset:72.69213664020026}},intersection4:{id:"intersection4",rect:{x:-140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4773631298860239,phaseOffset:31.335179018628565}},intersection5:{id:"intersection5",rect:{x:-70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.8954418724478164,phaseOffset:87.57216153182239}},intersection6:{id:"intersection6",rect:{x:140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.1504664816525092,phaseOffset:61.29969504752244}},intersection7:{id:"intersection7",rect:{x:70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4606876787111198,phaseOffset:94.748044686082}},intersection8:{id:"intersection8",rect:{x:-70,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.8120049529244804,phaseOffset:95.97479785776792}},intersection9:{id:"intersection9",rect:{x:0,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.2835481212001909,phaseOffset:40.80103769340262}},intersection10:{id:"intersection10",rect:{x:140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.251918857863644,phaseOffset:21.789220256393204}},intersection11:{id:"intersection11",rect:{x:70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.9862023815038423,phaseOffset:34.58193250923618}},intersection12:{id:"intersection12",rect:{x:-140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.2613871070069911,phaseOffset:25.449605704585743}},intersection13:{id:"intersection13",rect:{x:-140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.36641291015230415,phaseOffset:5.067316869816585}},intersection14:{id:"intersection14",rect:{x:140,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.618869079994069,phaseOffset:16.14984168831397}},intersection15:{id:"intersection15",rect:{x:-140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.8846081616669781,phaseOffset:84.47968743396201}},intersection16:{id:"intersection16",rect:{x:-70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.1284067026206268,phaseOffset:78.24873332247557}},intersection17:{id:"intersection17",rect:{x:-70,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.5041963156659426,phaseOffset:3.5905411834737055}},intersection18:{id:"intersection18",rect:{x:140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.8534207251309907,phaseOffset:91.688846775252}},intersection19:{id:"intersection19",rect:{x:-140,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.9320699725326196,phaseOffset:31.1224930465837}},intersection20:{id:"intersection20",rect:{x:140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.14249917527277556,phaseOffset:85.26608360626857}}},roads:{road1:{id:"road1",source:"intersection19",target:"intersection13"},road2:{id:"road2",source:"intersection13",target:"intersection19"},road3:{id:"road3",source:"intersection4",target:"intersection19"},road4:{id:"road4",source:"intersection19",target:"intersection4"},road5:{id:"road5",source:"intersection12",target:"intersection4"},road6:{id:"road6",source:"intersection4",target:"intersection12"},road7:{id:"road7",source:"intersection15",target:"intersection12"},road8:{id:"road8",source:"intersection12",target:"intersection15"},road9:{id:"road9",source:"intersection16",target:"intersection5"},road10:{id:"road10",source:"intersection5",target:"intersection16"},road11:{id:"road11",source:"intersection8",target:"intersection16"},road12:{id:"road12",source:"intersection16",target:"intersection8"},road13:{id:"road13",source:"intersection17",target:"intersection8"},road14:{id:"road14",source:"intersection8",target:"intersection17"},road15:{id:"road15",source:"intersection3",target:"intersection9"},road16:{id:"road16",source:"intersection9",target:"intersection3"},road17:{id:"road17",source:"intersection11",target:"intersection2"},road18:{id:"road18",source:"intersection2",target:"intersection11"},road19:{id:"road19",source:"intersection7",target:"intersection11"},road20:{id:"road20",source:"intersection11",target:"intersection7"},road21:{id:"road21",source:"intersection14",target:"intersection10"},road22:{id:"road22",source:"intersection10",target:"intersection14"},road23:{id:"road23",source:"intersection20",target:"intersection14"},road24:{id:"road24",source:"intersection14",target:"intersection20"},road25:{id:"road25",source:"intersection6",target:"intersection20"},road26:{id:"road26",source:"intersection20",target:"intersection6"},road27:{id:"road27",source:"intersection18",target:"intersection6"},road28:{id:"road28",source:"intersection6",target:"intersection18"},road29:{id:"road29",source:"intersection2",target:"intersection13"},road30:{id:"road30",source:"intersection13",target:"intersection2"},road31:{id:"road31",source:"intersection10",target:"intersection2"},road32:{id:"road32",source:"intersection2",target:"intersection10"},road33:{id:"road33",source:"intersection5",target:"intersection19"},road34:{id:"road34",source:"intersection19",target:"intersection5"},road35:{id:"road35",source:"intersection9",target:"intersection5"},road36:{id:"road36",source:"intersection5",target:"intersection9"},road37:{id:"road37",source:"intersection14",target:"intersection11"},road38:{id:"road38",source:"intersection11",target:"intersection14"},road39:{id:"road39",source:"intersection16",target:"intersection4"},road40:{id:"road40",source:"intersection4",target:"intersection16"},road41:{id:"road41",source:"intersection3",target:"intersection16"},road42:{id:"road42",source:"intersection16",target:"intersection3"},road43:{id:"road43",source:"intersection7",target:"intersection3"},road44:{id:"road44",source:"intersection3",target:"intersection7"},road45:{id:"road45",source:"intersection20",target:"intersection7"},road46:{id:"road46",source:"intersection7",target:"intersection20"},road47:{id:"road47",source:"intersection8",target:"intersection12"},road48:{id:"road48",source:"intersection12",target:"intersection8"},road49:{id:"road49",source:"intersection1",target:"intersection8"},road50:{id:"road50",source:"intersection8",target:"intersection1"},road51:{id:"road51",source:"intersection6",target:"intersection1"},road52:{id:"road52",source:"intersection1",target:"intersection6"},road53:{id:"road53",source:"intersection17",target:"intersection15"},road54:{id:"road54",source:"intersection15",target:"intersection17"},road55:{id:"road55",source:"intersection18",target:"intersection17"},road56:{id:"road56",source:"intersection17",target:"intersection18"}},carsNumber:5,time:66.33855000000004,trackPath:[]},map_semplice:{intersections:{intersection1:{id:"intersection1",rect:{x:-42,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.9479743836461125,phaseOffset:94.66763575323544}},intersection2:{id:"intersection2",rect:{x:0,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.9741343229976489,phaseOffset:3.8664580723590136}},intersection3:{id:"intersection3",rect:{x:42,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.6763116557404703,phaseOffset:27.113770026741115}},intersection4:{id:"intersection4",rect:{x:42,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.7196118014172435,phaseOffset:42.09140048192721}},intersection5:{id:"intersection5",rect:{x:0,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.31777769449575577,phaseOffset:28.50633200161039}},intersection6:{id:"intersection6",rect:{x:-42,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.050492654229082,phaseOffset:91.51886321434517}}},roads:{road57:{id:"road57",source:"intersection6",target:"intersection1"},road58:{id:"road58",source:"intersection1",target:"intersection6"},road59:{id:"road59",source:"intersection1",target:"intersection2"},road60:{id:"road60",source:"intersection2",target:"intersection1"},road61:{id:"road61",source:"intersection2",target:"intersection3"},road62:{id:"road62",source:"intersection3",target:"intersection2"},road63:{id:"road63",source:"intersection3",target:"intersection4"},road64:{id:"road64",source:"intersection4",target:"intersection3"},road65:{id:"road65",source:"intersection4",target:"intersection5"},road66:{id:"road66",source:"intersection5",target:"intersection4"},road67:{id:"road67",source:"intersection5",target:"intersection6"},road68:{id:"road68",source:"intersection6",target:"intersection5"},road69:{id:"road69",source:"intersection5",target:"intersection2"},road70:{id:"road70",source:"intersection2",target:"intersection5"}},carsNumber:2,time:138.33831499999914},map_media:{intersections:{intersection1:{id:"intersection1",rect:{x:-56,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.49333182358600114,phaseOffset:36.003182098761854}},intersection2:{id:"intersection2",rect:{x:-56,y:-28,_width:14,_height:14},controlSignals:{flipMultiplier:.9931487871201317,phaseOffset:94.45425662419179}},intersection3:{id:"intersection3",rect:{x:-56,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.5111694993383065,phaseOffset:98.9535040345068}},intersection4:{id:"intersection4",rect:{x:-14,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.5204929088669135,phaseOffset:11.398725456699443}},intersection5:{id:"intersection5",rect:{x:28,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.3368730313018393,phaseOffset:76.21517814974356}},intersection6:{id:"intersection6",rect:{x:28,y:-28,_width:14,_height:14},controlSignals:{flipMultiplier:.6838292154389645,phaseOffset:16.695407344145806}},intersection7:{id:"intersection7",rect:{x:28,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.05686790274246234,phaseOffset:91.24943975662923}},intersection8:{id:"intersection8",rect:{x:-14,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.7500457945655898,phaseOffset:.17302231486515662}},intersection9:{id:"intersection9",rect:{x:-14,y:-28,_width:14,_height:14},controlSignals:{flipMultiplier:.060722805547838155,phaseOffset:35.01749440910415}}},roads:{road1:{id:"road1",source:"intersection8",target:"intersection9"},road2:{id:"road2",source:"intersection9",target:"intersection8"},road3:{id:"road3",source:"intersection9",target:"intersection6"},road4:{id:"road4",source:"intersection6",target:"intersection9"},road5:{id:"road5",source:"intersection6",target:"intersection5"},road6:{id:"road6",source:"intersection5",target:"intersection6"},road7:{id:"road7",source:"intersection5",target:"intersection4"},road8:{id:"road8",source:"intersection4",target:"intersection5"},road9:{id:"road9",source:"intersection4",target:"intersection3"},road10:{id:"road10",source:"intersection3",target:"intersection4"},road11:{id:"road11",source:"intersection3",target:"intersection2"},road12:{id:"road12",source:"intersection2",target:"intersection3"},road13:{id:"road13",source:"intersection2",target:"intersection1"},road14:{id:"road14",source:"intersection1",target:"intersection2"},road15:{id:"road15",source:"intersection1",target:"intersection8"},road16:{id:"road16",source:"intersection8",target:"intersection1"},road17:{id:"road17",source:"intersection8",target:"intersection7"},road18:{id:"road18",source:"intersection7",target:"intersection8"},road19:{id:"road19",source:"intersection7",target:"intersection6"},road20:{id:"road20",source:"intersection6",target:"intersection7"},road21:{id:"road21",source:"intersection9",target:"intersection4"},road22:{id:"road22",source:"intersection4",target:"intersection9"},road23:{id:"road23",source:"intersection9",target:"intersection2"},road24:{id:"road24",source:"intersection2",target:"intersection9"}},carsNumber:2,time:173.50094999999797},mappa_complicata:{intersections:{intersection1:{id:"intersection1",rect:{x:-112,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.5217022137739413,phaseOffset:1.5642095884635498}},intersection2:{id:"intersection2",rect:{x:-112,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.9398669531001806,phaseOffset:35.77074627552086}},intersection3:{id:"intersection3",rect:{x:-112,y:-14,_width:14,_height:14},controlSignals:{flipMultiplier:.642267830383092,phaseOffset:17.473850551103844}},intersection4:{id:"intersection4",rect:{x:-112,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.09020765115496143,phaseOffset:22.21522877435507}},intersection5:{id:"intersection5",rect:{x:-28,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.7514962471148281,phaseOffset:48.78687282771161}},intersection6:{id:"intersection6",rect:{x:-28,y:-14,_width:14,_height:14},controlSignals:{flipMultiplier:.3602489087495704,phaseOffset:66.47258451973501}},intersection7:{id:"intersection7",rect:{x:-28,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.5532482246415711,phaseOffset:15.743268270901535}},intersection8:{id:"intersection8",rect:{x:-28,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.606836705799384,phaseOffset:79.34935652703616}},intersection9:{id:"intersection9",rect:{x:42,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.6984370810517877,phaseOffset:19.39702370556622}},intersection10:{id:"intersection10",rect:{x:42,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.10535891056544133,phaseOffset:.7379432534991848}},intersection11:{id:"intersection11",rect:{x:42,y:-14,_width:14,_height:14},controlSignals:{flipMultiplier:.22950889256440132,phaseOffset:14.990724495653529}},intersection12:{id:"intersection12",rect:{x:42,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.6392255718911695,phaseOffset:41.65034216633665}}},roads:{road201:{id:"road201",source:"intersection5",target:"intersection12"},road202:{id:"road202",source:"intersection12",target:"intersection5"},road203:{id:"road203",source:"intersection12",target:"intersection11"},road204:{id:"road204",source:"intersection11",target:"intersection12"},road205:{id:"road205",source:"intersection11",target:"intersection10"},road206:{id:"road206",source:"intersection10",target:"intersection11"},road207:{id:"road207",source:"intersection10",target:"intersection9"},road208:{id:"road208",source:"intersection9",target:"intersection10"},road209:{id:"road209",source:"intersection9",target:"intersection8"},road210:{id:"road210",source:"intersection8",target:"intersection9"},road211:{id:"road211",source:"intersection8",target:"intersection7"},road212:{id:"road212",source:"intersection7",target:"intersection8"},road213:{id:"road213",source:"intersection7",target:"intersection2"},road214:{id:"road214",source:"intersection2",target:"intersection7"},road215:{id:"road215",source:"intersection1",target:"intersection2"},road216:{id:"road216",source:"intersection2",target:"intersection1"},road217:{id:"road217",source:"intersection1",target:"intersection8"},road218:{id:"road218",source:"intersection8",target:"intersection1"},road219:{id:"road219",source:"intersection6",target:"intersection7"},road220:{id:"road220",source:"intersection7",target:"intersection6"},road221:{id:"road221",source:"intersection6",target:"intersection3"},road222:{id:"road222",source:"intersection3",target:"intersection6"},road223:{id:"road223",source:"intersection3",target:"intersection4"},road224:{id:"road224",source:"intersection4",target:"intersection3"},road225:{id:"road225",source:"intersection4",target:"intersection5"},road226:{id:"road226",source:"intersection5",target:"intersection4"},road227:{id:"road227",source:"intersection2",target:"intersection3"},road228:{id:"road228",source:"intersection3",target:"intersection2"},road231:{id:"road231",source:"intersection5",target:"intersection6"},road232:{id:"road232",source:"intersection6",target:"intersection5"}},carsNumber:4,time:353.8403300000037}}},{}],138:[function(e,t,r){"use strict";t.exports={car:0,intersection:0,lane:0,road:0,trafficLight:0}},{}],139:[function(e,t,r){"use strict";var n,a,c,i,o,l,u,s;({max:c,min:i,random:o,sqrt:u}=Math),e("../helpers"),a=e("underscore"),n=e("./trajectory"),s=e("../helpers"),l=e("../settings"),e=function(){class e{constructor(e,t){this.id=s("car"),this.color=(300+240*o()|0)%360,this._speed=0,this.width=1.7,this.length=3+2*o(),this.maxSpeed=30,this.s0=2,this.timeHeadway=1.5,this.maxAcceleration=1,this.maxDeceleration=3,this.trajectory=new n(this,e,t),this.alive=!0,this.tooLongStop=0,this.trackPoints=[],this.path=[],this.path_index=0}release(){return this.trajectory.release()}getAcceleration(){var e=this.trajectory.nextCarDistance,t=c(e.distance,0),r=this.maxAcceleration,n=this.maxDeceleration,e=this.speed-(null!=(e=e.car)?e.speed:void 0)||0,i=(this.speed/this.maxSpeed)**4,o=this.s0,s=this.speed*this.timeHeadway,e=this.speed*e/(2*u(r*n)),r=((1+s+this.speed**2/(2*n))/this.trajectory.distanceToStopLine)**2;return this.maxAcceleration*(1-i-((o+s+e)/t)**2-r)}move(e){var t,r,n;return this.id===l.myCar.id?this.moveMyCar(e):(t=this.getAcceleration(),this.speed+=t*e,!this.trajectory.isChangingLanes&&this.nextLane&&(n=this.trajectory.current.lane,(r=0!==n.getTurnDirection(this.nextLane)?n.rightmostAdjacent:n.leftmostAdjacent)!==n)&&this.trajectory.changeLane(r),(n=this.speed*e+.5*t*e**2)<=0&&(this.tooLongStop+=1,this.tooLongStop>l.tooLongStop)&&(this.alive=!1),this.trajectory.nextCarDistance.distance<n&&(this.speed=this.speed/10,n=this.speed*e+.5*t*e**2,console.log("bad IDM")),this.trajectory.timeToMakeTurn(n)&&null==this.nextLane?this.alive=!1:this.trajectory.moveForward(n))}moveMyCar(e){var t,r,n=this.getAcceleration();return this.speed+=n*e,!this.trajectory.isChangingLanes&&this.nextLane&&(r=this.trajectory.current.lane,(t=0!==r.getTurnDirection(this.nextLane)?r.rightmostAdjacent:r.leftmostAdjacent)!==r)&&this.trajectory.changeLane(t),r=this.speed*e+.5*n*e**2,this.trajectory.nextCarDistance.distance<r&&(this.speed=this.speed/10,r=this.speed*e+.5*n*e**2),this.trajectory.timeToMakeTurn(r)&&null==this.nextLane?this.alive=!1:this.trajectory.moveForward(r)}pickNextRoad(){var t,e,r,n,i,o,s;if(this.id!==l.myCar.id||0===this.path.length)return i=this.trajectory.nextIntersection,t=this.trajectory.current.lane,0===(i=i.roads.filter(function(e){return e.target!==t.road.source})).length?null:a.sample(i);if(this.id===l.myCar.id)for(n=this.path[0],e=0,r=(o=(t=this.trajectory.current.lane).road.target.roads).length;e<r;e++)if((s=o[e]).target===n)return s=s,this.updatePath(),s}pickNextLane(){var e,t,r;if(this.nextLane)throw Error("next lane is already chosen");if(this.nextLane=null,!(t=this.pickNextRoad()))return null;if(r=this.trajectory.current.lane.road.getTurnDirection(t),e=function(){switch(r){case 0:return t.lanesNumber-1;case 1:case 2:return 0}}(),this.nextLane=t.lanes[e],this.nextLane)return this.nextLane;throw Error("can not pick next lane")}popNextLane(){var e=this.nextLane;return this.nextLane=null,e}setPath(e){return this.path=e}updatePath(){0<this.path.length&&this.path.shift()}}return e.property("coords",{get:function(){return this.id===l.myCar.id&&(this.alive&&0<l.myCar.maxFollowPoints?(this.trackPoints.push(this.trajectory.coords),this.trackPoints.length>l.myCar.maxFollowPoints&&(this.trackPoints=this.trackPoints.slice(this.trackPoints.length-l.myCar.maxFollowPoints))):this.trackPoints=[]),this.trajectory.coords}}),e.property("speed",{get:function(){return this._speed},set:function(e){return(e=e<0?0:e)>this.maxSpeed&&(e=this.maxSpeed),this._speed=e}}),e.property("direction",{get:function(){return this.trajectory.direction}}),e}.call(this),t.exports=e},{"../helpers":136,"../settings":148,"./trajectory":146,underscore:107}],140:[function(e,t,r){"use strict";var i,o,s=[].indexOf;i=Math.random,e("../helpers"),o=e("../settings"),e=function(){class n{constructor(e){this.onTick=this.onTick.bind(this),this.intersection=e,this.flipMultiplier=i(),this.phaseOffset=100*i(),this.time=this.phaseOffset,this.stateNum=0}static copy(e,t){var r;return null==e?new n(t):((r=Object.create(n.prototype)).flipMultiplier=e.flipMultiplier,r.time=r.phaseOffset=e.phaseOffset,r.stateNum=0,r.intersection=t,r)}toJSON(){return{flipMultiplier:this.flipMultiplier,phaseOffset:this.phaseOffset}}_decode(e){var t=[0,0,0];return 0<=s.call(e,"L")&&(t[0]=1),0<=s.call(e,"F")&&(t[1]=1),0<=s.call(e,"R")&&(t[2]=1),t}flip(){return this.stateNum+=1}onTick(e){if(this.time+=e,this.time>this.flipInterval)return this.flip(),this.time-=this.flipInterval}}return n.prototype.states=[["L","","L",""],["FR","","FR",""],["","L","","L"],["","FR","","FR"]],n.STATE=[{RED:0,GREEN:1}],n.property("flipInterval",{get:function(){return(.1+.05*this.flipMultiplier)*o.lightsFlipInterval}}),n.property("state",{get:function(){for(var e,t=this.states[this.stateNum%this.states.length],r=[],n=0,i=(t=this.intersection.roads.length<=2?["LFR","LFR","LFR","LFR"]:t).length;n<i;n++)e=t[n],r.push(this._decode(e));return r}}),n}.call(this),t.exports=e},{"../helpers":136,"../settings":148}],141:[function(e,t,r){"use strict";var n,i,o,s,a;e("../helpers"),s=e("underscore"),n=e("./control-signals"),o=e("../geom/rect"),a=e("../helpers"),t.exports=i=class i{constructor(e){this.rect=e,this.id=a("intersection"),this.roads=[],this.inRoads=[],this.controlSignals=new n(this)}static copy(e){var t;return e.rect=o.copy(e.rect),t=Object.create(i.prototype),s.extend(t,e),t.roads=[],t.inRoads=[],t.controlSignals=n.copy(t.controlSignals,t),t}toJSON(){return{id:this.id,rect:this.rect,controlSignals:this.controlSignals,roads:this.roads,inRoads:this.inRoads}}update(){for(var e,t,r,n,i,o=this.roads,s=0,a=o.length;s<a;s++)(i=o[s]).update();for(n=[],e=0,t=(r=this.inRoads).length;e<t;e++)i=r[e],n.push(i.update());return n}}},{"../geom/rect":134,"../helpers":136,"./control-signals":140,underscore:107}],142:[function(e,t,r){"use strict";var n;e("../helpers"),e("underscore"),n=e("../helpers"),e=function(){class e{constructor(e,t,r){this.car=e,this.position=r,this.id=n("laneposition"),this.free=!0,this.lane=t}acquire(){var e;if(null!=(null!=(e=this.lane)?e.addCarPosition:void 0))return this.free=!1,this.lane.addCarPosition(this)}release(){var e;if(!this.free&&null!=(e=this.lane)&&e.removeCar)return this.free=!0,this.lane.removeCar(this)}getNext(){if(this.lane&&!this.free)return this.lane.getNext(this)}}return e.property("lane",{get:function(){return this._lane},set:function(e){return this.release(),this._lane=e}}),e.property("relativePosition",{get:function(){return this.position/this.lane.length}}),e.property("nextCarDistance",{get:function(){var e,t,r=this.getNext();return r?(t=r.position-r.car.length/2,e=this.position+this.car.length/2,{car:r.car,distance:t-e}):{car:null,distance:1/0}}}),e}.call(this),t.exports=e},{"../helpers":136,underscore:107}],143:[function(e,t,r){"use strict";var n,i,o;e("../helpers"),e("underscore"),i=e("../geom/segment"),o=e("../helpers"),n=e("../geom/rect"),e=function(){class e{constructor(e,t,r){this.sourceSegment=e,this.targetSegment=t,this.road=r,this.id=o("lane"),this.leftAdjacent=null,this.rightAdjacent=null,this.leftmostAdjacent=null,this.rightmostAdjacent=null,this.carsPositions={},this.carsNumber=0,this.controlSignalState=null,this.greenLightDuration=0,this.redLightDuration=0,this.controlSignalTime=0,this.update()}toJSON(){return{id:this.id,carsNumber:this.carsNumber,controlSignalState:this.controlSignalState,greenLightDuration:this.greenLightDuration,redLightDuration:this.redLightDuration,controlSignalTime:this.controlSignalTime}}update(){return this.middleLine=new i(this.sourceSegment.center,this.targetSegment.center),this.length=this.middleLine.length,this.direction=this.middleLine.direction}getTurnDirection(e){return this.road.getTurnDirection(e.road)}getDirection(){return this.direction}getPoint(e){return this.middleLine.getPoint(e)}addCarPosition(e){if(e.id in this.carsPositions)throw Error("car is already here");return this.carsPositions[e.id]=e,this.carsNumber+=1}removeCar(e){if(e.id in this.carsPositions)return delete this.carsPositions[e.id],--this.carsNumber;throw Error("removing unknown car")}getNext(e){var t,r,n,i,o,s;if(e.lane!==this)throw Error("car is on other lane");for(n in i=null,t=1/0,s=this.carsPositions)r=(o=s[n]).position-e.position,!o.free&&0<r&&r<t&&(t=r,i=o);return i}}return e.property("sourceSideId",{get:function(){return this.road.sourceSideId}}),e.property("targetSideId",{get:function(){return this.road.targetSideId}}),e.property("isRightmost",{get:function(){return this===this.rightmostAdjacent}}),e.property("isLeftmost",{get:function(){return this===this.leftmostAdjacent}}),e.property("leftBorder",{get:function(){return new i(this.sourceSegment.source,this.targetSegment.target)}}),e.property("rightBorder",{get:function(){return new i(this.sourceSegment.target,this.targetSegment.source)}}),e.property("stringDirection",{get:function(){if(void 0===this.direction)throw Error("direction is undefined");if(0===Math.round(this.direction))return"right";if(3===Math.round(this.direction))return"left";if(2===Math.round(this.direction))return"down";if(-2===Math.round(this.direction))return"up";throw Error("invalid direction")}}),e.property("rect",{get:function(){if("up"===this.stringDirection)return new n(this.sourceSegment.source.x,this.targetSegment.target.y,settings.gridSize/4,this.sourceSegment.source.y-this.targetSegment.target.y);if("right"===this.stringDirection)return new n(this.sourceSegment.source.x,this.sourceSegment.source.y,this.targetSegment.target.x-this.sourceSegment.source.x,settings.gridSize/4);if("left"===this.stringDirection)return new n(this.targetSegment.target.x,this.targetSegment.target.y-settings.gridSize/4,this.sourceSegment.source.x-this.targetSegment.target.x,settings.gridSize/4);if("down"===this.stringDirection)return new n(this.targetSegment.target.x-settings.gridSize/4,this.sourceSegment.source.y,settings.gridSize/4,this.targetSegment.target.y-this.sourceSegment.source.y);throw Error("invalid direction")}}),e}.call(this),t.exports=e},{"../geom/rect":134,"../geom/segment":135,"../helpers":136,underscore:107}],144:[function(e,t,r){"use strict";e("../helpers"),e=function(){class e{constructor(e,t){var r,n,i;if(this.factory=e,this.objects={},null!=t&&null!=t.objects)for(r in n=t.objects)i=n[r],this.objects[r]=this.factory.copy(i)}toJSON(){return this.objects}get(e){return this.objects[e]}put(e){return this.objects[e.id]=e}pop(e){var t=null!=(t=e.id)?t:e,e=this.objects[t];return"function"==typeof e.release&&e.release(),delete this.objects[t],e}all(){return this.objects}clear(){return this.objects={}}}return e.property("length",{get:function(){return Object.keys(this.objects).length}}),e}.call(this),t.exports=e},{"../helpers":136}],145:[function(e,t,r){"use strict";var l,n,i,o,s,u,h,f,a;({min:h,max:u}=Math),e("../helpers"),s=e("underscore"),l=e("./lane"),f=e("../settings"),a=e("../helpers"),i=e("../geom/rect"),o=e("../geom/segment"),n=e("../geom/point"),e=function(){class r{constructor(e,t){this.source=e,this.target=t,this.id=a("road"),this.lanes=[],this.lanesNumber=null,this.update()}static copy(e){var t=Object.create(r.prototype);return s.extend(t,e),null==t.lanes&&(t.lanes=[]),t}toJSON(){return{id:this.id,source:this.source.id,target:this.target.id,length:this.length,carsNumber:this.lanes.reduce(function(e,t){return e+t.carsNumber},0),lanes:this.lanes.map(function(e){return e.toJSON()})}}getTurnDirection(e){var t;if(this.target!==e.source)throw Error("invalid roads");return t=this.targetSideId,(e.sourceSideId-t-1+8)%4}update(){var e,t,r,n,i,o,s,a,c;if(!this.source||!this.target)throw Error("incomplete road");if(this.sourceSideId=this.source.rect.getSectorId(this.target.rect.center()),this.sourceSide=this.source.rect.getSide(this.sourceSideId).subsegment(.5,1),this.targetSideId=this.target.rect.getSectorId(this.source.rect.center()),this.targetSide=this.target.rect.getSide(this.targetSideId).subsegment(0,.5),this.lanesNumber=0|h(this.sourceSide.length,this.targetSide.length),this.lanesNumber=u(2,this.lanesNumber/f.gridSize|0),a=this.sourceSide.split(this.lanesNumber,!0),c=this.targetSide.split(this.lanesNumber),null==this.lanes||this.lanes.length<this.lanesNumber)for(null==this.lanes&&(this.lanes=[]),t=r=0,i=this.lanesNumber-1;0<=i?r<=i:i<=r;t=0<=i?++r:--r)null==(e=this.lanes)[t]&&(e[t]=new l(a[t],c[t],this));for(s=[],t=n=0,o=this.lanesNumber-1;0<=o?n<=o:o<=n;t=0<=o?++n:--n)this.lanes[t].sourceSegment=a[t],this.lanes[t].targetSegment=c[t],this.lanes[t].leftAdjacent=this.lanes[t+1],this.lanes[t].rightAdjacent=this.lanes[t-1],this.lanes[t].leftmostAdjacent=this.lanes[this.lanesNumber-1],this.lanes[t].rightmostAdjacent=this.lanes[0],s.push(this.lanes[t].update());return s}}return r.property("length",{get:function(){return this.targetSide.target.subtract(this.sourceSide.source).length}}),r.property("leftmostLane",{get:function(){return this.lanes[this.lanesNumber-1]}}),r.property("rightmostLane",{get:function(){return this.lanes[0]}}),r.property("stringDirection",{get:function(){var e;return"up"===(e=this.lanes[0].stringDirection)||"down"===e?"vertical":"horizontal"}}),r.property("middleLine",{get:function(){return"horizontal"===this.stringDirection?new o(new n(this.rect.x,this.rect.y+this.rect.height()/2),new n(this.rect.x+this.rect.width(),this.rect.y+this.rect.height()/2)):new o(new n(this.rect.x+this.rect.width()/2,this.rect.y),new n(this.rect.x+this.rect.width()/2,this.rect.y+this.rect.height()))}}),r.property("rect",{get:function(){return"horizontal"===this.stringDirection?new i(this.sourceSide.source.x,this.sourceSide.source.y,this.targetSide.target.x-this.sourceSide.source.x,f.gridSize/2):new i(this.sourceSide.source.x,this.sourceSide.source.y,f.gridSize/2,this.targetSide.target.y-this.sourceSide.source.y)}}),r}.call(this),t.exports=e},{"../geom/point":133,"../geom/rect":134,"../geom/segment":135,"../helpers":136,"../settings":148,"./lane":143,underscore:107}],146:[function(e,t,r){"use strict";var i,n,o,s;({min:s,max:o}=Math),e("../helpers"),n=e("./lane-position"),i=e("../geom/curve"),e("underscore"),e=function(){class e{constructor(e,t,r){this.car=e,this.current=new n(this.car,t,r=null==r?0:r),this.current.acquire(),this.next=new n(this.car),this.temp=new n(this.car),this.isChangingLanes=!1}setNextIntersection(e){return this.current.lane.road.target=e}isValidTurn(){var e=this.car.nextLane,t=this.current.lane;if(!e)throw Error("no road to enter");if(3===(e=t.getTurnDirection(e)))throw Error("no U-turns are allowed");if(0===e&&!t.isLeftmost)throw Error("no left turns from this lane");if(2!==e||t.isRightmost)return!0;throw Error("no right turns from this lane")}canEnterIntersection(){var e,t=this.car.nextLane,r=this.current.lane;return!t||(e=this.nextIntersection,t=r.getTurnDirection(t),r=r.road.targetSideId,e.controlSignals.state[r][t])}getDistanceToIntersection(){var e=this.current.lane.length-this.car.length/2-this.current.position;return this.isChangingLanes?1/0:o(e,0)}timeToMakeTurn(e=0){return this.getDistanceToIntersection()<=e}moveForward(e){var t;if(e=o(e,0),this.current.position+=e,this.next.position+=e,this.temp.position+=e,this.timeToMakeTurn()&&this.canEnterIntersection()&&this.isValidTurn()&&this._startChangingLanes(this.car.popNextLane(),0),e=this.temp.position/(null!=(e=this.temp.lane)?e.length:void 0),t=settings.carsGap*this.car.length,this.isChangingLanes&&this.temp.position>t&&!this.current.free&&this.current.release(),this.isChangingLanes&&this.next.free&&this.temp.position+t>(null!=(t=this.temp.lane)?t.length:void 0)&&this.next.acquire(),this.isChangingLanes&&1<=e&&this._finishChangingLanes(),this.current.lane&&!this.isChangingLanes&&!this.car.nextLane)return this.car.pickNextLane()}changeLane(e){var t;if(this.isChangingLanes)throw Error("already changing lane");if(null==e)throw Error("no next lane");if(e===this.lane)throw Error("next lane == current lane");if(this.lane.road!==e.road)throw Error("not neighbouring lanes");if((t=this.current.position+3*this.car.length)<this.lane.length)return this._startChangingLanes(e,t);throw Error("too late to change lane")}_getIntersectionLaneChangeCurve(){}_getAdjacentLaneChangeCurve(){var e=this.current.lane.getPoint(this.current.relativePosition),t=this.next.lane.getPoint(this.next.relativePosition),r=t.subtract(e).length,n=this.current.lane.middleLine.vector.normalized.mult(.3*r),n=e.add(n),r=this.next.lane.middleLine.vector.normalized.mult(.3*r),r=t.subtract(r);return new i(e,t,n,r)}_getCurve(){return this._getAdjacentLaneChangeCurve()}_startChangingLanes(e,t){if(this.isChangingLanes)throw Error("already changing lane");if(null==e)throw Error("no next lane");return this.isChangingLanes=!0,this.next.lane=e,this.next.position=t,e=this._getCurve(),this.temp.lane=e,this.temp.position=0,this.next.position-=this.temp.lane.length}_finishChangingLanes(){if(this.isChangingLanes)return this.isChangingLanes=!1,this.current.lane=this.next.lane,this.current.position=this.next.position||0,this.current.acquire(),this.next.lane=null,this.next.position=NaN,this.temp.lane=null,this.temp.position=NaN,this.current.lane;throw Error("no lane changing is going on")}release(){var e;return null!=(e=this.current)&&e.release(),null!=(e=this.next)&&e.release(),null!=(e=this.temp)?e.release():void 0}}return e.property("lane",{get:function(){return this.temp.lane||this.current.lane}}),e.property("absolutePosition",{get:function(){return(null!=this.temp.lane?this.temp:this.current).position}}),e.property("relativePosition",{get:function(){return this.absolutePosition/this.lane.length}}),e.property("direction",{get:function(){return this.lane.getDirection(this.relativePosition)}}),e.property("stringDirection",{get:function(){return this.lane.stringDirection}}),e.property("coords",{get:function(){return this.lane.getPoint(this.relativePosition)}}),e.property("nextCarDistance",{get:function(){var e=this.current.nextCarDistance,t=this.next.nextCarDistance;return e.distance<t.distance?e:t}}),e.property("distanceToStopLine",{get:function(){return this.canEnterIntersection()?1/0:this.getDistanceToIntersection()}}),e.property("nextIntersection",{get:function(){return this.current.lane.road.target}}),e.property("previousIntersection",{get:function(){return this.current.lane.road.source}}),e}.call(this),t.exports=e},{"../geom/curve":132,"../helpers":136,"./lane-position":142,underscore:107}],147:[function(e,t,r){"use strict";var a,A,n,T,I,P,i,O,o,R,M;O=Math.random,e("../helpers"),P=e("underscore"),a=e("./car"),A=e("./intersection"),I=e("./road"),n=e("./pool"),T=e("../geom/rect"),R=e("../settings"),o=e("../maps"),M=e("uuid"),i=e("../mapsIdCounter"),e("../helpers"),e=function(){class e{constructor(){this.drawShortestPathLengthOnlyCallback=this.drawShortestPathLengthOnlyCallback.bind(this),this.addCarCallBack=this.addCarCallBack.bind(this),this.updateOnlinePathCallBack=this.updateOnlinePathCallBack.bind(this),this.onTick=this.onTick.bind(this),this.set({}),this.createDynamicMapMethods(),this.trackPath=[],this.onlinePath=[],this.bestPath=[],this.lengthOnlyPath=[],this.carObject={lastTimeSpawn:null},this.lastOnlinePathUpdate=0,this.activeCars=0,this.roadsUpdateCounterInterval=0}createDynamicMapMethods(){var e,t,r=this.constructor,n=[];for(t in o)e=o[t],n.push(function(e,t){return r.prototype[e]=function(){return this.load(t,e,!1)}}(t,e));return n}set(e){return this.intersections=new n(A,(e=null==e?{}:e).intersections),this.roads=new n(I,e.roads),this.cars=new n(a,e.cars),this.carsNumber=0,this.time=0,this.mapId=null}save(e=!1){var t=P.extend({},this);return delete t.cars,e?JSON.stringify({mapId:t.mapId,intersections:t.intersections,roads:t.roads,carsNumber:t.carsNumber,time:t.time}):localStorage.world=JSON.stringify(t)}load(e,t,r=!0){var n,i,o,s,a;if(null!=(e=(e=e||localStorage.world)&&r?JSON.parse(e):e)){for(n in this.clear(),this.carsNumber=e.carsNumber||0,o=e.intersections)i=o[n],this.addIntersection(A.copy(i));for(n in s=e.roads)a=s[n],(a=I.copy(a)).source=this.getIntersection(a.source),a.target=this.getIntersection(a.target),a.carsNumber=0,this.addRoad(a);return this.mapId=t,this.asyncRequest(R.mapUrl,"POST",null,{map:this.save(!0)})}}generateMap(e=-R.mapSize,t=R.mapSize,r=-R.mapSize,n=R.mapSize){var i,o,s,a,c,l,u,h,f,d,p,g,m,b,y,v,w,_,x,S,E,k,C;for(this.clear(),a=.8*(t-e+1)*(n-r+1)|0,f={},E=5*(i=R.gridSize),this.carsNumber=R.carsNumber;0<a;)null==f[[k=P.random(e,t),C=P.random(r,n)]]&&(p=new T(E*k,E*C,i,i),s=new A(p),this.addIntersection(f[[k,C]]=s),--a);for(k=c=g=e,m=t;g<=m?c<=m:m<=c;k=g<=m?++c:--c)for(d=null,C=l=b=r,y=n;b<=y?l<=y:y<=l;C=b<=y?++l:--l)null!=(s=f[[k,C]])&&(O()<.9&&(null!=d&&this.addRoad(new I(s,d)),null!=d)&&this.addRoad(new I(d,s)),d=s);for(C=u=v=r,w=n;v<=w?u<=w:w<=u;C=v<=w?++u:--u)for(d=null,k=h=_=e,x=t;_<=x?h<=x:x<=h;k=_<=x?++h:--h)null!=(s=f[[k,C]])&&(O()<.9&&(null!=d&&this.addRoad(new I(s,d)),null!=d)&&this.addRoad(new I(d,s)),d=s);if(R.connectedMap)for(o in S=this.intersections.all())if((s=S[o]).roads.length<2)return this.generateMap(e,t,r,n);return this.mapId=M.v4(),console.log("Map generated"),this.asyncRequest(R.mapUrl,"POST",null,{map:this.save(!0)})}addMyCar(e,t=0){var r,n,i,o,s;if(e instanceof I?e.id:e=this.getRoad(e),e){for(this.carObject.lastTimeSpawn=this.time,e=e.lanes[t],this.removeCarById(R.myCar.id),this.carsNumber=this.carsNumber+1,(r=new a(e)).speed=1,r.id=R.myCar.id,r.color=R.myCar.color,i=0,o=(s=this.trackPath).length;i<o;i++)n=s[i].intersection,this.addIntersectionToMyCarPath(n.id,r);return this.addCar(r),r.path.shift(),r.path.shift()}}addIntersectionToMyCarPath(e,t){e=this.getIntersection(e);e&&t.path.push(e)}syncRequest(e,t="GET",r=null,n=null,i=null){var o;return r&&(e=e+"?"+new URLSearchParams(r).toString()),(o=new XMLHttpRequest).open(t,e,!0),n&&(o.setRequestHeader("Content-Type","application/json"),n=JSON.stringify(n)),o.cors=!0,o.onload=function(){var e=null;if(o.responseText&&(e=JSON.parse(o.responseText)),200===o.status){if(i)return i({ok:!0,status:o.status,response:e})}else if(console.log("[Request Error]: "+o.status),i)return i({ok:!1,status:o.status,response:e})},o.onerror=function(){if(console.log("[Request Error]: "+o.status),i)return i({ok:!1,status:o.status,response:null})},o.send(n)}asyncRequest(e,i="GET",t=null,o=null,s){return t&&(e=e+"?"+new URLSearchParams(t).toString()),new Promise(function(t,r){var n=new XMLHttpRequest;return n.cors=!0,n.onload=function(){var e=null;return n.responseText&&(e=JSON.parse(n.responseText)),200===n.status?t(s?s({ok:!0,status:n.status,response:e}):void 0):(console.log("[Request Error]: "+n.status),r(s?s({ok:!1,status:n.status,response:e}):void 0))},n.onerror=function(){return console.log("[Request Error]: "+n.status),r(s?s({ok:!1,status:n.status,response:null}):void 0)},n.open(i,e,!0),o&&(n.setRequestHeader("Content-Type","application/json"),o=JSON.stringify(o)),n.send(o)})}getShortestPathLengthOnlyAPI(){var e=this.trackPath[0].intersection.id,t=this.trackPath[this.trackPath.length-1].intersection.id,e=e.slice("intersection".length),t=t.slice("intersection".length),e={fromIntersection:e,mapId:this.mapId,toIntersection:t,lengthOnly:"true"};return this.asyncRequest(R.pathFinderUrl,"GET",e,null,this.drawShortestPathLengthOnlyCallback)}drawShortestPathLengthOnlyCallback(e){var t;return e&&e.ok?(t=e.response.path,console.log("Shortest Path Length only: "+t),visualizer.drawShortestPath(t,"green")):e.response.mapId?(console.log("Error: Map not found on API server... Sending the current map to API server"),this.asyncRequest(R.mapUrl,"POST",null,{map:this.save(!0)}),this.getShortestPathAPI()):void console.log("Error: No path received from server.")}getShortestPathAPI(){var e,t;return this.asyncRequest(R.roadsUrl,"PATCH",null,{mapId:this.mapId,roads:this.roads.all()}),e=this.trackPath[0].intersection.id,t=this.trackPath[this.trackPath.length-1].intersection.id,e=e.slice("intersection".length),t=t.slice("intersection".length),e={fromIntersection:e,mapId:this.mapId,toIntersection:t,lengthOnly:"false"},this.asyncRequest(R.pathFinderUrl,"GET",e,null,this.addCarCallBack)}addMyCarAPI(){return this.getShortestPathAPI()}addCarCallBack(e){var t,r,n,i,o,s;if(!e||!e.ok)return e.response.mapId?(console.log("Error: Map not found on API server... Sending the current map to API server"),this.asyncRequest(R.mapUrl,"POST",null,{map:this.save(!0)}),this.getShortestPathAPI()):void console.log("Error: No path received from server.");for(n=e.response.path,this.carObject.lastTimeSpawn=this.time,console.log("Best Path: "+n),visualizer.drawTrackPath(n,"yellow"),s=null,r=(i=this.getIntersection(n[t=0]).roads).length;t<r;t++)if((o=i[t]).target.id===n[1]){s=o;break}return this.addMyCar(s,0)}getOnlineShortestPathAPI(){var e,t,r,n,i,o,s=this.getCar(R.myCar.id);if(null!=s&&null!=(o=s.nextLane)&&o.id){for(r=s.path,s.trajectory.current.lane.road.carsNumber=-1,e=0,t=(n=s.trajectory.current.lane.road.target.roads).length;e<t;e++)(i=n[e]).target===r[0]&&(i.carsNumber=-1);return this.asyncRequest(R.roadsUrl,"PATCH",null,{mapId:this.mapId,roads:this.roads.all()}),o=s.nextLane.id,s=r[r.length-1].id.slice("intersection".length),o={fromLaneId:o,mapId:this.mapId,toIntersection:s,lengthOnly:"false"},this.asyncRequest(R.onlinePathFinderUrl,"GET",o,null,this.updateOnlinePathCallBack)}}updateOnlinePathCallBack(e){var t,r,n,i,o,s,a,c,l,u,h,f,d,p=this.getCar(R.myCar.id);if(p&&!(p.path.length<=2)){for(u=e.response.path,console.log("Received new best path form /online api: "+u),t=[],i=0,a=(f=p.path).length;i<a;i++)h=f[i],t.push(h.id);for(console.log("My car path: "+t),d=[],o=0,c=t.length;o<c;o++){if(0<=(r=u.indexOf(n=t[o]))){console.log(`Found intersection ${n} in new path at index `+r),u=u.slice(r),console.log("newPath: "+u),u=u.map(e=>this.getIntersection(e)),console.log("newPath: "+u),d.push(...u),console.log("updatedPath: "+d);break}d.push(this.getIntersection(n))}for(s=0,l=d.length;s<l;s++)h=d[s],console.log("updatedPath: "+h);return this.onlinePath=[],this.onlinePath.push(p.trajectory.current.lane.road.source.id),this.onlinePath.push(p.trajectory.current.lane.road.target.id),p.nextLane&&this.onlinePath.push(p.nextLane.road.target.id),e=d.map(function(e){return e.id}),console.log("Updated best path in red: "+e),this.onlinePath.push(...e),p.path=d,visualizer.drawOnlinePath(this.onlinePath,"red")}}clear(){for(var e in this.set({}),this.carObject.lastTimeSpawn=null,i)i[e],i[e]=0;if(this.trackPath=[],this.lengthOnlyPath=[],this.onlinePath=[],R.debugTestHtml)return document.getElementById("trackPath").innerHTML="",document.getElementById("lengthOnlyPath").innerHTML=""}onTick(e){var t,r,n,i,o,s,a,c,l,u,h,f,d,p,g,m,b,y;if(1<e)throw Error("delta > 1");for(n in this.time+=e,null!=(u=this.carObject)&&u.lastTimeSpawn&&this.time-this.carObject.lastTimeSpawn>R.waitCarSpawn?(this.refreshCars(),this.carObject.lastTimeSpawn=null):null===(null!=(u=this.carObject)?u.lastTimeSpawn:void 0)&&this.refreshCars(),h=this.intersections.all())(i=h[n]).controlSignals.onTick(e);for(n in f=this.cars.all())t=f[n],this.time-this.lastOnlinePathUpdate>R.onlinePathUpdateInterval&&t.id===R.myCar.id&&2<t.path.length&&(this.lastOnlinePathUpdate=this.time,this.getOnlineShortestPathAPI()),t.move(e),t.alive||this.removeCar(t);for(n in g=[],d=this.roads.all()){if(m=d[n],R.trafficHighlight){for(o=b=0,a=(p=m.lanes).length;o<a;o++)0<=(l=(s=p[o]).carsNumber/(m.length/R.averageCarLength))&&l<=.5?s.color=R.colors.road:.5<l&&l<=.8?s.color="orange":.8<l&&(s.color="red"),b+=s.carsNumber;m.carsNumber=b}else{w=v=x=_=void 0;for(var v=m.lanes,w=[],_=0,x=v.length;_<x;_++)s=v[_],w.push(s.color=R.colors.road)}y=m.targetSideId,y=(i=this.getIntersection(m.target.id)).controlSignals.state[y],r=i.controlSignals.flipInterval,c=i.controlSignals.time,1===y[0]?(m.lanes[0].controlSignalState="green",m.lanes[1].controlSignalState="red"):y[1]===(y=y[2])&&1===y&&(m.lanes[1].controlSignalState="green",m.lanes[0].controlSignalState="red"),m.lanes[0].greenLightDuration=r,m.lanes[0].redLightDuration=r,m.lanes[0].controlSignalTime=c,m.lanes[1].greenLightDuration=r,m.lanes[1].redLightDuration=r,g.push(m.lanes[1].controlSignalTime=c)}return g}refreshCars(){if(this.cars.length<this.carsNumber&&this.addRandomCar(),this.cars.length>this.carsNumber)return this.removeRandomCar()}addRoad(e){return this.roads.put(e),e.source.roads.push(e),e.target.inRoads.push(e),e.update()}getRoad(e){return this.roads.get(e)}addCar(e){return this.cars.put(e)}getCar(e){return this.cars.get(e)}removeCarById(e){e=this.getCar(e);if(e)return this.removeCar(e)}removeCar(e){return this.cars.pop(e),e.release()}addIntersection(e){return this.intersections.put(e)}getIntersection(e){return this.intersections.get(e)}addRandomCar(){var e=P.sample(this.roads.all());if(null!=e&&null!=(e=e.lanes[0]))return this.addCar(new a(e))}removeRandomCar(){var e=P.sample(this.cars.all());if(null!=e)return this.removeCar(e)}}return e.property("instantSpeed",{get:function(){var e=P.map(this.cars.all(),function(e){return e.speed});return 0===e.length?0:P.reduce(e,function(e,t){return e+t})/e.length}}),e}.call(this),t.exports=e},{"../geom/rect":134,"../helpers":136,"../maps":137,"../mapsIdCounter":138,"../settings":148,"./car":139,"./intersection":141,"./pool":144,"./road":145,underscore:107,uuid:111}],148:[function(e,t,r){var n="https://itas.ddns.net/api",n={colors:{background:"#FFFFFF",redLight:"hsl(0, 100%, 50%)",greenLight:"#85ee00",intersection:"#586970",road:"#586970",roadMarking:"#bbb",hoveredIntersection:"#3d4c53",tempRoad:"#aaa",gridPoint:"#586970",grid1:"rgba(255, 255, 255, 0.5)",grid2:"rgba(220, 220, 220, 0.5)",hoveredGrid:"#f4e8e1",hoveredLane:"#dbd0ca"},fps:30,lightsFlipInterval:260,gridSize:14,mapSize:4,averageCarLength:4.5,defaultTimeFactor:5,defaultZoomLevel:3,maxZoomLevel:20,minZoomLevel:.1,defaultMap:"mappa_1",connectedMap:!0,debug:!1,myWidth:0,myHeight:0,showRedLights:!0,triangles:!0,trafficHighlight:!0,carsNumber:150,carsGap:5,waitCarSpawn:40,tooLongStop:1e3,myCar:{id:"MACCHINA",color:"#000000",maxFollowPoints:1e3,carLine:"white"},updateRoadsInterval:50,onlinePathUpdateInterval:100,apiUrl:n,pathFinderUrl:n+"/pathFinder",mapUrl:n+"/map",roadsUrl:n+"/roads",onlinePathFinderUrl:n+"/onlinePathFinder",mqtt:{port:8883,protocol:"mqtt",host:"io.adafruit.com",username:"sirmat",password:"aio_CcIX34dhmTJxDN8msWlCWnciTmGd",topic:"sirmat/feeds/path"},debugTestHtml:null!=document.getElementById("test")};t.exports=n},{}],149:[function(e,t,r){"use strict";var a,n,s,c,l,u;s=Math.PI,e("../helpers.coffee"),c=e("../geom/point"),e("../geom/rect"),a=e("../geom/curve"),l=e("../geom/segment"),u=e("../settings"),t.exports=n=class{constructor(e){this.ctx=e}fillRect(e,t,r){return null!=t&&(this.ctx.fillStyle=t),t=this.ctx.globalAlpha,null!=r&&(this.ctx.globalAlpha=r),this.ctx.fillRect(e.left(),e.top(),e.width(),e.height()),this.ctx.globalAlpha=t}drawRect(e){var t,r,n,i;for(this.ctx.beginPath,e=e.getVertices(),this.ctx.beginPath(),this.moveTo(e[0]),t=0,r=(i=e.slice(1)).length;t<r;t++)n=i[t],this.lineTo(n);return this.ctx.closePath()}drawImage(e,t){return this.ctx.drawImage(e,t.left(),t.top(),t.width(),t.height())}clear(e){return this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}moveTo(e){return this.ctx.moveTo(e.x,e.y)}lineTo(e){return this.ctx.lineTo(e.x,e.y)}drawLine(e,t){return this.ctx.beginPath(),this.moveTo(e),this.lineTo(t)}drawSegment(e,t=null,r=null){if(t&&(this.ctx.lineWidth=t),this.drawLine(e.source,e.target),r)return this.stroke(r)}drawCurve(e,t,r){var n,i,o;for(this.ctx.lineWidth=t,this.ctx.beginPath(),this.moveTo(e.getPoint(0)),n=i=0,0;i<=10;n=++i)o=e.getPoint(n/10),this.lineTo(o);if(e.O&&(this.moveTo(e.O),this.ctx.arc(e.O.x,e.O.y,t,0,2*s)),e.Q&&(this.moveTo(e.Q),this.ctx.arc(e.Q.x,e.Q.y,t,0,2*s)),r)return this.stroke(r)}drawTriangle(e,t,r){return this.ctx.beginPath(),this.moveTo(e),this.lineTo(t),this.lineTo(r)}drawCircle(e,t,r,n){if(this.ctx.beginPath(),this.ctx.arc(e.x,e.y,t,0,2*s),this.ctx.lineWidth=r,n)return this.stroke(n)}fill(e,t){return this.ctx.fillStyle=e,e=this.ctx.globalAlpha,null!=t&&(this.ctx.globalAlpha=t),this.ctx.fill(),this.ctx.globalAlpha=e}stroke(e){return this.ctx.strokeStyle=e,this.ctx.stroke()}polyline(...e){var t,r,n,i;if(1<=e.length){for(this.ctx.beginPath(),this.moveTo(e[0]),t=0,r=(i=e.slice(1)).length;t<r;t++)n=i[t],this.lineTo(n);return this.ctx.closePath()}}drawPolylineFeatures(e,t,r){var n,i,o,s;for(n in e[0]instanceof c&&this.ctx.moveTo(e[0].x,e[0].y),s="",o=new c(0,0),e){if(i=e[n],s=n.startsWith("_")?n+" ":"Coords: ",i instanceof c)this.drawCircle(i,t,r),s+=`at ${i.x}, `+i.y,o=i;else if(i instanceof l)this.drawSegment(i,t,r),o=new c((i.source.x+i.target.x)/2,(i.source.y+i.target.y)/2),s+=`from ${i.source.x}, ${i.source.y} to ${i.target.x}, `+i.target.y,this.stroke(r);else{if(!(i instanceof a))throw Error("Unknown feature type ->"+i);this.drawCurve(i,t,r)}u.debug&&(this.ctx.fillStyle="yellow",this.ctx.font="1px Arial",this.ctx.fillText(s,o.x,o.y+2))}return this.ctx.stroke()}save(){return this.ctx.save()}restore(){return this.ctx.restore()}}},{"../geom/curve":132,"../geom/point":133,"../geom/rect":134,"../geom/segment":135,"../helpers.coffee":136,"../settings":148}],150:[function(e,t,r){"use strict";function l(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var n,u,i;e("../helpers.coffee"),n=e("./tool.coffee"),i=e("../settings"),e("../geom/point.coffee"),u=class u extends n{constructor(){super(...arguments),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.draw=this.draw.bind(this),this.hoveredCell=null,this.hoveredLane=null,this.isTracking=!1}mousemove(e){var t,r,n,i,o,s,a,c;if(l(this,u),t=this.getCell(e),r=this.getHoveredLane(this.getScaledPoint(e)),e.ctrlKey)this.hoveredLane=r,this.hoveredCell=null,this.isTracking=!1,this.trackDestination=!1;else{if(e.altKey)return this.hoveredCell=t,this.hoveredLane=null,this.isTracking=!0,void(this.trackDestination=!1);this.hoveredCell=t,this.hoveredLane=null,this.isTracking=!1}for(n in a=[],s=this.visualizer.world.intersections.all())(i=s[n]).color=null,a.push(function(){var e=[];for(c in i.roads)e.push(function(){var e=[];for(o in c.lanes)e.push(o.color=null);return e}());return e}());return a}mouseout(){return l(this,u),this.hoveredCell=null,this.hoveredLane=null}draw(){var e;return l(this,u),this.hoveredCell&&!this.isTracking?(e=i.colors.hoveredGrid,this.visualizer.graphics.fillRect(this.hoveredCell,e,.5)):this.hoveredCell&&this.isTracking?(e=i.colors.hoveredLane,this.visualizer.graphics.fillRect(this.hoveredCell,"red",.5)):this.hoveredLane?(e=i.colors.hoveredLane,this.visualizer.graphics.fillRect(this.hoveredLane.rect,e,.5)):void 0}},t.exports=u},{"../geom/point.coffee":133,"../helpers.coffee":136,"../settings":148,"./tool.coffee":155}],151:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var i,o,s;e("../helpers.coffee"),o=e("./tool.coffee"),i=e("../model/intersection.coffee"),s=class s extends o{constructor(){super(...arguments),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.draw=this.draw.bind(this),this.tempIntersection=null,this.mouseDownPos=null}mousedown(e){if(n(this,s),this.mouseDownPos=this.getCell(e),e.shiftKey)return this.tempIntersection=new i(this.mouseDownPos),e.stopImmediatePropagation()}mouseup(){return n(this,s),this.tempIntersection&&(this.visualizer.world.addIntersection(this.tempIntersection),this.tempIntersection=null),this.mouseDownPos=null}mousemove(e){if(n(this,s),this.tempIntersection)return e=this.visualizer.zoomer.getBoundingBox(this.mouseDownPos,this.getCell(e)),this.tempIntersection.rect=e}mouseout(){return n(this,s),this.mouseDownPos=null,this.tempIntersection=null}draw(){if(n(this,s),this.tempIntersection)return this.visualizer.drawIntersection(this.tempIntersection,.4)}},t.exports=s},{"../helpers.coffee":136,"../model/intersection.coffee":141,"./tool.coffee":155}],152:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var i;e("../helpers.coffee"),i=class i extends e("./tool.coffee"){constructor(){super(...arguments),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.intersection=null}mousedown(e){var t;if(n(this,i),t=this.getHoveredIntersection(this.getCell(e)))return this.intersection=t,e.stopImmediatePropagation()}mouseup(){return n(this,i),this.intersection=null}mousemove(e){if(n(this,i),this.intersection)return e=this.getCell(e),this.intersection.rect.left(e.x),this.intersection.rect.top(e.y),this.intersection.update()}mouseout(){return n(this,i),this.intersection=null}},t.exports=i},{"../helpers.coffee":136,"./tool.coffee":155}],153:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var i;e("../helpers.coffee"),i=class i extends e("./tool.coffee"){constructor(){super(...arguments),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.startPosition=null}contextmenu(){return!1}mousedown(e){return n(this,i),this.startPosition=this.getPoint(e),e.stopImmediatePropagation()}mouseup(){return n(this,i),this.startPosition=null}mousemove(e){var t;if(n(this,i),this.startPosition)return t=this.getPoint(e).subtract(this.startPosition),this.visualizer.zoomer.moveCenter(t),this.startPosition=this.getPoint(e)}mouseout(){return n(this,i),this.startPosition=null}},t.exports=i},{"../helpers.coffee":136,"./tool.coffee":155}],154:[function(e,t,r){"use strict";function s(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var n,i,a;e("../helpers.coffee"),e("underscore"),i=e("./tool.coffee"),e("../model/car.coffee"),n=e("../model/road.coffee"),e("../settings"),a=class a extends i{constructor(){super(...arguments),this.mousedown=this.mousedown.bind(this),this.keydown=this.keydown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.draw=this.draw.bind(this),this.sourceIntersection=null,this.road=null,this.dualRoad=null,this.newTrackPath=[]}mousedown(e){var t,r,n;return s(this,a),t=this.getCell(e),r=this.getHoveredIntersection(t),e.shiftKey&&null!=r&&(this.sourceIntersection=r,e.stopImmediatePropagation()),n=this.getHoveredLane(this.getScaledPoint(e)),e.ctrlKey&&(null!=n&&n.road&&this.visualizer.world.addMyCar(n.road),e.stopImmediatePropagation()),e.altKey&&null!=r?(this.newTrackPath.push({cell:t,intersection:r}),e.stopImmediatePropagation()):0<this.newTrackPath.length?this.newTrackPath.pop():void 0}keydown(e){if(s(this,a),e.altKey&&83===e.keyCode&&(console.log("Saving track path"),this.visualizer.world.trackPath=this.newTrackPath,this.newTrackPath=[],this.visualizer.drawTrackPath(),e.stopImmediatePropagation()),e.altKey&&67===e.keyCode&&(console.log("Add MyCar with API"),this.visualizer.world.addMyCarAPI(),this.visualizer.world.onlinePath=[],e.stopImmediatePropagation()),e.altKey&&71===e.keyCode)return console.log("Get Shortest Path based only on length with API"),this.visualizer.world.getShortestPathLengthOnlyAPI(),e.stopImmediatePropagation()}mouseup(e){return s(this,a),null!=this.road&&this.visualizer.world.addRoad(this.road),null!=this.dualRoad&&this.visualizer.world.addRoad(this.dualRoad),this.road=this.dualRoad=this.sourceIntersection=null}mousemove(e){return s(this,a),e=this.getCell(e),e=this.getHoveredIntersection(e),this.sourceIntersection&&e&&this.sourceIntersection.id!==e.id?null!=this.road?(this.road.target=e,this.dualRoad.source=e):(this.road=new n(this.sourceIntersection,e),this.dualRoad=new n(e,this.sourceIntersection)):this.road=this.dualRoad=null}mouseout(e){return s(this,a),this.road=this.dualRoad=this.sourceIntersection=null}draw(){var e,t,r,n,i,o;if(s(this,a),null!=this.road&&this.visualizer.drawRoad(this.road,.4),null!=this.dualRoad&&this.visualizer.drawRoad(this.dualRoad,.4),this.newTrackPath){for(e=1,o=[],t=0,r=(i=this.newTrackPath).length;t<r;t++)n=i[t],this.visualizer.graphics.fillRect(n.cell,"red",.5),this.ctx.font="5px Arial",this.ctx.fillStyle="#c19020",this.ctx.fillText(e,n.cell.x,n.cell.y-.5),o.push(e+=1);return o}}},t.exports=a},{"../helpers.coffee":136,"../model/car.coffee":139,"../model/road.coffee":145,"../settings":148,"./tool.coffee":155,underscore:107}],155:[function(e,t,r){"use strict";var s,a,c,n,i;e("../helpers"),s=e("jquery"),e("underscore"),n=e("../geom/point"),e("../geom/rect"),e("jquery-mousewheel"),c=["click","mouseup","mousedown","mousemove","mouseout","mousewheel","contextmenu"],a=["keydown"],t.exports=i=class{constructor(e,t){this.draw=this.draw.bind(this),this.getPoint=this.getPoint.bind(this),this.getCell=this.getCell.bind(this),this.getScaledPoint=this.getScaledPoint.bind(this),this.getHoveredIntersection=this.getHoveredIntersection.bind(this),this.getHoveredLane=this.getHoveredLane.bind(this),this.visualizer=e,this.ctx=this.visualizer.ctx,this.canvas=this.ctx.canvas,this.isBound=!1,this.bind=this.bind.bind(this),this.unbind=this.unbind.bind(this),this.click=this.click.bind(this),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.mousewheel=this.mousewheel.bind(this),this.contextmenu=this.contextmenu.bind(this),this.keydown=this.keydown.bind(this),t&&this.bind()}bind(){var e,t,r,n,i,o;for(this.isBound=!0,e=0,r=c.length;e<r;e++)null!=this[i=c[e]]&&s(this.canvas).on(i,this[i]);for(o=[],t=0,n=a.length;t<n;t++)null!=this[i=a[t]]&&o.push(s(document).on(i,this[i]));return o}unbind(){var e,t,r,n,i,o;for(this.isBound=!1,e=0,r=c.length;e<r;e++)null!=this[i=c[e]]&&s(this.canvas).off(i,this[i]);for(o=[],t=0,n=a.length;t<n;t++)null!=this[i=a[t]]&&o.push(s(document).off(i,this[i]));return o}toggleState(){return this.isBound?this.unbind():this.bind()}draw(){}getPoint(e){return new n(e.pageX-this.canvas.offsetLeft,e.pageY-this.canvas.offsetTop)}getCell(e){return this.visualizer.zoomer.toCellCoords(this.getPoint(e))}getScaledPoint(e){return this.visualizer.zoomer.toPointCoords(this.getPoint(e))}getHoveredIntersection(e){var t,r,n=this.visualizer.world.intersections.all();for(t in n)if((r=n[t]).rect.containsRect(e))return r}getHoveredLane(e){var t,r,n,i,o,s,a,c,l=this.visualizer.world.intersections.all();for(r in l)for(t=0,o=(a=l[r].roads).length;t<o;t++)for(n=0,s=(c=a[t].lanes).length;n<s;n++)if((i=c[n]).rect.containsPoint(e))return i}click(e){}mousedown(e){}mouseup(e){}mousemove(e){}mouseout(e){}mousewheel(e){}contextmenu(e){}keydown(e){}}},{"../geom/point":133,"../geom/rect":134,"../helpers":136,jquery:15,"jquery-mousewheel":14,underscore:107}],156:[function(e,t,r){"use strict";var n,i,o,s,l,y,u,w,a,c,h,f,d,p,g,v;l=Math.PI,e("../helpers"),n=e("jquery"),e("underscore"),g=e("chroma-js"),y=e("../geom/point"),u=e("../geom/rect"),w=e("../geom/segment"),s=e("../model/intersection"),o=e("./graphics"),f=e("./mover"),h=e("./intersection-mover"),c=e("./intersection-builder"),d=e("./road-builder"),a=e("./highlighter"),p=e("./zoomer"),v=e("../settings"),i=e("../client"),e=function(){class e{constructor(e){this.draw=this.draw.bind(this),this.world=e,this.$canvas=n("#canvas"),this.canvas=this.$canvas[0],this.ctx=this.canvas.getContext("2d"),this.updateCanvasSize(),this.zoomer=new p(v.defaultZoomLevel,this,!0),this.graphics=new o(this.ctx),this.toolRoadbuilder=new d(this,!0),this.toolIntersectionBuilder=new c(this,!0),this.toolHighlighter=new a(this,!0),this.toolIntersectionMover=new h(this,!0),this.toolMover=new f(this,!0),this._running=!0,this.previousTime=0,this.timeFactor=v.defaultTimeFactor,this.lastMqttRequest=0,this.trackPath=world.trackPath,this.lengthOnlyTrackPath=world.lengthOnlyTrackPath,"localhost"===window.location.hostname?(this.client=new i(v.mqtt.host,v.mqtt.port,v.mqtt.username,v.mqtt.password),console.log("WS Client started")):(console.log("WS Client not started"),this.client=null)}updateVirtualScreen(){var e,t,r,n,i,o,s,a=null,c=this.world.cars.all();for(n in c)if(e=c[n],n===v.myCar.id){a=e;break}if(a){if(o=a.trajectory.current,i=a.nextLane,r=a.trajectory.current.lane.road,i&&r)switch(t=r.getTurnDirection(i.road)){case 0:t="left";break;case 1:t="forward";break;case 2:t="right"}if(r=0,o.lane.road&&(r=o.lane.road.length-o.position)<3.5&&(r=0),window.virtualScreen={carPosition:a.coords,carDirection:t||(null!=(s=window.virtualScreen)?s.carDirection:void 0),carSpeed:null!==a.speed?a.speed.toFixed(2):null,carAcceleration:a.getAcceleration()?a.getAcceleration().toFixed(2):null,carLane:o.lane.id||"",carRoad:null!=(s=o.lane)&&null!=(s=s.road)&&s.id?o.lane.road.id:"",carTargetLane:i?i.id:null!=(s=window.virtualScreen)?s.carTargetLane:void 0,carDistanceToEnd:r.toFixed(1)+"m"},this.lastMqttRequest+2e3<Date.now()){switch(this.lastMqttRequest=Date.now(),t=null,window.virtualScreen.carDirection){case"left":t="3";break;case"forward":t="0";break;case"right":t="1"}return o={carDirection:t,carLane:window.virtualScreen.carLane,carRoad:window.virtualScreen.carRoad,carTargetLane:window.virtualScreen.carTargetLane},this.client.publishTo(v.mqtt.topic,o)}}}drawIntersection(e,t){var r=e.color||v.colors.intersection;if(this.graphics.drawRect(e.rect),this.ctx.lineWidth=.4,this.graphics.stroke(v.colors.roadMarking),this.graphics.fillRect(e.rect,r,t),v.debug)return this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1.0px Arial",r=e.rect.center(),this.ctx.fillText(e.id,r.x-2,r.y-1),this.ctx.restore()}fixSignal(e){var t,r,n,i,o,s,a,c,l,u,h,f,d,p,g,m,b,y,v,w,_,x,S,E,k,C,A,N,B,T,I,P,O,R,M,j,L=[!0,!0,!0];switch(e.targetSideId){case 0:for(L[1]=!1,t=0,r=(y=e.target.inRoads).length;t<r;t++)0===y[t].sourceSideId&&(L[1]=!0);for(L[0]=!1,p=0,n=(v=e.target.inRoads).length;p<n;p++)3===v[p].sourceSideId&&(L[0]=!0);for(L[2]=!1,g=0,s=(x=e.target.inRoads).length;g<s;g++)1===x[g].sourceSideId&&(L[2]=!0);break;case 1:for(L[0]=!1,m=0,a=(S=e.target.inRoads).length;m<a;m++)0===S[m].sourceSideId&&(L[0]=!0);for(L[2]=!1,b=0,c=(E=e.target.inRoads).length;b<c;b++)2===E[b].sourceSideId&&(L[2]=!0);for(L[1]=!1,T=0,l=(k=e.target.inRoads).length;T<l;T++)1===k[T].sourceSideId&&(L[1]=!0);break;case 2:for(L[1]=!1,I=0,u=(C=e.target.inRoads).length;I<u;I++)2===C[I].sourceSideId&&(L[1]=!0);for(L[0]=!1,P=0,h=(A=e.target.inRoads).length;P<h;P++)1===A[P].sourceSideId&&(L[0]=!0);for(L[2]=!1,O=0,f=(N=e.target.inRoads).length;O<f;O++)3===N[O].sourceSideId&&(L[2]=!0);break;case 3:for(L[2]=!1,R=0,d=(B=e.target.inRoads).length;R<d;R++)0===B[R].sourceSideId&&(L[2]=!0);for(L[0]=!1,M=0,i=(w=e.target.inRoads).length;M<i;M++)2===w[M].sourceSideId&&(L[0]=!0);for(L[1]=!1,j=0,o=(_=e.target.inRoads).length;j<o;j++)3===_[j].sourceSideId&&(L[1]=!0)}return L}drawSignals(e){v.colors.redLight,v.colors.greenLight;var t,r,n,i,o=e.target,s=e.targetSide,a=e.targetSideId,c=o.controlSignals.state[a];if(this.ctx.save(),this.ctx.translate(s.center.x,s.center.y),this.ctx.rotate((a+1)*l/2),this.ctx.scale(+s.length,+s.length),1!==o.inRoads.length&&2!==o.inRoads.length){if(3===o.inRoads.length)for(r=t=0,n=(i=this.fixSignal(e)).length;r<n;r++)!1===i[r]&&(c[t]=-1),t+=1;return 1===c[0]?(v.triangles?this.graphics.drawTriangle(new y(.1,-.2),new y(.2,-.4),new y(.3,-.2)):this.graphics.drawCircle(new y(.2,-.3),.1),this.graphics.fill(v.colors.greenLight)):-1!==c[0]&&0===c[0]&&v.showRedLights&&(v.triangles?this.graphics.drawTriangle(new y(.1,-.2),new y(.2,-.4),new y(.3,-.2)):this.graphics.drawCircle(new y(.2,-.3),.1),this.graphics.fill(v.colors.redLight)),1===c[1]?(v.triangles?this.graphics.drawTriangle(new y(.3,-.1),new y(.5,0),new y(.3,.1)):this.graphics.drawCircle(new y(.4,0),.1),this.graphics.fill(v.colors.greenLight)):-1!==c[1]&&0===c[1]&&v.showRedLights&&(v.triangles?this.graphics.drawTriangle(new y(.3,-.1),new y(.5,0),new y(.3,.1)):this.graphics.drawCircle(new y(.4,0),.1),this.graphics.fill(v.colors.redLight)),1===c[2]?(v.triangles?this.graphics.drawTriangle(new y(.1,.2),new y(.2,.4),new y(.3,.2)):this.graphics.drawCircle(new y(.2,.3),.1),this.graphics.fill(v.colors.greenLight)):-1!==c[2]&&0===c[2]&&v.showRedLights&&(v.triangles?this.graphics.drawTriangle(new y(.1,.2),new y(.2,.4),new y(.3,.2)):this.graphics.drawCircle(new y(.2,.3),.1),this.graphics.fill(v.colors.redLight)),this.ctx.restore(),v.debug?(this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1px Arial",a=o.rect.center(),s=Math.round(100*o.controlSignals.flipInterval)/100,e=Math.round(100*o.controlSignals.phaseOffset)/100,this.ctx.fillText(s+" - "+e,a.x-2,a.y),this.ctx.restore()):void 0}this.ctx.restore()}drawRoad(e,t){var r,n,i,o,s,a,c,l,u,h,f,d,p,g,m,b;if(null==e.source||null==e.target)throw Error("invalid road");for(this.ctx.save(),this.ctx.lineWidth=.4,b=e.leftmostLane.leftBorder,this.graphics.drawSegment(b),this.graphics.stroke(v.colors.roadMarking),b=e.rightmostLane.rightBorder,this.graphics.drawSegment(b),this.graphics.stroke(v.colors.roadMarking),this.ctx.restore(),o=0,a=(d=e.lanes).length;o<a;o++)s=d[o],this.graphics.drawRect(s.rect),i=s.color||v.colors.road,this.graphics.fill(i,t);for(this.ctx.save(),h=0,c=(p=e.lanes.slice(1)).length;h<c;h++)u=(s=p[h]).rightBorder,this.graphics.drawSegment(u),this.ctx.lineWidth=.2,this.ctx.lineDashOffset=1.5,this.ctx.setLineDash([1]),this.graphics.stroke(v.colors.roadMarking);if(this.ctx.restore(),this.ctx.save(),v.debug)for(f=0,l=(g=e.lanes).length;f<l;f++)s=g[f],this.ctx.fillStyle="black",this.ctx.font="1px Arial",r=s.rightBorder.center,"left"===(m=s.stringDirection)||"right"===m?this.ctx.fillText(s.id,r.x,r.y+2):this.ctx.fillText(s.id,r.x,r.y-2);if(this.ctx.restore(),v.debug)return this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1px Arial",b=e.lanes[0].middleLine.center,n=e.lanes[1].middleLine.center,b=new y((b.x+n.x)/2,(b.y+n.y)/2),this.ctx.fillText(e.id,b.x,b.y),this.ctx.restore()}drawCar(e){var t,r,n=e.direction,i=e.coords;if(new u(0,0,1.1*e.length,1.7*e.width).center(new y(0,0)),(r=new u(0,0,e.length,e.width)).center(new y(0,0)),this.graphics.save(),this.ctx.translate(i.x,i.y),this.ctx.rotate(n),n=e.id===v.myCar.id?v.myCar.color:(n=.9-.3*e.speed/e.maxSpeed,g(e.color,.8,n,"hsl").hex()),this.graphics.fillRect(r,n),this.graphics.restore(),v.debug){if(this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1px Arial",this.ctx.fillText(e.id,i.x,i.y),e.id!==v.myCar.id)return null!=(t=null!=(r=e.trajectory.temp)?r.lane:void 0)&&this.graphics.drawCurve(t,.1,"red"),this.ctx.restore();null!=(t=null!=(n=e.trajectory.temp)?n.lane:void 0)&&this.graphics.drawCurve(t,.1,"blue"),this.ctx.restore()}}drawGrid(){var i,o,e,s,t,r,n,a=v.gridSize,c=this.zoomer.getBoundingBox();if(!(c.area()>=2e3*a*a)){for(n=[],i=e=c.left(),t=c.right(),r=a;0!==r&&(0<r?e<=t:t<=e);i=e+=r)n.push(function(){var e,t,r,n=[];for(o=e=c.top(),t=c.bottom(),r=a;0!==r&&(0<r?e<=t:t<=e);o=e+=r)s=new u(i-.2,o-.2,.4,.4),n.push(this.graphics.fillRect(s,v.colors.gridPoint));return n}.call(this));return n}}drawCarLines(e){var t,r,n,i;if(e.id===v.myCar.id){for(this.ctx.beginPath(),this.ctx.moveTo(e.trackPoints[0].x,e.trackPoints[0].y),t=0,r=(i=e.trackPoints).length;t<r;t++)n=i[t],this.graphics.drawCircle(n,.2,.1,v.myCar.carLine,!0),this.graphics.fill(v.myCar.carLine);return this.ctx.stroke(),this.ctx.restore()}}updateCanvasSize(){var e=this.canvas;e.width=e.clientWidth,e.height=e.clientHeight,v.myWidth=e.clientWidth,v.myHeight=e.clientHeight}draw(e){var t,r,n,i,o,s,a,c,l,u,h,f;for(i in this.running&&30<(n=e-this.previousTime||0)&&(100<n&&(n=100),this.previousTime=e,this.world.onTick(this.timeFactor*n/1e3)),this.updateCanvasSize(),this.graphics.clear(v.colors.background),this.graphics.save(),this.zoomer.transform(),this.drawGrid(),s=this.world.intersections.all())o=s[i],this.drawIntersection(o,.9);for(i in a=this.world.roads.all())f=a[i],this.drawRoad(f,.9);for(i in c=this.world.roads.all())f=c[i],this.drawSignals(f);for(i in l=this.world.cars.all())r=l[i],this.drawCar(r);for(i in this.toolIntersectionBuilder.draw(),this.toolRoadbuilder.draw(),this.toolHighlighter.draw(),this.graphics.save(),u=this.world.cars.all())r=u[i],this.drawCarLines(r);for(i in this.drawShortestPath([],"green"),this.drawTrackPath([],"yellow"),this.drawOnlinePath([],"red"),this.updateVirtualScreen(),this.graphics.restore(),t=0,h=this.world.cars.all())(r=h[i]).alive&&t++;return this.world.activeCars=t,window.requestAnimationFrame(this.draw)}checkIfPointOrIntersection(e){var t,r,n,i;if(e instanceof y){for(r in t=new u(e.x,e.y,.1,.1),i=this.world.intersections.all())if((n=i[r]).rect.containsRect(t)){e=n;break}}else e instanceof s||(e=this.world.intersections.objects[e]);return e}getDirectionGivenIntersections(e,t){if(e=this.checkIfPointOrIntersection(e),t=this.checkIfPointOrIntersection(t),void 0!==e&&void 0!==t)return e.rect.center().x<t.rect.center().x?"right":e.rect.center().x>t.rect.center().x?"left":e.rect.center().y<t.rect.center().y?"down":e.rect.center().y>t.rect.center().y?"up":void 0;console.log("Intersection not found")}checkBeforeAndNextPath(e,t){var r=e[t+1];if(void 0===r&&(r=e[t]),e=this.checkIfPointOrIntersection(e[t]),r=r&&this.checkIfPointOrIntersection(r),e&&r)return this.getDirectionGivenIntersections(e,r);throw new Error("Something went wrong in checkBeforeAndNextPath")}getIntersectionLaneByDirection(e,t){for(var r,n,i,o,s=e.roads,a=0,c=s.length;a<c;a++)for(i=0,n=(o=s[a].lanes).length;i<n;i++)if((r=o[i]).stringDirection===t)return r}drawOnlinePath(e=[],t="red"){var r,n,i,o,s,a,c,l,u,h,f,d,p,g,m,b,y,v;if(e instanceof Array&&2<=e.length)for(this.world.onlinePath=[],c=0,u=e.length;c<u;c++)s=e[c],this.world.onlinePath.push({intersection:this.checkIfPointOrIntersection(s)});if(!(this.world.onlinePath.length<2)){for(o=[],f=0,h=(m=this.world.onlinePath).length;f<h;f++)s=m[f],o.push(s.intersection);for(v=(i=this.checkIfPointOrIntersection(o[0])).rect.center(),n=this.checkIfPointOrIntersection(o[o.length-1]).rect.center(),g={startPoint:v},l=v,r=this.checkBeforeAndNextPath(o,0),this.getIntersectionLaneByDirection(i,r),s=d=1,b=o.length-2;1<=b?d<=b:b<=d;s=1<=b?++d:--d){if(void 0===(p=null!=(a=this.checkIfPointOrIntersection(o[s]))?a.rect.center():void 0))return void console.log("Intersection "+a.id+" not found");r=this.checkBeforeAndNextPath(o,s),this.getIntersectionLaneByDirection(a,r),y=new w(l,p),g[a.id]=y,l=p,s===o.length-2&&(y=new w(l,n),g.lastSegment=y,g.endPoint=n)}return this.graphics.drawPolylineFeatures(g,.7,t),this.graphics.restore()}}drawShortestPath(e=[],t="green"){var r,n,i,o,s,a,c,l,u,h,f,d,p,g,m,b,y,v;if(e instanceof Array&&2<=e.length)for(this.world.lengthOnlyPath=[],c=0,u=e.length;c<u;c++)s=e[c],this.world.lengthOnlyPath.push({intersection:this.checkIfPointOrIntersection(s)});if(!(this.world.lengthOnlyPath.length<2)){for(o=[],f=0,h=(m=this.world.lengthOnlyPath).length;f<h;f++)s=m[f],o.push(s.intersection);for(v=(i=this.checkIfPointOrIntersection(o[0])).rect.center(),n=this.checkIfPointOrIntersection(o[o.length-1]).rect.center(),g={startPoint:v},l=v,r=this.checkBeforeAndNextPath(o,0),this.getIntersectionLaneByDirection(i,r),s=d=1,b=o.length-2;1<=b?d<=b:b<=d;s=1<=b?++d:--d){if(void 0===(p=null!=(a=this.checkIfPointOrIntersection(o[s]))?a.rect.center():void 0))return void console.log("Intersection "+a.id+" not found");r=this.checkBeforeAndNextPath(o,s),this.getIntersectionLaneByDirection(a,r),y=new w(l,p),g[a.id]=y,l=p,s===o.length-2&&(y=new w(l,n),g.lastSegment=y,g.endPoint=n)}return this.graphics.drawPolylineFeatures(g,.7,t)}}drawTrackPath(e=[],t="blue"){var r,n,i,o,s,a,c,l,u,h,f,d,p,g,m,b,y,v;if(e instanceof Array&&2<=e.length)for(this.world.trackPath=[],c=0,u=e.length;c<u;c++)s=e[c],this.world.trackPath.push({intersection:this.checkIfPointOrIntersection(s)});if(!(this.world.trackPath.length<2)){for(o=[],f=0,h=(m=this.world.trackPath).length;f<h;f++)s=m[f],o.push(s.intersection);for(v=(i=this.checkIfPointOrIntersection(o[0])).rect.center(),n=this.checkIfPointOrIntersection(o[o.length-1]).rect.center(),g={startPoint:v},l=v,r=this.checkBeforeAndNextPath(o,0),this.getIntersectionLaneByDirection(i,r),s=d=1,b=o.length-2;1<=b?d<=b:b<=d;s=1<=b?++d:--d){if(void 0===(p=null!=(a=this.checkIfPointOrIntersection(o[s]))?a.rect.center():void 0))return void console.log("Intersection "+a.id+" not found");r=this.checkBeforeAndNextPath(o,s),this.getIntersectionLaneByDirection(a,r),y=new w(l,p),g[a.id]=y,l=p,s===o.length-2&&(y=new w(l,n),g.lastSegment=y,g.endPoint=n)}return this.graphics.drawPolylineFeatures(g,.7,t)}}_testDrawTrackPath(){var e,t,r,n,i,o,s,a,c,l,u=null!=(u=this.world.intersections.objects.intersection1)?u.rect.center():void 0,h=null!=(s=this.world.intersections.objects.intersection9)?s.rect.center():void 0;if(void 0!==u&&void 0!==h){for(o={startPoint:u},e=this.checkBeforeAndNextPath(l=[n=u,"intersection2","intersection3","intersection4","intersection5","intersection6",h],0),this.getIntersectionLaneByDirection(this.world.intersections.objects.intersection1,e),t=r=1,a=l.length-2;1<=a?r<=a:a<=r;t=1<=a?++r:--r){if(void 0===(i=null!=(c=this.world.intersections.objects[l[t]])?c.rect.center():void 0))return void console.log("Intersection "+l[t]+" not found");e=this.checkBeforeAndNextPath(l,t),this.getIntersectionLaneByDirection(c,e),c=new w(n,i),o[l[t]]=c,n=i,t===l.length-2&&(c=new w(n,h),o.lastSegment=c,o.endPoint=h)}return this.graphics.drawPolylineFeatures(o,.3,"blue"),this.graphics.restore()}}start(){return this._running=!0,this.draw()}stop(){return this._running=!1}}return e.property("running",{get:function(){return this._running},set:function(e){return e?this.start():this.stop()}}),e}.call(this),t.exports=e},{"../client":131,"../geom/point":133,"../geom/rect":134,"../geom/segment":135,"../helpers":136,"../model/intersection":141,"../settings":148,"./graphics":149,"./highlighter":150,"./intersection-builder":151,"./intersection-mover":152,"./mover":153,"./road-builder":154,"./zoomer":157,"chroma-js":4,jquery:15,underscore:107}],157:[function(e,t,r){"use strict";var o,s,n,a,c,l;({min:c,max:a}=Math),e("../helpers.coffee"),o=e("../geom/point.coffee"),s=e("../geom/rect.coffee"),n=e("./tool.coffee"),l=e("../settings"),o=e("../geom/point.coffee"),e=function(){class e extends n{constructor(e,t,r){super(t,r),this.defaultZoom=e,this.ctx=t.ctx,this.canvas=this.ctx.canvas,this._scale=1,this.screenCenter=new o(l.myWidth/2,l.myHeight/2),this.center=new o(l.myWidth/2,l.myHeight/2)}toCellCoords(e){var t=l.gridSize,e=e.subtract(this.center).divide(this.scale),r=Math.floor(e.x/(this.defaultZoom*t))*t,e=Math.floor(e.y/(this.defaultZoom*t))*t;return new s(r,e,t,t)}toPointCoords(e){var e=e.subtract(this.center).divide(this.scale),t=Math.floor(e.x/this.defaultZoom),e=Math.floor(e.y/this.defaultZoom);return new o(t,e)}getBoundingBox(e,t){var r,n,i;return null==e&&(e=this.toCellCoords(new o(0,0))),null==t&&(t=this.toCellCoords(new o(l.myWidth,l.myHeight))),e.x,e.y,t.x,t.y,n=c(e.left(),t.left()),r=a(e.right(),t.right()),i=c(e.top(),t.top()),e=a(e.bottom(),t.bottom()),new s(n,i,r-n,e-i)}transform(){var e;return this.ctx.translate(this.center.x,this.center.y),e=this.scale*this.defaultZoom,this.ctx.scale(e,e)}zoom(e,t){var r;return e>l.maxZoomLevel?e=l.maxZoomLevel:e<l.minZoomLevel&&(e=l.minZoomLevel),null==e&&(e=1),r=this.center.subtract(t),this.center=t.add(r.mult(e/this._scale)),this._scale=e}moveCenter(e){return this.center=this.center.add(e)}mousewheel(e){var t=e.originalEvent.deltaY*-e.originalEvent.eventPhase;return this.zoom(this.scale*2**(.001*t),this.getPoint(e)),e.preventDefault()}}return e.property("scale",{get:function(){return this._scale>l.maxZoomLevel?this._scale=l.maxZoomLevel:this._scale<l.minZoomLevel?this._scale=l.minZoomLevel:this._scale},set:function(e){return e>l.maxZoomLevel?e=l.maxZoomLevel:e<l.minZoomLevel&&(e=l.minZoomLevel),this.zoom(e,this.screenCenter)}}),e}.call(this),t.exports=e},{"../geom/point.coffee":133,"../geom/rect.coffee":134,"../helpers.coffee":136,"../settings":148,"./tool.coffee":155}]},{},[130]);