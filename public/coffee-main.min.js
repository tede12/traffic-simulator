!function r(i,o,s){function a(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return a(i[t][1][e]||e)},n,n.exports,r,i,o,s)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,n){var r,i;r=this,i=function(){"use strict";for(var e=function(e,t,n){return void 0===n&&(n=1),e<(t=void 0===t?0:t)?t:n<e?n:e},D=e,R={},t=0,B=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];t<B.length;t+=1){var H=B[t];R["[object "+H+"]"]=H.toLowerCase()}function n(e){return R[Object.prototype.toString.call(e)]||"object"}function F(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("object"===K(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var n=!1;if(!(o=$(e))){n=!0,a.sorted||(a.autodetect=a.autodetect.sort(function(e,t){return t.p-e.p}),a.sorted=!0);for(var r=0,i=a.autodetect;r<i.length;r+=1){var o,s=i[r];if(o=s.test.apply(s,e))break}}if(!a.format[o])throw new Error("unknown format: "+e);n=a.format[o].apply(null,n?e:e.slice(0,-1)),this._rgb=Y(n),3===this._rgb.length&&this._rgb.push(1)}function r(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(r.Color,[null].concat(e)))}function q(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=Z(e,"cmyk"))[0],r=e[1],i=e[2],o=e[3],s=4<e.length?e[4]:1;return 1===o?[0,0,0,s]:[1<=n?0:255*(1-n)*(1-o),1<=r?0:255*(1-r)*(1-o),1<=i?0:255*(1-i)*(1-o),s]}function i(e){return Math.round(100*e)/100}function z(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i=(e=se(e,"rgba"))[0],o=e[1],s=e[2],a=(i/=255,o/=255,s/=255,Math.min(i,o,s)),c=Math.max(i,o,s),l=(c+a)/2;return c===a?(n=0,r=Number.NaN):n=l<.5?(c-a)/(c+a):(c-a)/(2-c-a),i==c?r=(o-s)/(c-a):o==c?r=2+(s-i)/(c-a):s==c&&(r=4+(i-o)/(c-a)),(r*=60)<0&&(r+=360),3<e.length&&void 0!==e[3]?[r,n,l,e[3]]:[r,n,l]}function U(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ae(e,"rgba"),r=ce(e)||"rgb";return"hsl"==r.substr(0,3)?le(ue(n),r):(n[0]=de(n[0]),n[1]=de(n[1]),n[2]=de(n[2]),("rgba"===r||3<n.length&&n[3]<1)&&(n[3]=3<n.length?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")}function W(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,o=(e=he(e,"hsl"))[0],s=e[1],a=e[2];if(0===s)n=r=i=255*a;else{var c=[0,0,0],l=[0,0,0],u=a<.5?a*(1+s):a+s-a*s,d=2*a-u,s=o/360;c[0]=s+1/3,c[1]=s,c[2]=s-1/3;for(var h=0;h<3;h++)c[h]<0&&(c[h]+=1),1<c[h]&&--c[h],l[h]=6*c[h]<1?d+6*(u-d)*c[h]:2*c[h]<1?u:3*c[h]<2?d+(u-d)*(2/3-c[h])*6:d;n=(a=[fe(255*l[0]),fe(255*l[1]),fe(255*l[2])])[0],r=a[1],i=a[2]}return 3<e.length?[n,r,i,e[3]]:[n,r,i,1]}function V(e){var t,n;if(e=e.toLowerCase().trim(),ge.format.named)try{return ge.format.named(e)}catch(e){}if(t=e.match(me)){for(var r=t.slice(1,4),i=0;i<3;i++)r[i]=+r[i];return r[3]=1,r}if(t=e.match(ve)){for(var o=t.slice(1,5),s=0;s<4;s++)o[s]=+o[s];return o}if(t=e.match(ye)){for(var a=t.slice(1,4),c=0;c<3;c++)a[c]=xe(2.55*a[c]);return a[3]=1,a}if(t=e.match(be)){for(var l=t.slice(1,5),u=0;u<3;u++)l[u]=xe(2.55*l[u]);return l[3]=+l[3],l}return(t=e.match(_e))?((n=t.slice(1,4))[1]*=.01,n[2]*=.01,(n=pe(n))[3]=1,n):(t=e.match(we))?((n=t.slice(1,4))[1]*=.01,n[2]*=.01,(e=pe(n))[3]=+t[4],e):void 0}var G=n,X=n,o=Math.PI,e={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var t=0;t<=3;t++)t<3?((e[t]<0||255<e[t])&&(e._clipped=!0),e[t]=D(e[t],0,255)):3===t&&(e[t]=D(e[t],0,1));return e},limit:e,type:n,unpack:function(t,e){return void 0===e&&(e=null),3<=t.length?Array.prototype.slice.call(t):"object"==G(t[0])&&e?e.split("").filter(function(e){return void 0!==t[0][e]}).map(function(e){return t[0][e]}):t[0]},last:function(e){var t;return!(e.length<2)&&(t=e.length-1,"string"==X(e[t]))?e[t].toLowerCase():null},PI:o,TWOPI:2*o,PITHIRD:o/3,DEG2RAD:o/180,RAD2DEG:180/o},o={format:{},autodetect:[]},$=e.last,Y=e.clip_rgb,K=e.type,a=o,s=(F.prototype.toString=function(){return"function"==K(this.hex)?this.hex():"["+this._rgb.join(",")+"]"},F),c=(r.Color=s,r.version="2.4.2",r),Q=e.unpack,J=Math.max,Z=e.unpack,l=c,ee=s,u=o,te=e.unpack,ne=e.type,re=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Q(e,"rgb"),r=n[0],i=n[1],n=n[2],o=1-J(r/=255,J(i/=255,n/=255)),s=o<1?1/(1-o):0;return[(1-r-o)*s,(1-i-o)*s,(1-n-o)*s,o]},ie=(ee.prototype.cmyk=function(){return re(this._rgb)},l.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ee,[null].concat(e,["cmyk"])))},u.format.cmyk=q,u.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=te(e,"cmyk"),"array"===ne(e)&&4===e.length)return"cmyk"}}),e.unpack),oe=e.last,se=e.unpack,ae=e.unpack,ce=e.last,le=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ie(e,"hsla"),r=oe(e)||"lsa";return n[0]=i(n[0]||0),n[1]=i(100*n[1])+"%",n[2]=i(100*n[2])+"%","hsla"===r||3<n.length&&n[3]<1?(n[3]=3<n.length?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},ue=z,de=Math.round,he=e.unpack,fe=Math.round,pe=W,ge=o,me=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ve=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,ye=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,be=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,_e=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,we=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,xe=Math.round;V.test=function(e){return me.test(e)||ve.test(e)||ye.test(e)||be.test(e)||_e.test(e)||we.test(e)};function Se(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r,i,o,s=(t=Ge(t,"hcg"))[0],a=t[1],c=t[2],l=(c*=255,255*a);if(0===a)r=i=o=c;else{360<(s=360===s?0:s)&&(s-=360),s<0&&(s+=360);var u=Xe(s/=60),s=s-u,d=c*(1-a),h=d+l*(1-s),f=d+l*s,p=d+l;switch(u){case 0:r=(e=[p,f,d])[0],i=e[1],o=e[2];break;case 1:r=(e=[h,p,d])[0],i=e[1],o=e[2];break;case 2:r=(e=[d,p,f])[0],i=e[1],o=e[2];break;case 3:r=(e=[d,h,p])[0],i=e[1],o=e[2];break;case 4:r=(e=[f,d,p])[0],i=e[1],o=e[2];break;case 5:r=(e=[p,d,h])[0],i=e[1],o=e[2]}}return[r,i,o,3<t.length?t[3]:1]}function Ce(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(o=Je(e,"rgba"))[0],r=o[1],i=o[2],o=o[3],s=Ze(e)||"auto",a=(void 0===o&&(o=1),"auto"===s&&(s=o<1?"rgba":"rgb"),(a="000000"+(d(n)<<16|d(r)<<8|d(i)).toString(16)).substr(a.length-6)),c=(c="0"+d(255*o).toString(16)).substr(c.length-2);switch(s.toLowerCase()){case"rgba":return"#"+a+c;case"argb":return"#"+c+a;default:return"#"+a}}function ke(e){var t;if(e.match(et))return 3===(e=4!==e.length&&7!==e.length?e:e.substr(1)).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(t=parseInt(e,16))>>16,t>>8&255,255&t,1];if(e.match(tt))return 4===(e=5!==e.length&&9!==e.length?e:e.substr(1)).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),[(t=parseInt(e,16))>>24&255,t>>16&255,t>>8&255,Math.round((255&t)/255*100)/100];throw new Error("unknown hex color: "+e)}function Ae(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,o=(e=ut(e,"hsi"))[0],s=e[1],a=e[2];return isNaN(o)&&(o=0),isNaN(s)&&(s=0),360<o&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?r=1-((i=(1-s)/3)+(n=(1+s*f(h*o)/f(ht-h*o))/3)):o<2/3?i=1-((n=(1-s)/3)+(r=(1+s*f(h*(o-=1/3))/f(ht-h*o))/3)):n=1-((r=(1-s)/3)+(i=(1+s*f(h*(o-=2/3))/f(ht-h*o))/3)),[255*(n=dt(a*n*3)),255*(r=dt(a*r*3)),255*(i=dt(a*i*3)),3<e.length?e[3]:1]}function Ee(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r,i,o,s=(t=Ct(t,"hsv"))[0],a=t[1],c=t[2];if(c*=255,0===a)r=i=o=c;else{360<(s=360===s?0:s)&&(s-=360),s<0&&(s+=360);var l=kt(s/=60),s=s-l,u=c*(1-a),d=c*(1-a*s),h=c*(1-a*(1-s));switch(l){case 0:r=(e=[c,h,u])[0],i=e[1],o=e[2];break;case 1:r=(e=[d,c,u])[0],i=e[1],o=e[2];break;case 2:r=(e=[u,c,h])[0],i=e[1],o=e[2];break;case 3:r=(e=[u,d,c])[0],i=e[1],o=e[2];break;case 4:r=(e=[h,u,c])[0],i=e[1],o=e[2];break;case 5:r=(e=[c,u,d])[0],i=e[1],o=e[2]}}return[r,i,o,3<t.length?t[3]:1]}function Te(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(i=Nt(e,"rgb"))[0],r=i[1],i=i[2];return r=r,i=i,n=jt(n=n),r=jt(r),i=jt(i),[(i=116*(r=(n=[Pt((.4124564*n+.3575761*r+.1804375*i)/p.Xn),Pt((.2126729*n+.7151522*r+.072175*i)/p.Yn),Pt((.0193339*n+.119192*r+.9503041*i)/p.Zn)])[1])-16)<0?0:i,500*(n[0]-r),200*(r-n[2])]}function Oe(e){return 255*(e<=.00304?12.92*e:1.055*It(e,1/2.4)-.055)}function Ne(e){return e>g.t1?e*e*e:g.t2*(e-g.t0)}function Me(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=Lt(e,"lab"))[0],r=e[1],i=e[2],n=(n+16)/116,r=isNaN(r)?n:n+r/500,i=isNaN(i)?n:n-i/200;return n=g.Yn*Ne(n),r=g.Xn*Ne(r),i=g.Zn*Ne(i),[Oe(3.2404542*r-1.5371385*n-.4985314*i),Oe(-.969266*r+1.8760108*n+.041556*i),Oe(.0556434*r-.2040259*n+1.0572252*i),3<e.length?e[3]:1]}function je(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(i=Ft(e,"lab"))[0],r=i[1],i=i[2],o=zt(r*r+i*i),i=(Ut(i,r)*qt+360)%360;return[n,o,i=0===Wt(1e4*o)?Number.NaN:i]}function Pe(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(i=$t(e,"lch"))[0],r=i[1],i=i[2];return isNaN(i)&&(i=0),[n,Qt(i*=Yt)*r,Kt(i)*r]}function Le(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=Jt(e,"lch"))[0],r=e[1],i=e[2],r=(n=Zt(n,r,i))[0],i=n[1],n=n[2];return[(r=en(r,i,n))[0],r[1],r[2],3<e.length?e[3]:1]}function Ie(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=tn(e,"hcl").reverse();return nn.apply(void 0,n)}function De(e){if("number"==hn(e)&&0<=e&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)}function Re(e){var t,n,r=(e=e/100)<66?(t=255,n=e<6?0:-155.25485562709179-.44596950469579133*(n=e-2)+104.49216199393888*_(n),e<20?0:.8274096064007395*(r=e-10)-254.76935184120902+115.67994401066147*_(r)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*_(t),n=325.4494125711974+.07943456536662342*(n=e-50)-28.0852963507957*_(n),255);return[t,n,r,1]}function Be(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(i=Cn(e,"rgb"))[0],r=i[1],i=i[2],n=[Tn(n/255),Tn(r/255),Tn(i/255)],o=kn(.4122214708*(r=n[0])+.5363325363*(i=n[1])+.0514459929*(n=n[2])),s=kn(.2119034982*r+.6806995451*i+.1073969566*n),r=kn(.0883024619*r+.2817188376*i+.6299787005*n);return[.2104542553*o+.793617785*s-.0040720468*r,1.9779984951*o-2.428592205*s+.4505937099*r,.0259040371*o+.7827717662*s-.808675766*r]}var l=c,He=s,u=o,Fe=e.type,qe=U,ze=V,Ue=(He.prototype.css=function(e){return qe(this._rgb,e)},l.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(He,[null].concat(e,["css"])))},u.format.css=ze,u.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];if(!t.length&&"string"===Fe(e)&&ze.test(e))return"css"}}),s),l=c,u=o,We=e.unpack,Ve=(u.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=We(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},l.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ue,[null].concat(e,["gl"])))},Ue.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]},e.unpack),Ge=e.unpack,Xe=Math.floor,$e=e.unpack,Ye=e.type,u=c,Ke=s,l=o,Qe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=Ve(e,"rgb"),i=r[0],o=r[1],r=r[2],s=Math.min(i,o,r),a=Math.max(i,o,r),c=a-s;return 0==c?n=Number.NaN:(i===a&&(n=(o-r)/c),o===a&&(n=2+(r-i)/c),r===a&&(n=4+(i-o)/c),(n*=60)<0&&(n+=360)),[n,100*c/255,s/(255-c)*100]},Je=(Ke.prototype.hcg=function(){return Qe(this._rgb)},u.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ke,[null].concat(e,["hcg"])))},l.format.hcg=Se,l.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=$e(e,"hcg"),"array"===Ye(e)&&3===e.length)return"hcg"}}),e.unpack),Ze=e.last,d=Math.round,et=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,tt=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,u=c,nt=s,rt=e.type,l=o,it=Ce,ot=(nt.prototype.hex=function(e){return it(this._rgb,e)},u.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(nt,[null].concat(e,["hex"])))},l.format.hex=ke,l.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];if(!t.length&&"string"===rt(e)&&0<=[3,4,5,6,7,8,9].indexOf(e.length))return"hex"}}),e.unpack),st=e.TWOPI,at=Math.min,ct=Math.sqrt,lt=Math.acos,ut=e.unpack,dt=e.limit,h=e.TWOPI,ht=e.PITHIRD,f=Math.cos,ft=e.unpack,pt=e.type,u=c,gt=s,l=o,mt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=ot(e,"rgb"),i=r[0],o=r[1],r=r[2],s=at(i/=255,o/=255,r/=255),a=(i+o+r)/3,s=0<a?1-s/a:0;return 0==s?n=NaN:(n=(i-o+(i-r))/2,n/=ct((i-o)*(i-o)+(i-r)*(o-r)),n=lt(n),o<r&&(n=st-n),n/=st),[360*n,s,a]},vt=(gt.prototype.hsi=function(){return mt(this._rgb)},u.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(gt,[null].concat(e,["hsi"])))},l.format.hsi=Ae,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ft(e,"hsi"),"array"===pt(e)&&3===e.length)return"hsi"}}),e.unpack),yt=e.type,u=c,bt=s,l=o,_t=z,wt=(bt.prototype.hsl=function(){return _t(this._rgb)},u.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(bt,[null].concat(e,["hsl"])))},l.format.hsl=W,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=vt(e,"hsl"),"array"===yt(e)&&3===e.length)return"hsl"}}),e.unpack),xt=Math.min,St=Math.max,Ct=e.unpack,kt=Math.floor,At=e.unpack,Et=e.type,u=c,Tt=s,l=o,Ot=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i=(e=wt(e,"rgb"))[0],o=e[1],s=e[2],a=xt(i,o,s),c=St(i,o,s),a=c-a;return 0===c?(n=Number.NaN,r=0):(r=a/c,i===c&&(n=(o-s)/a),o===c&&(n=2+(s-i)/a),s===c&&(n=4+(i-o)/a),(n*=60)<0&&(n+=360)),[n,r,c/255]},u=(Tt.prototype.hsv=function(){return Ot(this._rgb)},u.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Tt,[null].concat(e,["hsv"])))},l.format.hsv=Ee,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=At(e,"hsv"),"array"===Et(e)&&3===e.length)return"hsv"}}),{Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452}),p=u,Nt=e.unpack,Mt=Math.pow,jt=function(e){return(e/=255)<=.04045?e/12.92:Mt((e+.055)/1.055,2.4)},Pt=function(e){return e>p.t3?Mt(e,1/3):e/p.t2+p.t0},g=u,Lt=e.unpack,It=Math.pow,Dt=e.unpack,Rt=e.type,l=c,Bt=s,m=o,Ht=Te,Ft=(Bt.prototype.lab=function(){return Ht(this._rgb)},l.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Bt,[null].concat(e,["lab"])))},m.format.lab=Me,m.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Dt(e,"lab"),"array"===Rt(e)&&3===e.length)return"lab"}}),e.unpack),qt=e.RAD2DEG,zt=Math.sqrt,Ut=Math.atan2,Wt=Math.round,Vt=e.unpack,Gt=Te,Xt=je,$t=e.unpack,Yt=e.DEG2RAD,Kt=Math.sin,Qt=Math.cos,Jt=e.unpack,Zt=Pe,en=Me,tn=e.unpack,nn=Le,rn=e.unpack,on=e.type,l=c,v=s,sn=o,an=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Vt(e,"rgb"),r=n[0],i=n[1],n=n[2],r=Gt(r,i,n),i=r[0],n=r[1],r=r[2];return Xt(i,n,r)},m=(v.prototype.lch=function(){return an(this._rgb)},v.prototype.hcl=function(){return an(this._rgb).reverse()},l.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(v,[null].concat(e,["lch"])))},l.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(v,[null].concat(e,["hcl"])))},sn.format.lch=Le,sn.format.hcl=Ie,["lch","hcl"].forEach(function(n){return sn.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=rn(e,n),"array"===on(e)&&3===e.length)return n}})}),{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}),l=s,y=o,cn=e.type,b=m,ln=ke,un=Ce,dn=(l.prototype.name=function(){for(var e=un(this._rgb,"rgb"),t=0,n=Object.keys(b);t<n.length;t+=1){var r=n[t];if(b[r]===e)return r.toLowerCase()}return e},y.format.named=function(e){if(e=e.toLowerCase(),b[e])return ln(b[e]);throw new Error("unknown color name: "+e)},y.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];if(!t.length&&"string"===cn(e)&&b[e.toLowerCase()])return"named"}}),e.unpack),hn=e.type,l=c,fn=s,y=o,pn=e.type,gn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=dn(e,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},l=(fn.prototype.num=function(){return gn(this._rgb)},l.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(fn,[null].concat(e,["num"])))},y.format.num=De,y.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===pn(e[0])&&0<=e[0]&&e[0]<=16777215)return"num"}}),c),mn=s,y=o,vn=e.unpack,yn=e.type,bn=Math.round,_=(mn.prototype.rgb=function(e){return!1===(e=void 0===e?!0:e)?this._rgb.slice(0,3):this._rgb.slice(0,3).map(bn)},mn.prototype.rgba=function(n){return void 0===n&&(n=!0),this._rgb.slice(0,4).map(function(e,t){return!(t<3)||!1===n?e:bn(e)})},l.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(mn,[null].concat(e,["rgb"])))},y.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=vn(e,"rgba");return void 0===n[3]&&(n[3]=1),n},y.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=vn(e,"rgba"),"array"===yn(e)&&(3===e.length||4===e.length&&"number"==yn(e[3])&&0<=e[3]&&e[3]<=1))return"rgb"}}),Math.log),_n=Re,wn=e.unpack,xn=Math.round,l=c,w=s,y=o,Sn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=wn(e,"rgb"),r=n[0],i=n[2],o=1e3,s=4e4;.4<s-o;){var a,c=_n(a=.5*(s+o));c[2]/c[0]>=i/r?s=a:o=a}return xn(a)},Cn=(w.prototype.temp=w.prototype.kelvin=w.prototype.temperature=function(){return Sn(this._rgb)},l.temp=l.kelvin=l.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(w,[null].concat(e,["temp"])))},y.format.temp=y.format.kelvin=y.format.temperature=Re,e.unpack),kn=Math.cbrt,An=Math.pow,En=Math.sign;function Tn(e){var t=Math.abs(e);return t<.04045?e/12.92:(En(e)||1)*An((t+.055)/1.055,2.4)}function On(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=Nn(e,"lab"))[0],r=e[1],i=e[2],o=x(n+.3963377774*r+.2158037573*i,3),s=x(n-.1055613458*r-.0638541728*i,3),n=x(n-.0894841775*r-1.291485548*i,3);return[255*jn(4.0767416621*o-3.3077115913*s+.2309699292*n),255*jn(-1.2684380046*o+2.6097574011*s-.3413193965*n),255*jn(-.0041960863*o-.7034186147*s+1.707614701*n),3<e.length?e[3]:1]}var Nn=e.unpack,x=Math.pow,Mn=Math.sign;function jn(e){var t=Math.abs(e);return.0031308<t?(Mn(e)||1)*(1.055*x(t,1/2.4)-.055):12.92*e}function Pn(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=qn(e,"lch"))[0],r=e[1],i=e[2],r=(n=zn(n,r,i))[0],i=n[1],n=n[2];return[(r=Un(r,i,n))[0],r[1],r[2],3<e.length?e[3]:1]}var Ln=e.unpack,In=e.type,l=c,Dn=s,y=o,Rn=Be,Bn=(Dn.prototype.oklab=function(){return Rn(this._rgb)},l.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Dn,[null].concat(e,["oklab"])))},y.format.oklab=On,y.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ln(e,"oklab"),"array"===In(e)&&3===e.length)return"oklab"}}),e.unpack),Hn=Be,Fn=je,qn=e.unpack,zn=Pe,Un=On,Wn=e.unpack,Vn=e.type,l=c,Gn=s,y=o,Xn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Bn(e,"rgb"),r=n[0],i=n[1],n=n[2],r=Hn(r,i,n),i=r[0],n=r[1],r=r[2];return Fn(i,n,r)},$n=(Gn.prototype.oklch=function(){return Xn(this._rgb)},l.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Gn,[null].concat(e,["oklch"])))},y.format.oklch=Pn,y.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Wn(e,"oklch"),"array"===Vn(e)&&3===e.length)return"oklch"}}),s),Yn=e.type;$n.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===Yn(e)?t?(this._rgb[3]=e,this):new $n([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};s.prototype.clipped=function(){return this._rgb._clipped||!1};var S=s,Kn=u;S.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=Kn.Kn*e,new S(t,"lab").alpha(this.alpha(),!0)},S.prototype.brighten=function(e){return this.darken(-(e=void 0===e?1:e))},S.prototype.darker=S.prototype.darken,S.prototype.brighter=S.prototype.brighten;function Qn(e,t,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;0<i--;)r[i]=arguments[i+3];var o=r[0]||"lrgb";if(A[o]||r.length||(o=Object.keys(A)[0]),A[o])return"object"!==or(e)&&(e=new ir(e)),"object"!==or(t)&&(t=new ir(t)),A[o](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()));throw new Error("interpolation mode "+o+" is not defined")}function C(e,t,n,r){var i,o,s,a,c,l,u,d,h,f;return"hsl"===r?(f=e.hsl(),i=t.hsl()):"hsv"===r?(f=e.hsv(),i=t.hsv()):"hcg"===r?(f=e.hcg(),i=t.hcg()):"hsi"===r?(f=e.hsi(),i=t.hsi()):"lch"===r||"hcl"===r?(r="hcl",f=e.hcl(),i=t.hcl()):"oklch"===r&&(f=e.oklch().reverse(),i=t.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(o=(e=f)[0],a=e[1],l=e[2],s=(t=i)[0],c=t[1],u=t[2]),isNaN(o)||isNaN(s)?isNaN(o)?isNaN(s)?h=Number.NaN:(h=s,1!=l&&0!=l||"hsv"==r||(d=c)):(h=o,1!=u&&0!=u||"hsv"==r||(d=a)):h=o+n*(o<s&&180<s-o?s-(o+360):s<o&&180<o-s?s+360-o:s-o),void 0===d&&(d=a+n*(c-a)),f=l+n*(u-l),new mr("oklch"===r?[f,d,h]:[h,d,f],r)}function Jn(e,t,n){return vr(e,t,n,"lch")}function Zn(l){function n(e){if((e=e||["#fff","#000"])&&"string"===O(e)&&T.brewer&&T.brewer[e.toLowerCase()]&&(e=T.brewer[e.toLowerCase()]),"array"===O(e)){e=(e=1===e.length?[e[0],e[0]]:e).slice(0);for(var t=0;t<e.length;t++)e[t]=T(e[t]);for(var n=c.length=0;n<e.length;n++)c.push(n/(e.length-1))}r(),g=e}function u(e,t){var n,r;if(null==t&&(t=!1),isNaN(e)||null===e)return a;if(r=t?e:p&&2<p.length?w(e)/(p.length-2):v!==m?(e-m)/(v-m):1,r=S(r),t||(r=x(r)),1!==_&&(r=Pr(r,_)),r=f[0]+r*(1-f[0]-f[1]),r=Math.min(1,Math.max(0,r)),e=Math.floor(1e4*r),b&&y[e])n=y[e];else{if("array"===O(g))for(var i=0;i<c.length;i++){var o=c[i];if(r<=o){n=g[i];break}if(o<=r&&i===c.length-1){n=g[i];break}if(o<r&&r<c[i+1]){r=(r-o)/(c[i+1]-o),n=T.interpolate(g[i],g[i+1],r,s);break}}else"function"===O(g)&&(n=g(r));b&&(y[e]=n)}return n}function r(){y={}}function d(e){return e=T(u(e)),i&&e[i]?e[i]():e}var s="rgb",a=T("#ccc"),t=0,h=[0,1],c=[],f=[0,0],p=!1,g=[],i=!1,m=0,v=1,y={},b=!0,_=1,w=function(e){if(null==p)return 0;for(var t=p.length-1,n=0;n<t&&e>=p[n];)n++;return n-1},x=function(e){return e},S=function(e){return e};return n(l),d.classes=function(e){var t;return null!=e?("array"===O(e)?h=[(p=e)[0],e[e.length-1]]:(t=T.analyze(h),p=0===e?[t.min,t.max]:T.limits(t,"e",e)),d):p},d.domain=function(n){if(!arguments.length)return h;m=n[0],v=n[n.length-1],c=[];var e=g.length;if(n.length===e&&m!==v)for(var t=0,r=Array.from(n);t<r.length;t+=1){var i=r[t];c.push((i-m)/(v-m))}else{for(var o,s,a=0;a<e;a++)c.push(a/(e-1));2<n.length&&(o=n.map(function(e,t){return t/(n.length-1)}),(s=n.map(function(e){return(e-m)/(v-m)})).every(function(e,t){return o[t]===e})||(S=function(e){if(e<=0||1<=e)return e;for(var t=0;e>=s[t+1];)t++;var n=(e-s[t])/(s[t+1]-s[t]);return o[t]+n*(o[t+1]-o[t])}))}return h=[m,v],d},d.mode=function(e){return arguments.length?(s=e,r(),d):s},d.range=function(e,t){return n(e),d},d.out=function(e){return i=e,d},d.spread=function(e){return arguments.length?(t=e,d):t},d.correctLightness=function(e){return r(),x=(e=null==e?!0:e)?function(e){for(var t=u(0,!0).lab()[0],n=u(1,!0).lab()[0],r=n<t,i=u(e,!0).lab()[0],o=t+(n-t)*e,s=i-o,a=0,c=1,l=20;.01<Math.abs(s)&&0<l--;)r&&(s*=-1),e+=s<0?.5*(c-(a=e)):.5*(a-(c=e)),i=u(e,!0).lab()[0],s=i-o;return e}:function(e){return e},d},d.padding=function(e){return null!=e?("number"===O(e)&&(e=[e,e]),f=e,d):f},d.colors=function(t,n){arguments.length<2&&(n="hex");var e=[];if(0===arguments.length)e=g.slice(0);else if(1===t)e=[d(.5)];else if(1<t)var r=h[0],i=h[1]-r,e=function(e,t,n){for(var r=[],i=e<t,o=n?i?t+1:t-1:t,s=e;i?s<o:o<s;i?s++:s--)r.push(s);return r}(0,t,!1).map(function(e){return d(r+e/(t-1)*i)});else{l=[];var o=[];if(p&&2<p.length)for(var s=1,a=p.length,c=1<=a;c?s<a:a<s;c?s++:s--)o.push(.5*(p[s-1]+p[s]));else o=h;e=o.map(d)}return e=T[n]?e.map(function(e){return e[n]()}):e},d.cache=function(e){return null!=e?(b=e,d):b},d.gamma=function(e){return null!=e?(_=e,d):_},d.nodata=function(e){return null!=e?(a=T(e),d):a},d}s.prototype.get=function(e){var e=e.split("."),t=e[0],e=e[1],n=this[t]();if(e){var r=t.indexOf(e)-("ok"===t.substr(0,2)?2:0);if(-1<r)return n[r];throw new Error("unknown channel "+e+" in mode "+t)}return n};var k=s,er=e.type,tr=Math.pow,nr=(k.prototype.luminance=function(i){var o,s,a,e;return void 0!==i&&"number"===er(i)?0===i?new k([0,0,0,this._rgb[3]],"rgb"):1===i?new k([255,255,255,this._rgb[3]],"rgb"):(e=this.luminance(),o="rgb",s=20,a=function(e,t){var n=e.interpolate(t,.5,o),r=n.luminance();return Math.abs(i-r)<1e-7||!s--?n:i<r?a(e,n):a(n,t)},e=(i<e?a(new k([0,0,0]),this):a(this,new k([255,255,255]))).rgb(),new k(e.concat([this._rgb[3]]))):nr.apply(void 0,this._rgb.slice(0,3))},function(e,t,n){return.2126*(e=rr(e))+.7152*(t=rr(t))+.0722*(n=rr(n))}),rr=function(e){return(e/=255)<=.03928?e/12.92:tr((e+.055)/1.055,2.4)},o={},ir=s,or=e.type,A=o,l=s,sr=Qn,ar=(l.prototype.mix=l.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],r=arguments.length-2;0<r--;)n[r]=arguments[r+2];return sr.apply(void 0,[this,e,t].concat(n))},s),cr=(ar.prototype.premultiply=function(e){var t=this._rgb,n=t[3];return(e=void 0===e?!1:e)?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new ar([t[0]*n,t[1]*n,t[2]*n,n],"rgb")},s),lr=u,ur=(cr.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=lr.Kn*e,t[1]<0&&(t[1]=0),new cr(t,"lch").alpha(this.alpha(),!0)},cr.prototype.desaturate=function(e){return this.saturate(-(e=void 0===e?1:e))},s),dr=e.type,hr=(ur.prototype.set=function(e,t,n){void 0===n&&(n=!1);var e=e.split("."),r=e[0],e=e[1],i=this[r]();if(e){var o=r.indexOf(e)-("ok"===r.substr(0,2)?2:0);if(-1<o){if("string"==dr(t))switch(t.charAt(0)){case"+":case"-":i[o]+=+t;break;case"*":i[o]*=+t.substr(1);break;case"/":i[o]/=+t.substr(1);break;default:i[o]=+t}else{if("number"!==dr(t))throw new Error("unsupported value for Color.set");i[o]=t}var s=new ur(i,r);return n?(this._rgb=s._rgb,this):s}throw new Error("unknown channel "+e+" in mode "+r)}return i},s),fr=(o.rgb=function(e,t,n){e=e._rgb,t=t._rgb;return new hr(e[0]+n*(t[0]-e[0]),e[1]+n*(t[1]-e[1]),e[2]+n*(t[2]-e[2]),"rgb")},s),pr=Math.sqrt,E=Math.pow,gr=(o.lrgb=function(e,t,n){var e=e._rgb,r=e[0],i=e[1],e=e[2],t=t._rgb,o=t[0],s=t[1],t=t[2];return new fr(pr(E(r,2)*(1-n)+E(o,2)*n),pr(E(i,2)*(1-n)+E(s,2)*n),pr(E(e,2)*(1-n)+E(t,2)*n),"rgb")},s),mr=(o.lab=function(e,t,n){e=e.lab(),t=t.lab();return new gr(e[0]+n*(t[0]-e[0]),e[1]+n*(t[1]-e[1]),e[2]+n*(t[2]-e[2]),"lab")},s),vr=C,yr=(o.lch=Jn,o.hcl=Jn,s),br=(o.num=function(e,t,n){e=e.num(),t=t.num();return new yr(e+n*(t-e),"num")},C),_r=(o.hcg=function(e,t,n){return br(e,t,n,"hcg")},C),wr=(o.hsi=function(e,t,n){return _r(e,t,n,"hsi")},C),xr=(o.hsl=function(e,t,n){return wr(e,t,n,"hsl")},C),Sr=(o.hsv=function(e,t,n){return xr(e,t,n,"hsv")},s),Cr=(o.oklab=function(e,t,n){e=e.oklab(),t=t.oklab();return new Sr(e[0]+n*(t[0]-e[0]),e[1]+n*(t[1]-e[1]),e[2]+n*(t[2]-e[2]),"oklab")},C),kr=(o.oklch=function(e,t,n){return Cr(e,t,n,"oklch")},s),Ar=e.clip_rgb,Er=Math.pow,Tr=Math.sqrt,Or=Math.PI,Nr=Math.cos,Mr=Math.sin,jr=Math.atan2,T=c,O=e.type,Pr=Math.pow;for(var N=s,Lr=Zn,Ir=function(e){for(var t=[1,1],n=1;n<e;n++){for(var r=[1],i=1;i<=t.length;i++)r[i]=(t[i]||0)+t[i-1];t=r}return t},Dr=c,M=function(e,t,n){if(M[n])return M[n](e,t);throw new Error("unknown blend mode "+n)},y=function(n){return function(e,t){t=Dr(t).rgb(),e=Dr(e).rgb();return Dr.rgb(n(t,e))}},l=function(r){return function(e,t){var n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n}},u=(M.normal=y(l(function(e){return e})),M.multiply=y(l(function(e,t){return e*t/255})),M.screen=y(l(function(e,t){return 255*(1-(1-e/255)*(1-t/255))})),M.overlay=y(l(function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))})),M.darken=y(l(function(e,t){return t<e?t:e})),M.lighten=y(l(function(e,t){return t<e?e:t})),M.dodge=y(l(function(e,t){return 255===e||255<(e=t/255*255/(1-e/255))?255:e})),M.burn=y(l(function(e,t){return 255*(1-(1-t/255)/(e/255))})),M),Rr=e.type,Br=e.clip_rgb,Hr=e.TWOPI,Fr=Math.pow,qr=Math.sin,zr=Math.cos,Ur=c,Wr=s,Vr=Math.floor,Gr=Math.random,Xr=n,$r=Math.log,Yr=Math.pow,Kr=Math.floor,Qr=Math.abs,Jr=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return(e="object"===Xr(e)?Object.values(e):e).forEach(function(e){null==(e=t&&"object"===Xr(e)?e[t]:e)||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),n.max<e&&(n.max=e),n.count+=1)}),n.domain=[n.min,n.max],n.limits=function(e,t){return Zr(n,e,t)},n},Zr=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7);var r=(e="array"==Xr(e)?Jr(e):e).min,i=e.max,o=e.values.sort(function(e,t){return e-t});if(1===n)return[r,i];var s=[];if("c"===t.substr(0,1)&&(s.push(r),s.push(i)),"e"===t.substr(0,1)){s.push(r);for(var a=1;a<n;a++)s.push(r+a/n*(i-r));s.push(i)}else if("l"===t.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var c=Math.LOG10E*$r(r),D=Math.LOG10E*$r(i);s.push(r);for(var l=1;l<n;l++)s.push(Yr(10,c+l/n*(D-c)));s.push(i)}else if("q"===t.substr(0,1)){s.push(r);for(var u=1;u<n;u++){var d=(o.length-1)*u/n,h=Kr(d);s.push(h===d?o[h]:o[h]*(1-(d=d-h))+o[h+1]*d)}s.push(i)}else if("k"===t.substr(0,1)){var f,p=o.length,g=new Array(p),m=new Array(n),v=!0,R=0,y=null;(y=[]).push(r);for(var b=1;b<n;b++)y.push(r+b/n*(i-r));for(y.push(i);v;){for(var _=0;_<n;_++)m[_]=0;for(var w=0;w<p;w++)for(var B=o[w],H=Number.MAX_VALUE,x=void 0,S=0;S<n;S++){var F=Qr(y[S]-B);F<H&&(H=F,x=S),m[x]++,g[w]=x}for(var C=new Array(n),k=0;k<n;k++)C[k]=null;for(var A=0;A<p;A++)null===C[f=g[A]]?C[f]=o[A]:C[f]+=o[A];for(var E=0;E<n;E++)C[E]*=1/m[E];for(var v=!1,T=0;T<n;T++)if(C[T]!==y[T]){v=!0;break}y=C,200<++R&&(v=!1)}for(var O={},N=0;N<n;N++)O[N]=[];for(var M=0;M<p;M++)O[f=g[M]].push(o[M]);for(var j=[],P=0;P<n;P++)j.push(O[P][0]),j.push(O[P][O[P].length-1]);j=j.sort(function(e,t){return e-t}),s.push(j[0]);for(var L=1;L<j.length;L+=2){var I=j[L];isNaN(I)||-1!==s.indexOf(I)||s.push(I)}}return s},o=Jr,y=Zr,ei=s,ti=s,j=Math.sqrt,P=Math.pow,ni=Math.min,ri=Math.max,ii=Math.atan2,oi=Math.abs,L=Math.cos,si=Math.sin,ai=Math.exp,ci=Math.PI,li=s,ui=s,di=c,hi=Zn,l={cool:function(){return hi([di.hsl(180,1,.9),di.hsl(250,.7,.4)])},hot:function(){return hi(["#000","#f00","#ff0","#fff"]).mode("rgb")}},I={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},fi=0,pi=Object.keys(I);fi<pi.length;fi+=1){var gi=pi[fi];I[gi.toLowerCase()]=I[gi]}e=I,s=c;return s.average=function(e,o,s){void 0===o&&(o="lrgb"),void 0===s&&(s=null);var t=e.length,n=t/(s=s||Array.from(new Array(t)).map(function(){return 1})).reduce(function(e,t){return e+t});if(s.forEach(function(e,t){s[t]*=n}),e=e.map(function(e){return new kr(e)}),"lrgb"===o){for(var r=e,i=s,a=r.length,c=[0,0,0,0],l=0;l<r.length;l++){var u=r[l];var d=i[l]/a;u=u._rgb;c[0]+=Er(u[0],2)*d;c[1]+=Er(u[1],2)*d;c[2]+=Er(u[2],2)*d;c[3]+=u[3]*d}if(c[0]=Tr(c[0]),c[1]=Tr(c[1]),c[2]=Tr(c[2]),c[3]>.9999999)c[3]=1;return new kr(Ar(c))}for(var h,f=e.shift(),p=f.get(o),g=[],m=0,v=0,y=0;y<p.length;y++)p[y]=(p[y]||0)*s[0],g.push(isNaN(p[y])?0:s[0]),"h"!==o.charAt(y)||isNaN(p[y])||(h=p[y]/180*Or,m+=Nr(h)*s[0],v+=Mr(h)*s[0]);var b=f.alpha()*s[0];e.forEach(function(e,t){var n=e.get(o);b+=e.alpha()*s[t+1];for(var r,i=0;i<p.length;i++)isNaN(n[i])||(g[i]+=s[t+1],"h"===o.charAt(i)?(r=n[i]/180*Or,m+=Nr(r)*s[t+1],v+=Mr(r)*s[t+1]):p[i]+=n[i]*s[t+1])});for(var _=0;_<p.length;_++)if("h"===o.charAt(_)){for(var w=jr(v/g[_],m/g[_])/Or*180;w<0;)w+=360;for(;360<=w;)w-=360;p[_]=w}else p[_]=p[_]/g[_];return b/=t,new kr(p,o).alpha(.99999<b?1:b,!0)},s.bezier=function(e){var t=function(e){if(2===(e=e.map(function(e){return new N(e)})).length)s=e.map(function(e){return e.lab()}),n=s[0],r=s[1],s=function(t){var e=[0,1,2].map(function(e){return n[e]+t*(r[e]-n[e])});return new N(e,"lab")};else if(3===e.length)t=e.map(function(e){return e.lab()}),n=t[0],r=t[1],i=t[2],s=function(t){var e=[0,1,2].map(function(e){return(1-t)*(1-t)*n[e]+2*(1-t)*t*r[e]+t*t*i[e]});return new N(e,"lab")};else if(4===e.length)var t,n=(t=e.map(function(e){return e.lab()}))[0],r=t[1],i=t[2],o=t[3],s=function(t){var e=[0,1,2].map(function(e){return(1-t)*(1-t)*(1-t)*n[e]+3*(1-t)*(1-t)*t*r[e]+3*(1-t)*t*t*i[e]+t*t*t*o[e]});return new N(e,"lab")};else{if(!(5<=e.length))throw new RangeError("No point in running bezier with only one color.");var a=e.map(function(e){return e.lab()}),c=e.length-1,l=Ir(c);s=function(i){var o=1-i,e=[0,1,2].map(function(r){return a.reduce(function(e,t,n){return e+l[n]*Math.pow(o,c-n)*Math.pow(i,n)*t[r]},0)});return new N(e,"lab")}}return s}(e);return t.scale=function(){return Lr(t)},t},s.blend=u,s.cubehelix=function(i,o,s,a,c){void 0===i&&(i=300),void 0===o&&(o=-1.5),void 0===s&&(s=1),void 0===a&&(a=1);function t(e){var t=Hr*((i+120)/360+o*e),n=Fr(c[0]+l*e,a),e=(0!==u?s[0]+e*u:s)*n*(1-n)/2,r=zr(t),t=qr(t);return Ur(Br([255*(n+e*(-.14861*r+1.78277*t)),255*(n+e*(-.29227*r-.90649*t)),255*(n+1.97294*r*e),1]))}var l,u=0;"array"===Rr(c=void 0===c?[0,1]:c)?l=c[1]-c[0]:(l=0,c=[c,c]);return t.start=function(e){return null==e?i:(i=e,t)},t.rotations=function(e){return null==e?o:(o=e,t)},t.gamma=function(e){return null==e?a:(a=e,t)},t.hue=function(e){return null==e?s:("array"===Rr(s=e)?0===(u=s[1]-s[0])&&(s=s[1]):u=0,t)},t.lightness=function(e){return null==e?c:(l="array"===Rr(e)?(c=e)[1]-e[0]:(c=[e,e],0),t)},t.scale=function(){return Ur.scale(t)},t.hue(s),t},s.mix=s.interpolate=Qn,s.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(Vr(16*Gr()));return new Wr(e,"hex")},s.scale=Zn,s.analyze=o,s.contrast=function(e,t){e=new ei(e),t=new ei(t);e=e.luminance(),t=t.luminance();return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)},s.deltaE=function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=1);function o(e){return 360*e/(2*ci)}function s(e){return 2*ci*e/360}e=new ti(e),t=new ti(t);var e=Array.from(e.lab()),a=e[0],c=e[1],e=e[2],t=Array.from(t.lab()),l=t[0],u=t[1],t=t[2],d=(a+l)/2,h=(j(P(c,2)+P(e,2))+j(P(u,2)+P(t,2)))/2,h=.5*(1-j(P(h,7)/(P(h,7)+P(25,7)))),c=c*(1+h),u=u*(1+h),h=j(P(c,2)+P(e,2)),f=j(P(u,2)+P(t,2)),p=(h+f)/2,e=o(ii(e,c)),c=o(ii(t,u)),t=0<=e?e:e+360,u=0<=c?c:c+360,e=180<oi(t-u)?(t+u+360)/2:(t+u)/2,c=1-.17*L(s(e-30))+.24*L(s(2*e))+.32*L(s(3*e+6))-.2*L(s(4*e-63)),g=oi(g=u-t)<=180?g:u<=t?360+g:g-360,u=(g=2*j(h*f)*si(s(g)/2),l-a),t=f-h,l=1+.015*P(d-50,2)/j(20+P(d-50,2)),a=1+.045*p,f=1+.015*p*c,h=30*ai(-P((e-275)/25,2)),d=-(2*j(P(p,7)/(P(p,7)+P(25,7))))*si(2*s(h)),c=j(P(u/(n*l),2)+P(t/(r*a),2)+P(g/(i*f),2)+t/(r*a)*d*(g/(i*f)));return ri(0,ni(100,c))},s.distance=function(e,t,n){void 0===n&&(n="lab"),e=new li(e),t=new li(t);var r,i=e.get(n),o=t.get(n),s=0;for(r in i){var a=(i[r]||0)-(o[r]||0);s+=a*a}return Math.sqrt(s)},s.limits=y,s.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(ui,[null].concat(e))),!0}catch(e){return!1}},s.scales=l,s.colors=m,s.brewer=e,s},"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):(r="undefined"!=typeof globalThis?globalThis:r||self).chroma=i()},{}],2:[function(e,t,n){t.exports=e("./vendor/dat.gui"),t.exports.color=e("./vendor/dat.color")},{"./vendor/dat.color":3,"./vendor/dat.gui":4}],3:[function(e,t,n){var o,r,i,s,a,c,l,u,d,h,f,p,g,t=t.exports={};function m(){if(this.__state=s.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1}function v(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"!==this.__state.space&&b(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(b(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function y(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"!==this.__state.space&&_(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(_(this),this.__state.space="HSV"),this.__state[t]=e}})}function b(e,t,n){if("HEX"===e.__state.space)e.__state[t]=a.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw"Corrupted color state";l.extend(e.__state,a.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function _(e){var t=a.rgb_to_hsv(e.r,e.g,e.b);l.extend(e.__state,{s:t.s,v:t.v}),l.isNaN(t.h)?l.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h}t.color=t.color||{},t.utils=t.utils||{},t.utils.common=(o=Array.prototype.forEach,r=Array.prototype.slice,{BREAK:{},extend:function(n){return this.each(r.call(arguments,1),function(e){for(var t in e)this.isUndefined(e[t])||(n[t]=e[t])},this),n},defaults:function(n){return this.each(r.call(arguments,1),function(e){for(var t in e)this.isUndefined(n[t])&&(n[t]=e[t])},this),n},compose:function(){var n=r.call(arguments);return function(){for(var e=r.call(arguments),t=n.length-1;0<=t;t--)e=[n[t].apply(this,e)];return e[0]}},each:function(e,t,n){if(o&&e.forEach===o)e.forEach(t,n);else if(e.length===e.length+0){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var r in e)if(t.call(n,e[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():r.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),t.color.toString=(i=t.utils.common,function(e){if(1==e.a||i.isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}),t.Color=t.color.Color=(s=t.color.interpret=(d=t.color.toString,h=t.utils.common,g=[{litmus:h.isString,conversions:{THREE_CHAR_HEX:{read:function(e){e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:d},SIX_CHAR_HEX:{read:function(e){e=e.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:d},CSS_RGB:{read:function(e){e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:d},CSS_RGBA:{read:function(e){e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:d}}},{litmus:h.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:h.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:h.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(h.isNumber(e.r)&&h.isNumber(e.g)&&h.isNumber(e.b)&&h.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(h.isNumber(e.r)&&h.isNumber(e.g)&&h.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(h.isNumber(e.h)&&h.isNumber(e.s)&&h.isNumber(e.v)&&h.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(h.isNumber(e.h)&&h.isNumber(e.s)&&h.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],function(){p=!1;var n=1<arguments.length?h.toArray(arguments):arguments[0];return h.each(g,function(e){if(e.litmus(n))return h.each(e.conversions,function(e,t){if(f=e.read(n),!1===p&&!1!==f)return(p=f).conversionName=t,f.conversion=e,h.BREAK}),h.BREAK}),p}),a=t.color.math={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,e=e/60-Math.floor(e/60),i=n*(1-t),o=n*(1-e*t),e=n*(1-(1-e)*t),t=[[n,e,i],[o,n,i],[i,n,e],[i,o,n],[e,i,n],[n,i,o]][r];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),r=i-r;return 0==i?{h:NaN,s:0,v:0}:(n=e==i?(t-n)/r:t==i?2+(n-e)/r:4+(e-t)/r,(n/=6)<0&&(n+=1),{h:360*n,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t);return this.hex_with_component(e,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(u=8*t)|e&~(255<<u)}},c=t.color.toString,l=t.utils.common,m.COMPONENTS=["r","g","b","h","s","v","hex","a"],l.extend(m.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),v(m.prototype,"r",2),v(m.prototype,"g",1),v(m.prototype,"b",0),y(m.prototype,"h"),y(m.prototype,"s"),y(m.prototype,"v"),Object.defineProperty(m.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(m.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=a.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),m)},{}],4:[function(D,e,R){var B,r,c,H,F,i,q,o,z,l,U,u,W,V,G,X,s,a,$,Y,t,K,Q,J,Z,ee,te,ne,re,ie,h,f,oe,p,g,m,se,n,ae,v,d,ce,y,le,ue,b,de,he,_,fe,w,pe,ge,me,ve,ye,be,_e,x,S,C,k,e=e.exports={};function we(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}function A(e){return"0"===e||c.isUndefined(e)||(e=e.match(F),c.isNull(e))?0:parseFloat(e[1])}function E(e,t,n){E.superclass.call(this,e,t);var r,i=this;this.__select=document.createElement("select"),o.isArray(n)&&(r={},o.each(n,function(e){r[e]=e}),n=r),o.each(n,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),i.__select.appendChild(n)}),this.updateDisplay(),q.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;i.setValue(e)}),this.domElement.appendChild(this.__select)}function T(e,t,n){T.superclass.call(this,e,t),this.__min=(n=n||{}).min,this.__max=n.max,this.__step=n.step,z.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=-1<(e=(e=this.__impliedStep).toString()).indexOf(".")?e.length-e.indexOf(".")-1:0}function O(e,t,n){this.__truncationSuspended=!1,O.superclass.call(this,e,t,n);var r,i=this;function o(){var e=parseFloat(i.__input.value);U.isNaN(e)||i.setValue(e)}function s(e){var t=r-e.clientY;i.setValue(i.getValue()+t*i.__impliedStep),r=e.clientY}function a(){l.unbind(window,"mousemove",s),l.unbind(window,"mouseup",a)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),l.bind(this.__input,"change",o),l.bind(this.__input,"blur",function(){o(),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),l.bind(this.__input,"mousedown",function(e){l.bind(window,"mousemove",s),l.bind(window,"mouseup",a),r=e.clientY}),l.bind(this.__input,"keydown",function(e){13===e.keyCode&&(i.__truncationSuspended=!0,this.blur(),i.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)}function N(e,t,n,r,i){N.superclass.call(this,e,t,{min:n,max:r,step:i});var o=this;function s(e){e.preventDefault();var t,n,r=u.getOffset(o.__background),i=u.getWidth(o.__background);return o.setValue((e=e.clientX,t=r.left,r=r.left+i,i=o.__min,n=o.__max,i+(e-t)/(r-t)*(n-i))),!1}function a(){u.unbind(window,"mousemove",s),u.unbind(window,"mouseup",a),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),u.bind(this.__background,"mousedown",function(e){u.bind(window,"mousemove",s),u.bind(window,"mouseup",a),s(e)}),u.addClass(this.__background,"slider"),u.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)}function xe(e,t,n){xe.superclass.call(this,e,t);var r=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===n?"Fire":n,V.bind(this.__button,"click",function(e){return e.preventDefault(),r.fire(),!1}),V.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)}function M(e,t){M.superclass.call(this,e,t);var n=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),G.bind(this.__checkbox,"change",function(){n.setValue(!n.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()}function j(e,t,n,r){if(void 0===t[n])throw new Error("Object "+t+' has no property "'+n+'"');n=r.color?new ne(t,n):(t=[t,n].concat(r.factoryArgs),K.apply(e,t)),r.before instanceof Q&&(r.before=r.before.__li),Ce(e,n),h.addClass(n.domElement,"c");var i,t=document.createElement("span"),o=(h.addClass(t,"property-name"),t.innerHTML=n.property,document.createElement("div")),t=(o.appendChild(t),o.appendChild(n.domElement),Se(e,o,r.before)),s=(h.addClass(t,v.CLASS_CONTROLLER_ROW),h.addClass(t,typeof n.getValue()),e),a=t,c=n;return c.__li=a,c.__gui=s,f.extend(c,{options:function(e){return 1<arguments.length?(c.remove(),j(s,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[f.toArray(arguments)]})):f.isArray(e)||f.isObject(e)?(c.remove(),j(s,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(e){return c.__li.firstElementChild.firstElementChild.innerHTML=e,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}}),c instanceof te?(i=new ee(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step}),f.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=c[e],n=i[e];c[e]=i[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(c,e),n.apply(i,e)}}),h.addClass(a,"has-slider"),c.domElement.insertBefore(i.domElement,c.domElement.firstElementChild)):c instanceof ee?(o=function(e){return f.isNumber(c.__min)&&f.isNumber(c.__max)?(c.remove(),j(s,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):e},c.min=f.compose(o,c.min),c.max=f.compose(o,c.max)):c instanceof J?(h.bind(a,"click",function(){h.fakeEvent(c.__checkbox,"click")}),h.bind(c.__checkbox,"click",function(e){e.stopPropagation()})):c instanceof Z?(h.bind(a,"click",function(){h.fakeEvent(c.__button,"click")}),h.bind(a,"mouseover",function(){h.addClass(c.__button,"hover")}),h.bind(a,"mouseout",function(){h.removeClass(c.__button,"hover")})):c instanceof ne&&(h.addClass(a,"color"),c.updateDisplay=f.compose(function(e){return a.style.borderLeftColor=c.__color.toString(),e},c.updateDisplay),c.updateDisplay()),c.setValue=f.compose(function(e){return s.getRoot().__preset_select&&c.isModified()&&Te(s.getRoot(),!0),e},c.setValue),e.__controllers.push(n),n}function Se(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function Ce(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!=r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(n.__rememberedObjectIndecesToControllers[r]=i={}),i[t.property]=t,n.load&&n.load.remembered){var o,i=n.load.remembered;if(i[e.preset])o=i[e.preset];else{if(!i[g])return;o=i[g]}o[r]&&void 0!==o[r][t.property]&&(n=o[r][t.property],t.initialValue=n,t.setValue(n))}}}function P(e,t){return document.location.href+"."+t}function ke(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Ae(i,o){var s={};return f.each(i.__rememberedObjects,function(e,t){var n={},r=i.__rememberedObjectIndecesToControllers[t];f.each(r,function(e,t){n[t]=o?e.initialValue:e.getValue()}),s[t]=n}),s}function Ee(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function Te(e,t){e=e.__preset_select[e.__preset_select.selectedIndex];e.innerHTML=t?e.value+"*":e.value}function Oe(){this.backgroundElement=document.createElement("div"),ce.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),d.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),ce.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;d.bind(this.backgroundElement,"click",function(){e.hide()})}function Ne(e,t){Ne.superclass.call(this,e,t),this.__color=new le(this.getValue()),this.__temp=new le(0);var i=this,e=(this.domElement=document.createElement("div"),y.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",y.bind(this.__input,"keydown",function(e){13===e.keyCode&&o.call(this)}),y.bind(this.__input,"blur",o),y.bind(this.__selector,"mousedown",function(e){y.addClass(this,"drag").bind(window,"mouseup",function(e){y.removeClass(i.__selector,"drag")})}),document.createElement("div"));function n(e){a(e),y.bind(window,"mousemove",a),y.bind(window,"mouseup",r)}function r(){y.unbind(window,"mousemove",a),y.unbind(window,"mouseup",r)}function o(){var e=ue(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function s(){y.unbind(window,"mousemove",c),y.unbind(window,"mouseup",s)}function a(e){e.preventDefault();var t=y.getWidth(i.__saturation_field),n=y.getOffset(i.__saturation_field),r=(e.clientX-n.left+document.body.scrollLeft)/t,e=1-(e.clientY-n.top+document.body.scrollTop)/t;return 1<e?e=1:e<0&&(e=0),1<r?r=1:r<0&&(r=0),i.__color.v=e,i.__color.s=r,i.setValue(i.__color.toOriginal()),!1}function c(e){e.preventDefault();var t=y.getHeight(i.__hue_field),n=y.getOffset(i.__hue_field),e=1-(e.clientY-n.top+document.body.scrollTop)/t;return 1<e?e=1:e<0&&(e=0),i.__color.h=360*e,i.setValue(i.__color.toOriginal()),!1}b.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),b.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),b.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),b.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),b.extend(e.style,{width:"100%",height:"100%",background:"none"}),Me(e,"top","rgba(0,0,0,0)","#000"),b.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),(t=this.__hue_field).style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",b.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),y.bind(this.__saturation_field,"mousedown",n),y.bind(this.__field_knob,"mousedown",n),y.bind(this.__hue_field,"mousedown",function(e){c(e),y.bind(window,"mousemove",c),y.bind(window,"mouseup",s)}),this.__saturation_field.appendChild(e),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()}function Me(t,n,r,i){t.style.background="",b.each(de,function(e){t.style.cssText+="background: "+e+"linear-gradient("+n+", "+r+" 0%, "+i+" 100%); "})}function L(){if(this.__state=he.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1}function je(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"!==this.__state.space&&Le(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(Le(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function Pe(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"!==this.__state.space&&Ie(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(Ie(this),this.__state.space="HSV"),this.__state[t]=e}})}function Le(e,t,n){if("HEX"===e.__state.space)e.__state[t]=_.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw"Corrupted color state";w.extend(e.__state,_.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function Ie(e){var t=_.rgb_to_hsv(e.r,e.g,e.b);w.extend(e.__state,{s:t.s,v:t.v}),w.isNaN(t.h)?w.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h}function I(e,t){I.superclass.call(this,e,t);var n=this;function r(){n.setValue(n.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),C.bind(this.__input,"keyup",r),C.bind(this.__input,"change",r),C.bind(this.__input,"blur",function(){n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())}),C.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)}e.gui=e.gui||{},e.utils=e.utils||{},e.controllers=e.controllers||{},e.dom=e.dom||{},e.color=e.color||{},e.utils.css={load:function(e,t){var n=(t=t||document).createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}},e.utils.common=(B=Array.prototype.forEach,r=Array.prototype.slice,{BREAK:{},extend:function(n){return this.each(r.call(arguments,1),function(e){for(var t in e)this.isUndefined(e[t])||(n[t]=e[t])},this),n},defaults:function(n){return this.each(r.call(arguments,1),function(e){for(var t in e)this.isUndefined(n[t])&&(n[t]=e[t])},this),n},compose:function(){var n=r.call(arguments);return function(){for(var e=r.call(arguments),t=n.length-1;0<=t;t--)e=[n[t].apply(this,e)];return e[0]}},each:function(e,t,n){if(B&&e.forEach===B)e.forEach(t,n);else if(e.length===e.length+0){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var r in e)if(t.call(n,e[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():r.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),e.controllers.Controller=(e.utils.common.extend(we.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),we),e.dom.dom=(c=e.utils.common,H={},c.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){c.each(e,function(e){H[e]=t})}),F=/(\d+(\.\d+)?)px/,i={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){c.isUndefined(t)&&(t=!0),c.isUndefined(n)&&(n=!0),e.style.position="absolute",t&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){n=n||{};var i=H[t];if(!i)throw new Error("Event type "+t+" not supported.");var o=document.createEvent(i);switch(i){case"MouseEvents":var s=n.x||n.clientX||0,a=n.y||n.clientY||0;o.initMouseEvent(t,n.bubbles||!1,n.cancelable||!0,window,n.clickCount||1,0,0,s,a,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":s=o.initKeyboardEvent||o.initKeyEvent;c.defaults(n,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),s(t,n.bubbles||!1,n.cancelable,window,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode);break;default:o.initEvent(t,n.bubbles||!1,n.cancelable||!0)}c.defaults(o,r),e.dispatchEvent(o)},bind:function(e,t,n,r){return r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),i},unbind:function(e,t,n,r){return r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),i},addClass:function(e,t){var n;return void 0===e.className?e.className=t:e.className!==t&&-1==(n=e.className.split(/ +/)).indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,"")),i},removeClass:function(e,t){var n;return t?void 0!==e.className&&(e.className===t?e.removeAttribute("class"):-1!=(t=(n=e.className.split(/ +/)).indexOf(t))&&(n.splice(t,1),e.className=n.join(" "))):e.className=void 0,i},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){e=getComputedStyle(e);return A(e["border-left-width"])+A(e["border-right-width"])+A(e["padding-left"])+A(e["padding-right"])+A(e.width)},getHeight:function(e){e=getComputedStyle(e);return A(e["border-top-width"])+A(e["border-bottom-width"])+A(e["padding-top"])+A(e["padding-bottom"])+A(e.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)for(;t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.offsetParent;);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}}),e.controllers.OptionController=(t=e.controllers.Controller,q=e.dom.dom,o=e.utils.common,E.superclass=t,o.extend(E.prototype,t.prototype,{setValue:function(e){e=E.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),E.superclass.prototype.updateDisplay.call(this)}}),E),e.controllers.NumberController=(t=e.controllers.Controller,z=e.utils.common,T.superclass=t,z.extend(T.prototype,t.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),T.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),T),e.controllers.NumberControllerBox=(t=e.controllers.NumberController,l=e.dom.dom,U=e.utils.common,O.superclass=t,U.extend(O.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}(this.getValue(),this.__precision),O.superclass.prototype.updateDisplay.call(this)}}),O),e.controllers.NumberControllerSlider=(t=e.controllers.NumberController,u=e.dom.dom,W=e.utils.css,S=e.utils.common,N.superclass=t,N.useDefaultStyles=function(){W.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},S.extend(N.prototype,t.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",N.superclass.prototype.updateDisplay.call(this)}}),N),e.controllers.FunctionController=(S=e.controllers.Controller,V=e.dom.dom,t=e.utils.common,xe.superclass=S,t.extend(xe.prototype,S.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),xe),e.controllers.BooleanController=(t=e.controllers.Controller,G=e.dom.dom,S=e.utils.common,M.superclass=t,S.extend(M.prototype,t.prototype,{setValue:function(e){e=M.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,M.superclass.prototype.updateDisplay.call(this)}}),M),e.color.toString=(X=e.utils.common,function(e){if(1==e.a||X.isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}),e.color.interpret=(S=e.color.toString,s=e.utils.common,Y=[{litmus:s.isString,conversions:{THREE_CHAR_HEX:{read:function(e){e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:S},SIX_CHAR_HEX:{read:function(e){e=e.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:S},CSS_RGB:{read:function(e){e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:S},CSS_RGBA:{read:function(e){e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:S}}},{litmus:s.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:s.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:s.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b)&&s.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v)&&s.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],function(){$=!1;var n=1<arguments.length?s.toArray(arguments):arguments[0];return s.each(Y,function(e){if(e.litmus(n))return s.each(e.conversions,function(e,t){if(a=e.read(n),!1===$&&!1!==a)return($=a).conversionName=t,a.conversion=e,s.BREAK}),s.BREAK}),$}),e.GUI=e.gui.GUI=(t=e.utils.css,K=e.controllers.factory=(ge=e.controllers.OptionController,me=e.controllers.NumberControllerBox,ve=e.controllers.NumberControllerSlider,ye=e.controllers.StringController=(S=e.controllers.Controller,C=e.dom.dom,k=e.utils.common,I.superclass=S,k.extend(I.prototype,S.prototype,{updateDisplay:function(){return C.isActive(this.__input)||(this.__input.value=this.getValue()),I.superclass.prototype.updateDisplay.call(this)}}),I),be=e.controllers.FunctionController,_e=e.controllers.BooleanController,x=e.utils.common,function(e,t){var n=e[t];return x.isArray(arguments[2])||x.isObject(arguments[2])?new ge(e,t,arguments[2]):x.isNumber(n)?x.isNumber(arguments[2])&&x.isNumber(arguments[3])?new ve(e,t,arguments[2],arguments[3]):new me(e,t,{min:arguments[2],max:arguments[3]}):x.isString(n)?new ye(e,t):x.isFunction(n)?new be(e,t,""):x.isBoolean(n)?new _e(e,t):void 0}),Q=e.controllers.Controller,J=e.controllers.BooleanController,Z=e.controllers.FunctionController,ee=e.controllers.NumberControllerBox,te=e.controllers.NumberControllerSlider,e.controllers.OptionController,ne=e.controllers.ColorController=(k=e.controllers.Controller,y=e.dom.dom,le=e.color.Color=(he=e.color.interpret,_=e.color.math={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,e=e/60-Math.floor(e/60),i=n*(1-t),o=n*(1-e*t),e=n*(1-(1-e)*t),t=[[n,e,i],[o,n,i],[i,n,e],[i,o,n],[e,i,n],[n,i,o]][r];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),r=i-r;return 0==i?{h:NaN,s:0,v:0}:(n=e==i?(t-n)/r:t==i?2+(n-e)/r:4+(e-t)/r,(n/=6)<0&&(n+=1),{h:360*n,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t);return this.hex_with_component(e,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(pe=8*t)|e&~(255<<pe)}},fe=e.color.toString,w=e.utils.common,L.COMPONENTS=["r","g","b","h","s","v","hex","a"],w.extend(L.prototype,{toString:function(){return fe(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),je(L.prototype,"r",2),je(L.prototype,"g",1),je(L.prototype,"b",0),Pe(L.prototype,"h"),Pe(L.prototype,"s"),Pe(L.prototype,"v"),Object.defineProperty(L.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(L.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=_.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),L),ue=e.color.interpret,b=e.utils.common,Ne.superclass=k,b.extend(Ne.prototype,k.prototype,{updateDisplay:function(){var t,n=ue(this.getValue()),e=(!1!==n&&(t=!1,b.each(le.COMPONENTS,function(e){if(!b.isUndefined(n[e])&&!b.isUndefined(this.__color.__state[e])&&n[e]!==this.__color.__state[e])return t=!0,{}},this),t)&&b.extend(this.__color.__state,n),b.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1,this.__color.v<.5||.5<this.__color.s?255:0),r=255-e;b.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+e+","+e+","+e+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Me(this.__saturation_field,"left","#fff",this.__temp.toString()),b.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+e+","+e+","+e+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}),de=["-moz-","-o-","-webkit-","-ms-",""],Ne),re=e.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},ie=e.dom.CenteredDiv=(d=e.dom.dom,ce=e.utils.common,Oe.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),ce.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},Oe.prototype.hide=function(){function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",d.unbind(t.domElement,"webkitTransitionEnd",e),d.unbind(t.domElement,"transitionend",e),d.unbind(t.domElement,"oTransitionEnd",e)}var t=this;d.bind(this.domElement,"webkitTransitionEnd",e),d.bind(this.domElement,"transitionend",e),d.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},Oe.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-d.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-d.getHeight(this.domElement)/2+"px"},Oe),h=e.dom.dom,f=e.utils.common,t.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"),g="Default",m=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),n=!(se=!0),ae=[],(v=function(r){var t,e,n,i,o=this,s=(this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),h.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=r||{},r=f.defaults(r,{autoPlace:!0,width:v.DEFAULT_WIDTH}),r=f.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),f.isUndefined(r.load)?r.load={preset:g}:r.preset&&(r.load.preset=r.preset),f.isUndefined(r.parent)&&r.hideable&&ae.push(this),r.resizable=f.isUndefined(r.parent)&&r.resizable,r.autoPlace&&f.isUndefined(r.scrollable)&&(r.scrollable=!0),m&&"true"===localStorage.getItem(P(0,"isLocal")));function a(e){return e.preventDefault(),i=e.clientX,h.addClass(n.__closeButton,v.CLASS_DRAG),h.bind(window,"mousemove",c),h.bind(window,"mouseup",l),!1}function c(e){return e.preventDefault(),n.width+=i-e.clientX,n.onResize(),i=e.clientX,!1}function l(){h.removeClass(n.__closeButton,v.CLASS_DRAG),h.unbind(window,"mousemove",c),h.unbind(window,"mouseup",l)}function u(){localStorage.setItem(P(0,"gui"),JSON.stringify(o.getSaveObject()))}Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},preset:{get:function(){return(o.parent?o.getRoot():r.load).preset},set:function(e){o.parent?o.getRoot().preset=e:r.load.preset=e;for(var t=this,n=0;n<t.__preset_select.length;n++)t.__preset_select[n].value==t.preset&&(t.__preset_select.selectedIndex=n);o.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,ke(o,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,t&&(t.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?h.addClass(o.__ul,v.CLASS_CLOSED):h.removeClass(o.__ul,v.CLASS_CLOSED),this.onResize(),o.__closeButton&&(o.__closeButton.innerHTML=e?v.TEXT_OPEN:v.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return s},set:function(e){m&&((s=e)?h.bind(window,"unload",u):h.unbind(window,"unload",u),localStorage.setItem(P(0,"isLocal"),e))}}}),f.isUndefined(r.parent)?(r.closed=!1,h.addClass(this.domElement,v.CLASS_MAIN),h.makeSelectable(this.domElement,!1),m&&s&&(o.useLocalStorage=!0,e=localStorage.getItem(P(0,"gui")))&&(r.load=JSON.parse(e)),this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=v.TEXT_CLOSED,h.addClass(this.__closeButton,v.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),h.bind(this.__closeButton,"click",function(){o.closed=!o.closed})):(void 0===r.closed&&(r.closed=!0),t=document.createTextNode(r.name),h.addClass(t,"controller-name"),e=Se(o,t),h.addClass(this.__ul,v.CLASS_CLOSED),h.addClass(e,"title"),h.bind(e,"click",function(e){return e.preventDefault(),o.closed=!o.closed,!1}),r.closed||(this.closed=!1)),r.autoPlace&&(f.isUndefined(r.parent)&&(se&&(p=document.createElement("div"),h.addClass(p,"dg"),h.addClass(p,v.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(p),se=!1),p.appendChild(this.domElement),h.addClass(this.domElement,v.CLASS_AUTO_PLACE)),this.parent||ke(o,r.width)),h.bind(window,"resize",function(){o.onResize()}),h.bind(this.__ul,"webkitTransitionEnd",function(){o.onResize()}),h.bind(this.__ul,"transitionend",function(){o.onResize()}),h.bind(this.__ul,"oTransitionEnd",function(){o.onResize()}),this.onResize(),r.resizable&&((n=this).__resize_handle=document.createElement("div"),f.extend(n.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),h.bind(n.__resize_handle,"mousedown",a),h.bind(n.__closeButton,"mousedown",a),n.domElement.insertBefore(n.__resize_handle,n.domElement.firstElementChild));var d;o.getRoot();r.parent||((d=o.getRoot()).width+=1,f.defer(function(){--d.width}))}).toggleHide=function(){n=!n,f.each(ae,function(e){e.domElement.style.zIndex=n?-999:999,e.domElement.style.opacity=n?0:1})},v.CLASS_AUTO_PLACE="a",v.CLASS_AUTO_PLACE_CONTAINER="ac",v.CLASS_MAIN="main",v.CLASS_CONTROLLER_ROW="cr",v.CLASS_TOO_TALL="taller-than-window",v.CLASS_CLOSED="closed",v.CLASS_CLOSE_BUTTON="close-button",v.CLASS_DRAG="drag",v.DEFAULT_WIDTH=245,v.TEXT_CLOSED="Close Controls",v.TEXT_OPEN="Open Controls",h.bind(window,"keydown",function(e){"text"===document.activeElement.type||72!==e.which&&72!=e.keyCode||v.toggleHide()},!1),f.extend(v.prototype,{add:function(e,t){return j(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return j(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;f.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&p.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this},t=(t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]),new v(t)),e=(this.__folders[e]=t,Se(this,t.domElement));return h.addClass(e,"folder"),t},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e,t,n=this.getRoot();n.scrollable&&(e=h.getOffset(n.__ul).top,t=0,f.each(n.__ul.childNodes,function(e){n.autoPlace&&e===n.__save_row||(t+=h.getHeight(e))}),window.innerHeight-e-20<t?(h.addClass(n.domElement,v.CLASS_TOO_TALL),n.__ul.style.height=window.innerHeight-e-20+"px"):(h.removeClass(n.domElement,v.CLASS_TOO_TALL),n.__ul.style.height="auto")),n.__resize_handle&&f.defer(function(){n.__resize_handle.style.height=n.__ul.offsetHeight+"px"}),n.__closeButton&&(n.__closeButton.style.width=n.width+"px")},remember:function(){if(f.isUndefined(oe)&&((oe=new ie).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var d=this;f.each(Array.prototype.slice.call(arguments),function(e){function t(){l.style.display=n.useLocalStorage?"block":"none"}var n,r,i,o,s,a,c,l,u;0==d.__rememberedObjects.length&&(r=(n=d).__save_row=document.createElement("li"),h.addClass(n.domElement,"has-save"),n.__ul.insertBefore(r,n.__ul.firstChild),h.addClass(r,"save-row"),(i=document.createElement("span")).innerHTML="&nbsp;",h.addClass(i,"button gears"),(o=document.createElement("span")).innerHTML="Save",h.addClass(o,"button"),h.addClass(o,"save"),(s=document.createElement("span")).innerHTML="New",h.addClass(s,"button"),h.addClass(s,"save-as"),(a=document.createElement("span")).innerHTML="Revert",h.addClass(a,"button"),h.addClass(a,"revert"),c=n.__preset_select=document.createElement("select"),n.load&&n.load.remembered?f.each(n.load.remembered,function(e,t){Ee(n,t,t==n.preset)}):Ee(n,g,!1),h.bind(c,"change",function(){for(var e=0;e<n.__preset_select.length;e++)n.__preset_select[e].innerHTML=n.__preset_select[e].value;n.preset=this.value}),r.appendChild(c),r.appendChild(i),r.appendChild(o),r.appendChild(s),r.appendChild(a),m&&(c=document.getElementById("dg-save-locally"),l=document.getElementById("dg-local-explain"),c.style.display="block",r=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(P(0,"isLocal"))&&r.setAttribute("checked","checked"),t(),h.bind(r,"change",function(){n.useLocalStorage=!n.useLocalStorage,t()})),u=document.getElementById("dg-new-constructor"),h.bind(u,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||oe.hide()}),h.bind(i,"click",function(){u.innerHTML=JSON.stringify(n.getSaveObject(),void 0,2),oe.show(),u.focus(),u.select()}),h.bind(o,"click",function(){n.save()}),h.bind(s,"click",function(){var e=prompt("Enter a new preset name.");e&&n.saveAs(e)}),h.bind(a,"click",function(){n.revert()})),-1==d.__rememberedObjects.indexOf(e)&&d.__rememberedObjects.push(e)}),this.autoPlace&&ke(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var n=this.load;return n.closed=this.closed,0<this.__rememberedObjects.length&&(n.preset=this.preset,n.remembered||(n.remembered={}),n.remembered[this.preset]=Ae(this)),n.folders={},f.each(this.__folders,function(e,t){n.folders[t]=e.getSaveObject()}),n},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Ae(this),Te(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[g]=Ae(this,!0)),this.load.remembered[e]=Ae(this),this.preset=e,Ee(this,e,!0)},revert:function(t){f.each(this.__controllers,function(e){this.getRoot().load.remembered?Ce(t||this.getRoot(),e):e.setValue(e.initialValue)},this),f.each(this.__folders,function(e){e.revert(e)}),t||Te(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&function e(t){0!=t.length&&re(function(){e(t)});f.each(t,function(e){e.updateDisplay()})}(this.__listening)}}),v)},{}],5:[function(e,t,n){var r;r=function(l){var u,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(l.event.fixHooks)for(var n=e.length;n;)l.event.fixHooks[e[--n]]=l.event.mouseHooks;var f=l.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],r,!1);else this.onmousewheel=r;l.data(this,"mousewheel-line-height",f.getLineHeight(this)),l.data(this,"mousewheel-page-height",f.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],r,!1);else this.onmousewheel=null;l.removeData(this,"mousewheel-line-height"),l.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var e=l(e),t=e["offsetParent"in l.fn?"offsetParent":"parent"]();return t.length||(t=l("body")),parseInt(t.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(e){return l(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function r(e){var t,n=e||window.event,r=h.call(arguments,1),i=0,o=0,s=0,a=0,c=0;if((e=l.event.fix(n)).type="mousewheel","detail"in n&&(s=-1*n.detail),"wheelDelta"in n&&(s=n.wheelDelta),"wheelDeltaY"in n&&(s=n.wheelDeltaY),"wheelDeltaX"in n&&(o=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(o=-1*s,s=0),i=0===s?o:s,"deltaY"in n&&(i=s=-1*n.deltaY),"deltaX"in n&&(o=n.deltaX,0===s)&&(i=-1*o),0!==s||0!==o)return 1===n.deltaMode?(i*=t=l.data(this,"mousewheel-line-height"),s*=t,o*=t):2===n.deltaMode&&(i*=t=l.data(this,"mousewheel-page-height"),s*=t,o*=t),t=Math.max(Math.abs(s),Math.abs(o)),(!d||t<d)&&g(n,d=t)&&(d/=40),g(n,t)&&(i/=40,o/=40,s/=40),i=Math[1<=i?"floor":"ceil"](i/d),o=Math[1<=o?"floor":"ceil"](o/d),s=Math[1<=s?"floor":"ceil"](s/d),f.settings.normalizeOffset&&this.getBoundingClientRect&&(n=this.getBoundingClientRect(),a=e.clientX-n.left,c=e.clientY-n.top),e.deltaX=o,e.deltaY=s,e.deltaFactor=d,e.offsetX=a,e.offsetY=c,e.deltaMode=0,r.unshift(e,i,o,s),u&&clearTimeout(u),u=setTimeout(p,200),(l.event.dispatch||l.event.handle).apply(this,r)}function p(){d=null}function g(e,t){return f.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}l.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof define&&define.amd?define(["jquery"],r):"object"==typeof n?t.exports=r:r(jQuery)},{}],6:[function(e,n,t){!function(e,t){"use strict";"object"==typeof n&&"object"==typeof n.exports?n.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:this,function(w,D){"use strict";function y(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function g(e){return null!=e&&e===e.window}var t=[],R=Object.getPrototypeOf,a=t.slice,B=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},H=t.push,F=t.indexOf,q={},z=q.toString,U=q.hasOwnProperty,W=U.toString,V=W.call(Object),m={},x=w.document,G={type:!0,src:!0,nonce:!0,noModule:!0};function X(e,t,n){var r,i,o=(n=n||x).createElement("script");if(o.text=e,t)for(r in G)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function p(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?q[z.call(e)]||"object":typeof e}var S=function(e,t){return new S.fn.init(e,t)};function $(e){var t=!!e&&"length"in e&&e.length,n=p(e);return!y(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:"3.6.4",constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=S.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:H,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o=arguments[0]||{},s=1,a=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||y(o)||(o={}),s===a&&(o=this,s--);s<a;s++)if(null!=(e=arguments[s]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(c&&n&&(S.isPlainObject(n)||(r=Array.isArray(n)))?(i=o[t],i=r&&!Array.isArray(i)?[]:r||S.isPlainObject(i)?i:{},r=!1,o[t]=S.extend(c,i,n)):void 0!==n&&(o[t]=n));return o},S.extend({expando:"jQuery"+("3.6.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==z.call(e)||(e=R(e))&&("function"!=typeof(e=U.call(e,"constructor")&&e.constructor)||W.call(e)!==V))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,n){X(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if($(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&($(Object(e))?S.merge(t,"string"==typeof e?[e]:e):H.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:F.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!=s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if($(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return B(s)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()});function r(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r}function Y(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var e=function(D){function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function R(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function B(){x()}var e,h,_,o,H,f,F,q,w,c,l,x,S,n,C,p,r,i,g,k="sizzle"+ +new Date,u=D.document,A=0,z=0,U=M(),W=M(),V=M(),m=M(),G=function(e,t){return e===t&&(l=!0),0},X={}.hasOwnProperty,t=[],$=t.pop,Y=t.push,E=t.push,K=t.slice,y=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",s="[\\x20\\t\\r\\n\\f]",a="(?:\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",J="\\["+s+"*("+a+")(?:"+s+"*([*^$|!~]?=)"+s+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+a+"))|)"+s+"*\\]",Z=":("+a+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+J+")*)|.*)\\)|)",ee=new RegExp(s+"+","g"),v=new RegExp("^"+s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+s+"+$","g"),te=new RegExp("^"+s+"*,"+s+"*"),ne=new RegExp("^"+s+"*([>+~]|"+s+")"+s+"*"),re=new RegExp(s+"|>"),ie=new RegExp(Z),oe=new RegExp("^"+a+"$"),b={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a+"|[*])"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+Z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+s+"*(even|odd|(([+-]|)(\\d*)n|)"+s+"*(?:([+-]|)"+s+"*(\\d+)|))"+s+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+s+"*((?:-\\d)?\\d*)"+s+"*\\)|)(?=[^-]|$)","i")},se=/HTML$/i,ae=/^(?:input|select|textarea|button)$/i,ce=/^h\d$/i,T=/^[^{]+\{\s*\[native \w/,le=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ue=/[+~]/,O=new RegExp("\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\([^\\r\\n\\f])","g"),de=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,he=ye(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{E.apply(t=K.call(u.childNodes),u.childNodes),t[u.childNodes.length].nodeType}catch(e){E={apply:t.length?function(e,t){Y.apply(e,K.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function N(t,e,n,r){var i,o,s,a,c,l,u=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!r&&(x(e),e=e||S,C)){if(11!==d&&(a=le.exec(t)))if(i=a[1]){if(9===d){if(!(l=e.getElementById(i)))return n;if(l.id===i)return n.push(l),n}else if(u&&(l=u.getElementById(i))&&g(e,l)&&l.id===i)return n.push(l),n}else{if(a[2])return E.apply(n,e.getElementsByTagName(t)),n;if((i=a[3])&&h.getElementsByClassName&&e.getElementsByClassName)return E.apply(n,e.getElementsByClassName(i)),n}if(h.qsa&&!m[t+" "]&&(!p||!p.test(t))&&(1!==d||"object"!==e.nodeName.toLowerCase())){if(l=t,u=e,1===d&&(re.test(t)||ne.test(t))){for((u=ue.test(t)&&me(e.parentNode)||e)===e&&h.scope||((s=e.getAttribute("id"))?s=s.replace(de,R):e.setAttribute("id",s=k)),o=(c=f(t)).length;o--;)c[o]=(s?"#"+s:":scope")+" "+I(c[o]);l=c.join(",")}try{return E.apply(n,u.querySelectorAll(l)),n}catch(e){m(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return q(t.replace(v,"$1"),e,n,r)}function M(){var n=[];function r(e,t){return n.push(e+" ")>_.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function j(e){return e[k]=!0,e}function P(e){var t=S.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function fe(e,t){for(var n=e.split("|"),r=n.length;r--;)_.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&he(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function L(s){return j(function(o){return o=+o,j(function(e,t){for(var n,r=s([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=N.support={},H=N.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!se.test(t||e&&e.nodeName||"HTML")},x=N.setDocument=function(e){var e=e?e.ownerDocument||e:u;return e!=S&&9===e.nodeType&&e.documentElement&&(n=(S=e).documentElement,C=!H(S),u!=S&&(e=S.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",B,!1):e.attachEvent&&e.attachEvent("onunload",B)),h.scope=P(function(e){return n.appendChild(e).appendChild(S.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),h.cssHas=P(function(){try{S.querySelector(":has(*,:jqfake)")}catch(e){return 1}}),h.attributes=P(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=P(function(e){return e.appendChild(S.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=T.test(S.getElementsByClassName),h.getById=P(function(e){return n.appendChild(e).id=k,!S.getElementsByName||!S.getElementsByName(k).length}),h.getById?(_.filter.ID=function(e){var t=e.replace(O,d);return function(e){return e.getAttribute("id")===t}},_.find.ID=function(e,t){if(void 0!==t.getElementById&&C)return(t=t.getElementById(e))?[t]:[]}):(_.filter.ID=function(e){var t=e.replace(O,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},_.find.ID=function(e,t){if(void 0!==t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),_.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},_.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&C)return t.getElementsByClassName(e)},r=[],p=[],(h.qsa=T.test(S.querySelectorAll))&&(P(function(e){var t;n.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&p.push("[*^$]="+s+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||p.push("\\["+s+"*(?:value|"+Q+")"),e.querySelectorAll("[id~="+k+"-]").length||p.push("~="),(t=S.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||p.push("\\["+s+"*name"+s+"*="+s+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||p.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||p.push(".#.+[+~]"),e.querySelectorAll("\\\f"),p.push("[\\r\\n\\f]")}),P(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=S.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&p.push("name"+s+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&p.push(":enabled",":disabled"),n.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),p.push(",.*:")})),(h.matchesSelector=T.test(i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&P(function(e){h.disconnectedMatch=i.call(e,"*"),i.call(e,"[s!='']:x"),r.push("!=",Z)}),h.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),r=r.length&&new RegExp(r.join("|")),e=T.test(n.compareDocumentPosition),g=e||T.test(n.contains)?function(e,t){var n=9===e.nodeType&&e.documentElement||e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=e?function(e,t){var n;return e===t?(l=!0,0):(n=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===n?e==S||e.ownerDocument==u&&g(u,e)?-1:t==S||t.ownerDocument==u&&g(u,t)?1:c?y(c,e)-y(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e==S?-1:t==S?1:i?-1:o?1:c?y(c,e)-y(c,t):0;if(i===o)return pe(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?pe(s[r],a[r]):s[r]==u?-1:a[r]==u?1:0}),S},N.matches=function(e,t){return N(e,null,null,t)},N.matchesSelector=function(e,t){if(x(e),h.matchesSelector&&C&&!m[t+" "]&&(!r||!r.test(t))&&(!p||!p.test(t)))try{var n=i.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){m(t,!0)}return 0<N(t,S,null,[e]).length},N.contains=function(e,t){return(e.ownerDocument||e)!=S&&x(e),g(e,t)},N.attr=function(e,t){(e.ownerDocument||e)!=S&&x(e);var n=_.attrHandle[t.toLowerCase()],n=n&&X.call(_.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==n?n:h.attributes||!C?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},N.escape=function(e){return(e+"").replace(de,R)},N.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},N.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!h.detectDuplicates,c=!h.sortStable&&e.slice(0),e.sort(G),l){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return c=null,e},o=N.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(_=N.selectors={cacheLength:50,createPseudo:j,match:b,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,d),e[3]=(e[3]||e[4]||e[5]||"").replace(O,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||N.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&N.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return b.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ie.test(n)&&(t=(t=f(n,!0))&&n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+s+")"+e+"("+s+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=N.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace(ee," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,g,m){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),b="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,s,a,c,l=v!=y?"nextSibling":"previousSibling",u=e.parentNode,d=b&&e.nodeName.toLowerCase(),h=!n&&!b,f=!1;if(u){if(v){for(;l;){for(s=e;s=s[l];)if(b?s.nodeName.toLowerCase()===d:1===s.nodeType)return!1;c=l="only"===p&&!c&&"nextSibling"}return!0}if(c=[y?u.firstChild:u.lastChild],y&&h){for(f=(a=(r=(i=(o=(s=u)[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===A&&r[1])&&r[2],s=a&&u.childNodes[a];s=++a&&s&&s[l]||(f=a=0,c.pop());)if(1===s.nodeType&&++f&&s===e){i[p]=[A,a,f];break}}else if(!1===(f=h?a=(r=(i=(o=(s=e)[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===A&&r[1]:f))for(;(s=++a&&s&&s[l]||(f=a=0,c.pop()))&&((b?s.nodeName.toLowerCase()!==d:1!==s.nodeType)||!++f||(h&&((i=(o=s[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]=[A,f]),s!==e)););return(f-=m)===g||f%g==0&&0<=f/g}}},PSEUDO:function(e,o){var t,s=_.pseudos[e]||_.setFilters[e.toLowerCase()]||N.error("unsupported pseudo: "+e);return s[k]?s(o):1<s.length?(t=[e,e,"",o],_.setFilters.hasOwnProperty(e.toLowerCase())?j(function(e,t){for(var n,r=s(e,o),i=r.length;i--;)e[n=y(e,r[i])]=!(t[n]=r[i])}):function(e){return s(e,0,t)}):s}},pseudos:{not:j(function(e){var r=[],i=[],a=F(e.replace(v,"$1"));return a[k]?j(function(e,t,n,r){for(var i,o=a(e,null,r,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,t,n){return r[0]=e,a(r,null,n,i),r[0]=null,!i.pop()}}),has:j(function(t){return function(e){return 0<N(t,e).length}}),contains:j(function(t){return t=t.replace(O,d),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:j(function(n){return oe.test(n||"")||N.error("unsupported lang: "+n),n=n.replace(O,d).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=D.location&&D.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===n},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return ce.test(e.nodeName)},input:function(e){return ae.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:L(function(){return[0]}),last:L(function(e,t){return[t-1]}),eq:L(function(e,t,n){return[n<0?n+t:n]}),even:L(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:L(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:L(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:L(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})_.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function ve(){}function I(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(s,e,t){var a=e.dir,c=e.next,l=c||a,u=t&&"parentNode"===l,d=z++;return e.first?function(e,t,n){for(;e=e[a];)if(1===e.nodeType||u)return s(e,t,n);return!1}:function(e,t,n){var r,i,o=[A,d];if(n){for(;e=e[a];)if((1===e.nodeType||u)&&s(e,t,n))return!0}else for(;e=e[a];)if(1===e.nodeType||u)if(i=(i=e[k]||(e[k]={}))[e.uniqueID]||(i[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[a]||e;else{if((r=i[l])&&r[0]===A&&r[1]===d)return o[2]=r[2];if((i[l]=o)[2]=s(e,t,n))return!0}return!1}}function be(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function _e(e,t,n,r,i){for(var o,s=[],a=0,c=e.length,l=null!=t;a<c;a++)!(o=e[a])||n&&!n(o,r,i)||(s.push(o),l&&t.push(a));return s}function we(f,p,g,m,v,e){return m&&!m[k]&&(m=we(m)),v&&!v[k]&&(v=we(v,e)),j(function(e,t,n,r){var i,o,s,a=[],c=[],l=t.length,u=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)N(e,t[r],n);return n}(p||"*",n.nodeType?[n]:n,[]),d=!f||!e&&p?u:_e(u,a,f,n,r),h=g?v||(e?f:l||m)?[]:t:d;if(g&&g(d,h,n,r),m)for(i=_e(h,c),m(i,[],n,r),o=i.length;o--;)(s=i[o])&&(h[c[o]]=!(d[c[o]]=s));if(e){if(v||f){if(v){for(i=[],o=h.length;o--;)(s=h[o])&&i.push(d[o]=s);v(null,h=[],i,r)}for(o=h.length;o--;)(s=h[o])&&-1<(i=v?y(e,s):a[o])&&(e[i]=!(t[i]=s))}}else h=_e(h===t?h.splice(l,h.length):h),v?v(null,t,h,r):E.apply(t,h)})}function xe(m,v){function e(e,t,n,r,i){var o,s,a,c=0,l="0",u=e&&[],d=[],h=w,f=e||b&&_.find.TAG("*",i),p=A+=null==h?1:Math.random()||.1,g=f.length;for(i&&(w=t==S||t||i);l!==g&&null!=(o=f[l]);l++){if(b&&o){for(s=0,t||o.ownerDocument==S||(x(o),n=!C);a=m[s++];)if(a(o,t||S,n)){r.push(o);break}i&&(A=p)}y&&((o=!a&&o)&&c--,e)&&u.push(o)}if(c+=l,y&&l!==c){for(s=0;a=v[s++];)a(u,d,t,n);if(e){if(0<c)for(;l--;)u[l]||d[l]||(d[l]=$.call(r));d=_e(d)}E.apply(r,d),i&&!e&&0<d.length&&1<c+v.length&&N.uniqueSort(r)}return i&&(A=p,w=h),u}var y=0<v.length,b=0<m.length;return y?j(e):e}return ve.prototype=_.filters=_.pseudos,_.setFilters=new ve,f=N.tokenize=function(e,t){var n,r,i,o,s,a,c,l=W[e+" "];if(l)return t?0:l.slice(0);for(s=e,a=[],c=_.preFilter;s;){for(o in n&&!(r=te.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=ne.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(v," ")}),s=s.slice(n.length)),_.filter)!(r=b[o].exec(s))||c[o]&&!(r=c[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?N.error(e):W(e,a).slice(0)},F=N.compile=function(e,t){var n,r=[],i=[],o=V[e+" "];if(!o){for(n=(t=t||f(e)).length;n--;)((o=function e(t){for(var r,n,i,o=t.length,s=_.relative[t[0].type],a=s||_.relative[" "],c=s?1:0,l=ye(function(e){return e===r},a,!0),u=ye(function(e){return-1<y(r,e)},a,!0),d=[function(e,t,n){return e=!s&&(n||t!==w)||((r=t).nodeType?l:u)(e,t,n),r=null,e}];c<o;c++)if(n=_.relative[t[c].type])d=[ye(be(d),n)];else{if((n=_.filter[t[c].type].apply(null,t[c].matches))[k]){for(i=++c;i<o&&!_.relative[t[i].type];i++);return we(1<c&&be(d),1<c&&I(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(v,"$1"),n,c<i&&e(t.slice(c,i)),i<o&&e(t=t.slice(i)),i<o&&I(t))}d.push(n)}return be(d)}(t[n]))[k]?r:i).push(o);(o=V(e,xe(i,r))).selector=e}return o},q=N.select=function(e,t,n,r){var i,o,s,a,c,l="function"==typeof e&&e,u=!r&&f(e=l.selector||e);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===t.nodeType&&C&&_.relative[o[1].type]){if(!(t=(_.find.ID(s.matches[0].replace(O,d),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=b.needsContext.test(e)?0:o.length;i--&&(s=o[i],!_.relative[a=s.type]);)if((c=_.find[a])&&(r=c(s.matches[0].replace(O,d),ue.test(o[0].type)&&me(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&I(o))break;return E.apply(n,r),n}}return(l||F(e,u))(r,t,!C,n,!t||ue.test(e)&&me(t.parentNode)||t),n},h.sortStable=k.split("").sort(G).join("")===k,h.detectDuplicates=!!l,x(),h.sortDetached=P(function(e){return 1&e.compareDocumentPosition(S.createElement("fieldset"))}),P(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&P(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),P(function(e){return null==e.getAttribute("disabled")})||fe(Q,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),N}(w),K=(S.find=e,S.expr=e.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=e.uniqueSort,S.text=e.getText,S.isXMLDoc=e.isXML,S.contains=e.contains,S.escapeSelector=e.escape,S.expr.match.needsContext);function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var Q=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function J(e,n,r){return y(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<F.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(J(this,e||[],!1))},not:function(e){return this.pushStack(J(this,e||[],!0))},is:function(e){return!!J(this,"string"==typeof e&&K.test(e)?S(e):e||[],!1).length}});var Z,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((S.fn.init=function(e,t,n){if(e){if(n=n||Z,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this);if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!r[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:x,!0)),Q.test(r[1])&&S.isPlainObject(t))for(var r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r])}else(n=x.getElementById(r[2]))&&(this[0]=n,this.length=1)}return this}).prototype=S.fn,Z=S(x),/^(?:parents|prev(?:Until|All))/),ne={children:!0,contents:!0,next:!0,prev:!0};function re(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],s="string"!=typeof e&&S(e);if(!K.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?F.call(S(e),this[0]):F.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return r(e,"parentNode")},parentsUntil:function(e,t,n){return r(e,"parentNode",n)},next:function(e){return re(e,"nextSibling")},prev:function(e){return re(e,"previousSibling")},nextAll:function(e){return r(e,"nextSibling")},prevAll:function(e){return r(e,"previousSibling")},nextUntil:function(e,t,n){return r(e,"nextSibling",n)},prevUntil:function(e,t,n){return r(e,"previousSibling",n)},siblings:function(e){return Y((e.parentNode||{}).firstChild,e)},children:function(e){return Y(e.firstChild)},contents:function(e){return null!=e.contentDocument&&R(e.contentDocument)?e.contentDocument:(c(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return(t="Until"!==r.slice(-5)?e:t)&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(ne[r]||S.uniqueSort(n),te.test(r))&&n.reverse(),this.pushStack(n)}});var C=/[^\x20\t\r\n\f]+/g;function u(e){return e}function ie(e){throw e}function oe(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(C)||[],function(e,t){n[t]=!0}),n):S.extend({},r);function i(){for(a=a||r.once,s=o=!0;l.length;u=-1)for(t=l.shift();++u<c.length;)!1===c[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=c.length,t=!1);r.memory||(t=!1),o=!1,a&&(c=t?[]:"")}var o,t,s,a,c=[],l=[],u=-1,d={add:function(){return c&&(t&&!o&&(u=c.length-1,l.push(t)),function n(e){S.each(e,function(e,t){y(t)?r.unique&&d.has(t)||c.push(t):t&&t.length&&"string"!==p(t)&&n(t)})}(arguments),t)&&!o&&i(),this},remove:function(){return S.each(arguments,function(e,t){for(var n;-1<(n=S.inArray(t,c,n));)c.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<S.inArray(e,c):0<c.length},empty:function(){return c=c&&[],this},disable:function(){return a=l=[],c=t="",this},disabled:function(){return!c},lock:function(){return a=l=[],t||o||(c=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),o)||i(),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!s}};return d},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=y(i[t[4]])&&i[t[4]];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&y(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var c=0;function l(i,o,s,a){return function(){function e(){var e,t;if(!(i<c)){if((e=s.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?a?t.call(e,l(c,o,u,a),l(c,o,ie,a)):(c++,t.call(e,l(c,o,u,a),l(c,o,ie,a),l(c,o,u,o.notifyWith))):(s!==u&&(n=void 0,r=[e]),(a||o.resolveWith)(n,r))}}var n=this,r=arguments,t=a?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),c<=i+1&&(s!==ie&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),w.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,y(r)?r:u,e.notifyWith)),o[1][3].add(l(0,e,y(t)?t:u)),o[2][3].add(l(0,e,y(n)?n:ie))}).promise()},promise:function(e){return null!=e?S.extend(e,s):s}},a={};return S.each(o,function(e,t){var n=t[2],r=t[5];s[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){function t(t){return function(e){i[t]=this,o[t]=1<arguments.length?a.call(arguments):e,--n||s.resolveWith(i,o)}}var n=arguments.length,r=n,i=Array(r),o=a.call(arguments),s=S.Deferred();if(n<=1&&(oe(e,s.done(t(r)).resolve,s.reject,!n),"pending"===s.state()||y(o[r]&&o[r].then)))return s.then();for(;r--;)oe(o[r],t(r),s.reject);return s.promise()}});var se=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,ae=(S.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&se.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){w.setTimeout(function(){throw e})},S.Deferred());function ce(){x.removeEventListener("DOMContentLoaded",ce),w.removeEventListener("load",ce),S.ready()}S.fn.ready=function(e){return ae.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||ae.resolveWith(x,[S])}}),S.ready.then=ae.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?w.setTimeout(S.ready):(x.addEventListener("DOMContentLoaded",ce),w.addEventListener("load",ce));function d(e,t,n,r,i,o,s){var a=0,c=e.length,l=null==n;if("object"===p(n))for(a in i=!0,n)d(e,t,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,y(r)||(s=!0),t=l?s?(t.call(e,r),null):(l=t,function(e,t,n){return l.call(S(e),n)}):t))for(;a<c;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):c?t(e[0],n):o}var le=/^-ms-/,ue=/-([a-z])/g;function de(e,t){return t.toUpperCase()}function b(e){return e.replace(le,"ms-").replace(ue,de)}function v(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function he(){this.expando=S.expando+he.uid++}he.uid=1,he.prototype={cache:function(e){var t=e[this.expando];return t||(t={},v(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[b(t)]=n;else for(r in t)i[b(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][b(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(b):(t=b(t))in r?[t]:t.match(C)||[]).length;for(;n--;)delete r[t[n]]}void 0!==t&&!S.isEmptyObject(r)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var _=new he,l=new he,fe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,pe=/[A-Z]/g;function ge(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(pe,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:fe.test(i)?JSON.parse(i):i)}catch(e){}l.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return l.hasData(e)||_.hasData(e)},data:function(e,t,n){return l.access(e,t,n)},removeData:function(e,t){l.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],s=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){l.set(this,n)}):d(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=l.get(o,n))||void 0!==(t=ge(o,n))?t:void 0;this.each(function(){l.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=l.get(o),1===o.nodeType)&&!_.get(o,"hasDataAttrs")){for(t=s.length;t--;)s[t]&&0===(r=s[t].name).indexOf("data-")&&(r=b(r.slice(5)),ge(o,r,i[r]));_.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){l.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return r=_.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=_.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _.get(e,n)||_.access(e,n,{empty:S.Callbacks("once memory").add(function(){_.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(s,[s])}var r,i=1,o=S.Deferred(),s=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=_.get(s[a],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});function me(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&A(e)&&"none"===S.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ve=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),h=["Top","Right","Bottom","Left"],k=x.documentElement,A=function(e){return S.contains(e.ownerDocument,e)},ye={composed:!0};k.getRootNode&&(A=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});function be(e,t,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return S.css(e,t,"")},c=a(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),u=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+c)&&ve.exec(S.css(e,t));if(u&&u[3]!==l){for(l=l||u[3],u=+(c/=2)||1;s--;)S.style(e,t,u+l),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),u/=o;S.style(e,t,(u*=2)+l),n=n||[]}return n&&(u=+u||+c||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r)&&(r.unit=l,r.start=u,r.end=i),i}var _e={};function E(e,t){for(var n,r,i,o,s,a=[],c=0,l=e.length;c<l;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(a[c]=_.get(r,"display")||null,a[c]||(r.style.display="")),""===r.style.display&&me(r)&&(a[c]=(s=o=void 0,o=(i=r).ownerDocument,i=i.nodeName,(s=_e[i])||(o=o.body.appendChild(o.createElement(i)),s=S.css(o,"display"),o.parentNode.removeChild(o),_e[i]=s="none"===s?"block":s),s))):"none"!==n&&(a[c]="none",_.set(r,"display",n)));for(c=0;c<l;c++)null!=a[c]&&(e[c].style.display=a[c]);return e}S.fn.extend({show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){me(this)?S(this).show():S(this).hide()})}});var we=/^(?:checkbox|radio)$/i,xe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Se=/^$|^module$|\/(?:java|ecma)script/i,T=(j=x.createDocumentFragment().appendChild(x.createElement("div")),(o=x.createElement("input")).setAttribute("type","radio"),o.setAttribute("checked","checked"),o.setAttribute("name","t"),j.appendChild(o),m.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,j.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!j.cloneNode(!0).lastChild.defaultValue,j.innerHTML="<option></option>",m.option=!!j.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function O(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&c(e,t)?S.merge([e],n):n}function Ce(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],"globalEval",!t||_.get(t[n],"globalEval"))}T.tbody=T.tfoot=T.colgroup=T.caption=T.thead,T.th=T.td,m.option||(T.optgroup=T.option=[1,"<select multiple='multiple'>","</select>"]);var ke=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var o,s,a,c,l,u=t.createDocumentFragment(),d=[],h=0,f=e.length;h<f;h++)if((o=e[h])||0===o)if("object"===p(o))S.merge(d,o.nodeType?[o]:o);else if(ke.test(o)){for(s=s||u.appendChild(t.createElement("div")),a=(xe.exec(o)||["",""])[1].toLowerCase(),a=T[a]||T._default,s.innerHTML=a[1]+S.htmlPrefilter(o)+a[2],l=a[0];l--;)s=s.lastChild;S.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(t.createTextNode(o));for(u.textContent="",h=0;o=d[h++];)if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(c=A(o),s=O(u.appendChild(o),"script"),c&&Ce(s),n)for(l=0;o=s[l++];)Se.test(o.type||"")&&n.push(o);return u}var Ee=/^([^.]*)(?:\.(.+)|)/;function n(){return!0}function f(){return!1}function Te(e,t){return e===function(){try{return x.activeElement}catch(e){}}()==("focus"===t)}function Oe(e,t,n,r,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)Oe(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=f;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return S().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ne(e,i,o){o?(_.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=_.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),_.set(this,i,r),t=o(this,i),this[i](),r!==(n=_.get(this,i))||t?_.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(_.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===_.get(e,i)&&S.event.add(e,i,n)}S.event={global:{},add:function(t,e,n,r,i){var o,s,a,c,l,u,d,h,f,p=_.get(t);if(v(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(k,i),n.guid||(n.guid=S.guid++),a=(a=p.events)||(p.events=Object.create(null)),s=(s=p.handle)||(p.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(C)||[""]).length;c--;)d=f=(h=Ee.exec(e[c])||[])[1],h=(h[2]||"").split(".").sort(),d&&(l=S.event.special[d]||{},d=(i?l.delegateType:l.bindType)||d,l=S.event.special[d]||{},f=S.extend({type:d,origType:f,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(u=a[d])||((u=a[d]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(t,r,h,s))||t.addEventListener&&t.addEventListener(d,s),l.add&&(l.add.call(t,f),f.handler.guid||(f.handler.guid=n.guid)),i?u.splice(u.delegateCount++,0,f):u.push(f),S.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,c,l,u,d,h,f,p,g,m=_.hasData(e)&&_.get(e);if(m&&(c=m.events)){for(l=(t=(t||"").match(C)||[""]).length;l--;)if(f=g=(a=Ee.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(d=S.event.special[f]||{},h=c[f=(r?d.delegateType:d.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)u=h[o],!i&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,m.handle)||S.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)S.event.remove(e,f+t[l],n,r,!0);S.isEmptyObject(c)&&_.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,s=new Array(arguments.length),a=S.event.fix(e),e=(_.get(this,"events")||Object.create(null))[a.type]||[],c=S.event.special[a.type]||{};for(s[0]=a,t=1;t<arguments.length;t++)s[t]=arguments[t];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(o=S.event.handlers.call(this,a,e),t=0;(r=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==i.namespace&&!a.rnamespace.test(i.namespace)||(a.handleObj=i,a.data=i.data,void 0!==(i=((S.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,r,i,o,s,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],s={},n=0;n<c;n++)void 0===s[i=(r=t[n]).selector+" "]&&(s[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),s[i]&&o.push(r);o.length&&a.push({elem:l,handlers:o})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return we.test(e.type)&&e.click&&c(e,"input")&&Ne(e,"click",n),!1},trigger:function(e){e=this||e;return we.test(e.type)&&e.click&&c(e,"input")&&Ne(e,"click"),!0},_default:function(e){e=e.target;return we.test(e.type)&&e.click&&c(e,"input")&&_.get(e,"click")||c(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?n:f,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=n,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=n,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=n,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(t,e){S.event.special[t]={setup:function(){return Ne(this,t,Te),!1},trigger:function(){return Ne(this,t),!0},_default:function(e){return _.get(e.target,t)},delegateType:e}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Oe(this,e,t,n,r)},one:function(e,t,n,r){return Oe(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=f),this.each(function(){S.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i])}return this}});var Me=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Le(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function De(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Re(e,t){var n,r,i,o;if(1===t.nodeType){if(_.hasData(e)&&(o=_.get(e).events))for(i in _.remove(t,"handle events"),o)for(n=0,r=o[i].length;n<r;n++)S.event.add(t,i,o[i][n]);l.hasData(e)&&(e=l.access(e),e=S.extend({},e),l.set(t,e))}}function N(n,r,i,o){r=B(r);var e,t,s,a,c,l,u=0,d=n.length,h=d-1,f=r[0],p=y(f);if(p||1<d&&"string"==typeof f&&!m.checkClone&&je.test(f))return n.each(function(e){var t=n.eq(e);p&&(r[0]=f.call(this,e,t.html())),N(t,r,i,o)});if(d&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=S.map(O(e,"script"),Ie)).length;u<d;u++)c=e,u!==h&&(c=S.clone(c,!0,!0),a)&&S.merge(s,O(c,"script")),i.call(n[u],c,u);if(a)for(l=s[s.length-1].ownerDocument,S.map(s,De),u=0;u<a;u++)c=s[u],Se.test(c.type||"")&&!_.access(c,"globalEval")&&S.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?S._evalUrl&&!c.noModule&&S._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):X(c.textContent.replace(Pe,""),c,l))}return n}function Be(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(O(r)),r.parentNode&&(n&&A(r)&&Ce(O(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,s,a,c,l,u=e.cloneNode(!0),d=A(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(s=O(u),r=0,i=(o=O(e)).length;r<i;r++)a=o[r],c=s[r],l=void 0,"input"===(l=c.nodeName.toLowerCase())&&we.test(a.type)?c.checked=a.checked:"input"!==l&&"textarea"!==l||(c.defaultValue=a.defaultValue);if(t)if(n)for(o=o||O(e),s=s||O(u),r=0,i=o.length;r<i;r++)Re(o[r],s[r]);else Re(e,u);return 0<(s=O(u,"script")).length&&Ce(s,!d&&O(e,"script")),u},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(v(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[l.expando]&&(n[l.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return d(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return N(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return N(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Le(this,e)).insertBefore(e,t.firstChild)})},before:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(O(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return d(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Me.test(e)&&!T[(xe.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(O(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return N(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(O(this)),t)&&t.replaceChild(e,this)},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[s](t),H.apply(n,t.get());return this.pushStack(n)}});function He(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:w).getComputedStyle(e)}function Fe(e,t,n){var r,i={};for(r in t)i[r]=e.style[r],e.style[r]=t[r];for(r in n=n.call(e),t)e.style[r]=i[r];return n}var qe,ze,Ue,We,Ve,Ge,Xe,i,$e=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Ye=/^--/,Ke=new RegExp(h.join("|"),"i"),o="[\\x20\\t\\r\\n\\f]",Qe=new RegExp("^"+o+"+|((?:^|[^\\\\])(?:\\\\.)*)"+o+"+$","g");function Je(){var e;i&&(Xe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",i.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",k.appendChild(Xe).appendChild(i),e=w.getComputedStyle(i),qe="1%"!==e.top,Ge=12===Ze(e.marginLeft),i.style.right="60%",We=36===Ze(e.right),ze=36===Ze(e.width),i.style.position="absolute",Ue=12===Ze(i.offsetWidth/3),k.removeChild(Xe),i=null)}function Ze(e){return Math.round(parseFloat(e))}function et(e,t,n){var r,i=Ye.test(t),o=e.style;return(n=n||He(e))&&(r=n.getPropertyValue(t)||n[t],""!==(r=i?r&&(r.replace(Qe,"$1")||void 0):r)||A(e)||(r=S.style(e,t)),!m.pixelBoxStyles())&&$e.test(r)&&Ke.test(t)&&(i=o.width,e=o.minWidth,t=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=n.width,o.width=i,o.minWidth=e,o.maxWidth=t),void 0!==r?r+"":r}function tt(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Xe=x.createElement("div"),(i=x.createElement("div")).style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===i.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return Je(),ze},pixelBoxStyles:function(){return Je(),We},pixelPosition:function(){return Je(),qe},reliableMarginLeft:function(){return Je(),Ge},scrollboxSize:function(){return Je(),Ue},reliableTrDimensions:function(){var e,t,n;return null==Ve&&(e=x.createElement("table"),t=x.createElement("tr"),n=x.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",k.appendChild(e).appendChild(t).appendChild(n),n=w.getComputedStyle(t),Ve=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===t.offsetHeight,k.removeChild(e)),Ve}}));var nt=["Webkit","Moz","ms"],rt=x.createElement("div").style,it={};function ot(e){var t=S.cssProps[e]||it[e];return t||(e in rt?e:it[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if((e=nt[n]+t)in rt)return e}(e)||e)}var st=/^(none|table(?!-c[ea]).+)/,at={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"};function lt(e,t,n){var r=ve.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ut(e,t,n,r,i,o){var s="width"===t?1:0,a=0,c=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=S.css(e,n+h[s],!0,i)),r?("content"===n&&(c-=S.css(e,"padding"+h[s],!0,i)),"margin"!==n&&(c-=S.css(e,"border"+h[s]+"Width",!0,i))):(c+=S.css(e,"padding"+h[s],!0,i),"padding"!==n?c+=S.css(e,"border"+h[s]+"Width",!0,i):a+=S.css(e,"border"+h[s]+"Width",!0,i));return!r&&0<=o&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-a-.5))||0),c}function dt(e,t,n){var r=He(e),i=(!m.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,s=et(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&c(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),o=a in e)&&(s=e[a]),(s=parseFloat(s)||0)+ut(e,t,n||(i?"border":"content"),o,r,s)+"px"}function s(e,t,n,r,i){return new s.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=et(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=b(t),c=Ye.test(t),l=e.style;if(c||(t=ot(a)),s=S.cssHooks[t]||S.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ve.exec(n))&&i[1]&&(n=be(e,t,i),o="number"),null==n||n!=n||("number"!==o||c||(n+=i&&i[3]||(S.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r)))||(c?l.setProperty(t,n):l[t]=n)}},css:function(e,t,n,r){var i,o=b(t);return Ye.test(t)||(t=ot(o)),"normal"===(i=void 0===(i=(o=S.cssHooks[t]||S.cssHooks[o])&&"get"in o?o.get(e,!0,n):i)?et(e,t,r):i)&&t in ct&&(i=ct[t]),(""===n||n)&&(o=parseFloat(i),!0===n||isFinite(o))?o||0:i}}),S.each(["height","width"],function(e,s){S.cssHooks[s]={get:function(e,t,n){if(t)return!st.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?dt(e,s,n):Fe(e,at,function(){return dt(e,s,n)})},set:function(e,t,n){var r=He(e),i=!m.scrollboxSize()&&"absolute"===r.position,o=(i||n)&&"border-box"===S.css(e,"boxSizing",!1,r),n=n?ut(e,s,n,o,r):0;return o&&i&&(n-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(r[s])-ut(e,s,"border",!1,r)-.5)),n&&(o=ve.exec(t))&&"px"!==(o[3]||"px")&&(e.style[s]=t,t=S.css(e,s)),lt(0,t,n)}}}),S.cssHooks.marginLeft=tt(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(et(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+h[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=lt)}),S.fn.extend({css:function(e,t){return d(this,function(e,t,n){var r,i,o={},s=0;if(Array.isArray(t)){for(r=He(e),i=t.length;s<i;s++)o[t[s]]=S.css(e,t[s],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=s).prototype={constructor:s,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=s.propHooks[this.prop];return(e&&e.get?e:s.propHooks._default).get(this)},run:function(e){var t,n=s.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:s.propHooks._default).set(this),this}}).init.prototype=s.prototype,(s.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=S.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ot(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=s.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=s.prototype.init,S.fx.step={};var M,ht,j,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function gt(){ht&&(!1===x.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(gt):w.setTimeout(gt,S.fx.interval),S.fx.tick())}function mt(){return w.setTimeout(function(){M=void 0}),M=Date.now()}function vt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=h[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function yt(e,t,n){for(var r,i=(P.tweeners[t]||[]).concat(P.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function P(i,e,t){var n,o,r,s,a,c,l,u=0,d=P.prefilters.length,h=S.Deferred().always(function(){delete f.elem}),f=function(){if(!o){for(var e=M||mt(),e=Math.max(0,p.startTime+p.duration-e),t=1-(e/p.duration||0),n=0,r=p.tweens.length;n<r;n++)p.tweens[n].run(t);if(h.notifyWith(i,[p,t,e]),t<1&&r)return e;r||h.notifyWith(i,[p,1,0]),h.resolveWith(i,[p])}return!1},p=h.promise({elem:i,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:M||mt(),duration:t.duration,tweens:[],createTween:function(e,t){t=S.Tween(i,p.opts,e,t,p.opts.specialEasing[e]||p.opts.easing);return p.tweens.push(t),t},stop:function(e){var t=0,n=e?p.tweens.length:0;if(!o){for(o=!0;t<n;t++)p.tweens[t].run(1);e?(h.notifyWith(i,[p,1,0]),h.resolveWith(i,[p,e])):h.rejectWith(i,[p,e])}return this}}),g=p.props,m=g,v=p.opts.specialEasing;for(r in m)if(a=v[s=b(r)],c=m[r],Array.isArray(c)&&(a=c[1],c=m[r]=c[0]),r!==s&&(m[s]=c,delete m[r]),(l=S.cssHooks[s])&&"expand"in l)for(r in c=l.expand(c),delete m[s],c)r in m||(m[r]=c[r],v[r]=a);else v[s]=a;for(;u<d;u++)if(n=P.prefilters[u].call(p,i,g,p.opts))return y(n.stop)&&(S._queueHooks(p.elem,p.opts.queue).stop=n.stop.bind(n)),n;return S.map(g,yt,p),y(p.opts.start)&&p.opts.start.call(i,p),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always),S.fx.timer(S.extend(f,{elem:i,anim:p,queue:p.opts.queue})),p}S.Animation=S.extend(P,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return be(n.elem,e,ve.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=y(e)?(t=e,["*"]):e.match(C)).length;r<i;r++)n=e[r],P.tweeners[n]=P.tweeners[n]||[],P.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,s,a,c,l,u="width"in t||"height"in t,d=this,h={},f=e.style,p=e.nodeType&&me(e),g=_.get(e,"fxshow");for(r in n.queue||(null==(s=S._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,S.queue(e,"fx").length||s.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}h[r]=g&&g[r]||S.style(e,r)}if((c=!S.isEmptyObject(t))||!S.isEmptyObject(h))for(r in u&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=g&&g.display)&&(l=_.get(e,"display")),"none"===(u=S.css(e,"display"))&&(l?u=l:(E([e],!0),l=e.style.display||l,u=S.css(e,"display"),E([e]))),"inline"===u||"inline-block"===u&&null!=l)&&"none"===S.css(e,"float")&&(c||(d.done(function(){f.display=l}),null==l&&(u=f.display,l="none"===u?"":u)),f.display="inline-block"),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),c=!1,h)c||(g?"hidden"in g&&(p=g.hidden):g=_.access(e,"fxshow",{display:l}),o&&(g.hidden=!p),p&&E([e],!0),d.done(function(){for(r in p||E([e]),_.remove(e,"fxshow"),h)S.style(e,r,h[r])})),c=yt(p?g[r]:0,r,d),r in g||(g[r]=c.start,p&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?P.prefilters.unshift(e):P.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(me).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){function i(){var e=P(this,S.extend({},t),s);(o||_.get(this,"finish"))&&e.stop(!0)}var o=S.isEmptyObject(t),s=S.speed(e,n,r);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,e,o){function s(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&s(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&s(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=_.get(this),n=t[s+"queue"],r=t[s+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===s&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(vt(r,!0),e,t,n)}}),S.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(M=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),M=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ht||(ht=!0,gt())},S.fx.stop=function(){ht=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,this.queue(e=e||"fx",function(e,t){var n=w.setTimeout(e,r);t.stop=function(){w.clearTimeout(n)}})},j=x.createElement("input"),e=x.createElement("select").appendChild(x.createElement("option")),j.type="checkbox",m.checkOn=""!==j.value,m.optSelected=e.selected,(j=x.createElement("input")).value="t",j.type="radio",m.radioValue="t"===j.value;var bt,_t=S.expr.attrHandle,wt=(S.fn.extend({attr:function(e,t){return d(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):!(i&&"get"in i&&null!==(r=i.get(e,t)))&&null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){var n;if(!m.radioValue&&"radio"===t&&c(e,"input"))return n=e.value,e.setAttribute("type",t),n&&(e.value=n),t}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(C);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),bt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var s=_t[t]||S.find.attr;_t[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=_t[o],_t[o]=r,r=null!=s(e,t,n)?o:null,_t[o]=i),r}}),/^(?:input|select|textarea|button)$/i),xt=/^(?:a|area)$/i;function L(e){return(e.match(C)||[]).join(" ")}function I(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(C)||[]}S.fn.extend({prop:function(e,t){return d(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||xt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,s;return y(t)?this.each(function(e){S(this).addClass(t.call(this,e,I(this)))}):(e=St(t)).length?this.each(function(){if(r=I(this),n=1===this.nodeType&&" "+L(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=L(n),r!==s&&this.setAttribute("class",s)}}):this},removeClass:function(t){var e,n,r,i,o,s;return y(t)?this.each(function(e){S(this).removeClass(t.call(this,e,I(this)))}):arguments.length?(e=St(t)).length?this.each(function(){if(r=I(this),n=1===this.nodeType&&" "+L(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];-1<n.indexOf(" "+i+" ");)n=n.replace(" "+i+" "," ");s=L(n),r!==s&&this.setAttribute("class",s)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,s=typeof t,a="string"==s||Array.isArray(t);return y(t)?this.each(function(e){S(this).toggleClass(t.call(this,e,I(this),n),n)}):"boolean"==typeof n&&a?n?this.addClass(t):this.removeClass(t):(e=St(t),this.each(function(){if(a)for(o=S(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!=s||((r=I(this))&&_.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",!r&&!1!==t&&_.get(this,"__className__")||""))}))},hasClass:function(e){for(var t,n=0,r=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+L(I(t))+" ").indexOf(r))return!0;return!1}});function Ct(e){e.stopPropagation()}var kt=/\r/g,At=(S.fn.extend({val:function(t){var n,e,r,i=this[0];return arguments.length?(r=y(t),this.each(function(e){1!==this.nodeType||(null==(e=r?t.call(this,e,S(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(e){return null==e?"":e+""})),(n=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value"))||(this.value=e)})):i?(n=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(i,"value"))?e:"string"==typeof(e=i.value)?e.replace(kt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:L(S.text(e))}},select:{get:function(e){for(var t,n=e.options,r=e.selectedIndex,i="select-one"===e.type,o=i?null:[],s=i?r+1:n.length,a=r<0?s:i?r:0;a<s;a++)if(((t=n[a]).selected||a===r)&&!t.disabled&&(!t.parentNode.disabled||!c(t.parentNode,"optgroup"))){if(t=S(t).val(),i)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,o=S.makeArray(t),s=i.length;s--;)((r=i[s]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},m.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in w,/^(?:focusinfocus|focusoutblur)$/),Et=(S.extend(S.event,{trigger:function(e,t,n,r){var i,o,s,a,c,l,u,d=[n||x],h=U.call(e,"type")?e.type:e,f=U.call(e,"namespace")?e.namespace.split("."):[],p=u=o=n=n||x;if(3!==n.nodeType&&8!==n.nodeType&&!At.test(h+S.event.triggered)&&(-1<h.indexOf(".")&&(h=(f=h.split(".")).shift(),f.sort()),a=h.indexOf(":")<0&&"on"+h,(e=e[S.expando]?e:new S.Event(h,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),l=S.event.special[h]||{},r||!l.trigger||!1!==l.trigger.apply(n,t))){if(!r&&!l.noBubble&&!g(n)){for(s=l.delegateType||h,At.test(s+h)||(p=p.parentNode);p;p=p.parentNode)d.push(p),o=p;o===(n.ownerDocument||x)&&d.push(o.defaultView||o.parentWindow||w)}for(i=0;(p=d[i++])&&!e.isPropagationStopped();)u=p,e.type=1<i?s:l.bindType||h,(c=(_.get(p,"events")||Object.create(null))[e.type]&&_.get(p,"handle"))&&c.apply(p,t),(c=a&&p[a])&&c.apply&&v(p)&&(e.result=c.apply(p,t),!1===e.result)&&e.preventDefault();return e.type=h,r||e.isDefaultPrevented()||l._default&&!1!==l._default.apply(d.pop(),t)||!v(n)||a&&y(n[h])&&!g(n)&&((o=n[a])&&(n[a]=null),S.event.triggered=h,e.isPropagationStopped()&&u.addEventListener(h,Ct),n[h](),e.isPropagationStopped()&&u.removeEventListener(h,Ct),S.event.triggered=void 0,o)&&(n[a]=o),e.result}},simulate:function(e,t,n){n=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(n,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){S.event.simulate(r,e.target,S.event.fix(e))}S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=_.access(e,r);t||e.addEventListener(n,i,!0),_.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=_.access(e,r)-1;t?_.access(e,r,t):(e.removeEventListener(n,i,!0),_.remove(e,r))}}}),w.location),Tt={guid:Date.now()},Ot=/\?/,Nt=(S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t},/\[\]$/),Mt=/\r?\n/g,jt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){function n(e,t){t=y(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var r,i=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){n(this.name,this.value)});else for(r in e)!function n(r,e,i,o){if(Array.isArray(e))S.each(e,function(e,t){i||Nt.test(r)?o(r,t):n(r+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,o)});else if(i||"object"!==p(e))o(r,e);else for(var t in e)n(r+"["+t+"]",e[t],i,o)}(r,e[r],t,n);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Pt.test(this.nodeName)&&!jt.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}});var Lt=/%20/g,It=/#.*$/,Dt=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ft={},qt={},zt="*/".concat("*"),Ut=x.createElement("a");function Wt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(C)||[];if(y(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,r,i,o){var s={},a=t===qt;function c(e){var n;return s[e]=!0,S.each(t[e]||[],function(e,t){t=t(r,i,o);return"string"!=typeof t||a||s[t]?a?!(n=t):void 0:(r.dataTypes.unshift(t),c(t),!1)}),n}return c(r.dataTypes[0])||!s["*"]&&c("*")}function Gt(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&S.extend(!0,e,r),e}Ut.href=Et.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,S.ajaxSettings),t):Gt(S.ajaxSettings,e)},ajaxPrefilter:Wt(Ft),ajaxTransport:Wt(qt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var c,l,u,n,d,h,f,r,p=S.ajaxSetup({},t=t||{}),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?S(g):S.event,v=S.Deferred(),y=S.Callbacks("once memory"),b=p.statusCode||{},i={},o={},s="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n)for(n={};t=Rt.exec(u);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?u:null},setRequestHeader:function(e,t){return null==h&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,i[e]=t),this},overrideMimeType:function(e){return null==h&&(p.mimeType=e),this},statusCode:function(e){if(e)if(h)_.always(e[_.status]);else for(var t in e)b[t]=[b[t],e[t]];return this},abort:function(e){e=e||s;return c&&c.abort(e),a(0,e),this}};if(v.promise(_),p.url=((e||p.url||Et.href)+"").replace(Ht,Et.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(C)||[""],null==p.crossDomain){e=x.createElement("a");try{e.href=p.url,e.href=e.href,p.crossDomain=Ut.protocol+"//"+Ut.host!=e.protocol+"//"+e.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Vt(Ft,p,t,_),!h){for(r in(f=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Bt.test(p.type),l=p.url.replace(It,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Lt,"+")):(e=p.url.slice(l.length),p.data&&(p.processData||"string"==typeof p.data)&&(l+=(Ot.test(l)?"&":"?")+p.data,delete p.data),!1===p.cache&&(l=l.replace(Dt,"$1"),e=(Ot.test(l)?"&":"?")+"_="+Tt.guid+++e),p.url=l+e),p.ifModified&&(S.lastModified[l]&&_.setRequestHeader("If-Modified-Since",S.lastModified[l]),S.etag[l])&&_.setRequestHeader("If-None-Match",S.etag[l]),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&_.setRequestHeader("Content-Type",p.contentType),_.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+zt+"; q=0.01":""):p.accepts["*"]),p.headers)_.setRequestHeader(r,p.headers[r]);if(p.beforeSend&&(!1===p.beforeSend.call(g,_,p)||h))return _.abort();if(s="abort",y.add(p.complete),_.done(p.success),_.fail(p.error),c=Vt(qt,p,t,_)){if(_.readyState=1,f&&m.trigger("ajaxSend",[_,p]),h)return _;p.async&&0<p.timeout&&(d=w.setTimeout(function(){_.abort("timeout")},p.timeout));try{h=!1,c.send(i,a)}catch(e){if(h)throw e;a(-1,e)}}else a(-1,"No Transport")}return _;function a(e,t,n,r){var i,o,s,a=t;h||(h=!0,d&&w.clearTimeout(d),c=void 0,u=r||"",_.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var r,i,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}s=s||i}o=o||s}if(o)return o!==c[0]&&c.unshift(o),n[o]}(p,_,n)),!r&&-1<S.inArray("script",p.dataTypes)&&S.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,s,a,c,l={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=l[c+" "+o]||l["* "+o]))for(i in l)if((a=i.split(" "))[1]===o&&(s=l[c+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[i]:!0!==l[i]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(p,s,_,r),r?(p.ifModified&&((n=_.getResponseHeader("Last-Modified"))&&(S.lastModified[l]=n),n=_.getResponseHeader("etag"))&&(S.etag[l]=n),204===e||"HEAD"===p.type?a="nocontent":304===e?a="notmodified":(a=s.state,i=s.data,r=!(o=s.error))):(o=a,!e&&a||(a="error",e<0&&(e=0))),_.status=e,_.statusText=(t||a)+"",r?v.resolveWith(g,[i,a,_]):v.rejectWith(g,[_,a,o]),_.statusCode(b),b=void 0,f&&m.trigger(r?"ajaxSuccess":"ajaxError",[_,p,r?i:o]),y.fireWith(g,[_,a]),f&&(m.trigger("ajaxComplete",[_,p]),--S.active||S.event.trigger("ajaxStop")))}},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return y(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){return this[0]&&(y(e)&&(e=e.call(this[0])),e=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return y(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=y(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},$t=S.ajaxSettings.xhr(),Yt=(m.cors=!!$t&&"withCredentials"in $t,m.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,s;if(m.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=s=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Xt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),s=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&w.setTimeout(function(){o&&s()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),x.head.appendChild(r[0])},abort:function(){i&&i()}}}),[]),Kt=/(=)\?(?=&|$)|\?\?/,Qt=(S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||S.expando+"_"+Tt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,s=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Kt,"$1"+r):!1!==e.jsonp&&(e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=w[r],w[r]=function(){o=arguments},n.always(function(){void 0===i?S(w).removeProp(r):w[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Yt.push(r)),o&&y(i)&&i(o[0]),o=i=void 0}),"script"}),m.createHTMLDocument=((o=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===o.childNodes.length),S.parseHTML=function(e,t,n){var r;return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,t.head.appendChild(r)):t=x),r=!n&&[],(n=Q.exec(e))?[t.createElement(n[1])]:(n=Ae([e],t,r),r&&r.length&&S(r).remove(),S.merge([],n.childNodes)))},S.fn.load=function(e,t,n){var r,i,o,s=this,a=e.indexOf(" ");return-1<a&&(r=L(e.slice(a)),e=e.slice(0,a)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<s.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,s,a=S.css(e,"position"),c=S(e),l={};"static"===a&&(e.style.position="relative"),o=c.offset(),r=S.css(e,"top"),s=S.css(e,"left"),a=("absolute"===a||"fixed"===a)&&-1<(r+s).indexOf("auto")?(i=(a=c.position()).top,a.left):(i=parseFloat(r)||0,parseFloat(s)||0),null!=(t=y(t)?t.call(e,n,S.extend({},o)):t).top&&(l.top=t.top-o.top+i),null!=t.left&&(l.left=t.left-o.left+a),"using"in t?t.using.call(e,l):c.css(l)}},S.fn.extend({offset:function(t){var e,n;return arguments.length?void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)}):(n=this[0])?n.getClientRects().length?(e=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||k})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return d(this,function(e,t,n){var r;if(g(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=tt(m.pixelPosition,function(e,t){if(t)return t=et(e,n),$e.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(s,a){S.each({padding:"inner"+s,content:a,"":"outer"+s},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return d(this,function(e,t,n){var r;return g(e)?0===o.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+s],r["scroll"+s],e.body["offset"+s],r["offset"+s],r["client"+s])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},a,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g),Jt=(S.proxy=function(e,t){var n,r;if("string"==typeof t&&(r=e[t],t=e,e=r),y(e))return n=a.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(a.call(arguments)))}).guid=e.guid=e.guid||S.guid++,r},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=c,S.isFunction=y,S.isWindow=g,S.camelCase=b,S.type=p,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Qt,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S}),w.jQuery),Zt=w.$;return S.noConflict=function(e){return w.$===S&&(w.$=Zt),e&&w.jQuery===S&&(w.jQuery=Jt),S},void 0===D&&(w.jQuery=w.$=S),S})},{}],7:[function(e,i,o){!function(Dt){!function(){var e,t,n,r;e=this,t=function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof Dt&&Dt.global===Dt&&Dt||Function("return this")()||{},r=Array.prototype,D=Object.prototype,R="undefined"!=typeof Symbol?Symbol.prototype:null,B=r.push,c=r.slice,d=D.toString,H=D.hasOwnProperty,t="undefined"!=typeof ArrayBuffer,n="undefined"!=typeof DataView,F=Array.isArray,q=Object.keys,z=Object.create,U=t&&ArrayBuffer.isView,W=isNaN,V=isFinite,G=!{toString:null}.propertyIsEnumerable("toString"),X=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],$=Math.pow(2,53)-1;function u(i,o){return o=null==o?i.length-1:+o,function(){for(var e=Math.max(arguments.length-o,0),t=Array(e),n=0;n<e;n++)t[n]=arguments[n+o];switch(o){case 0:return i.call(this,t);case 1:return i.call(this,arguments[0],t);case 2:return i.call(this,arguments[0],arguments[1],t)}for(var r=Array(o+1),n=0;n<o;n++)r[n]=arguments[n];return r[o]=t,i.apply(this,r)}}function o(e){var t=typeof e;return"function"==t||"object"==t&&!!e}function Y(e){return void 0===e}function K(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)}function i(e){var t="[object "+e+"]";return function(e){return d.call(e)===t}}var Q=i("String"),J=i("Number"),s=i("Date"),Z=i("RegExp"),ee=i("Error"),te=i("Symbol"),ne=i("ArrayBuffer"),a=i("Function"),e=e.document&&e.document.childNodes,h=a="function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof e?function(e){return"function"==typeof e||!1}:a,e=i("Object"),re=n&&e(new DataView(new ArrayBuffer(8))),a="undefined"!=typeof Map&&e(new Map),n=i("DataView");var f=re?function(e){return null!=e&&h(e.getInt8)&&ne(e.buffer)}:n,p=F||i("Array");function g(e,t){return null!=e&&H.call(e,t)}var ie=i("Arguments"),oe=(!function(){ie(arguments)||(ie=function(e){return g(e,"callee")})}(),ie);function se(e){return J(e)&&W(e)}function ae(e){return function(){return e}}function ce(t){return function(e){e=t(e);return"number"==typeof e&&0<=e&&e<=$}}function le(t){return function(e){return null==e?void 0:e[t]}}var m=le("byteLength"),ue=ce(m),de=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var he=t?function(e){return U?U(e)&&!f(e):ue(e)&&de.test(d.call(e))}:ae(!1),v=le("length");function fe(e,t){t=function(t){for(var n={},e=t.length,r=0;r<e;++r)n[t[r]]=!0;return{contains:function(e){return!0===n[e]},push:function(e){return n[e]=!0,t.push(e)}}}(t);var n=X.length,r=e.constructor,i=h(r)&&r.prototype||D,o="constructor";for(g(e,o)&&!t.contains(o)&&t.push(o);n--;)(o=X[n])in e&&e[o]!==i[o]&&!t.contains(o)&&t.push(o)}function y(e){if(!o(e))return[];if(q)return q(e);var t,n=[];for(t in e)g(e,t)&&n.push(t);return G&&fe(e,n),n}function pe(e,t){var n=y(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0}function b(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)}function ge(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,m(e))}b.VERSION="1.13.6",b.prototype.valueOf=b.prototype.toJSON=b.prototype.value=function(){return this._wrapped},b.prototype.toString=function(){return String(this._wrapped)};var me="[object DataView]";function ve(e,t,n,r){var i;return e===t?0!==e||1/e==1/t:null!=e&&null!=t&&(e!=e?t!=t:("function"==(i=typeof e)||"object"==i||"object"==typeof t)&&function e(t,n,r,i){t instanceof b&&(t=t._wrapped);n instanceof b&&(n=n._wrapped);var o=d.call(t);if(o!==d.call(n))return!1;if(re&&"[object Object]"==o&&f(t)){if(!f(n))return!1;o=me}switch(o){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return R.valueOf.call(t)===R.valueOf.call(n);case"[object ArrayBuffer]":case me:return e(ge(t),ge(n),r,i)}o="[object Array]"===o;if(!o&&he(t)){var s=m(t);if(s!==m(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof n)return!1;var s=t.constructor,a=n.constructor;if(s!==a&&!(h(s)&&s instanceof s&&h(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1}r=r||[];i=i||[];var c=r.length;for(;c--;)if(r[c]===t)return i[c]===n;r.push(t);i.push(n);if(o){if((c=t.length)!==n.length)return!1;for(;c--;)if(!ve(t[c],n[c],r,i))return!1}else{var l,u=y(t);if(c=u.length,y(n).length!==c)return!1;for(;c--;)if(l=u[c],!g(n,l)||!ve(t[l],n[l],r,i))return!1}r.pop();i.pop();return!0}(e,t,n,r))}function l(e){if(!o(e))return[];var t,n=[];for(t in e)n.push(t);return G&&fe(e,n),n}function ye(r){var i=v(r);return function(e){if(null==e)return!1;var t=l(e);if(v(t))return!1;for(var n=0;n<i;n++)if(!h(e[r[n]]))return!1;return r!==_e||!h(e[be])}}var be="forEach",e=["clear","delete"],n=["get","has","set"],F=e.concat(be,n),_e=e.concat(n),t=["add"].concat(e,be,"has"),n=a?ye(F):i("Map"),e=a?ye(_e):i("WeakMap"),F=a?ye(t):i("Set"),a=i("WeakSet");function _(e){for(var t=y(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function we(e){for(var t={},n=y(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function xe(e){var t,n=[];for(t in e)h(e[t])&&n.push(t);return n.sort()}function Se(c,l){return function(e){var t=arguments.length;if(l&&(e=Object(e)),!(t<2||null==e))for(var n=1;n<t;n++)for(var r=arguments[n],i=c(r),o=i.length,s=0;s<o;s++){var a=i[s];l&&void 0!==e[a]||(e[a]=r[a])}return e}}var Ce=Se(l),w=Se(y),ke=Se(l,!0);function Ae(e){var t;return o(e)?z?z(e):((t=function(){}).prototype=e,e=new t,t.prototype=null,e):{}}function Ee(e){return p(e)?e:[e]}function x(e){return b.toPath(e)}function Te(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function Oe(e,t,n){e=Te(e,x(t));return Y(e)?n:e}function Ne(e){return e}function S(t){return t=w({},t),function(e){return pe(e,t)}}function Me(t){return t=x(t),function(e){return Te(e,t)}}function C(i,o,e){if(void 0===o)return i;switch(null==e?3:e){case 1:return function(e){return i.call(o,e)};case 3:return function(e,t,n){return i.call(o,e,t,n)};case 4:return function(e,t,n,r){return i.call(o,e,t,n,r)}}return function(){return i.apply(o,arguments)}}function je(e,t,n){return null==e?Ne:h(e)?C(e,t,n):(o(e)&&!p(e)?S:Me)(e)}function Pe(e,t){return je(e,t,1/0)}function k(e,t,n){return b.iteratee!==Pe?b.iteratee(e,t):je(e,t,n)}function Le(){}function Ie(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}b.toPath=Ee,b.iteratee=Pe;var A=Date.now||function(){return(new Date).getTime()};function De(t){function n(e){return t[e]}var e="(?:"+y(t).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(e){return r.test(e=null==e?"":""+e)?e.replace(i,n):e}}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Re=De(t),t=De(we(t)),Be=b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},He=/(.)^/,Fe={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},qe=/\\|'|\r|\n|\u2028|\u2029/g;function ze(e){return"\\"+Fe[e]}var Ue=/^\s*(\w|\$)+\s*$/;var We=0;function Ve(e,t,n,r,i){return r instanceof t?(r=Ae(e.prototype),o(t=e.apply(r,i))?t:r):e.apply(n,i)}var E=u(function(i,o){function s(){for(var e=0,t=o.length,n=Array(t),r=0;r<t;r++)n[r]=o[r]===a?arguments[e++]:o[r];for(;e<arguments.length;)n.push(arguments[e++]);return Ve(i,s,this,this,n)}var a=E.placeholder;return s}),Ge=(E.placeholder=b,u(function(t,n,r){var i;if(h(t))return i=u(function(e){return Ve(t,i,n,this,r.concat(e))});throw new TypeError("Bind must be called on a function")})),T=ce(v);function O(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var i=r.length,o=0,s=v(e);o<s;o++){var a=e[o];if(T(a)&&(p(a)||oe(a)))if(1<t)O(a,t-1,n,r),i=r.length;else for(var c=0,l=a.length;c<l;)r[i++]=a[c++];else n||(r[i++]=a)}return r}var Xe=u(function(e,t){var n=(t=O(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=Ge(e[r],e)}return e});var $e=u(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),Ye=E($e,b,1);function Ke(e){return function(){return!e.apply(this,arguments)}}function Qe(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var Je=E(Qe,2);function Ze(e,t,n){t=k(t,n);for(var r,i=y(e),o=0,s=i.length;o<s;o++)if(t(e[r=i[o]],r,e))return r}function et(o){return function(e,t,n){t=k(t,n);for(var r=v(e),i=0<o?0:r-1;0<=i&&i<r;i+=o)if(t(e[i],i,e))return i;return-1}}var tt=et(1),nt=et(-1);function rt(e,t,n,r){for(var i=(n=k(n,r,1))(t),o=0,s=v(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o}function it(o,s,a){return function(e,t,n){var r=0,i=v(e);if("number"==typeof n)0<o?r=0<=n?n:Math.max(n+i,r):i=0<=n?Math.min(n+1,i):n+i+1;else if(a&&n&&i)return e[n=a(e,t)]===t?n:-1;if(t!=t)return 0<=(n=s(c.call(e,r,i),se))?n+r:-1;for(n=0<o?r:i-1;0<=n&&n<i;n+=o)if(e[n]===t)return n;return-1}}var ot=it(1,tt,rt),st=it(-1,nt);function at(e,t,n){t=(T(e)?tt:Ze)(e,t,n);if(void 0!==t&&-1!==t)return e[t]}function N(e,t,n){if(t=C(t,n),T(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else for(var r=y(e),i=0,o=r.length;i<o;i++)t(e[r[i]],r[i],e);return e}function M(e,t,n){t=k(t,n);for(var r=!T(e)&&y(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o}function ct(h){return function(e,t,n,r){var i=3<=arguments.length,o=e,s=C(t,r,4),a=n,c=!T(o)&&y(o),l=(c||o).length,u=0<h?0:l-1;for(i||(a=o[c?c[u]:u],u+=h);0<=u&&u<l;u+=h){var d=c?c[u]:u;a=s(a,o[d],d,o)}return a}}var lt=ct(1),ut=ct(-1);function j(e,r,t){var i=[];return r=k(r,t),N(e,function(e,t,n){r(e,t,n)&&i.push(e)}),i}function dt(e,t,n){t=k(t,n);for(var r=!T(e)&&y(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0}function ht(e,t,n){t=k(t,n);for(var r=!T(e)&&y(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1}function P(e,t,n,r){return T(e)||(e=_(e)),0<=ot(e,t,n="number"==typeof n&&!r?n:0)}var ft=u(function(e,n,r){var i,o;return h(n)?o=n:(n=x(n),i=n.slice(0,-1),n=n[n.length-1]),M(e,function(e){var t=o;if(!t){if(null==(e=i&&i.length?Te(e,i):e))return;t=e[n]}return null==t?t:t.apply(e,r)})});function pt(e,t){return M(e,Me(t))}function gt(e,r,t){var n,i,o=-1/0,s=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=T(e)?e:_(e)).length;a<c;a++)null!=(n=e[a])&&o<n&&(o=n);else r=k(r,t),N(e,function(e,t,n){i=r(e,t,n),(s<i||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o}var mt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function vt(e){return e?p(e)?c.call(e):Q(e)?e.match(mt):T(e)?M(e,Ne):_(e):[]}function yt(e,t,n){if(null==t||n)return(e=T(e)?e:_(e))[Ie(e.length-1)];for(var r=vt(e),n=v(r),i=(t=Math.max(Math.min(t,n),0),n-1),o=0;o<t;o++){var s=Ie(o,i),a=r[o];r[o]=r[s],r[s]=a}return r.slice(0,t)}function L(o,t){return function(n,r,e){var i=t?[[],[]]:{};return r=k(r,e),N(n,function(e,t){t=r(e,t,n);o(i,e,t)}),i}}var bt=L(function(e,t,n){g(e,n)?e[n].push(t):e[n]=[t]}),_t=L(function(e,t,n){e[n]=t}),wt=L(function(e,t,n){g(e,n)?e[n]++:e[n]=1}),xt=L(function(e,t,n){e[n?0:1].push(t)},!0);function St(e,t,n){return t in n}var Ct=u(function(e,t){var n={},r=t[0];if(null!=e){h(r)?(1<t.length&&(r=C(r,t[1])),t=l(e)):(r=St,t=O(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];r(a,s,e)&&(n[s]=a)}}return n}),kt=u(function(e,n){var t,r=n[0];return h(r)?(r=Ke(r),1<n.length&&(t=n[1])):(n=M(O(n,!1,!1),String),r=function(e,t){return!P(n,t)}),Ct(e,r,t)});function At(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Et(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:At(e,e.length-t)}function I(e,t,n){return c.call(e,null==t||n?1:t)}var Tt=u(function(e,t){return t=O(t,!0,!0),j(e,function(e){return!P(t,e)})}),Ot=u(function(e,t){return Tt(e,t)});function Nt(e,t,n,r){K(t)||(r=n,n=t,t=!1),null!=n&&(n=k(n,r));for(var i=[],o=[],s=0,a=v(e);s<a;s++){var c=e[s],l=n?n(c,s,e):c;t&&!n?(s&&o===l||i.push(c),o=l):n?P(o,l)||(o.push(l),i.push(c)):P(i,c)||i.push(c)}return i}var Mt=u(function(e){return Nt(O(e,!0,!0))});function jt(e){for(var t=e&&gt(e,v).length||0,n=Array(t),r=0;r<t;r++)n[r]=pt(e,r);return n}var Pt=u(jt);function Lt(e,t){return e._chain?b(t).chain():t}function It(n){return N(xe(n),function(e){var t=b[e]=n[e];b.prototype[e]=function(){var e=[this._wrapped];return B.apply(e,arguments),Lt(this,t.apply(b,e))}}),b}N(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=r[t];b.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),Lt(this,e)}}),N(["concat","join","slice"],function(e){var t=r[e];b.prototype[e]=function(){var e=this._wrapped;return Lt(this,e=null!=e?t.apply(e,arguments):e)}});s=It({__proto__:null,VERSION:"1.13.6",restArguments:u,isObject:o,isNull:function(e){return null===e},isUndefined:Y,isBoolean:K,isElement:function(e){return!(!e||1!==e.nodeType)},isString:Q,isNumber:J,isDate:s,isRegExp:Z,isError:ee,isSymbol:te,isArrayBuffer:ne,isDataView:f,isArray:p,isFunction:h,isArguments:oe,isFinite:function(e){return!te(e)&&V(e)&&!isNaN(parseFloat(e))},isNaN:se,isTypedArray:he,isEmpty:function(e){var t;return null==e||("number"==typeof(t=v(e))&&(p(e)||Q(e)||oe(e))?0===t:0===v(y(e)))},isMatch:pe,isEqual:function(e,t){return ve(e,t)},isMap:n,isWeakMap:e,isSet:F,isWeakSet:a,keys:y,allKeys:l,values:_,pairs:function(e){for(var t=y(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},invert:we,functions:xe,methods:xe,extend:Ce,extendOwn:w,assign:w,defaults:ke,create:function(e,t){return e=Ae(e),t&&w(e,t),e},clone:function(e){return o(e)?p(e)?e.slice():Ce({},e):e},tap:function(e,t){return t(e),e},get:Oe,has:function(e,t){for(var n=(t=x(t)).length,r=0;r<n;r++){var i=t[r];if(!g(e,i))return!1;e=e[i]}return!!n},mapObject:function(e,t,n){t=k(t,n);for(var r=y(e),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=t(e[a],a,e)}return o},identity:Ne,constant:ae,noop:Le,toPath:Ee,property:Me,propertyOf:function(t){return null==t?Le:function(e){return Oe(t,e)}},matcher:S,matches:S,times:function(e,t,n){var r=Array(Math.max(0,e));t=C(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},random:Ie,now:A,escape:Re,unescape:t,templateSettings:Be,template:function(o,e,t){e=ke({},e=!e&&t?t:e,b.templateSettings);var n,t=RegExp([(e.escape||He).source,(e.interpolate||He).source,(e.evaluate||He).source].join("|")+"|$","g"),s=0,a="__p+='";if(o.replace(t,function(e,t,n,r,i){return a+=o.slice(s,i).replace(qe,ze),s=i+e.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),e}),a+="';\n",t=e.variable){if(!Ue.test(t))throw new Error("variable is not a bare identifier: "+t)}else a="with(obj||{}){\n"+a+"}\n",t="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(t,"_",a)}catch(e){throw e.source=a,e}function r(e){return n.call(this,e,b)}return r.source="function("+t+"){\n"+a+"}",r},result:function(e,t,n){var r=(t=x(t)).length;if(!r)return h(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=h(o)?o.call(e):o}return e},uniqueId:function(e){var t=++We+"";return e?e+t:t},chain:function(e){return(e=b(e))._chain=!0,e},iteratee:Pe,partial:E,bind:Ge,bindAll:Xe,memoize:function(r,i){function o(e){var t=o.cache,n=""+(i?i.apply(this,arguments):e);return g(t,n)||(t[n]=r.apply(this,arguments)),t[n]}return o.cache={},o},delay:$e,defer:Ye,throttle:function(n,r,i){function o(){u=!1===i.leading?0:A(),s=null,l=n.apply(a,c),s||(a=c=null)}function e(){var e=A(),t=(u||!1!==i.leading||(u=e),r-(e-u));return a=this,c=arguments,t<=0||r<t?(s&&(clearTimeout(s),s=null),u=e,l=n.apply(a,c),s||(a=c=null)):s||!1===i.trailing||(s=setTimeout(o,t)),l}var s,a,c,l,u=0;return i=i||{},e.cancel=function(){clearTimeout(s),u=0,s=a=c=null},e},debounce:function(t,n,r){function i(){var e=A()-s;e<n?o=setTimeout(i,n-e):(o=null,r||(c=t.apply(l,a)),o||(a=l=null))}var o,s,a,c,l,e=u(function(e){return l=this,a=e,s=A(),o||(o=setTimeout(i,n),r&&(c=t.apply(l,a))),c});return e.cancel=function(){clearTimeout(o),o=a=l=null},e},wrap:function(e,t){return E(t,e)},negate:Ke,compose:function(){var n=arguments,r=n.length-1;return function(){for(var e=r,t=n[r].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:Qe,once:Je,findKey:Ze,findIndex:tt,findLastIndex:nt,sortedIndex:rt,indexOf:ot,lastIndexOf:st,find:at,detect:at,findWhere:function(e,t){return at(e,S(t))},each:N,forEach:N,map:M,collect:M,reduce:lt,foldl:lt,inject:lt,reduceRight:ut,foldr:ut,filter:j,select:j,reject:function(e,t,n){return j(e,Ke(k(t)),n)},every:dt,all:dt,some:ht,any:ht,contains:P,includes:P,include:P,invoke:ft,pluck:pt,where:function(e,t){return j(e,S(t))},max:gt,min:function(e,r,t){var n,i,o=1/0,s=1/0;if(null==r||"number"==typeof r&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=T(e)?e:_(e)).length;a<c;a++)null!=(n=e[a])&&n<o&&(o=n);else r=k(r,t),N(e,function(e,t,n){((i=r(e,t,n))<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},shuffle:function(e){return yt(e,1/0)},sample:yt,sortBy:function(e,r,t){var i=0;return r=k(r,t),pt(M(e,function(e,t,n){return{value:e,index:i++,criteria:r(e,t,n)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")},groupBy:bt,indexBy:_t,countBy:wt,partition:xt,toArray:vt,size:function(e){return null==e?0:(T(e)?e:y(e)).length},pick:Ct,omit:kt,first:Et,head:Et,take:Et,initial:At,last:function(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:I(e,Math.max(0,e.length-t))},rest:I,tail:I,drop:I,compact:function(e){return j(e,Boolean)},flatten:function(e,t){return O(e,t,!1)},without:Ot,uniq:Nt,unique:Nt,union:Mt,intersection:function(e){for(var t=[],n=arguments.length,r=0,i=v(e);r<i;r++){var o=e[r];if(!P(t,o)){for(var s=1;s<n&&P(arguments[s],o);s++);s===n&&t.push(o)}}return t},difference:Tt,unzip:jt,transpose:jt,zip:Pt,object:function(e,t){for(var n={},r=0,i=v(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},range:function(e,t,n){null==t&&(t=e||0,e=0),n=n||(t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},chunk:function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(c.call(e,r,r+=t));return n},mixin:It,default:b});return s._=s},"object"==typeof o&&void 0!==i?i.exports=t():"function"==typeof define&&define.amd?define("underscore",t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e._,(r=e._=t()).noConflict=function(){return e._=n,r})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return c.default}});var r=h(e("./v1.js")),i=h(e("./v3.js")),o=h(e("./v4.js")),s=h(e("./v5.js")),a=h(e("./nil.js")),c=h(e("./version.js")),l=h(e("./validate.js")),u=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":11,"./parse.js":12,"./stringify.js":16,"./v1.js":17,"./v3.js":18,"./v4.js":20,"./v5.js":21,"./validate.js":22,"./version.js":23}],9:[function(e,t,n){"use strict";function u(e){return 14+(e+64>>>9<<4)+1}function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,i,o){return d((t=d(d(t,e),d(r,o)))<<i|t>>>32-i,n)}function h(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)}function f(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)}function p(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)}function g(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(t){if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}var r=function(t,e){t[e>>5]|=128<<e%32,t[u(e)-1]=e;let n=1732584193,r=-271733879,i=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){var s=n,a=r,c=i,l=o;n=h(n,r,i,o,t[e],7,-680876936),o=h(o,n,r,i,t[e+1],12,-389564586),i=h(i,o,n,r,t[e+2],17,606105819),r=h(r,i,o,n,t[e+3],22,-1044525330),n=h(n,r,i,o,t[e+4],7,-176418897),o=h(o,n,r,i,t[e+5],12,1200080426),i=h(i,o,n,r,t[e+6],17,-1473231341),r=h(r,i,o,n,t[e+7],22,-45705983),n=h(n,r,i,o,t[e+8],7,1770035416),o=h(o,n,r,i,t[e+9],12,-1958414417),i=h(i,o,n,r,t[e+10],17,-42063),r=h(r,i,o,n,t[e+11],22,-1990404162),n=h(n,r,i,o,t[e+12],7,1804603682),o=h(o,n,r,i,t[e+13],12,-40341101),i=h(i,o,n,r,t[e+14],17,-1502002290),r=h(r,i,o,n,t[e+15],22,1236535329),n=f(n,r,i,o,t[e+1],5,-165796510),o=f(o,n,r,i,t[e+6],9,-1069501632),i=f(i,o,n,r,t[e+11],14,643717713),r=f(r,i,o,n,t[e],20,-373897302),n=f(n,r,i,o,t[e+5],5,-701558691),o=f(o,n,r,i,t[e+10],9,38016083),i=f(i,o,n,r,t[e+15],14,-660478335),r=f(r,i,o,n,t[e+4],20,-405537848),n=f(n,r,i,o,t[e+9],5,568446438),o=f(o,n,r,i,t[e+14],9,-1019803690),i=f(i,o,n,r,t[e+3],14,-187363961),r=f(r,i,o,n,t[e+8],20,1163531501),n=f(n,r,i,o,t[e+13],5,-1444681467),o=f(o,n,r,i,t[e+2],9,-51403784),i=f(i,o,n,r,t[e+7],14,1735328473),r=f(r,i,o,n,t[e+12],20,-1926607734),n=p(n,r,i,o,t[e+5],4,-378558),o=p(o,n,r,i,t[e+8],11,-2022574463),i=p(i,o,n,r,t[e+11],16,1839030562),r=p(r,i,o,n,t[e+14],23,-35309556),n=p(n,r,i,o,t[e+1],4,-1530992060),o=p(o,n,r,i,t[e+4],11,1272893353),i=p(i,o,n,r,t[e+7],16,-155497632),r=p(r,i,o,n,t[e+10],23,-1094730640),n=p(n,r,i,o,t[e+13],4,681279174),o=p(o,n,r,i,t[e],11,-358537222),i=p(i,o,n,r,t[e+3],16,-722521979),r=p(r,i,o,n,t[e+6],23,76029189),n=p(n,r,i,o,t[e+9],4,-640364487),o=p(o,n,r,i,t[e+12],11,-421815835),i=p(i,o,n,r,t[e+15],16,530742520),r=p(r,i,o,n,t[e+2],23,-995338651),n=g(n,r,i,o,t[e],6,-198630844),o=g(o,n,r,i,t[e+7],10,1126891415),i=g(i,o,n,r,t[e+14],15,-1416354905),r=g(r,i,o,n,t[e+5],21,-57434055),n=g(n,r,i,o,t[e+12],6,1700485571),o=g(o,n,r,i,t[e+3],10,-1894986606),i=g(i,o,n,r,t[e+10],15,-1051523),r=g(r,i,o,n,t[e+1],21,-2054922799),n=g(n,r,i,o,t[e+8],6,1873313359),o=g(o,n,r,i,t[e+15],10,-30611744),i=g(i,o,n,r,t[e+6],15,-1560198380),r=g(r,i,o,n,t[e+13],21,1309151649),n=g(n,r,i,o,t[e+4],6,-145523070),o=g(o,n,r,i,t[e+11],10,-1120210379),i=g(i,o,n,r,t[e+2],15,718787259),r=g(r,i,o,n,t[e+9],21,-343485551),n=d(n,s),r=d(r,a),i=d(i,c),o=d(o,l)}return[n,r,i,o]}(function(t){if(0===t.length)return[];var n=8*t.length,r=new Uint32Array(u(n));for(let e=0;e<n;e+=8)r[e>>5]|=(255&t[e/8])<<e%32;return r}(t),8*t.length),i=[],o=32*r.length,s="0123456789abcdef";for(let e=0;e<o;e+=8){var a=r[e>>5]>>>e%32&255,a=parseInt(s.charAt(a>>>4&15)+s.charAt(15&a),16);i.push(a)}return i}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);n.default={randomUUID:r}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default="00000000-0000-0000-0000-000000000000"},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};n.default=function(e){var t,n;if((0,r.default)(e))return(n=new Uint8Array(16))[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n;throw TypeError("Invalid UUID")}},{"./validate.js":22}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)};let r;const i=new Uint8Array(16)},{}],15:[function(e,t,n){"use strict";function d(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(n){var a=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof n){var t=unescape(encodeURIComponent(n));n=[];for(let e=0;e<t.length;++e)n.push(t.charCodeAt(e))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);var r=n.length/4+2,i=Math.ceil(r/16),c=new Array(i);for(let t=0;t<i;++t){var o=new Uint32Array(16);for(let e=0;e<16;++e)o[e]=n[64*t+4*e]<<24|n[64*t+4*e+1]<<16|n[64*t+4*e+2]<<8|n[64*t+4*e+3];c[t]=o}c[i-1][14]=8*(n.length-1)/Math.pow(2,32),c[i-1][14]=Math.floor(c[i-1][14]),c[i-1][15]=8*(n.length-1)&4294967295;for(let s=0;s<i;++s){var l=new Uint32Array(80);for(let e=0;e<16;++e)l[e]=c[s][e];for(let e=16;e<80;++e)l[e]=d(l[e-3]^l[e-8]^l[e-14]^l[e-16],1);let t=e[0],n=e[1],r=e[2],i=e[3],o=e[4];for(let e=0;e<80;++e){var u=Math.floor(e/20),u=d(t,5)+function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}(u,n,r,i)+o+a[u]+l[e]>>>0;o=i,i=r,r=d(n,30)>>>0,n=t,t=u}e[0]=e[0]+t>>>0,e[1]=e[1]+n>>>0,e[2]=e[2]+r>>>0,e[3]=e[3]+i>>>0,e[4]=e[4]+o>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.unsafeStringify=o;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function o(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}n.default=function(e,t=0){if(e=o(e,t),(0,r.default)(e))return e;throw TypeError("Stringified UUID is invalid")}},{"./validate.js":22}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,l=(r=e("./rng.js"))&&r.__esModule?r:{default:r},u=e("./stringify.js");let d,h,f=0,p=0;n.default=function(e,t,n){var r=t&&n||0,i=t||new Array(16);let o=(e=e||{}).node||d,s=void 0!==e.clockseq?e.clockseq:h,a=(null!=o&&null!=s||(n=e.random||(e.rng||l.default)(),null==o&&(o=d=[1|n[0],n[1],n[2],n[3],n[4],n[5]]),null==s&&(s=h=16383&(n[6]<<8|n[7]))),n=void 0!==e.msecs?e.msecs:Date.now(),void 0!==e.nsecs?e.nsecs:p+1);var c=n-f+(a-p)/1e4;if(c<0&&void 0===e.clockseq&&(s=s+1&16383),1e4<=(a=(c<0||n>f)&&void 0===e.nsecs?0:a))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=n,p=a,h=s,c=(1e4*(268435455&(n+=122192928e5))+a)%4294967296,i[r++]=c>>>24&255,i[r++]=c>>>16&255,i[r++]=c>>>8&255,i[r++]=255&c,e=n/4294967296*1e4&268435455,i[r++]=e>>>8&255,i[r++]=255&e,i[r++]=e>>>24&15|16,i[r++]=e>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(let e=0;e<6;++e)i[r+e]=o[e];return t||(0,u.unsafeStringify)(i)}},{"./rng.js":14,"./stringify.js":16}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./v35.js")),e=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=(0,r.default)("v3",48,e.default);n.default=r},{"./md5.js":9,"./v35.js":19}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.URL=n.DNS=void 0,n.default=function(e,s,a){function t(e,t,n,r){var i;if("string"==typeof e&&(e=function(t){t=unescape(encodeURIComponent(t));var n=[];for(let e=0;e<t.length;++e)n.push(t.charCodeAt(e));return n}(e)),16!==(null==(i=t="string"==typeof t?(0,l.default)(t):t)?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(t),o.set(e,t.length),(o=a(o))[6]=15&o[6]|s,o[8]=63&o[8]|128,n){r=r||0;for(let e=0;e<16;++e)n[r+e]=o[e];return n}return(0,c.unsafeStringify)(o)}try{t.name=e}catch(e){}return t.DNS=r,t.URL=i,t};var c=e("./stringify.js"),l=(e=e("./parse.js"))&&e.__esModule?e:{default:e};const r="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i=(n.DNS=r,"6ba7b811-9dad-11d1-80b4-00c04fd430c8");n.URL=i},{"./parse.js":12,"./stringify.js":16}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("./native.js")),o=r(e("./rng.js")),s=e("./stringify.js");function r(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,t,n){if(i.default.randomUUID&&!t&&!e)return i.default.randomUUID();var r=(e=e||{}).random||(e.rng||o.default)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return(0,s.unsafeStringify)(r)}},{"./native.js":10,"./rng.js":14,"./stringify.js":16}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./v35.js")),e=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=(0,r.default)("v5",80,e.default);n.default=r},{"./sha1.js":15,"./v35.js":19}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./regex.js"))&&e.__esModule?e:{default:e};n.default=function(e){return"string"==typeof e&&r.default.test(e)}},{"./regex.js":13}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};n.default=function(e){if((0,r.default)(e))return parseInt(e.slice(14,15),16);throw TypeError("Invalid UUID")}},{"./validate.js":22}],24:[function(e,t,n){"use strict";var s,a,c,l,u;e("./helpers"),e("jquery"),e("underscore"),a=e("./visualizer/visualizer"),s=e("dat-gui"),c=e("./model/world"),u=e("./settings"),l=e("./maps"),function(o,s){var a=o.length;new MutationObserver(function(e,i){return e.forEach(function(e){var t,n,r;if("childList"===e.type&&0<e.addedNodes.length){for(t=0,r=o.length;t<r;t++)n=o[t],document.getElementById(n)&&--a;if(0===a)return s(),i.disconnect()}})}).observe(document.body,{childList:!0,subtree:!0})}(["canvas","gui"],function(){var e,t,n,r,i,o;for(o in console.log("App started --\x3e "+(new Date).toLocaleTimeString()),window.settings=u,window.world=new c,u.defaultMap&&l[u.defaultMap]?((i=l[u.defaultMap]).carsNumber=u.carsNumber,world.load(i,u.defaultMap,!1)):(world.generateMap(),world.carsNumber=u.carsNumber),window.visualizer=new a(world),visualizer.start(),(e=new s.GUI({autoPlace:!1})).domElement.id="dat_gui",document.getElementById("gui").appendChild(e.domElement),(r=e.addFolder("world")).open(),r.add(world,"save"),r.add(world,"load"),r.add(world,"clear"),r.add(world,"generateMap"),(n=e.addFolder("visualizer")).open(),n.add(visualizer,"running").listen(),e.add(u,"debug").listen(),e.add(u,"showRedLights").listen(),e.add(u,"triangles").listen(),e.add(u,"trafficHighlight").listen(),n.add(visualizer.zoomer,"scale",.1,2).listen(),n.add(visualizer,"timeFactor",.1,10).listen(),r.add(world,"carsNumber").min(0).max(1e3).step(1).listen(),r.add(world,"instantSpeed").step(1e-5).listen(),r.add(world,"time").listen(),r.add(world,"activeCars").listen(),e.add(u,"lightsFlipInterval",0,400,.01).listen(),t=e.addFolder("saved maps"),l)i=l[o],t.add(world,o);t.open()})},{"./helpers":29,"./maps":30,"./model/world":40,"./settings":41,"./visualizer/visualizer":49,"dat-gui":2,jquery:6,underscore:7}],25:[function(e,t,n){"use strict";var i;e("../helpers"),i=e("./segment"),e=function(){class e{constructor(e,t,n,r){this.A=e,this.B=t,this.O=n,this.Q=r,this.AB=new i(this.A,this.B),this.AO=new i(this.A,this.O),this.OQ=new i(this.O,this.Q),this.QB=new i(this.Q,this.B),this._length=null}getPoint(e){var t=this.AO.getPoint(e),n=this.OQ.getPoint(e),r=this.QB.getPoint(e),t=new i(t,n).getPoint(e),n=new i(n,r).getPoint(e);return new i(t,n).getPoint(e)}getDirection(e){var t=this.AO.getPoint(e),n=this.OQ.getPoint(e),r=this.QB.getPoint(e),t=new i(t,n).getPoint(e),n=new i(n,r).getPoint(e);return new i(t,n).direction}}return e.property("length",{get:function(){var e,t,n,r;if(null==this._length)for(r=null,e=t=this._length=0,0;t<=10;e=++t)n=this.getPoint(e/10),r&&(this._length+=n.subtract(r).length),r=n;return this._length}}),e}.call(this),t.exports=e},{"../helpers":29,"./segment":28}],26:[function(e,t,n){"use strict";var r,i;({sqrt:i,atan2:r}=Math),e("../helpers"),e=function(){class t{constructor(e=0,t=0){this.x=e,this.y=t}add(e){return new t(this.x+e.x,this.y+e.y)}subtract(e){return new t(this.x-e.x,this.y-e.y)}mult(e){return new t(this.x*e,this.y*e)}divide(e){return new t(this.x/e,this.y/e)}}return t.property("length",{get:function(){return i(this.x*this.x+this.y*this.y)}}),t.property("direction",{get:function(){return r(this.y,this.x)}}),t.property("normalized",{get:function(){return new t(this.x/this.length,this.y/this.length)}}),t}.call(this),t.exports=e},{"../helpers":29}],27:[function(e,t,n){"use strict";var r,i,o,s,a;a=Math.abs,e("../helpers"),s=e("underscore"),r=e("./point"),o=e("./segment"),t.exports=i=class i{constructor(e,t,n=0,r=0){this.x=e,this.y=t,this._width=n,this._height=r}static copy(e){return new i(e.x,e.y,e._width,e._height)}toJSON(){return s.extend({},this)}area(){return this.width()*this.height()}left(e){return null!=e&&(this.x=e),this.x}right(e){return null!=e&&(this.x=e-this.width()),this.x+this.width()}width(e){return null!=e&&(this._width=e),this._width}top(e){return null!=e&&(this.y=e),this.y}bottom(e){return null!=e&&(this.y=e-this.height()),this.y+this.height()}height(e){return null!=e&&(this._height=e),this._height}center(e){return null!=e&&(this.x=e.x-this.width()/2,this.y=e.y-this.height()/2),new r(this.x+this.width()/2,this.y+this.height()/2)}containsPoint(e){var t;return this.left()<=(t=e.x)&&t<=this.right()&&this.top()<=(t=e.y)&&t<=this.bottom()}containsRect(e){return this.left()<=e.left()&&e.right()<=this.right()&&this.top()<=e.top()&&e.bottom()<=this.bottom()}getVertices(){return[new r(this.left(),this.top()),new r(this.right(),this.top()),new r(this.right(),this.bottom()),new r(this.left(),this.bottom())]}getSide(e){var t=this.getVertices();return new o(t[e],t[(e+1)%4])}getSectorId(e){e=e.subtract(this.center());if(e.y<=0&&a(e.x)<=a(e.y))return 0;if(0<=e.x&&a(e.x)>=a(e.y))return 1;if(0<=e.y&&a(e.x)<=a(e.y))return 2;if(e.x<=0&&a(e.x)>=a(e.y))return 3;throw Error("algorithm error")}getSector(e){return this.getSide(this.getSectorId(e))}}},{"../helpers":29,"./point":26,"./segment":28,underscore:7}],28:[function(e,t,n){"use strict";e("../helpers"),e=function(){class r{constructor(e,t){this.source=e,this.target=t}split(r,e){for(var t,n,i=(e?function(){for(var e=[],t=n=r-1;n<=0?t<=0:0<=t;n<=0?t++:t--)e.push(t);return e}:function(){for(var e=[],t=0,n=r-1;0<=n?t<=n:n<=t;0<=n?t++:t--)e.push(t);return e}).apply(this),o=[],s=0,a=i.length;s<a;s++)t=i[s],o.push(this.subsegment(t/r,(t+1)/r));return o}getPoint(e){return this.source.add(this.vector.mult(e))}subsegment(e,t){var n=this.vector,e=this.source.add(n.mult(e)),n=this.source.add(n.mult(t));return new r(e,n)}}return r.property("vector",{get:function(){return this.target.subtract(this.source)}}),r.property("length",{get:function(){return this.vector.length}}),r.property("direction",{get:function(){return this.vector.direction}}),r.property("center",{get:function(){return this.getPoint(.5)}}),r}.call(this),t.exports=e},{"../helpers":29}],29:[function(e,t,n){"use strict";var r=e("./mapsIdCounter");Function.prototype.property=function(e,t){return Object.defineProperty(this.prototype,e,t)},t.exports=function(e){return e+(++r[e]||(r[e]=1))}},{"./mapsIdCounter":31}],30:[function(e,t,n){"use strict";t.exports={mappa_1:{intersections:{intersection1:{id:"intersection1",rect:{x:70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4284782784304746,phaseOffset:28.658636898714352}},intersection2:{id:"intersection2",rect:{x:70,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.0898200833189462,phaseOffset:7.547233934675912}},intersection3:{id:"intersection3",rect:{x:140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.7394536292660856,phaseOffset:60.22208817341812}},intersection4:{id:"intersection4",rect:{x:70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.891854929955477,phaseOffset:13.590502515252311}},intersection5:{id:"intersection5",rect:{x:-140,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.23457137951604823,phaseOffset:94.1982092114361}},intersection6:{id:"intersection6",rect:{x:70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.848434019798531,phaseOffset:84.98835703508658}},intersection7:{id:"intersection7",rect:{x:0,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.0782047520886826,phaseOffset:6.472198865007228}},intersection8:{id:"intersection8",rect:{x:-70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.5800481500934405,phaseOffset:12.228748768048803}},intersection9:{id:"intersection9",rect:{x:-140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.948217791813142,phaseOffset:59.45740655349556}},intersection10:{id:"intersection10",rect:{x:140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.19455249646033868,phaseOffset:40.51146773604899}},intersection11:{id:"intersection11",rect:{x:-70,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.4956315540636733,phaseOffset:16.985006622270227}},intersection12:{id:"intersection12",rect:{x:0,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.23029217995654916,phaseOffset:71.48240897880946}},intersection13:{id:"intersection13",rect:{x:0,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.7503868878207052,phaseOffset:68.75664306197041}},intersection14:{id:"intersection14",rect:{x:-70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4746725370909486,phaseOffset:88.90396412332984}},intersection15:{id:"intersection15",rect:{x:-140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.5688354704357494,phaseOffset:2.4338708877804205}},intersection16:{id:"intersection16",rect:{x:0,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.5032192572780732,phaseOffset:17.261162588205337}},intersection17:{id:"intersection17",rect:{x:140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.46610457461460153,phaseOffset:14.977529653072196}},intersection18:{id:"intersection18",rect:{x:-70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.37359064405476894,phaseOffset:82.01777475404081}},intersection19:{id:"intersection19",rect:{x:0,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.06831869672318769,phaseOffset:60.82505245869607}},intersection20:{id:"intersection20",rect:{x:-140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.1653227706797682,phaseOffset:16.43890071952423}}},roads:{road1:{id:"road1",source:"intersection15",target:"intersection5"},road2:{id:"road2",source:"intersection5",target:"intersection15"},road3:{id:"road3",source:"intersection9",target:"intersection15"},road4:{id:"road4",source:"intersection15",target:"intersection9"},road5:{id:"road5",source:"intersection20",target:"intersection9"},road6:{id:"road6",source:"intersection9",target:"intersection20"},road7:{id:"road7",source:"intersection8",target:"intersection18"},road8:{id:"road8",source:"intersection18",target:"intersection8"},road9:{id:"road9",source:"intersection14",target:"intersection8"},road10:{id:"road10",source:"intersection8",target:"intersection14"},road11:{id:"road11",source:"intersection11",target:"intersection14"},road12:{id:"road12",source:"intersection14",target:"intersection11"},road13:{id:"road13",source:"intersection7",target:"intersection13"},road14:{id:"road14",source:"intersection13",target:"intersection7"},road15:{id:"road15",source:"intersection12",target:"intersection7"},road16:{id:"road16",source:"intersection7",target:"intersection12"},road17:{id:"road17",source:"intersection19",target:"intersection12"},road18:{id:"road18",source:"intersection12",target:"intersection19"},road19:{id:"road19",source:"intersection16",target:"intersection19"},road20:{id:"road20",source:"intersection19",target:"intersection16"},road21:{id:"road21",source:"intersection4",target:"intersection6"},road22:{id:"road22",source:"intersection6",target:"intersection4"},road23:{id:"road23",source:"intersection1",target:"intersection4"},road24:{id:"road24",source:"intersection4",target:"intersection1"},road25:{id:"road25",source:"intersection2",target:"intersection1"},road26:{id:"road26",source:"intersection1",target:"intersection2"},road27:{id:"road27",source:"intersection10",target:"intersection17"},road28:{id:"road28",source:"intersection17",target:"intersection10"},road29:{id:"road29",source:"intersection3",target:"intersection10"},road30:{id:"road30",source:"intersection10",target:"intersection3"},road31:{id:"road31",source:"intersection13",target:"intersection18"},road32:{id:"road32",source:"intersection18",target:"intersection13"},road33:{id:"road33",source:"intersection6",target:"intersection13"},road34:{id:"road34",source:"intersection13",target:"intersection6"},road35:{id:"road35",source:"intersection17",target:"intersection6"},road36:{id:"road36",source:"intersection6",target:"intersection17"},road37:{id:"road37",source:"intersection8",target:"intersection5"},road38:{id:"road38",source:"intersection5",target:"intersection8"},road39:{id:"road39",source:"intersection7",target:"intersection8"},road40:{id:"road40",source:"intersection8",target:"intersection7"},road41:{id:"road41",source:"intersection4",target:"intersection7"},road42:{id:"road42",source:"intersection7",target:"intersection4"},road43:{id:"road43",source:"intersection14",target:"intersection15"},road44:{id:"road44",source:"intersection15",target:"intersection14"},road45:{id:"road45",source:"intersection12",target:"intersection14"},road46:{id:"road46",source:"intersection14",target:"intersection12"},road47:{id:"road47",source:"intersection1",target:"intersection12"},road48:{id:"road48",source:"intersection12",target:"intersection1"},road49:{id:"road49",source:"intersection10",target:"intersection1"},road50:{id:"road50",source:"intersection1",target:"intersection10"},road51:{id:"road51",source:"intersection11",target:"intersection9"},road52:{id:"road52",source:"intersection9",target:"intersection11"},road53:{id:"road53",source:"intersection19",target:"intersection11"},road54:{id:"road54",source:"intersection11",target:"intersection19"},road55:{id:"road55",source:"intersection16",target:"intersection20"},road56:{id:"road56",source:"intersection20",target:"intersection16"},road57:{id:"road57",source:"intersection2",target:"intersection16"},road58:{id:"road58",source:"intersection16",target:"intersection2"},road59:{id:"road59",source:"intersection3",target:"intersection2"},road60:{id:"road60",source:"intersection2",target:"intersection3"}},carsNumber:5,time:89.84187000000051,trackPath:[]},mappa_2:{intersections:{intersection1:{id:"intersection1",rect:{x:0,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.8195036818010117,phaseOffset:43.05691569747563}},intersection2:{id:"intersection2",rect:{x:-70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.7839621113402413,phaseOffset:54.85186710299183}},intersection3:{id:"intersection3",rect:{x:-140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.8605010343470274,phaseOffset:52.009945537280956}},intersection4:{id:"intersection4",rect:{x:140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.9534001565893311,phaseOffset:67.07241880957659}},intersection5:{id:"intersection5",rect:{x:0,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.643038403907791,phaseOffset:68.13512028364535}},intersection6:{id:"intersection6",rect:{x:-140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.37380539402505253,phaseOffset:31.27196616187815}},intersection7:{id:"intersection7",rect:{x:140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4963149095919319,phaseOffset:47.83831299664947}},intersection8:{id:"intersection8",rect:{x:70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.731320326488941,phaseOffset:69.20087968191918}},intersection9:{id:"intersection9",rect:{x:0,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.5442286422864608,phaseOffset:63.54506676772553}},intersection10:{id:"intersection10",rect:{x:140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.5683170413576415,phaseOffset:64.74235786900799}},intersection11:{id:"intersection11",rect:{x:70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.24542877402084895,phaseOffset:43.69732388988725}},intersection12:{id:"intersection12",rect:{x:0,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.8843254509453331,phaseOffset:6.251658476776956}},intersection13:{id:"intersection13",rect:{x:-70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.7066194883416201,phaseOffset:68.67433127969792}},intersection14:{id:"intersection14",rect:{x:140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.4986457175197059,phaseOffset:61.491359169211975}},intersection15:{id:"intersection15",rect:{x:140,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.07086881206266726,phaseOffset:77.4639076917909}},intersection16:{id:"intersection16",rect:{x:0,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.8556840167013604,phaseOffset:72.71767924869326}},intersection17:{id:"intersection17",rect:{x:-70,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.6707917710877507,phaseOffset:25.334133516842016}},intersection18:{id:"intersection18",rect:{x:70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.16026968798089714,phaseOffset:39.13271814936012}},intersection19:{id:"intersection19",rect:{x:-70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.2805167523312868,phaseOffset:97.90817119922757}},intersection20:{id:"intersection20",rect:{x:-70,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.4146838165663804,phaseOffset:37.53170590699628}}},roads:{road1:{id:"road1",source:"intersection6",target:"intersection3"},road2:{id:"road2",source:"intersection3",target:"intersection6"},road3:{id:"road3",source:"intersection2",target:"intersection19"},road4:{id:"road4",source:"intersection19",target:"intersection2"},road5:{id:"road5",source:"intersection20",target:"intersection13"},road6:{id:"road6",source:"intersection13",target:"intersection20"},road7:{id:"road7",source:"intersection17",target:"intersection20"},road8:{id:"road8",source:"intersection20",target:"intersection17"},road9:{id:"road9",source:"intersection1",target:"intersection5"},road10:{id:"road10",source:"intersection5",target:"intersection1"},road11:{id:"road11",source:"intersection16",target:"intersection1"},road12:{id:"road12",source:"intersection1",target:"intersection16"},road13:{id:"road13",source:"intersection9",target:"intersection16"},road14:{id:"road14",source:"intersection16",target:"intersection9"},road15:{id:"road15",source:"intersection12",target:"intersection9"},road16:{id:"road16",source:"intersection9",target:"intersection12"},road17:{id:"road17",source:"intersection11",target:"intersection18"},road18:{id:"road18",source:"intersection18",target:"intersection11"},road19:{id:"road19",source:"intersection8",target:"intersection11"},road20:{id:"road20",source:"intersection11",target:"intersection8"},road21:{id:"road21",source:"intersection15",target:"intersection4"},road22:{id:"road22",source:"intersection4",target:"intersection15"},road23:{id:"road23",source:"intersection7",target:"intersection15"},road24:{id:"road24",source:"intersection15",target:"intersection7"},road25:{id:"road25",source:"intersection10",target:"intersection7"},road26:{id:"road26",source:"intersection7",target:"intersection10"},road27:{id:"road27",source:"intersection14",target:"intersection10"},road28:{id:"road28",source:"intersection10",target:"intersection14"},road29:{id:"road29",source:"intersection19",target:"intersection3"},road30:{id:"road30",source:"intersection3",target:"intersection19"},road31:{id:"road31",source:"intersection5",target:"intersection19"},road32:{id:"road32",source:"intersection19",target:"intersection5"},road33:{id:"road33",source:"intersection18",target:"intersection5"},road34:{id:"road34",source:"intersection5",target:"intersection18"},road35:{id:"road35",source:"intersection4",target:"intersection18"},road36:{id:"road36",source:"intersection18",target:"intersection4"},road37:{id:"road37",source:"intersection1",target:"intersection2"},road38:{id:"road38",source:"intersection2",target:"intersection1"},road39:{id:"road39",source:"intersection11",target:"intersection1"},road40:{id:"road40",source:"intersection1",target:"intersection11"},road41:{id:"road41",source:"intersection15",target:"intersection11"},road42:{id:"road42",source:"intersection11",target:"intersection15"},road43:{id:"road43",source:"intersection16",target:"intersection13"},road44:{id:"road44",source:"intersection13",target:"intersection16"},road45:{id:"road45",source:"intersection8",target:"intersection16"},road46:{id:"road46",source:"intersection16",target:"intersection8"},road47:{id:"road47",source:"intersection7",target:"intersection8"},road48:{id:"road48",source:"intersection8",target:"intersection7"},road49:{id:"road49",source:"intersection20",target:"intersection6"},road50:{id:"road50",source:"intersection6",target:"intersection20"},road51:{id:"road51",source:"intersection9",target:"intersection20"},road52:{id:"road52",source:"intersection20",target:"intersection9"},road53:{id:"road53",source:"intersection10",target:"intersection9"},road54:{id:"road54",source:"intersection9",target:"intersection10"},road55:{id:"road55",source:"intersection12",target:"intersection17"},road56:{id:"road56",source:"intersection17",target:"intersection12"},road57:{id:"road57",source:"intersection14",target:"intersection12"},road58:{id:"road58",source:"intersection12",target:"intersection14"}},carsNumber:5,time:55.46011499999996,trackPath:[]},mappa_3:{intersections:{intersection1:{id:"intersection1",rect:{x:0,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.24550158107899755,phaseOffset:70.46884643065634}},intersection2:{id:"intersection2",rect:{x:70,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.6015505990836838,phaseOffset:80.96485733666314}},intersection3:{id:"intersection3",rect:{x:0,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.6792892995356252,phaseOffset:72.69213664020026}},intersection4:{id:"intersection4",rect:{x:-140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4773631298860239,phaseOffset:31.335179018628565}},intersection5:{id:"intersection5",rect:{x:-70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.8954418724478164,phaseOffset:87.57216153182239}},intersection6:{id:"intersection6",rect:{x:140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.1504664816525092,phaseOffset:61.29969504752244}},intersection7:{id:"intersection7",rect:{x:70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.4606876787111198,phaseOffset:94.748044686082}},intersection8:{id:"intersection8",rect:{x:-70,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.8120049529244804,phaseOffset:95.97479785776792}},intersection9:{id:"intersection9",rect:{x:0,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.2835481212001909,phaseOffset:40.80103769340262}},intersection10:{id:"intersection10",rect:{x:140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.251918857863644,phaseOffset:21.789220256393204}},intersection11:{id:"intersection11",rect:{x:70,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.9862023815038423,phaseOffset:34.58193250923618}},intersection12:{id:"intersection12",rect:{x:-140,y:70,_width:14,_height:14},controlSignals:{flipMultiplier:.2613871070069911,phaseOffset:25.449605704585743}},intersection13:{id:"intersection13",rect:{x:-140,y:-140,_width:14,_height:14},controlSignals:{flipMultiplier:.36641291015230415,phaseOffset:5.067316869816585}},intersection14:{id:"intersection14",rect:{x:140,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.618869079994069,phaseOffset:16.14984168831397}},intersection15:{id:"intersection15",rect:{x:-140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.8846081616669781,phaseOffset:84.47968743396201}},intersection16:{id:"intersection16",rect:{x:-70,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.1284067026206268,phaseOffset:78.24873332247557}},intersection17:{id:"intersection17",rect:{x:-70,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.5041963156659426,phaseOffset:3.5905411834737055}},intersection18:{id:"intersection18",rect:{x:140,y:140,_width:14,_height:14},controlSignals:{flipMultiplier:.8534207251309907,phaseOffset:91.688846775252}},intersection19:{id:"intersection19",rect:{x:-140,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.9320699725326196,phaseOffset:31.1224930465837}},intersection20:{id:"intersection20",rect:{x:140,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.14249917527277556,phaseOffset:85.26608360626857}}},roads:{road1:{id:"road1",source:"intersection19",target:"intersection13"},road2:{id:"road2",source:"intersection13",target:"intersection19"},road3:{id:"road3",source:"intersection4",target:"intersection19"},road4:{id:"road4",source:"intersection19",target:"intersection4"},road5:{id:"road5",source:"intersection12",target:"intersection4"},road6:{id:"road6",source:"intersection4",target:"intersection12"},road7:{id:"road7",source:"intersection15",target:"intersection12"},road8:{id:"road8",source:"intersection12",target:"intersection15"},road9:{id:"road9",source:"intersection16",target:"intersection5"},road10:{id:"road10",source:"intersection5",target:"intersection16"},road11:{id:"road11",source:"intersection8",target:"intersection16"},road12:{id:"road12",source:"intersection16",target:"intersection8"},road13:{id:"road13",source:"intersection17",target:"intersection8"},road14:{id:"road14",source:"intersection8",target:"intersection17"},road15:{id:"road15",source:"intersection3",target:"intersection9"},road16:{id:"road16",source:"intersection9",target:"intersection3"},road17:{id:"road17",source:"intersection11",target:"intersection2"},road18:{id:"road18",source:"intersection2",target:"intersection11"},road19:{id:"road19",source:"intersection7",target:"intersection11"},road20:{id:"road20",source:"intersection11",target:"intersection7"},road21:{id:"road21",source:"intersection14",target:"intersection10"},road22:{id:"road22",source:"intersection10",target:"intersection14"},road23:{id:"road23",source:"intersection20",target:"intersection14"},road24:{id:"road24",source:"intersection14",target:"intersection20"},road25:{id:"road25",source:"intersection6",target:"intersection20"},road26:{id:"road26",source:"intersection20",target:"intersection6"},road27:{id:"road27",source:"intersection18",target:"intersection6"},road28:{id:"road28",source:"intersection6",target:"intersection18"},road29:{id:"road29",source:"intersection2",target:"intersection13"},road30:{id:"road30",source:"intersection13",target:"intersection2"},road31:{id:"road31",source:"intersection10",target:"intersection2"},road32:{id:"road32",source:"intersection2",target:"intersection10"},road33:{id:"road33",source:"intersection5",target:"intersection19"},road34:{id:"road34",source:"intersection19",target:"intersection5"},road35:{id:"road35",source:"intersection9",target:"intersection5"},road36:{id:"road36",source:"intersection5",target:"intersection9"},road37:{id:"road37",source:"intersection14",target:"intersection11"},road38:{id:"road38",source:"intersection11",target:"intersection14"},road39:{id:"road39",source:"intersection16",target:"intersection4"},road40:{id:"road40",source:"intersection4",target:"intersection16"},road41:{id:"road41",source:"intersection3",target:"intersection16"},road42:{id:"road42",source:"intersection16",target:"intersection3"},road43:{id:"road43",source:"intersection7",target:"intersection3"},road44:{id:"road44",source:"intersection3",target:"intersection7"},road45:{id:"road45",source:"intersection20",target:"intersection7"},road46:{id:"road46",source:"intersection7",target:"intersection20"},road47:{id:"road47",source:"intersection8",target:"intersection12"},road48:{id:"road48",source:"intersection12",target:"intersection8"},road49:{id:"road49",source:"intersection1",target:"intersection8"},road50:{id:"road50",source:"intersection8",target:"intersection1"},road51:{id:"road51",source:"intersection6",target:"intersection1"},road52:{id:"road52",source:"intersection1",target:"intersection6"},road53:{id:"road53",source:"intersection17",target:"intersection15"},road54:{id:"road54",source:"intersection15",target:"intersection17"},road55:{id:"road55",source:"intersection18",target:"intersection17"},road56:{id:"road56",source:"intersection17",target:"intersection18"}},carsNumber:5,time:66.33855000000004,trackPath:[]},map_semplice:{intersections:{intersection1:{id:"intersection1",rect:{x:-42,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.9479743836461125,phaseOffset:94.66763575323544}},intersection2:{id:"intersection2",rect:{x:0,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.9741343229976489,phaseOffset:3.8664580723590136}},intersection3:{id:"intersection3",rect:{x:42,y:0,_width:14,_height:14},controlSignals:{flipMultiplier:.6763116557404703,phaseOffset:27.113770026741115}},intersection4:{id:"intersection4",rect:{x:42,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.7196118014172435,phaseOffset:42.09140048192721}},intersection5:{id:"intersection5",rect:{x:0,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.31777769449575577,phaseOffset:28.50633200161039}},intersection6:{id:"intersection6",rect:{x:-42,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.050492654229082,phaseOffset:91.51886321434517}}},roads:{road57:{id:"road57",source:"intersection6",target:"intersection1"},road58:{id:"road58",source:"intersection1",target:"intersection6"},road59:{id:"road59",source:"intersection1",target:"intersection2"},road60:{id:"road60",source:"intersection2",target:"intersection1"},road61:{id:"road61",source:"intersection2",target:"intersection3"},road62:{id:"road62",source:"intersection3",target:"intersection2"},road63:{id:"road63",source:"intersection3",target:"intersection4"},road64:{id:"road64",source:"intersection4",target:"intersection3"},road65:{id:"road65",source:"intersection4",target:"intersection5"},road66:{id:"road66",source:"intersection5",target:"intersection4"},road67:{id:"road67",source:"intersection5",target:"intersection6"},road68:{id:"road68",source:"intersection6",target:"intersection5"},road69:{id:"road69",source:"intersection5",target:"intersection2"},road70:{id:"road70",source:"intersection2",target:"intersection5"}},carsNumber:2,time:138.33831499999914},map_media:{intersections:{intersection1:{id:"intersection1",rect:{x:-56,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.49333182358600114,phaseOffset:36.003182098761854}},intersection2:{id:"intersection2",rect:{x:-56,y:-28,_width:14,_height:14},controlSignals:{flipMultiplier:.9931487871201317,phaseOffset:94.45425662419179}},intersection3:{id:"intersection3",rect:{x:-56,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.5111694993383065,phaseOffset:98.9535040345068}},intersection4:{id:"intersection4",rect:{x:-14,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.5204929088669135,phaseOffset:11.398725456699443}},intersection5:{id:"intersection5",rect:{x:28,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.3368730313018393,phaseOffset:76.21517814974356}},intersection6:{id:"intersection6",rect:{x:28,y:-28,_width:14,_height:14},controlSignals:{flipMultiplier:.6838292154389645,phaseOffset:16.695407344145806}},intersection7:{id:"intersection7",rect:{x:28,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.05686790274246234,phaseOffset:91.24943975662923}},intersection8:{id:"intersection8",rect:{x:-14,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.7500457945655898,phaseOffset:.17302231486515662}},intersection9:{id:"intersection9",rect:{x:-14,y:-28,_width:14,_height:14},controlSignals:{flipMultiplier:.060722805547838155,phaseOffset:35.01749440910415}}},roads:{road1:{id:"road1",source:"intersection8",target:"intersection9"},road2:{id:"road2",source:"intersection9",target:"intersection8"},road3:{id:"road3",source:"intersection9",target:"intersection6"},road4:{id:"road4",source:"intersection6",target:"intersection9"},road5:{id:"road5",source:"intersection6",target:"intersection5"},road6:{id:"road6",source:"intersection5",target:"intersection6"},road7:{id:"road7",source:"intersection5",target:"intersection4"},road8:{id:"road8",source:"intersection4",target:"intersection5"},road9:{id:"road9",source:"intersection4",target:"intersection3"},road10:{id:"road10",source:"intersection3",target:"intersection4"},road11:{id:"road11",source:"intersection3",target:"intersection2"},road12:{id:"road12",source:"intersection2",target:"intersection3"},road13:{id:"road13",source:"intersection2",target:"intersection1"},road14:{id:"road14",source:"intersection1",target:"intersection2"},road15:{id:"road15",source:"intersection1",target:"intersection8"},road16:{id:"road16",source:"intersection8",target:"intersection1"},road17:{id:"road17",source:"intersection8",target:"intersection7"},road18:{id:"road18",source:"intersection7",target:"intersection8"},road19:{id:"road19",source:"intersection7",target:"intersection6"},road20:{id:"road20",source:"intersection6",target:"intersection7"},road21:{id:"road21",source:"intersection9",target:"intersection4"},road22:{id:"road22",source:"intersection4",target:"intersection9"},road23:{id:"road23",source:"intersection9",target:"intersection2"},road24:{id:"road24",source:"intersection2",target:"intersection9"}},carsNumber:2,time:173.50094999999797},mappa_complicata:{intersections:{intersection1:{id:"intersection1",rect:{x:-112,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.5217022137739413,phaseOffset:1.5642095884635498}},intersection2:{id:"intersection2",rect:{x:-112,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.9398669531001806,phaseOffset:35.77074627552086}},intersection3:{id:"intersection3",rect:{x:-112,y:-14,_width:14,_height:14},controlSignals:{flipMultiplier:.642267830383092,phaseOffset:17.473850551103844}},intersection4:{id:"intersection4",rect:{x:-112,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.09020765115496143,phaseOffset:22.21522877435507}},intersection5:{id:"intersection5",rect:{x:-28,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.7514962471148281,phaseOffset:48.78687282771161}},intersection6:{id:"intersection6",rect:{x:-28,y:-14,_width:14,_height:14},controlSignals:{flipMultiplier:.3602489087495704,phaseOffset:66.47258451973501}},intersection7:{id:"intersection7",rect:{x:-28,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.5532482246415711,phaseOffset:15.743268270901535}},intersection8:{id:"intersection8",rect:{x:-28,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.606836705799384,phaseOffset:79.34935652703616}},intersection9:{id:"intersection9",rect:{x:42,y:-70,_width:14,_height:14},controlSignals:{flipMultiplier:.6984370810517877,phaseOffset:19.39702370556622}},intersection10:{id:"intersection10",rect:{x:42,y:-42,_width:14,_height:14},controlSignals:{flipMultiplier:.10535891056544133,phaseOffset:.7379432534991848}},intersection11:{id:"intersection11",rect:{x:42,y:-14,_width:14,_height:14},controlSignals:{flipMultiplier:.22950889256440132,phaseOffset:14.990724495653529}},intersection12:{id:"intersection12",rect:{x:42,y:14,_width:14,_height:14},controlSignals:{flipMultiplier:.6392255718911695,phaseOffset:41.65034216633665}}},roads:{road201:{id:"road201",source:"intersection5",target:"intersection12"},road202:{id:"road202",source:"intersection12",target:"intersection5"},road203:{id:"road203",source:"intersection12",target:"intersection11"},road204:{id:"road204",source:"intersection11",target:"intersection12"},road205:{id:"road205",source:"intersection11",target:"intersection10"},road206:{id:"road206",source:"intersection10",target:"intersection11"},road207:{id:"road207",source:"intersection10",target:"intersection9"},road208:{id:"road208",source:"intersection9",target:"intersection10"},road209:{id:"road209",source:"intersection9",target:"intersection8"},road210:{id:"road210",source:"intersection8",target:"intersection9"},road211:{id:"road211",source:"intersection8",target:"intersection7"},road212:{id:"road212",source:"intersection7",target:"intersection8"},road213:{id:"road213",source:"intersection7",target:"intersection2"},road214:{id:"road214",source:"intersection2",target:"intersection7"},road215:{id:"road215",source:"intersection1",target:"intersection2"},road216:{id:"road216",source:"intersection2",target:"intersection1"},road217:{id:"road217",source:"intersection1",target:"intersection8"},road218:{id:"road218",source:"intersection8",target:"intersection1"},road219:{id:"road219",source:"intersection6",target:"intersection7"},road220:{id:"road220",source:"intersection7",target:"intersection6"},road221:{id:"road221",source:"intersection6",target:"intersection3"},road222:{id:"road222",source:"intersection3",target:"intersection6"},road223:{id:"road223",source:"intersection3",target:"intersection4"},road224:{id:"road224",source:"intersection4",target:"intersection3"},road225:{id:"road225",source:"intersection4",target:"intersection5"},road226:{id:"road226",source:"intersection5",target:"intersection4"},road227:{id:"road227",source:"intersection2",target:"intersection3"},road228:{id:"road228",source:"intersection3",target:"intersection2"},road231:{id:"road231",source:"intersection5",target:"intersection6"},road232:{id:"road232",source:"intersection6",target:"intersection5"}},carsNumber:4,time:353.8403300000037}}},{}],31:[function(e,t,n){"use strict";t.exports={car:0,intersection:0,lane:0,road:0,trafficLight:0}},{}],32:[function(e,t,n){"use strict";var r,a,c,i,o,l,u,s;({max:c,min:i,random:o,sqrt:u}=Math),e("../helpers"),a=e("underscore"),r=e("./trajectory"),s=e("../helpers"),l=e("../settings"),e=function(){class e{constructor(e,t){this.id=s("car"),this.color=(300+240*o()|0)%360,this._speed=0,this.width=1.7,this.length=3+2*o(),this.maxSpeed=30,this.s0=2,this.timeHeadway=1.5,this.maxAcceleration=1,this.maxDeceleration=3,this.trajectory=new r(this,e,t),this.alive=!0,this.tooLongStop=0,this.trackPoints=[],this.path=[],this.path_index=0}release(){return this.trajectory.release()}getAcceleration(){var e=this.trajectory.nextCarDistance,t=c(e.distance,0),n=this.maxAcceleration,r=this.maxDeceleration,e=this.speed-(null!=(e=e.car)?e.speed:void 0)||0,i=(this.speed/this.maxSpeed)**4,o=this.s0,s=this.speed*this.timeHeadway,e=this.speed*e/(2*u(n*r)),n=((1+s+this.speed**2/(2*r))/this.trajectory.distanceToStopLine)**2;return this.maxAcceleration*(1-i-((o+s+e)/t)**2-n)}move(e){var t,n,r;return this.id===l.myCar.id?this.moveMyCar(e):(t=this.getAcceleration(),this.speed+=t*e,!this.trajectory.isChangingLanes&&this.nextLane&&(r=this.trajectory.current.lane,(n=0!==r.getTurnDirection(this.nextLane)?r.rightmostAdjacent:r.leftmostAdjacent)!==r)&&this.trajectory.changeLane(n),(r=this.speed*e+.5*t*e**2)<=0&&(this.tooLongStop+=1,this.tooLongStop>l.tooLongStop)&&(this.alive=!1),this.trajectory.nextCarDistance.distance<r&&(this.speed=this.speed/10,r=this.speed*e+.5*t*e**2,console.log("bad IDM")),this.trajectory.timeToMakeTurn(r)&&null==this.nextLane?this.alive=!1:this.trajectory.moveForward(r))}moveMyCar(e){var t,n,r=this.getAcceleration();return this.speed+=r*e,!this.trajectory.isChangingLanes&&this.nextLane&&(n=this.trajectory.current.lane,(t=0!==n.getTurnDirection(this.nextLane)?n.rightmostAdjacent:n.leftmostAdjacent)!==n)&&this.trajectory.changeLane(t),n=this.speed*e+.5*r*e**2,this.trajectory.nextCarDistance.distance<n&&(this.speed=this.speed/10,n=this.speed*e+.5*r*e**2),this.trajectory.timeToMakeTurn(n)&&null==this.nextLane?this.alive=!1:this.trajectory.moveForward(n)}pickNextRoad(){var t,e,n,r,i,o,s;if(this.id!==l.myCar.id||0===this.path.length)return i=this.trajectory.nextIntersection,t=this.trajectory.current.lane,0===(i=i.roads.filter(function(e){return e.target!==t.road.source})).length?null:a.sample(i);if(this.id===l.myCar.id)for(r=this.path[0],e=0,n=(o=(t=this.trajectory.current.lane).road.target.roads).length;e<n;e++)if((s=o[e]).target===r)return s=s,this.updatePath(),s}pickNextLane(){var e,t,n;if(this.nextLane)throw Error("next lane is already chosen");if(this.nextLane=null,!(t=this.pickNextRoad()))return null;if(n=this.trajectory.current.lane.road.getTurnDirection(t),e=function(){switch(n){case 0:return t.lanesNumber-1;case 1:case 2:return 0}}(),this.nextLane=t.lanes[e],this.nextLane)return this.nextLane;throw Error("can not pick next lane")}popNextLane(){var e=this.nextLane;return this.nextLane=null,e}setPath(e){return this.path=e}updatePath(){0<this.path.length&&this.path.shift()}}return e.property("coords",{get:function(){return this.id===l.myCar.id&&(this.alive&&0<l.myCar.maxFollowPoints?(this.trackPoints.push(this.trajectory.coords),this.trackPoints.length>l.myCar.maxFollowPoints&&(this.trackPoints=this.trackPoints.slice(this.trackPoints.length-l.myCar.maxFollowPoints))):this.trackPoints=[]),this.trajectory.coords}}),e.property("speed",{get:function(){return this._speed},set:function(e){return(e=e<0?0:e)>this.maxSpeed&&(e=this.maxSpeed),this._speed=e}}),e.property("direction",{get:function(){return this.trajectory.direction}}),e}.call(this),t.exports=e},{"../helpers":29,"../settings":41,"./trajectory":39,underscore:7}],33:[function(e,t,n){"use strict";var i,o,s=[].indexOf;i=Math.random,e("../helpers"),o=e("../settings"),e=function(){class r{constructor(e){this.onTick=this.onTick.bind(this),this.intersection=e,this.flipMultiplier=i(),this.phaseOffset=100*i(),this.time=this.phaseOffset,this.stateNum=0}static copy(e,t){var n;return null==e?new r(t):((n=Object.create(r.prototype)).flipMultiplier=e.flipMultiplier,n.time=n.phaseOffset=e.phaseOffset,n.stateNum=0,n.intersection=t,n)}toJSON(){return{flipMultiplier:this.flipMultiplier,phaseOffset:this.phaseOffset}}_decode(e){var t=[0,0,0];return 0<=s.call(e,"L")&&(t[0]=1),0<=s.call(e,"F")&&(t[1]=1),0<=s.call(e,"R")&&(t[2]=1),t}flip(){return this.stateNum+=1}onTick(e){if(this.time+=e,this.time>this.flipInterval)return this.flip(),this.time-=this.flipInterval}}return r.prototype.states=[["L","","L",""],["FR","","FR",""],["","L","","L"],["","FR","","FR"]],r.STATE=[{RED:0,GREEN:1}],r.property("flipInterval",{get:function(){return(.1+.05*this.flipMultiplier)*o.lightsFlipInterval}}),r.property("state",{get:function(){for(var e,t=this.states[this.stateNum%this.states.length],n=[],r=0,i=(t=this.intersection.roads.length<=2?["LFR","LFR","LFR","LFR"]:t).length;r<i;r++)e=t[r],n.push(this._decode(e));return n}}),r}.call(this),t.exports=e},{"../helpers":29,"../settings":41}],34:[function(e,t,n){"use strict";var r,i,o,s,a;e("../helpers"),s=e("underscore"),r=e("./control-signals"),o=e("../geom/rect"),a=e("../helpers"),t.exports=i=class i{constructor(e){this.rect=e,this.id=a("intersection"),this.roads=[],this.inRoads=[],this.controlSignals=new r(this)}static copy(e){var t;return e.rect=o.copy(e.rect),t=Object.create(i.prototype),s.extend(t,e),t.roads=[],t.inRoads=[],t.controlSignals=r.copy(t.controlSignals,t),t}toJSON(){return{id:this.id,rect:this.rect,controlSignals:this.controlSignals}}update(){for(var e,t,n,r,i,o=this.roads,s=0,a=o.length;s<a;s++)(i=o[s]).update();for(r=[],e=0,t=(n=this.inRoads).length;e<t;e++)i=n[e],r.push(i.update());return r}}},{"../geom/rect":27,"../helpers":29,"./control-signals":33,underscore:7}],35:[function(e,t,n){"use strict";var r;e("../helpers"),e("underscore"),r=e("../helpers"),e=function(){class e{constructor(e,t,n){this.car=e,this.position=n,this.id=r("laneposition"),this.free=!0,this.lane=t}acquire(){var e;if(null!=(null!=(e=this.lane)?e.addCarPosition:void 0))return this.free=!1,this.lane.addCarPosition(this)}release(){var e;if(!this.free&&null!=(e=this.lane)&&e.removeCar)return this.free=!0,this.lane.removeCar(this)}getNext(){if(this.lane&&!this.free)return this.lane.getNext(this)}}return e.property("lane",{get:function(){return this._lane},set:function(e){return this.release(),this._lane=e}}),e.property("relativePosition",{get:function(){return this.position/this.lane.length}}),e.property("nextCarDistance",{get:function(){var e,t,n=this.getNext();return n?(t=n.position-n.car.length/2,e=this.position+this.car.length/2,{car:n.car,distance:t-e}):{car:null,distance:1/0}}}),e}.call(this),t.exports=e},{"../helpers":29,underscore:7}],36:[function(e,t,n){"use strict";var r,i,o,s;e("../helpers"),o=e("underscore"),i=e("../geom/segment"),s=e("../helpers"),r=e("../geom/rect"),e=function(){class e{constructor(e,t,n){this.sourceSegment=e,this.targetSegment=t,this.road=n,this.id=s("lane"),this.leftAdjacent=null,this.rightAdjacent=null,this.leftmostAdjacent=null,this.rightmostAdjacent=null,this.carsPositions={},this.carsNumber=0,this.update()}toJSON(){var e=o.extend({},this);return delete e.carsPositions,e}update(){return this.middleLine=new i(this.sourceSegment.center,this.targetSegment.center),this.length=this.middleLine.length,this.direction=this.middleLine.direction}getTurnDirection(e){return this.road.getTurnDirection(e.road)}getDirection(){return this.direction}getPoint(e){return this.middleLine.getPoint(e)}addCarPosition(e){if(e.id in this.carsPositions)throw Error("car is already here");return this.carsPositions[e.id]=e,this.carsNumber+=1}removeCar(e){if(e.id in this.carsPositions)return delete this.carsPositions[e.id],--this.carsNumber;throw Error("removing unknown car")}getNext(e){var t,n,r,i,o,s;if(e.lane!==this)throw Error("car is on other lane");for(r in i=null,t=1/0,s=this.carsPositions)n=(o=s[r]).position-e.position,!o.free&&0<n&&n<t&&(t=n,i=o);return i}}return e.property("sourceSideId",{get:function(){return this.road.sourceSideId}}),e.property("targetSideId",{get:function(){return this.road.targetSideId}}),e.property("isRightmost",{get:function(){return this===this.rightmostAdjacent}}),e.property("isLeftmost",{get:function(){return this===this.leftmostAdjacent}}),e.property("leftBorder",{get:function(){return new i(this.sourceSegment.source,this.targetSegment.target)}}),e.property("rightBorder",{get:function(){return new i(this.sourceSegment.target,this.targetSegment.source)}}),e.property("stringDirection",{get:function(){if(void 0===this.direction)throw Error("direction is undefined");if(0===Math.round(this.direction))return"right";if(3===Math.round(this.direction))return"left";if(2===Math.round(this.direction))return"down";if(-2===Math.round(this.direction))return"up";throw Error("invalid direction")}}),e.property("rect",{get:function(){if("up"===this.stringDirection)return new r(this.sourceSegment.source.x,this.targetSegment.target.y,settings.gridSize/4,this.sourceSegment.source.y-this.targetSegment.target.y);if("right"===this.stringDirection)return new r(this.sourceSegment.source.x,this.sourceSegment.source.y,this.targetSegment.target.x-this.sourceSegment.source.x,settings.gridSize/4);if("left"===this.stringDirection)return new r(this.targetSegment.target.x,this.targetSegment.target.y-settings.gridSize/4,this.sourceSegment.source.x-this.targetSegment.target.x,settings.gridSize/4);if("down"===this.stringDirection)return new r(this.targetSegment.target.x-settings.gridSize/4,this.sourceSegment.source.y,settings.gridSize/4,this.targetSegment.target.y-this.sourceSegment.source.y);throw Error("invalid direction")}}),e}.call(this),t.exports=e},{"../geom/rect":27,"../geom/segment":28,"../helpers":29,underscore:7}],37:[function(e,t,n){"use strict";e("../helpers"),e=function(){class e{constructor(e,t){var n,r,i;if(this.factory=e,this.objects={},null!=t&&null!=t.objects)for(n in r=t.objects)i=r[n],this.objects[n]=this.factory.copy(i)}toJSON(){return this.objects}get(e){return this.objects[e]}put(e){return this.objects[e.id]=e}pop(e){var t=null!=(t=e.id)?t:e,e=this.objects[t];return"function"==typeof e.release&&e.release(),delete this.objects[t],e}all(){return this.objects}clear(){return this.objects={}}}return e.property("length",{get:function(){return Object.keys(this.objects).length}}),e}.call(this),t.exports=e},{"../helpers":29}],38:[function(e,t,n){"use strict";var l,r,i,o,s,u,d,h,a;({min:d,max:u}=Math),e("../helpers"),s=e("underscore"),l=e("./lane"),h=e("../settings"),a=e("../helpers"),i=e("../geom/rect"),o=e("../geom/segment"),r=e("../geom/point"),e=function(){class n{constructor(e,t){this.source=e,this.target=t,this.id=a("road"),this.lanes=[],this.lanesNumber=null,this.update()}static copy(e){var t=Object.create(n.prototype);return s.extend(t,e),null==t.lanes&&(t.lanes=[]),t}toJSON(){return{id:this.id,source:this.source.id,target:this.target.id,length:this.length,carsNumber:this.lanes.reduce(function(e,t){return e+t.carsNumber},0),lanesCarNumbers:this.lanes.map(function(e){return e.carsNumber})}}getTurnDirection(e){var t;if(this.target!==e.source)throw Error("invalid roads");return t=this.targetSideId,(e.sourceSideId-t-1+8)%4}update(){var e,t,n,r,i,o,s,a,c;if(!this.source||!this.target)throw Error("incomplete road");if(this.sourceSideId=this.source.rect.getSectorId(this.target.rect.center()),this.sourceSide=this.source.rect.getSide(this.sourceSideId).subsegment(.5,1),this.targetSideId=this.target.rect.getSectorId(this.source.rect.center()),this.targetSide=this.target.rect.getSide(this.targetSideId).subsegment(0,.5),this.lanesNumber=0|d(this.sourceSide.length,this.targetSide.length),this.lanesNumber=u(2,this.lanesNumber/h.gridSize|0),a=this.sourceSide.split(this.lanesNumber,!0),c=this.targetSide.split(this.lanesNumber),null==this.lanes||this.lanes.length<this.lanesNumber)for(null==this.lanes&&(this.lanes=[]),t=n=0,i=this.lanesNumber-1;0<=i?n<=i:i<=n;t=0<=i?++n:--n)null==(e=this.lanes)[t]&&(e[t]=new l(a[t],c[t],this));for(s=[],t=r=0,o=this.lanesNumber-1;0<=o?r<=o:o<=r;t=0<=o?++r:--r)this.lanes[t].sourceSegment=a[t],this.lanes[t].targetSegment=c[t],this.lanes[t].leftAdjacent=this.lanes[t+1],this.lanes[t].rightAdjacent=this.lanes[t-1],this.lanes[t].leftmostAdjacent=this.lanes[this.lanesNumber-1],this.lanes[t].rightmostAdjacent=this.lanes[0],s.push(this.lanes[t].update());return s}}return n.property("length",{get:function(){return this.targetSide.target.subtract(this.sourceSide.source).length}}),n.property("leftmostLane",{get:function(){return this.lanes[this.lanesNumber-1]}}),n.property("rightmostLane",{get:function(){return this.lanes[0]}}),n.property("stringDirection",{get:function(){var e;return"up"===(e=this.lanes[0].stringDirection)||"down"===e?"vertical":"horizontal"}}),n.property("middleLine",{get:function(){return"horizontal"===this.stringDirection?new o(new r(this.rect.x,this.rect.y+this.rect.height()/2),new r(this.rect.x+this.rect.width(),this.rect.y+this.rect.height()/2)):new o(new r(this.rect.x+this.rect.width()/2,this.rect.y),new r(this.rect.x+this.rect.width()/2,this.rect.y+this.rect.height()))}}),n.property("rect",{get:function(){return"horizontal"===this.stringDirection?new i(this.sourceSide.source.x,this.sourceSide.source.y,this.targetSide.target.x-this.sourceSide.source.x,h.gridSize/2):new i(this.sourceSide.source.x,this.sourceSide.source.y,h.gridSize/2,this.targetSide.target.y-this.sourceSide.source.y)}}),n}.call(this),t.exports=e},{"../geom/point":26,"../geom/rect":27,"../geom/segment":28,"../helpers":29,"../settings":41,"./lane":36,underscore:7}],39:[function(e,t,n){"use strict";var i,r,o,s;({min:s,max:o}=Math),e("../helpers"),r=e("./lane-position"),i=e("../geom/curve"),e("underscore"),e=function(){class e{constructor(e,t,n){this.car=e,this.current=new r(this.car,t,n=null==n?0:n),this.current.acquire(),this.next=new r(this.car),this.temp=new r(this.car),this.isChangingLanes=!1}setNextIntersection(e){return this.current.lane.road.target=e}isValidTurn(){var e=this.car.nextLane,t=this.current.lane;if(!e)throw Error("no road to enter");if(3===(e=t.getTurnDirection(e)))throw Error("no U-turns are allowed");if(0===e&&!t.isLeftmost)throw Error("no left turns from this lane");if(2!==e||t.isRightmost)return!0;throw Error("no right turns from this lane")}canEnterIntersection(){var e,t=this.car.nextLane,n=this.current.lane;return!t||(e=this.nextIntersection,t=n.getTurnDirection(t),n=n.road.targetSideId,e.controlSignals.state[n][t])}getDistanceToIntersection(){var e=this.current.lane.length-this.car.length/2-this.current.position;return this.isChangingLanes?1/0:o(e,0)}timeToMakeTurn(e=0){return this.getDistanceToIntersection()<=e}moveForward(e){var t;if(e=o(e,0),this.current.position+=e,this.next.position+=e,this.temp.position+=e,this.timeToMakeTurn()&&this.canEnterIntersection()&&this.isValidTurn()&&this._startChangingLanes(this.car.popNextLane(),0),e=this.temp.position/(null!=(e=this.temp.lane)?e.length:void 0),t=settings.carsGap*this.car.length,this.isChangingLanes&&this.temp.position>t&&!this.current.free&&this.current.release(),this.isChangingLanes&&this.next.free&&this.temp.position+t>(null!=(t=this.temp.lane)?t.length:void 0)&&this.next.acquire(),this.isChangingLanes&&1<=e&&this._finishChangingLanes(),this.current.lane&&!this.isChangingLanes&&!this.car.nextLane)return this.car.pickNextLane()}changeLane(e){var t;if(this.isChangingLanes)throw Error("already changing lane");if(null==e)throw Error("no next lane");if(e===this.lane)throw Error("next lane == current lane");if(this.lane.road!==e.road)throw Error("not neighbouring lanes");if((t=this.current.position+3*this.car.length)<this.lane.length)return this._startChangingLanes(e,t);throw Error("too late to change lane")}_getIntersectionLaneChangeCurve(){}_getAdjacentLaneChangeCurve(){var e=this.current.lane.getPoint(this.current.relativePosition),t=this.next.lane.getPoint(this.next.relativePosition),n=t.subtract(e).length,r=this.current.lane.middleLine.vector.normalized.mult(.3*n),r=e.add(r),n=this.next.lane.middleLine.vector.normalized.mult(.3*n),n=t.subtract(n);return new i(e,t,r,n)}_getCurve(){return this._getAdjacentLaneChangeCurve()}_startChangingLanes(e,t){if(this.isChangingLanes)throw Error("already changing lane");if(null==e)throw Error("no next lane");return this.isChangingLanes=!0,this.next.lane=e,this.next.position=t,e=this._getCurve(),this.temp.lane=e,this.temp.position=0,this.next.position-=this.temp.lane.length}_finishChangingLanes(){if(this.isChangingLanes)return this.isChangingLanes=!1,this.current.lane=this.next.lane,this.current.position=this.next.position||0,this.current.acquire(),this.next.lane=null,this.next.position=NaN,this.temp.lane=null,this.temp.position=NaN,this.current.lane;throw Error("no lane changing is going on")}release(){var e;return null!=(e=this.current)&&e.release(),null!=(e=this.next)&&e.release(),null!=(e=this.temp)?e.release():void 0}}return e.property("lane",{get:function(){return this.temp.lane||this.current.lane}}),e.property("absolutePosition",{get:function(){return(null!=this.temp.lane?this.temp:this.current).position}}),e.property("relativePosition",{get:function(){return this.absolutePosition/this.lane.length}}),e.property("direction",{get:function(){return this.lane.getDirection(this.relativePosition)}}),e.property("coords",{get:function(){return this.lane.getPoint(this.relativePosition)}}),e.property("nextCarDistance",{get:function(){var e=this.current.nextCarDistance,t=this.next.nextCarDistance;return e.distance<t.distance?e:t}}),e.property("distanceToStopLine",{get:function(){return this.canEnterIntersection()?1/0:this.getDistanceToIntersection()}}),e.property("nextIntersection",{get:function(){return this.current.lane.road.target}}),e.property("previousIntersection",{get:function(){return this.current.lane.road.source}}),e}.call(this),t.exports=e},{"../geom/curve":25,"../helpers":29,"./lane-position":35,underscore:7}],40:[function(e,t,n){"use strict";var a,E,r,T,O,N,i,M,o,j,P;M=Math.random,e("../helpers"),N=e("underscore"),a=e("./car"),E=e("./intersection"),O=e("./road"),r=e("./pool"),T=e("../geom/rect"),j=e("../settings"),o=e("../maps"),P=e("uuid"),i=e("../mapsIdCounter"),e("../helpers"),e=function(){class e{constructor(){this.onTick=this.onTick.bind(this),this.set({}),this.createDynamicMapMethods(),this.trackPath=[],this.bestPath=[],this.lengthOnlyPath=[],this.carObject={lastTimeSpawn:null},this.activeCars=0,this.roadsUpdateCounterInterval=0}createDynamicMapMethods(){var e,t,n=this.constructor,r=[];for(t in o)e=o[t],r.push(function(e,t){return n.prototype[e]=function(){return this.load(t,e,!1)}}(t,e));return r}set(e){return this.intersections=new r(E,(e=null==e?{}:e).intersections),this.roads=new r(O,e.roads),this.cars=new r(a,e.cars),this.carsNumber=0,this.time=0,this.mapId=null}save(e=!1){var t=N.extend({},this);return delete t.cars,e?JSON.stringify({mapId:t.mapId,intersections:t.intersections,roads:t.roads,carsNumber:t.carsNumber,time:t.time}):localStorage.world=JSON.stringify(t)}load(e,t,n=!0){var r,i,o,s,a;if(null!=(e=(e=e||localStorage.world)&&n?JSON.parse(e):e)){for(r in this.clear(),this.carsNumber=e.carsNumber||0,o=e.intersections)i=o[r],this.addIntersection(E.copy(i));for(r in s=e.roads)a=s[r],(a=O.copy(a)).source=this.getIntersection(a.source),a.target=this.getIntersection(a.target),a.carsNumber=0,this.addRoad(a);return this.mapId=t,this.newRequest(j.mapUrl,"POST",null,{map:this.save(!0)})}}generateMap(e=-j.mapSize,t=j.mapSize,n=-j.mapSize,r=j.mapSize){var i,o,s,a,c,l,u,d,h,f,p,g,m,v,y,b,_,w,x,S,C,k,A;for(this.clear(),c=.8*(t-e+1)*(r-n+1)|0,h={},C=5*(i=j.gridSize),this.carsNumber=j.carsNumber;0<c;)null==h[[k=N.random(e,t),A=N.random(n,r)]]&&(p=new T(C*k,C*A,i,i),a=new E(p),this.addIntersection(h[[k,A]]=a),--c);for(k=o=g=e,m=t;g<=m?o<=m:m<=o;k=g<=m?++o:--o)for(f=null,A=l=v=n,y=r;v<=y?l<=y:y<=l;A=v<=y?++l:--l)null!=(a=h[[k,A]])&&(M()<.9&&(null!=f&&this.addRoad(new O(a,f)),null!=f)&&this.addRoad(new O(f,a)),f=a);for(A=u=b=n,_=r;b<=_?u<=_:_<=u;A=b<=_?++u:--u)for(f=null,k=d=w=e,x=t;w<=x?d<=x:x<=d;k=w<=x?++d:--d)null!=(a=h[[k,A]])&&(M()<.9&&(null!=f&&this.addRoad(new O(a,f)),null!=f)&&this.addRoad(new O(f,a)),f=a);if(j.connectedMap)for(s in S=this.intersections.all())if((a=S[s]).roads.length<2)return this.generateMap(e,t,n,r);return this.mapId=P.v4(),console.log("Map generated"),this.newRequest(j.mapUrl,"POST",null,{map:this.save(!0)})}addMyCar(e,t=0){var n,r,i,o,s;if(e instanceof O?e.id:e=this.getRoad(e),e){for(this.carObject.lastTimeSpawn=this.time,e=e.lanes[t],this.removeCarById(j.myCar.id),this.carsNumber=this.carsNumber+1,(n=new a(e)).speed=1,n.id=j.myCar.id,n.color=j.myCar.color,r=0,o=(s=this.trackPath).length;r<o;r++)i=s[r].intersection,this.addIntersectionToMyCarPath(i.id,n);return this.addCar(n),n.path.shift(),n.path.shift()}}addIntersectionToMyCarPath(e,t){e=this.getIntersection(e);e&&t.path.push(e)}newRequest(e,t="GET",n=null,r=null){n&&(e=e+"?"+new URLSearchParams(n).toString()),(n=new XMLHttpRequest).open(t,e,!1),r&&(n.setRequestHeader("Content-Type","application/json"),r=JSON.stringify(r)),n.cors=!0;try{if(n.send(r),n.readyState===XMLHttpRequest.DONE)return 200===n.status?n.responseText:(console.log("[Request Error]: "+n.status),!1)}catch(e){return console.log("[Request Error]: "+e),!1}}getShortestPathAPI(e="false"){var t,n;return"false"===e&&this.newRequest(j.roadsUrl,"PATCH",null,{mapId:this.mapId,roads:this.roads.all()}),t=this.trackPath[0].intersection.id,n=this.trackPath[this.trackPath.length-1].intersection.id,t=t.slice("intersection".length),n=n.slice("intersection".length),t={fromIntersection:t,mapId:this.mapId,toIntersection:n,lengthOnly:e},(n=this.newRequest(j.pathFinderUrl,"GET",t,null))?"ok"===(n=JSON.parse(n)).status?n.path:console.log("Error: "+n.message):console.log("Error: No data received from server")}addMyCarAPI(){var e,t,n,r,i,o=this.getShortestPathAPI();for(this.carObject.lastTimeSpawn=this.time,console.log("Best Path: "+o),visualizer.drawTrackPath(o,"yellow"),i=null,t=(n=this.getIntersection(o[e=0]).roads).length;e<t;e++)if((r=n[e]).target.id===o[1]){i=r;break}return this.addMyCar(i,0)}clear(){for(var e in this.set({}),this.carObject.lastTimeSpawn=null,i)i[e],i[e]=0;if(this.trackPath=[],this.lengthOnlyPath=[],j.debugTestHtml)return document.getElementById("trackPath").innerHTML="",document.getElementById("lengthOnlyPath").innerHTML=""}onTick(e){var t,n,r,i,o,s,a,c,l,u,d,h,f,p;if(1<e)throw Error("delta > 1");for(r in this.time+=e,null!=(a=this.carObject)&&a.lastTimeSpawn&&this.time-this.carObject.lastTimeSpawn>j.waitCarSpawn?(this.refreshCars(),this.carObject.lastTimeSpawn=null):null===(null!=(a=this.carObject)?a.lastTimeSpawn:void 0)&&this.refreshCars(),c=this.intersections.all())c[r].controlSignals.onTick(e);for(r in l=this.cars.all())(t=l[r]).move(e),t.alive||this.removeCar(t);for(r in h=[],u=this.roads.all())if(f=u[r],j.trafficHighlight){for(n=p=0,o=(d=f.lanes).length;n<o;n++)0<=(s=(i=d[n]).carsNumber/(f.length/j.averageCarLength))&&s<=.5?i.color=j.colors.road:.5<s&&s<=.8?i.color="orange":.8<s&&(i.color="red"),p+=i.carsNumber;h.push(f.carsNumber=p)}else h.push([function(){for(var e=f.lanes,t=[],n=0,r=e.length;n<r;n++)i=e[n],t.push(i.color=j.colors.road);return t}()]);return h}refreshCars(){if(this.cars.length<this.carsNumber&&this.addRandomCar(),this.cars.length>this.carsNumber)return this.removeRandomCar()}addRoad(e){return this.roads.put(e),e.source.roads.push(e),e.target.inRoads.push(e),e.update()}getRoad(e){return this.roads.get(e)}addCar(e){return this.cars.put(e)}getCar(e){return this.cars.get(e)}removeCarById(e){e=this.getCar(e);if(e)return this.removeCar(e)}removeCar(e){return this.cars.pop(e),e.release()}addIntersection(e){return this.intersections.put(e)}getIntersection(e){return this.intersections.get(e)}addRandomCar(){var e=N.sample(this.roads.all());if(null!=e&&null!=(e=e.lanes[0]))return this.addCar(new a(e))}removeRandomCar(){var e=N.sample(this.cars.all());if(null!=e)return this.removeCar(e)}}return e.property("instantSpeed",{get:function(){var e=N.map(this.cars.all(),function(e){return e.speed});return 0===e.length?0:N.reduce(e,function(e,t){return e+t})/e.length}}),e}.call(this),t.exports=e},{"../geom/rect":27,"../helpers":29,"../maps":30,"../mapsIdCounter":31,"../settings":41,"./car":32,"./intersection":34,"./pool":37,"./road":38,underscore:7,uuid:8}],41:[function(e,t,n){"use strict";var r={colors:{background:"#FFFFFF",redLight:"hsl(0, 100%, 50%)",greenLight:"#85ee00",intersection:"#586970",road:"#586970",roadMarking:"#bbb",hoveredIntersection:"#3d4c53",tempRoad:"#aaa",gridPoint:"#586970",grid1:"rgba(255, 255, 255, 0.5)",grid2:"rgba(220, 220, 220, 0.5)",hoveredGrid:"#f4e8e1",hoveredLane:"#dbd0ca"},fps:30,lightsFlipInterval:160,gridSize:14,mapSize:4,averageCarLength:4.5,defaultTimeFactor:5,defaultZoomLevel:3,defaultMap:"mappa_1",connectedMap:!0,debug:!0,myWidth:0,myHeight:0,fullScreen:!0,showRedLights:!0,triangles:!0,trafficHighlight:!0,carsNumber:150,carsGap:5,waitCarSpawn:40,tooLongStop:1e3,myCar:{id:"MACCHINA",color:"#000000",maxFollowPoints:1e3,carLine:"white"},updateRoadsInterval:50,pathFinderUrl:"http://localhost:8000/pathFinder",mapUrl:"http://localhost:8000/map",roadsUrl:"http://localhost:8000/roads",debugTestHtml:null!==document.getElementById("test")};t.exports=r},{}],42:[function(e,t,n){"use strict";var a,r,s,c,l,u;s=Math.PI,e("../helpers.coffee"),c=e("../geom/point"),e("../geom/rect"),a=e("../geom/curve"),l=e("../geom/segment"),u=e("../settings"),t.exports=r=class{constructor(e){this.ctx=e}fillRect(e,t,n){return null!=t&&(this.ctx.fillStyle=t),t=this.ctx.globalAlpha,null!=n&&(this.ctx.globalAlpha=n),this.ctx.fillRect(e.left(),e.top(),e.width(),e.height()),this.ctx.globalAlpha=t}drawRect(e){var t,n,r,i;for(this.ctx.beginPath,e=e.getVertices(),this.ctx.beginPath(),this.moveTo(e[0]),t=0,n=(i=e.slice(1)).length;t<n;t++)r=i[t],this.lineTo(r);return this.ctx.closePath()}drawImage(e,t){return this.ctx.drawImage(e,t.left(),t.top(),t.width(),t.height())}clear(e){return this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}moveTo(e){return this.ctx.moveTo(e.x,e.y)}lineTo(e){return this.ctx.lineTo(e.x,e.y)}drawLine(e,t){return this.ctx.beginPath(),this.moveTo(e),this.lineTo(t)}drawSegment(e,t=null,n=null){if(t&&(this.ctx.lineWidth=t),this.drawLine(e.source,e.target),n)return this.stroke(n)}drawCurve(e,t,n){var r,i,o;for(this.ctx.lineWidth=t,this.ctx.beginPath(),this.moveTo(e.getPoint(0)),r=i=0,0;i<=10;r=++i)o=e.getPoint(r/10),this.lineTo(o);if(e.O&&(this.moveTo(e.O),this.ctx.arc(e.O.x,e.O.y,t,0,2*s)),e.Q&&(this.moveTo(e.Q),this.ctx.arc(e.Q.x,e.Q.y,t,0,2*s)),n)return this.stroke(n)}drawTriangle(e,t,n){return this.ctx.beginPath(),this.moveTo(e),this.lineTo(t),this.lineTo(n)}drawCircle(e,t,n,r){if(this.ctx.beginPath(),this.ctx.arc(e.x,e.y,t,0,2*s),this.ctx.lineWidth=n,r)return this.stroke(r)}fill(e,t){return this.ctx.fillStyle=e,e=this.ctx.globalAlpha,null!=t&&(this.ctx.globalAlpha=t),this.ctx.fill(),this.ctx.globalAlpha=e}stroke(e){return this.ctx.strokeStyle=e,this.ctx.stroke()}polyline(...e){var t,n,r,i;if(1<=e.length){for(this.ctx.beginPath(),this.moveTo(e[0]),t=0,n=(i=e.slice(1)).length;t<n;t++)r=i[t],this.lineTo(r);return this.ctx.closePath()}}drawPolylineFeatures(e,t,n){var r,i,o,s;for(r in e[0]instanceof c&&this.ctx.moveTo(e[0].x,e[0].y),s="",o=new c(0,0),e){if(i=e[r],s=r.startsWith("_")?r+" ":"Coords: ",i instanceof c)this.drawCircle(i,t,n),s+=`at ${i.x}, `+i.y,o=i;else if(i instanceof l)this.drawSegment(i,t,n),o=new c((i.source.x+i.target.x)/2,(i.source.y+i.target.y)/2),s+=`from ${i.source.x}, ${i.source.y} to ${i.target.x}, `+i.target.y,this.stroke(n);else{if(!(i instanceof a))throw Error("Unknown feature type ->"+i);this.drawCurve(i,t,n)}u.debug&&(this.ctx.fillStyle="yellow",this.ctx.font="1px Arial",this.ctx.fillText(s,o.x,o.y+2))}return this.ctx.stroke()}save(){return this.ctx.save()}restore(){return this.ctx.restore()}}},{"../geom/curve":25,"../geom/point":26,"../geom/rect":27,"../geom/segment":28,"../helpers.coffee":29,"../settings":41}],43:[function(e,t,n){"use strict";function l(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var r,u,i;e("../helpers.coffee"),r=e("./tool.coffee"),i=e("../settings.coffee"),e("../geom/point.coffee"),u=class u extends r{constructor(){super(...arguments),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.draw=this.draw.bind(this),this.hoveredCell=null,this.hoveredLane=null,this.isTracking=!1}mousemove(e){var t,n,r,i,o,s,a,c;if(l(this,u),t=this.getCell(e),n=this.getHoveredLane(this.getScaledPoint(e)),e.ctrlKey)this.hoveredLane=n,this.hoveredCell=null,this.isTracking=!1,this.trackDestination=!1;else{if(e.altKey)return this.hoveredCell=t,this.hoveredLane=null,this.isTracking=!0,void(this.trackDestination=!1);this.hoveredCell=t,this.hoveredLane=null,this.isTracking=!1}for(r in a=[],s=this.visualizer.world.intersections.all())(i=s[r]).color=null,a.push(function(){var e=[];for(c in i.roads)e.push(function(){var e=[];for(o in c.lanes)e.push(o.color=null);return e}());return e}());return a}mouseout(){return l(this,u),this.hoveredCell=null,this.hoveredLane=null}draw(){var e;return l(this,u),this.hoveredCell&&!this.isTracking?(e=i.colors.hoveredGrid,this.visualizer.graphics.fillRect(this.hoveredCell,e,.5)):this.hoveredCell&&this.isTracking?(e=i.colors.hoveredLane,this.visualizer.graphics.fillRect(this.hoveredCell,"red",.5)):this.hoveredLane?(e=i.colors.hoveredLane,this.visualizer.graphics.fillRect(this.hoveredLane.rect,e,.5)):void 0}},t.exports=u},{"../geom/point.coffee":26,"../helpers.coffee":29,"../settings.coffee":41,"./tool.coffee":48}],44:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var i,o,s;e("../helpers.coffee"),o=e("./tool.coffee"),i=e("../model/intersection.coffee"),s=class s extends o{constructor(){super(...arguments),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.draw=this.draw.bind(this),this.tempIntersection=null,this.mouseDownPos=null}mousedown(e){if(r(this,s),this.mouseDownPos=this.getCell(e),e.shiftKey)return this.tempIntersection=new i(this.mouseDownPos),e.stopImmediatePropagation()}mouseup(){return r(this,s),this.tempIntersection&&(this.visualizer.world.addIntersection(this.tempIntersection),this.tempIntersection=null),this.mouseDownPos=null}mousemove(e){if(r(this,s),this.tempIntersection)return e=this.visualizer.zoomer.getBoundingBox(this.mouseDownPos,this.getCell(e)),this.tempIntersection.rect=e}mouseout(){return r(this,s),this.mouseDownPos=null,this.tempIntersection=null}draw(){if(r(this,s),this.tempIntersection)return this.visualizer.drawIntersection(this.tempIntersection,.4)}},t.exports=s},{"../helpers.coffee":29,"../model/intersection.coffee":34,"./tool.coffee":48}],45:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var i;e("../helpers.coffee"),i=class i extends e("./tool.coffee"){constructor(){super(...arguments),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.intersection=null}mousedown(e){var t;if(r(this,i),t=this.getHoveredIntersection(this.getCell(e)))return this.intersection=t,e.stopImmediatePropagation()}mouseup(){return r(this,i),this.intersection=null}mousemove(e){if(r(this,i),this.intersection)return e=this.getCell(e),this.intersection.rect.left(e.x),this.intersection.rect.top(e.y),this.intersection.update()}mouseout(){return r(this,i),this.intersection=null}},t.exports=i},{"../helpers.coffee":29,"./tool.coffee":48}],46:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var i;e("../helpers.coffee"),i=class i extends e("./tool.coffee"){constructor(){super(...arguments),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.startPosition=null}contextmenu(){return!1}mousedown(e){return r(this,i),this.startPosition=this.getPoint(e),e.stopImmediatePropagation()}mouseup(){return r(this,i),this.startPosition=null}mousemove(e){var t;if(r(this,i),this.startPosition)return t=this.getPoint(e).subtract(this.startPosition),this.visualizer.zoomer.moveCenter(t),this.startPosition=this.getPoint(e)}mouseout(){return r(this,i),this.startPosition=null}},t.exports=i},{"../helpers.coffee":29,"./tool.coffee":48}],47:[function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var r,i,a;e("../helpers.coffee"),e("underscore"),i=e("./tool.coffee"),e("../model/car.coffee"),r=e("../model/road.coffee"),e("../settings.coffee"),a=class a extends i{constructor(){super(...arguments),this.mousedown=this.mousedown.bind(this),this.keydown=this.keydown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.draw=this.draw.bind(this),this.sourceIntersection=null,this.road=null,this.dualRoad=null,this.newTrackPath=[]}mousedown(e){var t,n,r;return s(this,a),t=this.getCell(e),n=this.getHoveredIntersection(t),e.shiftKey&&null!=n&&(this.sourceIntersection=n,e.stopImmediatePropagation()),r=this.getHoveredLane(this.getScaledPoint(e)),e.ctrlKey&&(null!=r&&r.road&&this.visualizer.world.addMyCar(r.road),e.stopImmediatePropagation()),e.altKey&&null!=n?(this.newTrackPath.push({cell:t,intersection:n}),e.stopImmediatePropagation()):0<this.newTrackPath.length?this.newTrackPath.pop():void 0}keydown(e){var t;if(s(this,a),e.altKey&&83===e.keyCode&&(console.log("Saving track path"),this.visualizer.world.trackPath=this.newTrackPath,this.newTrackPath=[],this.visualizer.drawTrackPath(),e.stopImmediatePropagation()),e.altKey&&67===e.keyCode&&(console.log("Add MyCar with API"),this.visualizer.world.addMyCarAPI(),e.stopImmediatePropagation()),e.altKey&&71===e.keyCode)return console.log("Get Shortest Path based only on length with API"),t=this.visualizer.world.getShortestPathAPI("true"),this.visualizer.drawShortestPath(t,"green"),e.stopImmediatePropagation()}mouseup(e){return s(this,a),null!=this.road&&this.visualizer.world.addRoad(this.road),null!=this.dualRoad&&this.visualizer.world.addRoad(this.dualRoad),this.road=this.dualRoad=this.sourceIntersection=null}mousemove(e){return s(this,a),e=this.getCell(e),e=this.getHoveredIntersection(e),this.sourceIntersection&&e&&this.sourceIntersection.id!==e.id?null!=this.road?(this.road.target=e,this.dualRoad.source=e):(this.road=new r(this.sourceIntersection,e),this.dualRoad=new r(e,this.sourceIntersection)):this.road=this.dualRoad=null}mouseout(e){return s(this,a),this.road=this.dualRoad=this.sourceIntersection=null}draw(){var e,t,n,r,i,o;if(s(this,a),null!=this.road&&this.visualizer.drawRoad(this.road,.4),null!=this.dualRoad&&this.visualizer.drawRoad(this.dualRoad,.4),this.newTrackPath){for(e=1,o=[],t=0,n=(i=this.newTrackPath).length;t<n;t++)r=i[t],this.visualizer.graphics.fillRect(r.cell,"red",.5),this.ctx.font="5px Arial",this.ctx.fillStyle="#c19020",this.ctx.fillText(e,r.cell.x,r.cell.y-.5),o.push(e+=1);return o}}},t.exports=a},{"../helpers.coffee":29,"../model/car.coffee":32,"../model/road.coffee":38,"../settings.coffee":41,"./tool.coffee":48,underscore:7}],48:[function(e,t,n){"use strict";var s,a,c,r,i;e("../helpers"),s=e("jquery"),e("underscore"),r=e("../geom/point"),e("../geom/rect"),e("jquery-mousewheel"),c=["click","mouseup","mousedown","mousemove","mouseout","mousewheel","contextmenu"],a=["keydown"],t.exports=i=class{constructor(e,t){this.draw=this.draw.bind(this),this.getPoint=this.getPoint.bind(this),this.getCell=this.getCell.bind(this),this.getScaledPoint=this.getScaledPoint.bind(this),this.getHoveredIntersection=this.getHoveredIntersection.bind(this),this.getHoveredLane=this.getHoveredLane.bind(this),this.visualizer=e,this.ctx=this.visualizer.ctx,this.canvas=this.ctx.canvas,this.isBound=!1,this.bind=this.bind.bind(this),this.unbind=this.unbind.bind(this),this.click=this.click.bind(this),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this),this.mousewheel=this.mousewheel.bind(this),this.contextmenu=this.contextmenu.bind(this),this.keydown=this.keydown.bind(this),t&&this.bind()}bind(){var e,t,n,r,i,o;for(this.isBound=!0,e=0,n=c.length;e<n;e++)null!=this[i=c[e]]&&s(this.canvas).on(i,this[i]);for(o=[],t=0,r=a.length;t<r;t++)null!=this[i=a[t]]&&o.push(s(document).on(i,this[i]));return o}unbind(){var e,t,n,r,i,o;for(this.isBound=!1,e=0,n=c.length;e<n;e++)null!=this[i=c[e]]&&s(this.canvas).off(i,this[i]);for(o=[],t=0,r=a.length;t<r;t++)null!=this[i=a[t]]&&o.push(s(document).off(i,this[i]));return o}toggleState(){return this.isBound?this.unbind():this.bind()}draw(){}getPoint(e){return new r(e.pageX-this.canvas.offsetLeft,e.pageY-this.canvas.offsetTop)}getCell(e){return this.visualizer.zoomer.toCellCoords(this.getPoint(e))}getScaledPoint(e){return this.visualizer.zoomer.toPointCoords(this.getPoint(e))}getHoveredIntersection(e){var t,n,r=this.visualizer.world.intersections.all();for(t in r)if((n=r[t]).rect.containsRect(e))return n}getHoveredLane(e){var t,n,r,i,o,s,a,c,l=this.visualizer.world.intersections.all();for(n in l)for(t=0,o=(a=l[n].roads).length;t<o;t++)for(r=0,s=(c=a[t].lanes).length;r<s;r++)if((i=c[r]).rect.containsPoint(e))return i}click(e){}mousedown(e){}mouseup(e){}mousemove(e){}mouseout(e){}mousewheel(e){}contextmenu(e){}keydown(e){}}},{"../geom/point":26,"../geom/rect":27,"../helpers":29,jquery:6,"jquery-mousewheel":5,underscore:7}],49:[function(e,t,n){"use strict";var r,i,o,l,y,u,_,s,a,c,d,h,f,p,b;l=Math.PI,e("../helpers"),r=e("jquery"),e("underscore"),p=e("chroma-js"),y=e("../geom/point"),u=e("../geom/rect"),_=e("../geom/segment"),o=e("../model/intersection"),i=e("./graphics"),d=e("./mover"),c=e("./intersection-mover"),a=e("./intersection-builder"),h=e("./road-builder"),s=e("./highlighter"),f=e("./zoomer"),b=e("../settings"),e=function(){class e{constructor(e){this.draw=this.draw.bind(this),this.world=e,this.$canvas=r("#canvas"),this.canvas=this.$canvas[0],this.ctx=this.canvas.getContext("2d"),this.updateCanvasSize(),this.zoomer=new f(b.defaultZoomLevel,this,!0),this.graphics=new i(this.ctx),this.toolRoadbuilder=new h(this,!0),this.toolIntersectionBuilder=new a(this,!0),this.toolHighlighter=new s(this,!0),this.toolIntersectionMover=new c(this,!0),this.toolMover=new d(this,!0),this._running=!0,this.previousTime=0,this.timeFactor=b.defaultTimeFactor,this.trackPath=world.trackPath,this.lengthOnlyTrackPath=world.lengthOnlyTrackPath}drawIntersection(e,t){var n=e.color||b.colors.intersection;if(this.graphics.drawRect(e.rect),this.ctx.lineWidth=.4,this.graphics.stroke(b.colors.roadMarking),this.graphics.fillRect(e.rect,n,t),b.debug)return this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1.0px Arial",n=e.rect.center(),this.ctx.fillText(e.id,n.x-2,n.y-1),this.ctx.restore()}fixSignal(e){var t,n,r,i,o,s,a,c,l,u,d,h,f,p,g,m,v,y,b,_,w,x,S,C,k,A,E,D,R,T,O,N,M,j,P,L,I=[!0,!0,!0];switch(e.targetSideId){case 0:for(I[1]=!1,t=0,n=(y=e.target.inRoads).length;t<n;t++)0===y[t].sourceSideId&&(I[1]=!0);for(I[0]=!1,p=0,r=(b=e.target.inRoads).length;p<r;p++)3===b[p].sourceSideId&&(I[0]=!0);for(I[2]=!1,g=0,s=(x=e.target.inRoads).length;g<s;g++)1===x[g].sourceSideId&&(I[2]=!0);break;case 1:for(I[0]=!1,m=0,a=(S=e.target.inRoads).length;m<a;m++)0===S[m].sourceSideId&&(I[0]=!0);for(I[2]=!1,v=0,c=(C=e.target.inRoads).length;v<c;v++)2===C[v].sourceSideId&&(I[2]=!0);for(I[1]=!1,T=0,l=(k=e.target.inRoads).length;T<l;T++)1===k[T].sourceSideId&&(I[1]=!0);break;case 2:for(I[1]=!1,O=0,u=(A=e.target.inRoads).length;O<u;O++)2===A[O].sourceSideId&&(I[1]=!0);for(I[0]=!1,N=0,d=(E=e.target.inRoads).length;N<d;N++)1===E[N].sourceSideId&&(I[0]=!0);for(I[2]=!1,M=0,h=(D=e.target.inRoads).length;M<h;M++)3===D[M].sourceSideId&&(I[2]=!0);break;case 3:for(I[2]=!1,j=0,f=(R=e.target.inRoads).length;j<f;j++)0===R[j].sourceSideId&&(I[2]=!0);for(I[0]=!1,P=0,i=(_=e.target.inRoads).length;P<i;P++)2===_[P].sourceSideId&&(I[0]=!0);for(I[1]=!1,L=0,o=(w=e.target.inRoads).length;L<o;L++)3===w[L].sourceSideId&&(I[1]=!0)}return I}drawSignals(e){b.colors.redLight,b.colors.greenLight;var t,n,r,i,o=e.target,s=e.targetSide,a=e.targetSideId,c=o.controlSignals.state[a];if(this.ctx.save(),this.ctx.translate(s.center.x,s.center.y),this.ctx.rotate((a+1)*l/2),this.ctx.scale(+s.length,+s.length),1!==o.inRoads.length&&2!==o.inRoads.length){if(3===o.inRoads.length)for(n=t=0,r=(i=this.fixSignal(e)).length;n<r;n++)!1===i[n]&&(c[t]=-1),t+=1;return 1===c[0]?(b.triangles?this.graphics.drawTriangle(new y(.1,-.2),new y(.2,-.4),new y(.3,-.2)):this.graphics.drawCircle(new y(.2,-.3),.1),this.graphics.fill(b.colors.greenLight)):-1!==c[0]&&0===c[0]&&b.showRedLights&&(b.triangles?this.graphics.drawTriangle(new y(.1,-.2),new y(.2,-.4),new y(.3,-.2)):this.graphics.drawCircle(new y(.2,-.3),.1),this.graphics.fill(b.colors.redLight)),1===c[1]?(b.triangles?this.graphics.drawTriangle(new y(.3,-.1),new y(.5,0),new y(.3,.1)):this.graphics.drawCircle(new y(.4,0),.1),this.graphics.fill(b.colors.greenLight)):-1!==c[1]&&0===c[1]&&b.showRedLights&&(b.triangles?this.graphics.drawTriangle(new y(.3,-.1),new y(.5,0),new y(.3,.1)):this.graphics.drawCircle(new y(.4,0),.1),this.graphics.fill(b.colors.redLight)),1===c[2]?(b.triangles?this.graphics.drawTriangle(new y(.1,.2),new y(.2,.4),new y(.3,.2)):this.graphics.drawCircle(new y(.2,.3),.1),this.graphics.fill(b.colors.greenLight)):-1!==c[2]&&0===c[2]&&b.showRedLights&&(b.triangles?this.graphics.drawTriangle(new y(.1,.2),new y(.2,.4),new y(.3,.2)):this.graphics.drawCircle(new y(.2,.3),.1),this.graphics.fill(b.colors.redLight)),this.ctx.restore(),b.debug?(this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1px Arial",a=o.rect.center(),s=Math.round(100*o.controlSignals.flipInterval)/100,e=Math.round(100*o.controlSignals.phaseOffset)/100,this.ctx.fillText(s+" - "+e,a.x-2,a.y),this.ctx.restore()):void 0}this.ctx.restore()}drawRoad(e,t){var n,r,i,o,s,a,c,l,u,d,h,f,p,g,m,v;if(null==e.source||null==e.target)throw Error("invalid road");for(this.ctx.save(),this.ctx.lineWidth=.4,v=e.leftmostLane.leftBorder,this.graphics.drawSegment(v),this.graphics.stroke(b.colors.roadMarking),v=e.rightmostLane.rightBorder,this.graphics.drawSegment(v),this.graphics.stroke(b.colors.roadMarking),this.ctx.restore(),o=0,a=(f=e.lanes).length;o<a;o++)s=f[o],this.graphics.drawRect(s.rect),i=s.color||b.colors.road,this.graphics.fill(i,t);for(this.ctx.save(),d=0,c=(p=e.lanes.slice(1)).length;d<c;d++)u=(s=p[d]).rightBorder,this.graphics.drawSegment(u),this.ctx.lineWidth=.2,this.ctx.lineDashOffset=1.5,this.ctx.setLineDash([1]),this.graphics.stroke(b.colors.roadMarking);if(this.ctx.restore(),this.ctx.save(),b.debug)for(h=0,l=(g=e.lanes).length;h<l;h++)s=g[h],this.ctx.fillStyle="black",this.ctx.font="1px Arial",n=s.rightBorder.center,"left"===(m=s.stringDirection)||"right"===m?this.ctx.fillText(s.id,n.x,n.y+2):this.ctx.fillText(s.id,n.x,n.y-2);if(this.ctx.restore(),b.debug)return this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1px Arial",v=e.lanes[0].middleLine.center,r=e.lanes[1].middleLine.center,v=new y((v.x+r.x)/2,(v.y+r.y)/2),this.ctx.fillText(e.id,v.x,v.y),this.ctx.restore()}drawCar(e){var t,n,r=e.direction,i=e.coords;if(new u(0,0,1.1*e.length,1.7*e.width).center(new y(0,0)),(n=new u(0,0,e.length,e.width)).center(new y(0,0)),this.graphics.save(),this.ctx.translate(i.x,i.y),this.ctx.rotate(r),r=e.id===b.myCar.id?b.myCar.color:(r=.9-.3*e.speed/e.maxSpeed,p(e.color,.8,r,"hsl").hex()),this.graphics.fillRect(n,r),this.graphics.restore(),b.debug){if(this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1px Arial",this.ctx.fillText(e.id,i.x,i.y),e.id!==b.myCar.id)return null!=(t=null!=(n=e.trajectory.temp)?n.lane:void 0)&&this.graphics.drawCurve(t,.1,"red"),this.ctx.restore();null!=(t=null!=(r=e.trajectory.temp)?r.lane:void 0)&&this.graphics.drawCurve(t,.1,"blue"),this.ctx.restore()}}drawGrid(){var i,o,e,s,t,n,r,a=b.gridSize,c=this.zoomer.getBoundingBox();if(!(c.area()>=2e3*a*a)){for(r=[],i=e=c.left(),t=c.right(),n=a;0!==n&&(0<n?e<=t:t<=e);i=e+=n)r.push(function(){var e,t,n,r=[];for(o=e=c.top(),t=c.bottom(),n=a;0!==n&&(0<n?e<=t:t<=e);o=e+=n)s=new u(i-.2,o-.2,.4,.4),r.push(this.graphics.fillRect(s,b.colors.gridPoint));return r}.call(this));return r}}drawCarLines(e){var t,n,r,i;if(e.id===b.myCar.id){for(this.ctx.beginPath(),this.ctx.moveTo(e.trackPoints[0].x,e.trackPoints[0].y),t=0,n=(i=e.trackPoints).length;t<n;t++)r=i[t],this.graphics.drawCircle(r,.2,.1,b.myCar.carLine,!0),this.graphics.fill(b.myCar.carLine);return this.ctx.stroke(),this.ctx.restore()}}updateCanvasSize(){var e=this.canvas;e.width=e.clientWidth,e.height=e.clientHeight,b.myWidth=e.clientWidth,b.myHeight=e.clientHeight}draw(e){var t,n,r,i,o,s,a,c,l,u,d,h;for(i in this.running&&30<(r=e-this.previousTime||0)&&(100<r&&(r=100),this.previousTime=e,this.world.onTick(this.timeFactor*r/1e3)),this.updateCanvasSize(),this.graphics.clear(b.colors.background),this.graphics.save(),this.zoomer.transform(),this.drawGrid(),s=this.world.intersections.all())o=s[i],this.drawIntersection(o,.9);for(i in a=this.world.roads.all())h=a[i],this.drawRoad(h,.9);for(i in c=this.world.roads.all())h=c[i],this.drawSignals(h);for(i in l=this.world.cars.all())n=l[i],this.drawCar(n);for(i in this.toolIntersectionBuilder.draw(),this.toolRoadbuilder.draw(),this.toolHighlighter.draw(),this.graphics.save(),u=this.world.cars.all())n=u[i],this.drawCarLines(n);for(i in this.drawShortestPath([],"green"),this.drawTrackPath([],"yellow"),this.graphics.restore(),t=0,d=this.world.cars.all())(n=d[i]).alive&&t++;return this.world.activeCars=t,window.requestAnimationFrame(this.draw)}checkIfPointOrIntersection(e){var t,n,r,i;if(e instanceof y){for(n in t=new u(e.x,e.y,.1,.1),i=this.world.intersections.all())if((r=i[n]).rect.containsRect(t)){e=r;break}}else e instanceof o||(e=this.world.intersections.objects[e]);return e}getDirectionGivenIntersections(e,t){if(e=this.checkIfPointOrIntersection(e),t=this.checkIfPointOrIntersection(t),void 0!==e&&void 0!==t)return e.rect.center().x<t.rect.center().x?"right":e.rect.center().x>t.rect.center().x?"left":e.rect.center().y<t.rect.center().y?"down":e.rect.center().y>t.rect.center().y?"up":void 0;console.log("Intersection not found")}checkBeforeAndNextPath(e,t){var n=e[t+1];if(void 0===n&&(n=e[t]),e=this.checkIfPointOrIntersection(e[t]),n=n&&this.checkIfPointOrIntersection(n),e&&n)return this.getDirectionGivenIntersections(e,n);throw new Error("Something went wrong in checkBeforeAndNextPath")}getIntersectionLaneByDirection(e,t){for(var n,r,i,o,s=e.roads,a=0,c=s.length;a<c;a++)for(i=0,r=(o=s[a].lanes).length;i<r;i++)if((n=o[i]).stringDirection===t)return n}drawShortestPath(e=[],t="green"){var n,r,i,o,s,a,c,l,u,d,h,f,p,g,m,v,y,b;if(e instanceof Array&&2<=e.length)for(this.world.lengthOnlyPath=[],c=0,u=e.length;c<u;c++)s=e[c],this.world.lengthOnlyPath.push({intersection:this.checkIfPointOrIntersection(s)});if(!(this.world.lengthOnlyPath.length<2)){for(o=[],h=0,d=(m=this.world.lengthOnlyPath).length;h<d;h++)s=m[h],o.push(s.intersection);for(b=(i=this.checkIfPointOrIntersection(o[0])).rect.center(),r=this.checkIfPointOrIntersection(o[o.length-1]).rect.center(),g={startPoint:b},l=b,n=this.checkBeforeAndNextPath(o,0),this.getIntersectionLaneByDirection(i,n),s=f=1,v=o.length-2;1<=v?f<=v:v<=f;s=1<=v?++f:--f){if(void 0===(p=null!=(a=this.checkIfPointOrIntersection(o[s]))?a.rect.center():void 0))return void console.log("Intersection "+a.id+" not found");n=this.checkBeforeAndNextPath(o,s),this.getIntersectionLaneByDirection(a,n),y=new _(l,p),g[a.id]=y,l=p,s===o.length-2&&(y=new _(l,r),g.lastSegment=y,g.endPoint=r)}return this.graphics.drawPolylineFeatures(g,.7,t)}}drawTrackPath(e=[],t="blue"){var n,r,i,o,s,a,c,l,u,d,h,f,p,g,m,v,y,b;if(e instanceof Array&&2<=e.length)for(this.world.trackPath=[],c=0,u=e.length;c<u;c++)s=e[c],this.world.trackPath.push({intersection:this.checkIfPointOrIntersection(s)});if(!(this.world.trackPath.length<2)){for(o=[],h=0,d=(m=this.world.trackPath).length;h<d;h++)s=m[h],o.push(s.intersection);for(b=(i=this.checkIfPointOrIntersection(o[0])).rect.center(),r=this.checkIfPointOrIntersection(o[o.length-1]).rect.center(),g={startPoint:b},l=b,n=this.checkBeforeAndNextPath(o,0),this.getIntersectionLaneByDirection(i,n),s=f=1,v=o.length-2;1<=v?f<=v:v<=f;s=1<=v?++f:--f){if(void 0===(p=null!=(a=this.checkIfPointOrIntersection(o[s]))?a.rect.center():void 0))return void console.log("Intersection "+a.id+" not found");n=this.checkBeforeAndNextPath(o,s),this.getIntersectionLaneByDirection(a,n),y=new _(l,p),g[a.id]=y,l=p,s===o.length-2&&(y=new _(l,r),g.lastSegment=y,g.endPoint=r)}return this.graphics.drawPolylineFeatures(g,.7,t),this.graphics.restore()}}_testDrawTrackPath(){var e,t,n,r,i,o,s,a,c,l,u=null!=(u=this.world.intersections.objects.intersection1)?u.rect.center():void 0,d=null!=(s=this.world.intersections.objects.intersection9)?s.rect.center():void 0;if(void 0!==u&&void 0!==d){for(o={startPoint:u},e=this.checkBeforeAndNextPath(l=[r=u,"intersection2","intersection3","intersection4","intersection5","intersection6",d],0),this.getIntersectionLaneByDirection(this.world.intersections.objects.intersection1,e),t=n=1,a=l.length-2;1<=a?n<=a:a<=n;t=1<=a?++n:--n){if(void 0===(i=null!=(c=this.world.intersections.objects[l[t]])?c.rect.center():void 0))return void console.log("Intersection "+l[t]+" not found");e=this.checkBeforeAndNextPath(l,t),this.getIntersectionLaneByDirection(c,e),c=new _(r,i),o[l[t]]=c,r=i,t===l.length-2&&(c=new _(r,d),o.lastSegment=c,o.endPoint=d)}return this.graphics.drawPolylineFeatures(o,.3,"blue"),this.graphics.restore()}}start(){return this._running=!0,this.draw()}stop(){return this._running=!1}}return e.property("running",{get:function(){return this._running},set:function(e){return e?this.start():this.stop()}}),e}.call(this),t.exports=e},{"../geom/point":26,"../geom/rect":27,"../geom/segment":28,"../helpers":29,"../model/intersection":34,"../settings":41,"./graphics":42,"./highlighter":43,"./intersection-builder":44,"./intersection-mover":45,"./mover":46,"./road-builder":47,"./zoomer":50,"chroma-js":1,jquery:6,underscore:7}],50:[function(e,t,n){"use strict";var o,s,r,a,c,l;({min:c,max:a}=Math),e("../helpers.coffee"),o=e("../geom/point.coffee"),s=e("../geom/rect.coffee"),r=e("./tool.coffee"),l=e("../settings.coffee"),o=e("../geom/point.coffee"),e=function(){class e extends r{constructor(e,t,n){super(t,n),this.defaultZoom=e,this.ctx=t.ctx,this.canvas=this.ctx.canvas,this._scale=1,this.screenCenter=new o(l.myWidth/2,l.myHeight/2),this.center=new o(l.myWidth/2,l.myHeight/2)}toCellCoords(e){var t=l.gridSize,e=e.subtract(this.center).divide(this.scale),n=Math.floor(e.x/(this.defaultZoom*t))*t,e=Math.floor(e.y/(this.defaultZoom*t))*t;return new s(n,e,t,t)}toPointCoords(e){var e=e.subtract(this.center).divide(this.scale),t=Math.floor(e.x/this.defaultZoom),e=Math.floor(e.y/this.defaultZoom);return new o(t,e)}getBoundingBox(e,t){var n,r,i;return null==e&&(e=this.toCellCoords(new o(0,0))),null==t&&(t=this.toCellCoords(new o(l.myWidth,l.myHeight))),e.x,e.y,t.x,t.y,r=c(e.left(),t.left()),n=a(e.right(),t.right()),i=c(e.top(),t.top()),e=a(e.bottom(),t.bottom()),new s(r,i,n-r,e-i)}transform(){var e;return this.ctx.translate(this.center.x,this.center.y),e=this.scale*this.defaultZoom,this.ctx.scale(e,e)}zoom(e,t){var n;return null==e&&(e=1),n=this.center.subtract(t),this.center=t.add(n.mult(e/this._scale)),this._scale=e}moveCenter(e){return this.center=this.center.add(e)}mousewheel(e){var t=e.originalEvent.deltaY*-e.originalEvent.eventPhase;return this.zoom(this.scale*2**(.001*t),this.getPoint(e)),e.preventDefault()}}return e.property("scale",{get:function(){return this._scale},set:function(e){return this.zoom(e,this.screenCenter)}}),e}.call(this),t.exports=e},{"../geom/point.coffee":26,"../geom/rect.coffee":27,"../helpers.coffee":29,"../settings.coffee":41,"./tool.coffee":48}]},{},[24]);