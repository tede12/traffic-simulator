<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Traffic Simulator</title>


</head>
<body style="width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden">
<h1 style="text-align: center">Smart Traffic Simulator</h1>
<div>
    <h2>Choose path for MyCar:</h2>
    <label for="intersectionId">Select intersection:</label>
    <select id="intersectionId" name="intersectionId">
        <option value="">Select intersection</option>
    </select>
    <ul id="intersectionsList"></ul>

    <button type="button" onclick="client_addIntersectionToMyCarPath()">Add intersection to path</button>
</div>

<div>
        <h2>AddMyCar menu:</h2>
        <label for="roadId">Select RoadId:</label>
        <select id="roadId" name="roadId">
            <option value="">Select road</option>
        </select>

        <label for="laneId">Select lane:</label>
        <select id="laneId" name="laneId">
            <option value=0>Left</option>
            <option value=1>Right</option>
        </select>

        <button type="button" onclick="client_addMyCar()">Submit</button>
</div>


<canvas id="canvas"
        style="position: absolute; padding-bottom: 0; margin-bottom: 0; width: 100%; height: 100%;"></canvas>
<div id="gui" style="position: absolute; top: 0; right: 0;"></div>
<script src="./public/coffee-main.js"></script>
<script>


    client_intersections = world.intersections.objects
    myCarPath = []
    let selectIntersection = document.getElementById("intersectionId")
    for(let key in client_intersections){
        let option = document.createElement("option");
        option.value = key;
        option.text = key;
        selectIntersection.add(option)

    }

    function client_addIntersectionToMyCarPath(){
        let intersectionId = document.getElementById("intersectionId").value;
        let ul = document.getElementById("intersectionsList");
        let li = document.createElement("li");
        li.appendChild(document.createTextNode(intersectionId));
        ul.appendChild(li);
        myCarPath.push(intersectionId)
    }

    client_roads = world.roads.objects
    let selectRoads = document.getElementById("roadId")
    for(let key in client_roads){
        let option = document.createElement("option");
        option.value = key;
        option.text = key;
        selectRoads.add(option)
    }

    function client_addMyCar(){
        let roadId = document.getElementById("roadId").value;
        let laneId = document.getElementById("laneId").value;
        world.addMyCar(roadId, laneId, myCarPath)
    }



</script>
</body>
</html>